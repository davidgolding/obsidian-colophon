/* 
   COLOPHON STYLES
   Targeting Tiptap Editor within .colophon-workspace
*/

/* 1. WORKSPACE CONTAINER */
.colophon-workspace {
    width: 100%;
    height: 100%;
    overflow-y: auto;
    display: flex;
    justify-content: center;
    background-color: var(--background-primary);

    /* Typography Variables */
    --colophon-default-font: "Minion 3", "Minion Pro", "Charter", "Iowan Old Style", "Sitka Text", "Palatino", "Georgia", "Times New Roman", serif;
    --colophon-h1-font: var(--colophon-default-font);
    --colophon-h2-font: var(--colophon-default-font);
    --colophon-h3-font: var(--colophon-default-font);
    --colophon-title-font: var(--colophon-default-font);
    --colophon-footnote-font: var(--colophon-default-font);
    --colophon-body-font: var(--colophon-default-font);
    --colophon-supertitle-font: var(--colophon-default-font);
    --colophon-body-first-font: var(--colophon-default-font);
}

/* THEME OVERRIDES */
/* Light Theme Override */
.colophon-workspace.colophon-theme-light {
    --background-primary: #ffffff;
    --text-normal: #2e3338;
    --text-muted: #888888;
    --text-accent: #705dcf;
    /* Fallback accent if system var fails, but usually we want system accent. Let's try to keep system accent or define a neutral one. */
    --text-selection: rgba(0, 0, 0, 0.15);
    --background-modifier-border: #e0e0e0;

    /* Re-apply background because we changed the variable */
    background-color: var(--background-primary);
}

/* Dark Theme Override */
.colophon-workspace.colophon-theme-dark {
    --background-primary: #202020;
    --text-normal: #dcddde;
    --text-muted: #999999;
    --text-accent: #7d6fe3;
    --text-selection: rgba(255, 255, 255, 0.15);
    --background-modifier-border: #333333;

    /* Re-apply background because we changed the variable */
    background-color: var(--background-primary);
}


/* 2. THE EDITOR CANVAS */
.colophon-workspace .ProseMirror {
    /* Layout */
    width: 100%;
    max-width: 700px;
    /* Sweet spot for readability (~65-75 chars) */
    min-height: 100%;
    margin: 0 auto;
    padding: 4rem 2rem;
    /* Comfortable padding */

    /* Appearance */
    background-color: transparent;
    box-shadow: none;
    outline: none;

    /* Typography Base */
    color: var(--text-normal);
    font-family: var(--colophon-default-font);
    font-variant: normal;
    caret-color: var(--text-accent);
}

/* Selection Styling */
.colophon-workspace .ProseMirror ::selection {
    background-color: var(--text-selection);
}

/* 3. TYPOGRAPHY */

/* Body (Default Paragraph) */
.colophon-workspace .ProseMirror p {
    font-size: 1.2rem;
    /* Slightly larger for elegance */
    line-height: 1.6;
    text-align: left;
    margin-top: 0;
    margin-bottom: 0;
    text-indent: 1.5em;
    /* Classic paragraph indent */
    font-family: var(--colophon-body-font);
}

/* Body First (No indent, e.g. after heading) */
.colophon-workspace .ProseMirror h1+p,
.colophon-workspace .ProseMirror h2+p,
.colophon-workspace .ProseMirror h3+p {
    text-indent: 0;
}

/* Heading 1 */
.colophon-workspace .ProseMirror h1 {
    font-size: 1.8rem;
    font-style: italic;
    font-weight: normal;
    text-align: left;
    line-height: 1.3;
    margin-top: 2.5em;
    margin-bottom: 1em;
    page-break-after: avoid;
    font-family: var(--colophon-h1-font);
    color: var(--text-normal);
}

/* Heading 2 */
.colophon-workspace .ProseMirror h2 {
    font-size: 1.4rem;
    font-variant: small-caps;
    font-weight: normal;
    letter-spacing: 0.05em;
    text-align: left;
    line-height: 1.3;
    margin-top: 2em;
    margin-bottom: 1em;
    page-break-after: avoid;
    font-family: var(--colophon-h2-font);
    color: var(--text-normal);
}

/* Heading 3 */
.colophon-workspace .ProseMirror h3 {
    font-size: 1.2rem;
    font-weight: normal;
    text-align: center;
    font-style: italic;
    line-height: 1.3;
    margin-top: 2em;
    margin-bottom: 1em;
    page-break-after: avoid;
    font-family: var(--colophon-h3-font);
    color: var(--text-normal);
}

/* Title */
.colophon-workspace .ProseMirror h1.title {
    font-size: 2.5rem;
    text-align: center;
    line-height: 1.2;
    margin-top: 0;
    margin-bottom: 2em;
    font-family: var(--colophon-title-font);
}

/* Footnotes */
.colophon-workspace .ProseMirror .footnote-list {
    font-size: 0.9rem;
    line-height: 1.4;
    color: var(--text-muted);
    margin-top: 4rem;
    border-top: 1px solid var(--background-modifier-border);
    padding-top: 1rem;
}

/* Hide Tiptap's default focus outline */
.colophon-workspace .ProseMirror-focused {
    outline: none;
}