/* 
   COLOPHON STYLES
   Targeting Tiptap Editor within .colophon-workspace
*/

/* 1. WORKSPACE CONTAINER & THEME COLORS */
.colophon-workspace {
    width: 100%;
    height: 100%;
    overflow-y: auto;
    display: flex;
    justify-content: center;
    padding: 50px 0;
    background-color: var(--background-primary);
    --colophon-default-font: "Minion 3", "Minion Pro", "Charter", "Iowan Old Style", "Sitka Text", "Palatino", "Georgia", "Times New Roman", serif;
    --colophon-h1-font: var(--colophon-default-font);
    --colophon-h2-font: var(--colophon-default-font);
    --colophon-h3-font: var(--colophon-default-font);
    --colophon-title-font: var(--colophon-default-font);
    --colophon-footnote-font: var(--colophon-default-font);
    --colophon-body-font: var(--colophon-default-font);
    --colophon-supertitle-font: var(--colophon-default-font);
    --colophon-body-first-font: var(--colophon-default-font);
    /* Default fallback */
}

/* Light Theme */
.colophon-workspace.colophon-theme-light {
    background-color: #e0e0e0;
    /* Light gray desk background */
    --page-bg: #ffffff;
    --page-text: #000000;
    --page-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
}

/* Dark Theme */
.colophon-workspace.colophon-theme-dark {
    background-color: #1e1e1e;
    /* Dark desk background */
    --page-bg: #2d2d2d;
    --page-text: #e0e0e0;
    --page-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
}

/* 2. THE PAGE */
.colophon-workspace .ProseMirror {
    /* Page Simulation Variables */
    --page-height: 11in;
    --page-gap: 30px;

    /* Visual Pagination Gradient */
    background-image: repeating-linear-gradient(to bottom,
            var(--page-bg) 0,
            var(--page-bg) var(--page-height),
            transparent var(--page-height),
            transparent calc(var(--page-height) + var(--page-gap)));
    background-color: transparent;
    /* Ensure gradient is visible */

    color: var(--page-text);
    width: 8.5in;
    min-height: var(--page-height);
    /* At least one page */
    padding: 1in;
    /* 1 inch margins */

    /* Use filter for shadow to follow the gradient shape (the pages) */
    filter: drop-shadow(var(--page-shadow));
    box-shadow: none;
    /* Remove box-shadow */

    margin: 0 auto;
    outline: none;
    /* Remove focus outline */

    /* Typography Base */
    font-family: var(--colophon-default-font);
    font-variant: normal;
    caret-color: var(--page-text);
}

.colophon-workspace .ProseMirror ::selection {
    background-color: rgba(0, 0, 0, 0.15);
    /* Subtle dark selection for light mode */
}

.colophon-theme-dark .colophon-workspace .ProseMirror ::selection {
    background-color: rgba(255, 255, 255, 0.15);
    /* Subtle light selection for dark mode */
}

/* 3. TYPOGRAPHY (Based on pages-styles.yaml) */

/* Body (Default Paragraph) */
.colophon-workspace .ProseMirror p {
    font-size: 11.5pt;
    line-height: 14pt;
    text-align: left;
    margin-top: 0;
    margin-bottom: 0;
    text-indent: 0.3in;
    font-family: var(--colophon-body-font);
    /* First line indent */
}

/* Body First (No indent, e.g. after heading) */
/* Note: Tiptap doesn't inherently know "Body First" without custom nodes or classes.
   For now, we'll use a CSS trick: p immediately after h1/h2/h3 has no indent. */
.colophon-workspace .ProseMirror h1+p,
.colophon-workspace .ProseMirror h2+p,
.colophon-workspace .ProseMirror h3+p {
    text-indent: 0;
}

/* Heading 1 */
.colophon-workspace .ProseMirror h1 {
    font-size: 11.5pt;
    font-style: italic;
    font-weight: normal;
    text-align: left;
    line-height: 28pt;
    margin-top: 28pt;
    margin-bottom: 14pt;
    page-break-after: avoid;
    font-family: var(--colophon-h1-font);
    color: var(--page-text);
    /* keep-with-next */
}

/* Heading 2 */
.colophon-workspace .ProseMirror h2 {
    font-size: 11.5pt;
    font-variant: small-caps;
    font-weight: normal;
    letter-spacing: 0.02em;
    /* 2% */
    text-align: left;
    line-height: 28pt;
    margin-top: 28pt;
    margin-bottom: 14pt;
    page-break-after: avoid;
    font-family: var(--colophon-h2-font);
    color: var(--page-text);
}

/* Heading 3 */
.colophon-workspace .ProseMirror h3 {
    font-size: 11.5pt;
    font-weight: normal;
    text-align: center;
    line-height: 28pt;
    margin-top: 28pt;
    margin-bottom: 14pt;
    page-break-after: avoid;
    font-family: var(--colophon-h3-font);
    color: var(--page-text);
}

.colophon-workspace .ProseMirror h1.title {
    font-size: 18pt;
    text-align: center;
    line-height: 1;
    margin-top: 0;
    margin-bottom: 36pt;
    font-family: var(--colophon-title-font);
}

/* Footnotes */
/* Tiptap footnotes usually render as <sup> links or similar. 
   We need to style the footnote section if it exists in the doc. */
.colophon-workspace .ProseMirror .footnote-list {
    font-size: 10pt;
    line-height: 13pt;
}

/* Hide Tiptap's default focus outline */
.colophon-workspace .ProseMirror-focused {
    outline: none;
}