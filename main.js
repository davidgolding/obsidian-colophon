var me=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var Vw=me((UH,Ww)=>{var{setIcon:Ic}=require("obsidian"),Pc=class{constructor(e){this.containerEl=e,this.editor=null,this.el=null,this.paragraphOptions=[],this.listOptions=[],this.update=this.update.bind(this)}create(){this.el=this.containerEl.createDiv("colophon-toolbar");let e=this.el.createDiv("colophon-toolbar-row");this.paragraphSelect=this.createDropdown(e,"Paragraph",[]),this.listSelect=this.createDropdown(e,"List",[]);let t=e.createDiv("colophon-btn-group");this.createButton(t,null,"Bold",()=>this.toggleMark("bold"),"isActive","bold","<strong>B</strong>"),this.createButton(t,null,"Italic",()=>this.toggleMark("italic"),"isActive","italic","<em>I</em>"),this.createButton(t,null,"Underline",()=>this.toggleMark("underline"),"isActive","underline","<u>U</u>"),this.createButton(t,null,"Strikethrough",()=>this.toggleMark("strike"),"isActive","strike","<s>S</s>"),this.createButton(t,"superscript","Superscript",()=>this.toggleMark("superscript"),"isActive","superscript"),this.createButton(t,"subscript","Subscript",()=>this.toggleMark("subscript"),"isActive","subscript"),this.createButton(t,"type","Small Caps",()=>this.toggleMark("smallCaps"),"isActive","smallCaps")}createDropdown(e,t,n){let i=e.createDiv({cls:"colophon-dropdown-wrapper",style:"position: relative;"}),o=i.createEl("button",{cls:"colophon-ui-btn colophon-dropdown-trigger"}),s=o.createSpan({text:t}),a=o.createSpan();Ic(a,"chevron-down");let l=i.createDiv("colophon-dropdown-menu");return l.style.display="none",l.style.top="100%",l.style.left="0",l.style.marginTop="4px",o.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),this.closeAllDropdowns(),l.style.display="block"}),document.addEventListener("click",u=>{!o.contains(u.target)&&!l.contains(u.target)&&(l.style.display="none")}),{trigger:o,labelSpan:s,dropdown:l,options:n}}closeAllDropdowns(){this.el.querySelectorAll(".colophon-dropdown-menu").forEach(e=>e.style.display="none"),this.el.querySelectorAll(".colophon-context-menu").forEach(e=>e.style.display="none")}createButton(e,t,n,i,o,s,a){let l=e.createEl("button",{cls:"colophon-ui-btn colophon-icon-only"});if(l.setAttribute("aria-label",n),a)l.innerHTML=a;else if(t){let u=l.createSpan();Ic(u,t)}return l.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),this.editor&&(i(),this.editor.commands.focus())}),l._checkState=()=>{this.editor&&o==="isActive"&&s&&(this.editor.isActive(s)?l.addClass("colophon-active"):l.removeClass("colophon-active"))},l}createContextMenu(e,t){let n=e.createDiv("colophon-context-menu");n.style.display="none",n.style.top="100%",n.style.left="0",n.style.marginTop="4px",this.createMenuItem(n,"table","Table",()=>{}),this.createMenuItem(n,"minus","Divider",()=>{this.editor&&this.editor.chain().focus().setHorizontalRule().run()}),this.createMenuItem(n,"image","Image",()=>{}),t.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation();let o=n.style.display==="block";this.closeAllDropdowns(),o||(n.style.display="block")})}createMenuItem(e,t,n,i){let o=e.createDiv("colophon-menu-item");o.createSpan({cls:"colophon-drag-handle",text:"\u22EE\u22EE"});let s=o.createSpan({cls:"colophon-icon"});Ic(s,t),o.createSpan({cls:"colophon-label",text:n}),o.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation(),i(),e.style.display="none"})}setActiveEditor(e,t=!1){this.editor=e,this.isFootnote=t,this.update()}updateStyleOptions(e,t){this.paragraphOptions=e,this.listOptions=t,this.rebuildDropdowns()}rebuildDropdowns(){this.paragraphSelect.dropdown.empty(),this.paragraphOptions.forEach(e=>{let t=this.paragraphSelect.dropdown.createDiv("colophon-menu-item");t.createSpan({cls:"colophon-label",text:e.label}),t.addEventListener("click",()=>{this.applyStyle(e.value,e.type,e.listType),this.paragraphSelect.dropdown.style.display="none"})}),this.listSelect.dropdown.empty(),this.listOptions.forEach(e=>{let t=this.listSelect.dropdown.createDiv("colophon-menu-item");t.createSpan({cls:"colophon-label",text:e.label}),t.addEventListener("click",()=>{this.applyStyle(e.value,e.type,e.listType),this.listSelect.dropdown.style.display="none"})})}applyStyle(e,t,n){if(!this.editor)return;if(t==="list"){if(e==="none"){this.editor.chain().focus().liftListItem("listItem").run();return}n==="ordered"?this.editor.chain().focus().toggleOrderedList().updateAttributes("orderedList",{class:e}).run():this.editor.chain().focus().toggleBulletList().updateAttributes("bulletList",{class:e}).run();return}let i=!1,o=1;e&&(e.startsWith("heading-")||e==="title")&&(i=!0,e.startsWith("heading-")&&(o=parseInt(e.split("-")[1],10))),i?this.editor.chain().focus().toggleHeading({level:o}).updateAttributes("heading",{class:e}).run():this.editor.chain().focus().setParagraph().updateAttributes("paragraph",{class:e}).run()}toggleMark(e){this.editor&&(e==="bold"&&this.editor.chain().focus().toggleBold().run(),e==="italic"&&this.editor.chain().focus().toggleItalic().run(),e==="underline"&&this.editor.chain().focus().toggleUnderline().run(),e==="strike"&&this.editor.chain().focus().toggleStrike().run(),e==="superscript"&&this.editor.chain().focus().toggleSuperscript().run(),e==="subscript"&&this.editor.chain().focus().toggleSubscript().run(),e==="smallCaps"&&this.editor.chain().focus().toggleSmallCaps().run())}update(){if(!this.el)return;this.el.querySelectorAll(".colophon-ui-btn").forEach(t=>{t._checkState&&t._checkState()}),this.isFootnote?this.paragraphSelect&&(this.paragraphSelect.trigger.setAttribute("disabled","true"),this.paragraphSelect.trigger.addClass("colophon-disabled"),this.paragraphSelect.labelSpan.innerText="Footnote"):this.paragraphSelect&&(this.paragraphSelect.trigger.removeAttribute("disabled"),this.paragraphSelect.trigger.removeClass("colophon-disabled"),this.updateParagraphLabel()),this.updateListLabel()}updateParagraphLabel(){if(!this.editor||!this.paragraphSelect)return;let e="Paragraph";for(let t of this.paragraphOptions){let n=t.value;if(!n)continue;let i=!1;if(n.startsWith("heading-")||n==="title"?this.editor.isActive("heading",{class:n})&&(i=!0):this.editor.isActive("paragraph",{class:n})&&(i=!0),i){e=t.label;break}}this.paragraphSelect.labelSpan.innerText=e}updateListLabel(){if(!this.editor||!this.listSelect)return;let e="List";for(let t of this.listOptions){let n=t.value;if(n==="none")continue;let o=(t.listType||"unordered")==="ordered"?"orderedList":"bulletList";if(this.editor.isActive(o,{class:n})){e=t.label;break}}this.listSelect.labelSpan.innerText=e}destroy(){this.el&&this.el.remove()}};Ww.exports=Pc});var Kw=me((qH,$w)=>{"use strict";function st(r){this.content=r}st.prototype={constructor:st,find:function(r){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===r)return e;return-1},get:function(r){var e=this.find(r);return e==-1?void 0:this.content[e+1]},update:function(r,e,t){var n=t&&t!=r?this.remove(t):this,i=n.find(r),o=n.content.slice();return i==-1?o.push(t||r,e):(o[i+1]=e,t&&(o[i]=t)),new st(o)},remove:function(r){var e=this.find(r);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new st(t)},addToStart:function(r,e){return new st([r,e].concat(this.remove(r).content))},addToEnd:function(r,e){var t=this.remove(r).content.slice();return t.push(r,e),new st(t)},addBefore:function(r,e,t){var n=this.remove(e),i=n.content.slice(),o=n.find(r);return i.splice(o==-1?i.length:o,0,e,t),new st(i)},forEach:function(r){for(var e=0;e<this.content.length;e+=2)r(this.content[e],this.content[e+1])},prepend:function(r){return r=st.from(r),r.size?new st(r.content.concat(this.subtract(r).content)):this},append:function(r){return r=st.from(r),r.size?new st(this.subtract(r).content.concat(r.content)):this},subtract:function(r){var e=this;r=st.from(r);for(var t=0;t<r.content.length;t+=2)e=e.remove(r.content[t]);return e},toObject:function(){var r={};return this.forEach(function(e,t){r[e]=t}),r},get size(){return this.content.length>>1}};st.from=function(r){if(r instanceof st)return r;var e=[];if(r)for(var t in r)e.push(t,r[t]);return new st(e)};$w.exports=st});var jr=me(xt=>{"use strict";function PC(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=DC(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(s)throw a}}}}function DC(r,e){if(r){if(typeof r=="string")return Gw(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Gw(r,e)}}function Gw(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Ns(){return typeof Reflect<"u"&&Reflect.get?Ns=Reflect.get.bind():Ns=function(e,t,n){var i=LC(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Ns.apply(this,arguments)}function LC(r,e){for(;!Object.prototype.hasOwnProperty.call(r,e)&&(r=mn(r),r!==null););return r}function a0(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Wi(r,e)}function l0(r){var e=u0();return function(){var n=mn(r),i;if(e){var o=mn(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return FC(this,i)}}function FC(r,e){if(e&&(Ht(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BC(r)}function BC(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Fc(r){var e=typeof Map=="function"?new Map:void 0;return Fc=function(n){if(n===null||!zC(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return Rs(n,arguments,mn(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Wi(i,n)},Fc(r)}function Rs(r,e,t){return u0()?Rs=Reflect.construct.bind():Rs=function(i,o,s){var a=[null];a.push.apply(a,o);var l=Function.bind.apply(i,a),u=new l;return s&&Wi(u,s.prototype),u},Rs.apply(null,arguments)}function u0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zC(r){try{return Function.toString.call(r).indexOf("[native code]")!==-1}catch{return typeof r=="function"}}function Wi(r,e){return Wi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Wi(r,e)}function mn(r){return mn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mn(r)}function Ht(r){"@babel/helpers - typeof";return Ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ht(r)}function Xe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Jw(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,HC(n.key),n)}}function Ye(r,e,t){return e&&Jw(r.prototype,e),t&&Jw(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function HC(r){var e=jC(r,"string");return Ht(e)==="symbol"?e:String(e)}function jC(r,e){if(Ht(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(Ht(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Xw=Kw();function c0(r,e,t){for(var n=0;;n++){if(n==r.childCount||n==e.childCount)return r.childCount==e.childCount?null:t;var i=r.child(n),o=e.child(n);if(i==o){t+=i.nodeSize;continue}if(!i.sameMarkup(o))return t;if(i.isText&&i.text!=o.text){for(var s=0;i.text[s]==o.text[s];s++)t++;return t}if(i.content.size||o.content.size){var a=c0(i.content,o.content,t+1);if(a!=null)return a}t+=i.nodeSize}}function f0(r,e,t,n){for(var i=r.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:t,b:n};var s=r.child(--i),a=e.child(--o),l=s.nodeSize;if(s==a){t-=l,n-=l;continue}if(!s.sameMarkup(a))return{a:t,b:n};if(s.isText&&s.text!=a.text){for(var u=0,c=Math.min(s.text.length,a.text.length);u<c&&s.text[s.text.length-u-1]==a.text[a.text.length-u-1];)u++,t--,n--;return{a:t,b:n}}if(s.content.size||a.content.size){var f=f0(s.content,a.content,t-1,n-1);if(f)return f}t-=l,n-=l}}var Je=(function(){function r(e,t){if(Xe(this,r),this.content=e,this.size=t||0,t==null)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize}return Ye(r,[{key:"nodesBetween",value:function(t,n,i){for(var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0,a=0,l=0;l<n;a++){var u=this.content[a],c=l+u.nodeSize;if(c>t&&i(u,o+l,s||null,a)!==!1&&u.content.size){var f=l+1;u.nodesBetween(Math.max(0,t-f),Math.min(u.content.size,n-f),i,o+f)}l=c}}},{key:"descendants",value:function(t){this.nodesBetween(0,this.size,t)}},{key:"textBetween",value:function(t,n,i,o){var s="",a=!0;return this.nodesBetween(t,n,function(l,u){var c=l.isText?l.text.slice(Math.max(t,u)-u,n-u):l.isLeaf?o?typeof o=="function"?o(l):o:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&i&&(a?a=!1:s+=i),s+=c},0),s}},{key:"append",value:function(t){if(!t.size)return this;if(!this.size)return t;var n=this.lastChild,i=t.firstChild,o=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(i)&&(o[o.length-1]=n.withText(n.text+i.text),s=1);s<t.content.length;s++)o.push(t.content[s]);return new r(o,this.size+t.size)}},{key:"cut",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.size;if(t==0&&n==this.size)return this;var i=[],o=0;if(n>t)for(var s=0,a=0;a<n;s++){var l=this.content[s],u=a+l.nodeSize;u>t&&((a<t||u>n)&&(l.isText?l=l.cut(Math.max(0,t-a),Math.min(l.text.length,n-a)):l=l.cut(Math.max(0,t-a-1),Math.min(l.content.size,n-a-1))),i.push(l),o+=l.nodeSize),a=u}return new r(i,o)}},{key:"cutByIndex",value:function(t,n){return t==n?r.empty:t==0&&n==this.content.length?this:new r(this.content.slice(t,n))}},{key:"replaceChild",value:function(t,n){var i=this.content[t];if(i==n)return this;var o=this.content.slice(),s=this.size+n.nodeSize-i.nodeSize;return o[t]=n,new r(o,s)}},{key:"addToStart",value:function(t){return new r([t].concat(this.content),this.size+t.nodeSize)}},{key:"addToEnd",value:function(t){return new r(this.content.concat(t),this.size+t.nodeSize)}},{key:"eq",value:function(t){if(this.content.length!=t.content.length)return!1;for(var n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}},{key:"firstChild",get:function(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function(){return this.content.length?this.content[this.content.length-1]:null}},{key:"childCount",get:function(){return this.content.length}},{key:"child",value:function(t){var n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}},{key:"maybeChild",value:function(t){return this.content[t]||null}},{key:"forEach",value:function(t){for(var n=0,i=0;n<this.content.length;n++){var o=this.content[n];t(o,i,n),i+=o.nodeSize}}},{key:"findDiffStart",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return c0(this,t,n)}},{key:"findDiffEnd",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.size,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.size;return f0(this,t,n,i)}},{key:"findIndex",value:function(t){if(t==0)return Os(0,t);if(t==this.size)return Os(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position ".concat(t," outside of fragment (").concat(this,")"));for(var n=0,i=0;;n++){var o=this.child(n),s=i+o.nodeSize;if(s>=t)return s==t?Os(n+1,s):Os(n,i);i=s}}},{key:"toString",value:function(){return"<"+this.toStringInner()+">"}},{key:"toStringInner",value:function(){return this.content.join(", ")}},{key:"toJSON",value:function(){return this.content.length?this.content.map(function(t){return t.toJSON()}):null}}],[{key:"fromJSON",value:function(t,n){if(!n)return r.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new r(n.map(t.nodeFromJSON))}},{key:"fromArray",value:function(t){if(!t.length)return r.empty;for(var n,i=0,o=0;o<t.length;o++){var s=t[o];i+=s.nodeSize,o&&s.isText&&t[o-1].sameMarkup(s)?(n||(n=t.slice(0,o)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new r(n||t,i)}},{key:"from",value:function(t){if(!t)return r.empty;if(t instanceof r)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new r([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}]),r})();Je.empty=new Je([],0);var Dc={index:0,offset:0};function Os(r,e){return Dc.index=r,Dc.offset=e,Dc}function Is(r,e){if(r===e)return!0;if(!(r&&Ht(r)=="object")||!(e&&Ht(e)=="object"))return!1;var t=Array.isArray(r);if(Array.isArray(e)!=t)return!1;if(t){if(r.length!=e.length)return!1;for(var n=0;n<r.length;n++)if(!Is(r[n],e[n]))return!1}else{for(var i in r)if(!(i in e)||!Is(r[i],e[i]))return!1;for(var o in e)if(!(o in r))return!1}return!0}var Le=(function(){function r(e,t){Xe(this,r),this.type=e,this.attrs=t}return Ye(r,[{key:"addToSet",value:function(t){for(var n,i=!1,o=0;o<t.length;o++){var s=t[o];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,o));else{if(s.type.excludes(this.type))return t;!i&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,o)),n.push(this),i=!0),n&&n.push(s)}}return n||(n=t.slice()),i||n.push(this),n}},{key:"removeFromSet",value:function(t){for(var n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}},{key:"isInSet",value:function(t){for(var n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}},{key:"eq",value:function(t){return this==t||this.type==t.type&&Is(this.attrs,t.attrs)}},{key:"toJSON",value:function(){var t={type:this.type.name};for(var n in this.attrs){t.attrs=this.attrs;break}return t}}],[{key:"fromJSON",value:function(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");var i=t.marks[n.type];if(!i)throw new RangeError("There is no mark type ".concat(n.type," in this schema"));var o=i.create(n.attrs);return i.checkAttrs(o.attrs),o}},{key:"sameSet",value:function(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].eq(n[i]))return!1;return!0}},{key:"setFrom",value:function(t){if(!t||Array.isArray(t)&&t.length==0)return r.none;if(t instanceof r)return[t];var n=t.slice();return n.sort(function(i,o){return i.type.rank-o.type.rank}),n}}]),r})();Le.none=[];var Ps=(function(r){a0(t,r);var e=l0(t);function t(){return Xe(this,t),e.apply(this,arguments)}return Ye(t)})(Fc(Error)),Wn=(function(){function r(e,t,n){Xe(this,r),this.content=e,this.openStart=t,this.openEnd=n}return Ye(r,[{key:"size",get:function(){return this.content.size-this.openStart-this.openEnd}},{key:"insertAt",value:function(t,n){var i=d0(this.content,t+this.openStart,n);return i&&new r(i,this.openStart,this.openEnd)}},{key:"removeBetween",value:function(t,n){return new r(h0(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}},{key:"eq",value:function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}},{key:"toString",value:function(){return this.content+"("+this.openStart+","+this.openEnd+")"}},{key:"toJSON",value:function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}}],[{key:"fromJSON",value:function(t,n){if(!n)return r.empty;var i=n.openStart||0,o=n.openEnd||0;if(typeof i!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new r(Je.fromJSON(t,n.content),i,o)}},{key:"maxOpen",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=0,o=0,s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)i++;for(var a=t.lastChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.lastChild)o++;return new r(t,i,o)}}]),r})();Wn.empty=new Wn(Je.empty,0,0);function h0(r,e,t){var n=r.findIndex(e),i=n.index,o=n.offset,s=r.maybeChild(i),a=r.findIndex(t),l=a.index,u=a.offset;if(o==e||s.isText){if(u!=t&&!r.child(l).isText)throw new RangeError("Removing non-flat range");return r.cut(0,e).append(r.cut(t))}if(i!=l)throw new RangeError("Removing non-flat range");return r.replaceChild(i,s.copy(h0(s.content,e-o-1,t-o-1)))}function d0(r,e,t,n){var i=r.findIndex(e),o=i.index,s=i.offset,a=r.maybeChild(o);if(s==e||a.isText)return n&&!n.canReplace(o,o,t)?null:r.cut(0,e).append(t).append(r.cut(e));var l=d0(a.content,e-s-1,t,a);return l&&r.replaceChild(o,a.copy(l))}function UC(r,e,t){if(t.openStart>r.depth)throw new Ps("Inserted content deeper than insertion position");if(r.depth-t.openStart!=e.depth-t.openEnd)throw new Ps("Inconsistent open depths");return p0(r,e,t,0)}function p0(r,e,t,n){var i=r.index(n),o=r.node(n);if(i==e.index(n)&&n<r.depth-t.openStart){var s=p0(r,e,t,n+1);return o.copy(o.content.replaceChild(i,s))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&r.depth==n&&e.depth==n){var a=r.parent,l=a.content;return dn(a,l.cut(0,r.parentOffset).append(t.content).append(l.cut(e.parentOffset)))}else{var u=qC(t,r),c=u.start,f=u.end;return dn(o,g0(r,c,f,e,n))}else return dn(o,Ds(r,e,n))}function m0(r,e){if(!e.type.compatibleContent(r.type))throw new Ps("Cannot join "+e.type.name+" onto "+r.type.name)}function Bc(r,e,t){var n=r.node(t);return m0(n,e.node(t)),n}function hn(r,e){var t=e.length-1;t>=0&&r.isText&&r.sameMarkup(e[t])?e[t]=r.withText(e[t].text+r.text):e.push(r)}function Ui(r,e,t,n){var i=(e||r).node(t),o=0,s=e?e.index(t):i.childCount;r&&(o=r.index(t),r.depth>t?o++:r.textOffset&&(hn(r.nodeAfter,n),o++));for(var a=o;a<s;a++)hn(i.child(a),n);e&&e.depth==t&&e.textOffset&&hn(e.nodeBefore,n)}function dn(r,e){return r.type.checkContent(e),r.copy(e)}function g0(r,e,t,n,i){var o=r.depth>i&&Bc(r,e,i+1),s=n.depth>i&&Bc(t,n,i+1),a=[];return Ui(null,r,i,a),o&&s&&e.index(i)==t.index(i)?(m0(o,s),hn(dn(o,g0(r,e,t,n,i+1)),a)):(o&&hn(dn(o,Ds(r,e,i+1)),a),Ui(e,t,i,a),s&&hn(dn(s,Ds(t,n,i+1)),a)),Ui(n,null,i,a),new Je(a)}function Ds(r,e,t){var n=[];if(Ui(null,r,t,n),r.depth>t){var i=Bc(r,e,t+1);hn(dn(i,Ds(r,e,t+1)),n)}return Ui(e,null,t,n),new Je(n)}function qC(r,e){for(var t=e.depth-r.openStart,n=e.node(t),i=n.copy(r.content),o=t-1;o>=0;o--)i=e.node(o).copy(Je.from(i));return{start:i.resolveNoCache(r.openStart+t),end:i.resolveNoCache(i.content.size-r.openEnd-t)}}var zc=(function(){function r(e,t,n){Xe(this,r),this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}return Ye(r,[{key:"resolveDepth",value:function(t){return t==null?this.depth:t<0?this.depth+t:t}},{key:"parent",get:function(){return this.node(this.depth)}},{key:"doc",get:function(){return this.node(0)}},{key:"node",value:function(t){return this.path[this.resolveDepth(t)*3]}},{key:"index",value:function(t){return this.path[this.resolveDepth(t)*3+1]}},{key:"indexAfter",value:function(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}},{key:"start",value:function(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}},{key:"end",value:function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}},{key:"before",value:function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}},{key:"after",value:function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}},{key:"textOffset",get:function(){return this.pos-this.path[this.path.length-1]}},{key:"nodeAfter",get:function(){var t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;var i=this.pos-this.path[this.path.length-1],o=t.child(n);return i?t.child(n).cut(i):o}},{key:"nodeBefore",get:function(){var t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}},{key:"posAtIndex",value:function(t,n){n=this.resolveDepth(n);for(var i=this.path[n*3],o=n==0?0:this.path[n*3-1]+1,s=0;s<t;s++)o+=i.child(s).nodeSize;return o}},{key:"marks",value:function(){var t=this.parent,n=this.index();if(t.content.size==0)return Le.none;if(this.textOffset)return t.child(n).marks;var i=t.maybeChild(n-1),o=t.maybeChild(n);if(!i){var s=i;i=o,o=s}for(var a=i.marks,l=0;l<a.length;l++)a[l].type.spec.inclusive===!1&&(!o||!a[l].isInSet(o.marks))&&(a=a[l--].removeFromSet(a));return a}},{key:"marksAcross",value:function(t){var n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;for(var i=n.marks,o=t.parent.maybeChild(t.index()),s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!o||!i[s].isInSet(o.marks))&&(i=i[s--].removeFromSet(i));return i}},{key:"sharedDepth",value:function(t){for(var n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}},{key:"blockRange",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this,n=arguments.length>1?arguments[1]:void 0;if(t.pos<this.pos)return t.blockRange(this);for(var i=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);i>=0;i--)if(t.pos<=this.end(i)&&(!n||n(this.node(i))))return new v0(this,t,i);return null}},{key:"sameParent",value:function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}},{key:"max",value:function(t){return t.pos>this.pos?t:this}},{key:"min",value:function(t){return t.pos<this.pos?t:this}},{key:"toString",value:function(){for(var t="",n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}}],[{key:"resolve",value:function(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");for(var i=[],o=0,s=n,a=t;;){var l=a.content.findIndex(s),u=l.index,c=l.offset,f=s-c;if(i.push(a,u,o+c),!f||(a=a.child(u),a.isText))break;s=f-1,o+=c+1}return new r(n,i,s)}},{key:"resolveCached",value:function(t,n){var i=Yw.get(t);if(i)for(var o=0;o<i.elts.length;o++){var s=i.elts[o];if(s.pos==n)return s}else Yw.set(t,i=new WC);var a=i.elts[i.i]=r.resolve(t,n);return i.i=(i.i+1)%VC,a}}]),r})(),WC=Ye(function r(){Xe(this,r),this.elts=[],this.i=0}),VC=12,Yw=new WeakMap,v0=(function(){function r(e,t,n){Xe(this,r),this.$from=e,this.$to=t,this.depth=n}return Ye(r,[{key:"start",get:function(){return this.$from.before(this.depth+1)}},{key:"end",get:function(){return this.$to.after(this.depth+1)}},{key:"parent",get:function(){return this.$from.node(this.depth)}},{key:"startIndex",get:function(){return this.$from.index(this.depth)}},{key:"endIndex",get:function(){return this.$to.indexAfter(this.depth)}}]),r})(),$C=Object.create(null),pn=(function(){function r(e,t,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Le.none;Xe(this,r),this.type=e,this.attrs=t,this.marks=i,this.content=n||Je.empty}return Ye(r,[{key:"children",get:function(){return this.content.content}},{key:"nodeSize",get:function(){return this.isLeaf?1:2+this.content.size}},{key:"childCount",get:function(){return this.content.childCount}},{key:"child",value:function(t){return this.content.child(t)}},{key:"maybeChild",value:function(t){return this.content.maybeChild(t)}},{key:"forEach",value:function(t){this.content.forEach(t)}},{key:"nodesBetween",value:function(t,n,i){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;this.content.nodesBetween(t,n,i,o,this)}},{key:"descendants",value:function(t){this.nodesBetween(0,this.content.size,t)}},{key:"textContent",get:function(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}},{key:"textBetween",value:function(t,n,i,o){return this.content.textBetween(t,n,i,o)}},{key:"firstChild",get:function(){return this.content.firstChild}},{key:"lastChild",get:function(){return this.content.lastChild}},{key:"eq",value:function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}},{key:"sameMarkup",value:function(t){return this.hasMarkup(t.type,t.attrs,t.marks)}},{key:"hasMarkup",value:function(t,n,i){return this.type==t&&Is(this.attrs,n||t.defaultAttrs||$C)&&Le.sameSet(this.marks,i||Le.none)}},{key:"copy",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return t==this.content?this:new r(this.type,this.attrs,t,this.marks)}},{key:"mark",value:function(t){return t==this.marks?this:new r(this.type,this.attrs,this.content,t)}},{key:"cut",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.content.size;return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}},{key:"slice",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.content.size,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t==n)return Wn.empty;var o=this.resolve(t),s=this.resolve(n),a=i?0:o.sharedDepth(n),l=o.start(a),u=o.node(a),c=u.content.cut(o.pos-l,s.pos-l);return new Wn(c,o.depth-a,s.depth-a)}},{key:"replace",value:function(t,n,i){return UC(this.resolve(t),this.resolve(n),i)}},{key:"nodeAt",value:function(t){for(var n=this;;){var i=n.content.findIndex(t),o=i.index,s=i.offset;if(n=n.maybeChild(o),!n)return null;if(s==t||n.isText)return n;t-=s+1}}},{key:"childAfter",value:function(t){var n=this.content.findIndex(t),i=n.index,o=n.offset;return{node:this.content.maybeChild(i),index:i,offset:o}}},{key:"childBefore",value:function(t){if(t==0)return{node:null,index:0,offset:0};var n=this.content.findIndex(t),i=n.index,o=n.offset;if(o<t)return{node:this.content.child(i),index:i,offset:o};var s=this.content.child(i-1);return{node:s,index:i-1,offset:o-s.nodeSize}}},{key:"resolve",value:function(t){return zc.resolveCached(this,t)}},{key:"resolveNoCache",value:function(t){return zc.resolve(this,t)}},{key:"rangeHasMark",value:function(t,n,i){var o=!1;return n>t&&this.nodesBetween(t,n,function(s){return i.isInSet(s.marks)&&(o=!0),!o}),o}},{key:"isBlock",get:function(){return this.type.isBlock}},{key:"isTextblock",get:function(){return this.type.isTextblock}},{key:"inlineContent",get:function(){return this.type.inlineContent}},{key:"isInline",get:function(){return this.type.isInline}},{key:"isText",get:function(){return this.type.isText}},{key:"isLeaf",get:function(){return this.type.isLeaf}},{key:"isAtom",get:function(){return this.type.isAtom}},{key:"toString",value:function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),y0(this.marks,t)}},{key:"contentMatchAt",value:function(t){var n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}},{key:"canReplace",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Je.empty,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:i.childCount,a=this.contentMatchAt(t).matchFragment(i,o,s),l=a&&a.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(var u=o;u<s;u++)if(!this.type.allowsMarks(i.child(u).marks))return!1;return!0}},{key:"canReplaceWith",value:function(t,n,i,o){if(o&&!this.type.allowsMarks(o))return!1;var s=this.contentMatchAt(t).matchType(i),a=s&&s.matchFragment(this.content,n);return a?a.validEnd:!1}},{key:"canAppend",value:function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}},{key:"check",value:function(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);for(var t=Le.none,n=0;n<this.marks.length;n++){var i=this.marks[n];i.type.checkAttrs(i.attrs),t=i.addToSet(t)}if(!Le.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node ".concat(this.type.name,": ").concat(this.marks.map(function(o){return o.type.name})));this.content.forEach(function(o){return o.check()})}},{key:"toJSON",value:function(){var t={type:this.type.name};for(var n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(function(i){return i.toJSON()})),t}}],[{key:"fromJSON",value:function(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");var i=void 0;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,i)}var o=Je.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,o,i);return s.type.checkAttrs(s.attrs),s}}]),r})();pn.prototype.text=void 0;var KC=(function(r){a0(t,r);var e=l0(t);function t(n,i,o,s){var a;if(Xe(this,t),a=e.call(this,n,i,null,s),!o)throw new RangeError("Empty text nodes are not allowed");return a.text=o,a}return Ye(t,[{key:"toString",value:function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):y0(this.marks,JSON.stringify(this.text))}},{key:"textContent",get:function(){return this.text}},{key:"textBetween",value:function(i,o){return this.text.slice(i,o)}},{key:"nodeSize",get:function(){return this.text.length}},{key:"mark",value:function(i){return i==this.marks?this:new t(this.type,this.attrs,this.text,i)}},{key:"withText",value:function(i){return i==this.text?this:new t(this.type,this.attrs,i,this.marks)}},{key:"cut",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.text.length;return i==0&&o==this.text.length?this:this.withText(this.text.slice(i,o))}},{key:"eq",value:function(i){return this.sameMarkup(i)&&this.text==i.text}},{key:"toJSON",value:function(){var i=Ns(mn(t.prototype),"toJSON",this).call(this);return i.text=this.text,i}}]),t})(pn);function y0(r,e){for(var t=r.length-1;t>=0;t--)e=r[t].type.name+"("+e+")";return e}var Vn=(function(){function r(e){Xe(this,r),this.validEnd=e,this.next=[],this.wrapCache=[]}return Ye(r,[{key:"matchType",value:function(t){for(var n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}},{key:"matchFragment",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.childCount,o=this,s=n;o&&s<i;s++)o=o.matchType(t.child(s).type);return o}},{key:"inlineContent",get:function(){return this.next.length!=0&&this.next[0].type.isInline}},{key:"defaultType",get:function(){for(var t=0;t<this.next.length;t++){var n=this.next[t].type;if(!(n.isText||n.hasRequiredAttrs()))return n}return null}},{key:"compatible",value:function(t){for(var n=0;n<this.next.length;n++)for(var i=0;i<t.next.length;i++)if(this.next[n].type==t.next[i].type)return!0;return!1}},{key:"fillBefore",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=[this];function s(a,l){var u=a.matchFragment(t,i);if(u&&(!n||u.validEnd))return Je.from(l.map(function(g){return g.createAndFill()}));for(var c=0;c<a.next.length;c++){var f=a.next[c],h=f.type,d=f.next;if(!(h.isText||h.hasRequiredAttrs())&&o.indexOf(d)==-1){o.push(d);var m=s(d,l.concat(h));if(m)return m}}return null}return s(this,[])}},{key:"findWrapping",value:function(t){for(var n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==t)return this.wrapCache[n+1];var i=this.computeWrapping(t);return this.wrapCache.push(t,i),i}},{key:"computeWrapping",value:function(t){for(var n=Object.create(null),i=[{match:this,type:null,via:null}];i.length;){var o=i.shift(),s=o.match;if(s.matchType(t)){for(var a=[],l=o;l.type;l=l.via)a.push(l.type);return a.reverse()}for(var u=0;u<s.next.length;u++){var c=s.next[u],f=c.type,h=c.next;!f.isLeaf&&!f.hasRequiredAttrs()&&!(f.name in n)&&(!o.type||h.validEnd)&&(i.push({match:f.contentMatch,type:f,via:o}),n[f.name]=!0)}}return null}},{key:"edgeCount",get:function(){return this.next.length}},{key:"edge",value:function(t){if(t>=this.next.length)throw new RangeError("There's no ".concat(t,"th edge in this content match"));return this.next[t]}},{key:"toString",value:function(){var t=[];function n(i){t.push(i);for(var o=0;o<i.next.length;o++)t.indexOf(i.next[o].next)==-1&&n(i.next[o].next)}return n(this),t.map(function(i,o){for(var s=o+(i.validEnd?"*":" ")+" ",a=0;a<i.next.length;a++)s+=(a?", ":"")+i.next[a].type.name+"->"+t.indexOf(i.next[a].next);return s}).join(`
`)}}],[{key:"parse",value:function(t,n){var i=new GC(t,n);if(i.next==null)return r.empty;var o=w0(i);i.next&&i.err("Unexpected trailing text");var s=tN(eN(o));return rN(s,i),s}}]),r})();Vn.empty=new Vn(!0);var GC=(function(){function r(e,t){Xe(this,r),this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}return Ye(r,[{key:"next",get:function(){return this.tokens[this.pos]}},{key:"eat",value:function(t){return this.next==t&&(this.pos++||!0)}},{key:"err",value:function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}]),r})();function w0(r){var e=[];do e.push(JC(r));while(r.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function JC(r){var e=[];do e.push(XC(r));while(r.next&&r.next!=")"&&r.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function XC(r){for(var e=QC(r);;)if(r.eat("+"))e={type:"plus",expr:e};else if(r.eat("*"))e={type:"star",expr:e};else if(r.eat("?"))e={type:"opt",expr:e};else if(r.eat("{"))e=YC(r,e);else break;return e}function Zw(r){/\D/.test(r.next)&&r.err("Expected number, got '"+r.next+"'");var e=Number(r.next);return r.pos++,e}function YC(r,e){var t=Zw(r),n=t;return r.eat(",")&&(r.next!="}"?n=Zw(r):n=-1),r.eat("}")||r.err("Unclosed braced range"),{type:"range",min:t,max:n,expr:e}}function ZC(r,e){var t=r.nodeTypes,n=t[e];if(n)return[n];var i=[];for(var o in t){var s=t[o];s.isInGroup(e)&&i.push(s)}return i.length==0&&r.err("No node type or group '"+e+"' found"),i}function QC(r){if(r.eat("(")){var e=w0(r);return r.eat(")")||r.err("Missing closing paren"),e}else if(/\W/.test(r.next))r.err("Unexpected token '"+r.next+"'");else{var t=ZC(r,r.next).map(function(n){return r.inline==null?r.inline=n.isInline:r.inline!=n.isInline&&r.err("Mixing inline and block content"),{type:"name",value:n}});return r.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function eN(r){var e=[[]];return i(o(r,0),t()),e;function t(){return e.push([])-1}function n(s,a,l){var u={term:l,to:a};return e[s].push(u),u}function i(s,a){s.forEach(function(l){return l.to=a})}function o(s,a){if(s.type=="choice")return s.exprs.reduce(function(p,S){return p.concat(o(S,a))},[]);if(s.type=="seq")for(var l=0;;l++){var u=o(s.exprs[l],a);if(l==s.exprs.length-1)return u;i(u,a=t())}else if(s.type=="star"){var c=t();return n(a,c),i(o(s.expr,c),c),[n(c)]}else if(s.type=="plus"){var f=t();return i(o(s.expr,a),f),i(o(s.expr,f),f),[n(f)]}else{if(s.type=="opt")return[n(a)].concat(o(s.expr,a));if(s.type=="range"){for(var h=a,d=0;d<s.min;d++){var m=t();i(o(s.expr,h),m),h=m}if(s.max==-1)i(o(s.expr,h),h);else for(var g=s.min;g<s.max;g++){var b=t();n(h,b),i(o(s.expr,h),b),h=b}return[n(h)]}else{if(s.type=="name")return[n(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function b0(r,e){return e-r}function Qw(r,e){var t=[];return n(e),t.sort(b0);function n(i){var o=r[i];if(o.length==1&&!o[0].term)return n(o[0].to);t.push(i);for(var s=0;s<o.length;s++){var a=o[s],l=a.term,u=a.to;!l&&t.indexOf(u)==-1&&n(u)}}}function tN(r){var e=Object.create(null);return t(Qw(r,0));function t(n){var i=[];n.forEach(function(l){r[l].forEach(function(u){var c=u.term,f=u.to;if(c){for(var h,d=0;d<i.length;d++)i[d][0]==c&&(h=i[d][1]);Qw(r,f).forEach(function(m){h||i.push([c,h=[]]),h.indexOf(m)==-1&&h.push(m)})}})});for(var o=e[n.join(",")]=new Vn(n.indexOf(r.length-1)>-1),s=0;s<i.length;s++){var a=i[s][1].sort(b0);o.next.push({type:i[s][0],next:e[a.join(",")]||t(a)})}return o}}function rN(r,e){for(var t=0,n=[r];t<n.length;t++){for(var i=n[t],o=!i.validEnd,s=[],a=0;a<i.next.length;a++){var l=i.next[a],u=l.type,c=l.next;s.push(u.name),o&&!(u.isText||u.hasRequiredAttrs())&&(o=!1),n.indexOf(c)==-1&&n.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function k0(r){var e=Object.create(null);for(var t in r){var n=r[t];if(!n.hasDefault)return null;e[t]=n.default}return e}function S0(r,e){var t=Object.create(null);for(var n in r){var i=e&&e[n];if(i===void 0){var o=r[n];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+n)}t[n]=i}return t}function x0(r,e,t,n){for(var i in e)if(!(i in r))throw new RangeError("Unsupported attribute ".concat(i," for ").concat(t," of type ").concat(i));for(var o in r){var s=r[o];s.validate&&s.validate(e[o])}}function E0(r,e){var t=Object.create(null);if(e)for(var n in e)t[n]=new iN(r,n,e[n]);return t}var Hc=(function(){function r(e,t,n){Xe(this,r),this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=E0(e,n.attrs),this.defaultAttrs=k0(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}return Ye(r,[{key:"isInline",get:function(){return!this.isBlock}},{key:"isTextblock",get:function(){return this.isBlock&&this.inlineContent}},{key:"isLeaf",get:function(){return this.contentMatch==Vn.empty}},{key:"isAtom",get:function(){return this.isLeaf||!!this.spec.atom}},{key:"isInGroup",value:function(t){return this.groups.indexOf(t)>-1}},{key:"whitespace",get:function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}},{key:"hasRequiredAttrs",value:function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}},{key:"compatibleContent",value:function(t){return this==t||this.contentMatch.compatible(t.contentMatch)}},{key:"computeAttrs",value:function(t){return!t&&this.defaultAttrs?this.defaultAttrs:S0(this.attrs,t)}},{key:"create",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new pn(this,this.computeAttrs(t),Je.from(n),Le.setFrom(i))}},{key:"createChecked",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;return n=Je.from(n),this.checkContent(n),new pn(this,this.computeAttrs(t),n,Le.setFrom(i))}},{key:"createAndFill",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;if(t=this.computeAttrs(t),n=Je.from(n),n.size){var o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}var s=this.contentMatch.matchFragment(n),a=s&&s.fillBefore(Je.empty,!0);return a?new pn(this,t,n.append(a),Le.setFrom(i)):null}},{key:"validContent",value:function(t){var n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(var i=0;i<t.childCount;i++)if(!this.allowsMarks(t.child(i).marks))return!1;return!0}},{key:"checkContent",value:function(t){if(!this.validContent(t))throw new RangeError("Invalid content for node ".concat(this.name,": ").concat(t.toString().slice(0,50)))}},{key:"checkAttrs",value:function(t){x0(this.attrs,t,"node",this.name)}},{key:"allowsMarkType",value:function(t){return this.markSet==null||this.markSet.indexOf(t)>-1}},{key:"allowsMarks",value:function(t){if(this.markSet==null)return!0;for(var n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}},{key:"allowedMarks",value:function(t){if(this.markSet==null)return t;for(var n,i=0;i<t.length;i++)this.allowsMarkType(t[i].type)?n&&n.push(t[i]):n||(n=t.slice(0,i));return n?n.length?n:Le.none:t}}],[{key:"compile",value:function(t,n){var i=Object.create(null);t.forEach(function(a,l){return i[a]=new r(a,n,l)});var o=n.spec.topNode||"doc";if(!i[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(var s in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}}]),r})();function nN(r,e,t){var n=t.split("|");return function(i){var o=i===null?"null":Ht(i);if(n.indexOf(o)<0)throw new RangeError("Expected value of type ".concat(n," for attribute ").concat(e," on type ").concat(r,", got ").concat(o))}}var iN=(function(){function r(e,t,n){Xe(this,r),this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?nN(e,t,n.validate):n.validate}return Ye(r,[{key:"isRequired",get:function(){return!this.hasDefault}}]),r})(),_0=(function(){function r(e,t,n,i){Xe(this,r),this.name=e,this.rank=t,this.schema=n,this.spec=i,this.attrs=E0(e,i.attrs),this.excluded=null;var o=k0(this.attrs);this.instance=o?new Le(this,o):null}return Ye(r,[{key:"create",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return!t&&this.instance?this.instance:new Le(this,S0(this.attrs,t))}},{key:"removeFromSet",value:function(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}},{key:"isInSet",value:function(t){for(var n=0;n<t.length;n++)if(t[n].type==this)return t[n]}},{key:"checkAttrs",value:function(t){x0(this.attrs,t,"mark",this.name)}},{key:"excludes",value:function(t){return this.excluded.indexOf(t)>-1}}],[{key:"compile",value:function(t,n){var i=Object.create(null),o=0;return t.forEach(function(s,a){return i[s]=new r(s,o++,n,a)}),i}}]),r})(),oN=(function(){function r(e){var t=this;Xe(this,r),this.linebreakReplacement=null,this.cached=Object.create(null);var n=this.spec={};for(var i in e)n[i]=e[i];n.nodes=Xw.from(e.nodes),n.marks=Xw.from(e.marks||{}),this.nodes=Hc.compile(this.spec.nodes,this),this.marks=_0.compile(this.spec.marks,this);var o=Object.create(null);for(var s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");var a=this.nodes[s],l=a.spec.content||"",u=a.spec.marks;if(a.contentMatch=o[l]||(o[l]=Vn.parse(l,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=u=="_"?null:u?e0(this,u.split(" ")):u==""||!a.inlineContent?[]:null}for(var c in this.marks){var f=this.marks[c],h=f.spec.excludes;f.excluded=h==null?[f]:h==""?[]:e0(this,h.split(" "))}this.nodeFromJSON=function(d){return pn.fromJSON(t,d)},this.markFromJSON=function(d){return Le.fromJSON(t,d)},this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}return Ye(r,[{key:"node",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if(typeof t=="string")t=this.nodeType(t);else if(t instanceof Hc){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,i,o)}},{key:"text",value:function(t,n){var i=this.nodes.text;return new KC(i,i.defaultAttrs,t,Le.setFrom(n))}},{key:"mark",value:function(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}},{key:"nodeType",value:function(t){var n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}]),r})();function e0(r,e){for(var t=[],n=0;n<e.length;n++){var i=e[n],o=r.marks[i],s=o;if(o)t.push(o);else for(var a in r.marks){var l=r.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&t.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return t}function sN(r){return r.tag!=null}function aN(r){return r.style!=null}var lN=(function(){function r(e,t){var n=this;Xe(this,r),this.schema=e,this.rules=t,this.tags=[],this.styles=[];var i=this.matchedStyles=[];t.forEach(function(o){if(sN(o))n.tags.push(o);else if(aN(o)){var s=/[^=]*/.exec(o.style)[0];i.indexOf(s)<0&&i.push(s),n.styles.push(o)}}),this.normalizeLists=!this.tags.some(function(o){if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;var s=e.nodes[o.node];return s.contentMatch.matchType(s)})}return Ye(r,[{key:"parse",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=new r0(this,n,!1);return i.addAll(t,Le.none,n.from,n.to),i.finish()}},{key:"parseSlice",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=new r0(this,n,!0);return i.addAll(t,Le.none,n.from,n.to),Wn.maxOpen(i.finish())}},{key:"matchTag",value:function(t,n,i){for(var o=i?this.tags.indexOf(i)+1:0;o<this.tags.length;o++){var s=this.tags[o];if(fN(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){var a=s.getAttrs(t);if(a===!1)continue;s.attrs=a||void 0}return s}}}},{key:"matchStyle",value:function(t,n,i,o){for(var s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){var a=this.styles[s],l=a.style;if(!(l.indexOf(t)!=0||a.context&&!i.matchesContext(a.context)||l.length>t.length&&(l.charCodeAt(t.length)!=61||l.slice(t.length+1)!=n))){if(a.getAttrs){var u=a.getAttrs(n);if(u===!1)continue;a.attrs=u||void 0}return a}}}}],[{key:"schemaRules",value:function(t){var n=[];function i(u){for(var c=u.priority==null?50:u.priority,f=0;f<n.length;f++){var h=n[f],d=h.priority==null?50:h.priority;if(d<c)break}n.splice(f,0,u)}var o=function(c){var f=t.marks[c].spec.parseDOM;f&&f.forEach(function(h){i(h=n0(h)),h.mark||h.ignore||h.clearMark||(h.mark=c)})};for(var s in t.marks)o(s);var a=function(c){var f=t.nodes[c].spec.parseDOM;f&&f.forEach(function(h){i(h=n0(h)),h.node||h.ignore||h.mark||(h.node=c)})};for(var l in t.nodes)a(l);return n}},{key:"fromSchema",value:function(t){return t.cached.domParser||(t.cached.domParser=new r(t,r.schemaRules(t)))}}]),r})(),T0={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},uN={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},A0={ol:!0,ul:!0},Vi=1,jc=2,qi=4;function t0(r,e,t){return e!=null?(e?Vi:0)|(e==="full"?jc:0):r&&r.whitespace=="pre"?Vi|jc:t&~qi}var Cs=(function(){function r(e,t,n,i,o,s){Xe(this,r),this.type=e,this.attrs=t,this.marks=n,this.solid=i,this.options=s,this.content=[],this.activeMarks=Le.none,this.match=o||(s&qi?null:e.contentMatch)}return Ye(r,[{key:"findWrapping",value:function(t){if(!this.match){if(!this.type)return[];var n=this.type.contentMatch.fillBefore(Je.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{var i=this.type.contentMatch,o;return(o=i.findWrapping(t.type))?(this.match=i,o):null}}return this.match.findWrapping(t.type)}},{key:"finish",value:function(t){if(!(this.options&Vi)){var n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){var o=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}var s=Je.from(this.content);return!t&&this.match&&(s=s.append(this.match.fillBefore(Je.empty,!0))),this.type?this.type.create(this.attrs,s,this.marks):s}},{key:"inlineContext",value:function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!T0.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}]),r})(),r0=(function(){function r(e,t,n){Xe(this,r),this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;var i=t.topNode,o,s=t0(null,t.preserveWhitespace,0)|(n?qi:0);i?o=new Cs(i.type,i.attrs,Le.none,!0,t.topMatch||i.type.contentMatch,s):n?o=new Cs(null,null,Le.none,!0,null,s):o=new Cs(e.schema.topNodeType,null,Le.none,!0,null,s),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}return Ye(r,[{key:"top",get:function(){return this.nodes[this.open]}},{key:"addDOM",value:function(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}},{key:"addTextNode",value:function(t,n){var i=t.nodeValue,o=this.top,s=o.options&jc?"full":this.localPreserveWS||(o.options&Vi)>0,a=this.parser.schema;if(s==="full"||o.inlineContext(t)||/[^ \t\r\n\u000c]/.test(i)){if(s)if(s==="full")i=i.replace(/\r\n?/g,`
`);else if(a.linebreakReplacement&&/[\r\n]/.test(i)&&this.top.findWrapping(a.linebreakReplacement.create())){for(var c=i.split(/\r?\n|\r/),f=0;f<c.length;f++)f&&this.insertNode(a.linebreakReplacement.create(),n,!0),c[f]&&this.insertNode(a.text(c[f]),n,!/\S/.test(c[f]));i=""}else i=i.replace(/\r?\n|\r/g," ");else if(i=i.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(i)&&this.open==this.nodes.length-1){var l=o.content[o.content.length-1],u=t.previousSibling;(!l||u&&u.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(i=i.slice(1))}i&&this.insertNode(a.text(i),n,!/\S/.test(i)),this.findInText(t)}else this.findInside(t)}},{key:"addElement",value:function(t,n,i){var o=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);var a=t.nodeName.toLowerCase(),l;A0.hasOwnProperty(a)&&this.parser.normalizeLists&&cN(t);var u=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(l=this.parser.matchTag(t,this,i));e:if(u?u.ignore:uN.hasOwnProperty(a))this.findInside(t),this.ignoreFallback(t,n);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(t=u.skip);var c,f=this.needsBlock;if(T0.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}var h=u&&u.skip?n:this.readStyles(t,n);h&&this.addAll(t,h),c&&this.sync(s),this.needsBlock=f}else{var d=this.readStyles(t,n);d&&this.addElementByRule(t,u,d,u.consuming===!1?l:void 0)}this.localPreserveWS=o}},{key:"leafFallback",value:function(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}},{key:"ignoreFallback",value:function(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}},{key:"readStyles",value:function(t,n){var i=this,o=t.style;if(o&&o.length)for(var s=0;s<this.parser.matchedStyles.length;s++){var a=this.parser.matchedStyles[s],l=o.getPropertyValue(a);if(l){for(var u=function(d){var m=i.parser.matchStyle(a,l,i,d);if(!m)return f=d,0;if(m.ignore)return{v:null};if(m.clearMark?n=n.filter(function(g){return!m.clearMark(g)}):n=n.concat(i.parser.schema.marks[m.mark].create(m.attrs)),m.consuming===!1)d=m;else return f=d,0;f=d},c,f=void 0;c=u(f),c!==0;)if(c)return c.v}}return n}},{key:"addElementByRule",value:function(t,n,i,o){var s=this,a,l;if(n.node)if(l=this.parser.schema.nodes[n.node],l.isLeaf)this.insertNode(l.create(n.attrs),i,t.nodeName=="BR")||this.leafFallback(t,i);else{var u=this.enter(l,n.attrs||null,i,n.preserveWhitespace);u&&(a=!0,i=u)}else{var c=this.parser.schema.marks[n.mark];i=i.concat(c.create(n.attrs))}var f=this.top;if(l&&l.isLeaf)this.findInside(t);else if(o)this.addElement(t,i,o);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(function(d){return s.insertNode(d,i,!1)});else{var h=t;typeof n.contentElement=="string"?h=t.querySelector(n.contentElement):typeof n.contentElement=="function"?h=n.contentElement(t):n.contentElement&&(h=n.contentElement),this.findAround(t,h,!0),this.addAll(h,i),this.findAround(t,h,!1)}a&&this.sync(f)&&this.open--}},{key:"addAll",value:function(t,n,i,o){for(var s=i||0,a=i?t.childNodes[i]:t.firstChild,l=o==null?null:t.childNodes[o];a!=l;a=a.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(a,n);this.findAtPoint(t,s)}},{key:"findPlace",value:function(t,n,i){for(var o,s,a=this.open,l=0;a>=0;a--){var u=this.nodes[a],c=u.findWrapping(t);if(c&&(!o||o.length>c.length+l)&&(o=c,s=u,!c.length))break;if(u.solid){if(i)break;l+=2}}if(!o)return null;this.sync(s);for(var f=0;f<o.length;f++)n=this.enterInner(o[f],null,n,!1);return n}},{key:"insertNode",value:function(t,n,i){if(t.isInline&&this.needsBlock&&!this.top.type){var o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}var s=this.findPlace(t,n,i);if(s){this.closeExtra();var a=this.top;a.match&&(a.match=a.match.matchType(t.type));var l=Le.none,u=PC(s.concat(t.marks)),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;(a.type?a.type.allowsMarkType(f.type):i0(f.type,t.type))&&(l=f.addToSet(l))}}catch(h){u.e(h)}finally{u.f()}return a.content.push(t.mark(l)),!0}return!1}},{key:"enter",value:function(t,n,i,o){var s=this.findPlace(t.create(n),i,!1);return s&&(s=this.enterInner(t,n,i,!0,o)),s}},{key:"enterInner",value:function(t,n,i){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=arguments.length>4?arguments[4]:void 0;this.closeExtra();var a=this.top;a.match=a.match&&a.match.matchType(t);var l=t0(t,s,a.options);a.options&qi&&a.content.length==0&&(l|=qi);var u=Le.none;return i=i.filter(function(c){return(a.type?a.type.allowsMarkType(c.type):i0(c.type,t))?(u=c.addToSet(u),!1):!0}),this.nodes.push(new Cs(t,n,u,o,null,l)),this.open++,i}},{key:"closeExtra",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}},{key:"finish",value:function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}},{key:"sync",value:function(t){for(var n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Vi)}return!1}},{key:"currentPos",get:function(){this.closeExtra();for(var t=0,n=this.open;n>=0;n--){for(var i=this.nodes[n].content,o=i.length-1;o>=0;o--)t+=i[o].nodeSize;n&&t++}return t}},{key:"findAtPoint",value:function(t,n){if(this.find)for(var i=0;i<this.find.length;i++)this.find[i].node==t&&this.find[i].offset==n&&(this.find[i].pos=this.currentPos)}},{key:"findInside",value:function(t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}},{key:"findAround",value:function(t,n,i){if(t!=n&&this.find){for(var o=0;o<this.find.length;o++)if(this.find[o].pos==null&&t.nodeType==1&&t.contains(this.find[o].node)){var s=n.compareDocumentPosition(this.find[o].node);s&(i?2:4)&&(this.find[o].pos=this.currentPos)}}}},{key:"findInText",value:function(t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}},{key:"matchesContext",value:function(t){var n=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var i=t.split("/"),o=this.options.context,s=!this.isOpen&&(!o||o.parent.type==this.nodes[0].type),a=-(o?o.depth+1:0)+(s?0:1),l=function u(c,f){for(;c>=0;c--){var h=i[c];if(h==""){if(c==i.length-1||c==0)continue;for(;f>=a;f--)if(u(c-1,f))return!0;return!1}else{var d=f>0||f==0&&s?n.nodes[f].type:o&&f>=a?o.node(f-a).type:null;if(!d||d.name!=h&&!d.isInGroup(h))return!1;f--}}return!0};return l(i.length-1,this.open)}},{key:"textblockFromContext",value:function(){var t=this.options.context;if(t)for(var n=t.depth;n>=0;n--){var i=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(var o in this.parser.schema.nodes){var s=this.parser.schema.nodes[o];if(s.isTextblock&&s.defaultAttrs)return s}}}]),r})();function cN(r){for(var e=r.firstChild,t=null;e;e=e.nextSibling){var n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&A0.hasOwnProperty(n)&&t?(t.appendChild(e),e=t):n=="li"?t=e:n&&(t=null)}}function fN(r,e){return(r.matches||r.msMatchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector).call(r,e)}function n0(r){var e={};for(var t in r)e[t]=r[t];return e}function i0(r,e){var t=e.schema.nodes,n=function(){var a=t[o];if(!a.allowsMarkType(r))return 0;var l=[],u=function c(f){l.push(f);for(var h=0;h<f.edgeCount;h++){var d=f.edge(h),m=d.type,g=d.next;if(m==e||l.indexOf(g)<0&&c(g))return!0}};if(u(a.contentMatch))return{v:!0}},i;for(var o in t)if(i=n(),i!==0&&i)return i.v}var hN=(function(){function r(e,t){Xe(this,r),this.nodes=e,this.marks=t}return Ye(r,[{key:"serializeFragment",value:function(t){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;o||(o=Lc(i).createDocumentFragment());var s=o,a=[];return t.forEach(function(l){if(a.length||l.marks.length){for(var u=0,c=0;u<a.length&&c<l.marks.length;){var f=l.marks[c];if(!n.marks[f.type.name]){c++;continue}if(!f.eq(a[u][0])||f.type.spec.spanning===!1)break;u++,c++}for(;u<a.length;)s=a.pop()[1];for(;c<l.marks.length;){var h=l.marks[c++],d=n.serializeMark(h,l.isInline,i);d&&(a.push([h,s]),s.appendChild(d.dom),s=d.contentDOM||d.dom)}}s.appendChild(n.serializeNodeInner(l,i))}),o}},{key:"serializeNodeInner",value:function(t,n){var i=Ms(Lc(n),this.nodes[t.type.name](t),null,t.attrs),o=i.dom,s=i.contentDOM;if(s){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,s)}return o}},{key:"serializeNode",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.serializeNodeInner(t,n),o=t.marks.length-1;o>=0;o--){var s=this.serializeMark(t.marks[o],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(i),i=s.dom)}return i}},{key:"serializeMark",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=this.marks[t.type.name];return o&&Ms(Lc(i),o(t,n),null,t.attrs)}}],[{key:"renderSpec",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3?arguments[3]:void 0;return Ms(t,n,i,o)}},{key:"fromSchema",value:function(t){return t.cached.domSerializer||(t.cached.domSerializer=new r(this.nodesFromSchema(t),this.marksFromSchema(t)))}},{key:"nodesFromSchema",value:function(t){var n=o0(t.nodes);return n.text||(n.text=function(i){return i.text}),n}},{key:"marksFromSchema",value:function(t){return o0(t.marks)}}]),r})();function o0(r){var e={};for(var t in r){var n=r[t].spec.toDOM;n&&(e[t]=n)}return e}function Lc(r){return r.document||window.document}var s0=new WeakMap;function dN(r){var e=s0.get(r);return e===void 0&&s0.set(r,e=pN(r)),e}function pN(r){var e=null;function t(n){if(n&&Ht(n)=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(var i=0;i<n.length;i++)t(n[i]);else for(var o in n)t(n[o])}return t(r),e}function Ms(r,e,t,n){if(typeof e=="string")return{dom:r.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;var i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(o=dN(n))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");var s=i.indexOf(" ");s>0&&(t=i.slice(0,s),i=i.slice(s+1));var a,l=t?r.createElementNS(t,i):r.createElement(i),u=e[1],c=1;if(u&&Ht(u)=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(var f in u)if(u[f]!=null){var h=f.indexOf(" ");h>0?l.setAttributeNS(f.slice(0,h),f.slice(h+1),u[f]):f=="style"&&l.style?l.style.cssText=u[f]:l.setAttribute(f,u[f])}}for(var d=c;d<e.length;d++){var m=e[d];if(m===0){if(d<e.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{var g=Ms(r,m,t,n),b=g.dom,p=g.contentDOM;if(l.appendChild(b),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}xt.ContentMatch=Vn;xt.DOMParser=lN;xt.DOMSerializer=hN;xt.Fragment=Je;xt.Mark=Le;xt.MarkType=_0;xt.Node=pn;xt.NodeRange=v0;xt.NodeType=Hc;xt.ReplaceError=Ps;xt.ResolvedPos=zc;xt.Schema=oN;xt.Slice=Wn});var qr=me(Ne=>{"use strict";function Vc(r){var e=typeof Map=="function"?new Map:void 0;return Vc=function(n){if(n===null||!mN(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return Ls(n,arguments,Ji(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Gi(i,n)},Vc(r)}function Ls(r,e,t){return R0()?Ls=Reflect.construct.bind():Ls=function(i,o,s){var a=[null];a.push.apply(a,o);var l=Function.bind.apply(i,a),u=new l;return s&&Gi(u,s.prototype),u},Ls.apply(null,arguments)}function mN(r){try{return Function.toString.call(r).indexOf("[native code]")!==-1}catch{return typeof r=="function"}}function Ar(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Gi(r,e)}function Gi(r,e){return Gi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Gi(r,e)}function Or(r){var e=R0();return function(){var n=Ji(r),i;if(e){var o=Ji(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return gN(this,i)}}function gN(r,e){if(e&&($n(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vN(r)}function vN(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function R0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ji(r){return Ji=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ji(r)}function $n(r){"@babel/helpers - typeof";return $n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$n(r)}function lt(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function O0(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,yN(n.key),n)}}function ut(r,e,t){return e&&O0(r.prototype,e),t&&O0(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function yN(r){var e=wN(r,"string");return $n(e)==="symbol"?e:String(e)}function wN(r,e){if($n(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if($n(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var ge=jr(),M0=65535,I0=Math.pow(2,16);function bN(r,e){return r+e*I0}function C0(r){return r&M0}function kN(r){return(r-(r&M0))/I0}var P0=1,D0=2,Fs=4,L0=8,Bs=(function(){function r(e,t,n){lt(this,r),this.pos=e,this.delInfo=t,this.recover=n}return ut(r,[{key:"deleted",get:function(){return(this.delInfo&L0)>0}},{key:"deletedBefore",get:function(){return(this.delInfo&(P0|Fs))>0}},{key:"deletedAfter",get:function(){return(this.delInfo&(D0|Fs))>0}},{key:"deletedAcross",get:function(){return(this.delInfo&Fs)>0}}]),r})(),Ur=(function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(lt(this,r),this.ranges=e,this.inverted=t,!e.length&&r.empty)return r.empty}return ut(r,[{key:"recover",value:function(t){var n=0,i=C0(t);if(!this.inverted)for(var o=0;o<i;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[i*3]+n+kN(t)}},{key:"mapResult",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._map(t,n,!1)}},{key:"map",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._map(t,n,!0)}},{key:"_map",value:function(t,n,i){for(var o=0,s=this.inverted?2:1,a=this.inverted?1:2,l=0;l<this.ranges.length;l+=3){var u=this.ranges[l]-(this.inverted?o:0);if(u>t)break;var c=this.ranges[l+s],f=this.ranges[l+a],h=u+c;if(t<=h){var d=c?t==u?-1:t==h?1:n:n,m=u+o+(d<0?0:f);if(i)return m;var g=t==(n<0?u:h)?null:bN(l/3,t-u),b=t==u?D0:t==h?P0:Fs;return(n<0?t!=u:t!=h)&&(b|=L0),new Bs(m,b,g)}o+=f-c}return i?t+o:new Bs(t+o,0,null)}},{key:"touches",value:function(t,n){for(var i=0,o=C0(n),s=this.inverted?2:1,a=this.inverted?1:2,l=0;l<this.ranges.length;l+=3){var u=this.ranges[l]-(this.inverted?i:0);if(u>t)break;var c=this.ranges[l+s],f=u+c;if(t<=f&&l==o*3)return!0;i+=this.ranges[l+a]-c}return!1}},{key:"forEach",value:function(t){for(var n=this.inverted?2:1,i=this.inverted?1:2,o=0,s=0;o<this.ranges.length;o+=3){var a=this.ranges[o],l=a-(this.inverted?s:0),u=a+(this.inverted?0:s),c=this.ranges[o+n],f=this.ranges[o+i];t(l,l+c,u,u+f),s+=f-c}}},{key:"invert",value:function(){return new r(this.ranges,!this.inverted)}},{key:"toString",value:function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}}],[{key:"offset",value:function(t){return t==0?r.empty:new r(t<0?[0,-t,0]:[0,0,t])}}]),r})();Ur.empty=new Ur([]);var F0=(function(){function r(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e?e.length:0;lt(this,r),this.mirror=t,this.from=n,this.to=i,this._maps=e||[],this.ownData=!(e||t)}return ut(r,[{key:"maps",get:function(){return this._maps}},{key:"slice",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.maps.length;return new r(this._maps,this.mirror,t,n)}},{key:"appendMap",value:function(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}},{key:"appendMapping",value:function(t){for(var n=0,i=this._maps.length;n<t._maps.length;n++){var o=t.getMirror(n);this.appendMap(t._maps[n],o!=null&&o<n?i+o:void 0)}}},{key:"getMirror",value:function(t){if(this.mirror){for(var n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}},{key:"setMirror",value:function(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}},{key:"appendMappingInverted",value:function(t){for(var n=t.maps.length-1,i=this._maps.length+t._maps.length;n>=0;n--){var o=t.getMirror(n);this.appendMap(t._maps[n].invert(),o!=null&&o>n?i-o-1:void 0)}}},{key:"invert",value:function(){var t=new r;return t.appendMappingInverted(this),t}},{key:"map",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(this.mirror)return this._map(t,n,!0);for(var i=this.from;i<this.to;i++)t=this._maps[i].map(t,n);return t}},{key:"mapResult",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this._map(t,n,!1)}},{key:"_map",value:function(t,n,i){for(var o=0,s=this.from;s<this.to;s++){var a=this._maps[s],l=a.mapResult(t,n);if(l.recover!=null){var u=this.getMirror(s);if(u!=null&&u>s&&u<this.to){s=u,t=this._maps[u].recover(l.recover);continue}}o|=l.delInfo,t=l.pos}return i?t:new Bs(t,o,null)}}]),r})(),Uc=Object.create(null),tt=(function(){function r(){lt(this,r)}return ut(r,[{key:"getMap",value:function(){return Ur.empty}},{key:"merge",value:function(t){return null}}],[{key:"fromJSON",value:function(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");var i=Uc[n.stepType];if(!i)throw new RangeError("No step type ".concat(n.stepType," defined"));return i.fromJSON(t,n)}},{key:"jsonID",value:function(t,n){if(t in Uc)throw new RangeError("Duplicate use of step JSON ID "+t);return Uc[t]=n,n.prototype.jsonID=t,n}}]),r})(),at=(function(){function r(e,t){lt(this,r),this.doc=e,this.failed=t}return ut(r,null,[{key:"ok",value:function(t){return new r(t,null)}},{key:"fail",value:function(t){return new r(null,t)}},{key:"fromReplace",value:function(t,n,i,o){try{return r.ok(t.replace(n,i,o))}catch(s){if(s instanceof ge.ReplaceError)return r.fail(s.message);throw s}}}]),r})();function Kc(r,e,t){for(var n=[],i=0;i<r.childCount;i++){var o=r.child(i);o.content.size&&(o=o.copy(Kc(o.content,e,o))),o.isInline&&(o=e(o,t,i)),n.push(o)}return ge.Fragment.fromArray(n)}var zs=(function(r){Ar(t,r);var e=Or(t);function t(n,i,o){var s;return lt(this,t),s=e.call(this),s.from=n,s.to=i,s.mark=o,s}return ut(t,[{key:"apply",value:function(i){var o=this,s=i.slice(this.from,this.to),a=i.resolve(this.from),l=a.node(a.sharedDepth(this.to)),u=new ge.Slice(Kc(s.content,function(c,f){return!c.isAtom||!f.type.allowsMarkType(o.mark.type)?c:c.mark(o.mark.addToSet(c.marks))},l),s.openStart,s.openEnd);return at.fromReplace(i,this.from,this.to,u)}},{key:"invert",value:function(){return new Kn(this.from,this.to,this.mark)}},{key:"map",value:function(i){var o=i.mapResult(this.from,1),s=i.mapResult(this.to,-1);return o.deleted&&s.deleted||o.pos>=s.pos?null:new t(o.pos,s.pos,this.mark)}},{key:"merge",value:function(i){return i instanceof t&&i.mark.eq(this.mark)&&this.from<=i.to&&this.to>=i.from?new t(Math.min(this.from,i.from),Math.max(this.to,i.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(i,o){if(typeof o.from!="number"||typeof o.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(o.from,o.to,i.markFromJSON(o.mark))}}]),t})(tt);tt.jsonID("addMark",zs);var Kn=(function(r){Ar(t,r);var e=Or(t);function t(n,i,o){var s;return lt(this,t),s=e.call(this),s.from=n,s.to=i,s.mark=o,s}return ut(t,[{key:"apply",value:function(i){var o=this,s=i.slice(this.from,this.to),a=new ge.Slice(Kc(s.content,function(l){return l.mark(o.mark.removeFromSet(l.marks))},i),s.openStart,s.openEnd);return at.fromReplace(i,this.from,this.to,a)}},{key:"invert",value:function(){return new zs(this.from,this.to,this.mark)}},{key:"map",value:function(i){var o=i.mapResult(this.from,1),s=i.mapResult(this.to,-1);return o.deleted&&s.deleted||o.pos>=s.pos?null:new t(o.pos,s.pos,this.mark)}},{key:"merge",value:function(i){return i instanceof t&&i.mark.eq(this.mark)&&this.from<=i.to&&this.to>=i.from?new t(Math.min(this.from,i.from),Math.max(this.to,i.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(i,o){if(typeof o.from!="number"||typeof o.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(o.from,o.to,i.markFromJSON(o.mark))}}]),t})(tt);tt.jsonID("removeMark",Kn);var Hs=(function(r){Ar(t,r);var e=Or(t);function t(n,i){var o;return lt(this,t),o=e.call(this),o.pos=n,o.mark=i,o}return ut(t,[{key:"apply",value:function(i){var o=i.nodeAt(this.pos);if(!o)return at.fail("No node at mark step's position");var s=o.type.create(o.attrs,null,this.mark.addToSet(o.marks));return at.fromReplace(i,this.pos,this.pos+1,new ge.Slice(ge.Fragment.from(s),0,o.isLeaf?0:1))}},{key:"invert",value:function(i){var o=i.nodeAt(this.pos);if(o){var s=this.mark.addToSet(o.marks);if(s.length==o.marks.length){for(var a=0;a<o.marks.length;a++)if(!o.marks[a].isInSet(s))return new t(this.pos,o.marks[a]);return new t(this.pos,this.mark)}}return new Xi(this.pos,this.mark)}},{key:"map",value:function(i){var o=i.mapResult(this.pos,1);return o.deletedAfter?null:new t(o.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(i,o){if(typeof o.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new t(o.pos,i.markFromJSON(o.mark))}}]),t})(tt);tt.jsonID("addNodeMark",Hs);var Xi=(function(r){Ar(t,r);var e=Or(t);function t(n,i){var o;return lt(this,t),o=e.call(this),o.pos=n,o.mark=i,o}return ut(t,[{key:"apply",value:function(i){var o=i.nodeAt(this.pos);if(!o)return at.fail("No node at mark step's position");var s=o.type.create(o.attrs,null,this.mark.removeFromSet(o.marks));return at.fromReplace(i,this.pos,this.pos+1,new ge.Slice(ge.Fragment.from(s),0,o.isLeaf?0:1))}},{key:"invert",value:function(i){var o=i.nodeAt(this.pos);return!o||!this.mark.isInSet(o.marks)?this:new Hs(this.pos,this.mark)}},{key:"map",value:function(i){var o=i.mapResult(this.pos,1);return o.deletedAfter?null:new t(o.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(i,o){if(typeof o.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new t(o.pos,i.markFromJSON(o.mark))}}]),t})(tt);tt.jsonID("removeNodeMark",Xi);var Tr=(function(r){Ar(t,r);var e=Or(t);function t(n,i,o){var s,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return lt(this,t),s=e.call(this),s.from=n,s.to=i,s.slice=o,s.structure=a,s}return ut(t,[{key:"apply",value:function(i){return this.structure&&$c(i,this.from,this.to)?at.fail("Structure replace would overwrite content"):at.fromReplace(i,this.from,this.to,this.slice)}},{key:"getMap",value:function(){return new Ur([this.from,this.to-this.from,this.slice.size])}},{key:"invert",value:function(i){return new t(this.from,this.from+this.slice.size,i.slice(this.from,this.to))}},{key:"map",value:function(i){var o=i.mapResult(this.from,1),s=i.mapResult(this.to,-1);return o.deletedAcross&&s.deletedAcross?null:new t(o.pos,Math.max(o.pos,s.pos),this.slice,this.structure)}},{key:"merge",value:function(i){if(!(i instanceof t)||i.structure||this.structure)return null;if(this.from+this.slice.size==i.from&&!this.slice.openEnd&&!i.slice.openStart){var o=this.slice.size+i.slice.size==0?ge.Slice.empty:new ge.Slice(this.slice.content.append(i.slice.content),this.slice.openStart,i.slice.openEnd);return new t(this.from,this.to+(i.to-i.from),o,this.structure)}else if(i.to==this.from&&!this.slice.openStart&&!i.slice.openEnd){var s=this.slice.size+i.slice.size==0?ge.Slice.empty:new ge.Slice(i.slice.content.append(this.slice.content),i.slice.openStart,this.slice.openEnd);return new t(i.from,this.to,s,this.structure)}else return null}},{key:"toJSON",value:function(){var i={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(i.slice=this.slice.toJSON()),this.structure&&(i.structure=!0),i}}],[{key:"fromJSON",value:function(i,o){if(typeof o.from!="number"||typeof o.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(o.from,o.to,ge.Slice.fromJSON(i,o.slice),!!o.structure)}}]),t})(tt);tt.jsonID("replace",Tr);var gn=(function(r){Ar(t,r);var e=Or(t);function t(n,i,o,s,a,l){var u,c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1;return lt(this,t),u=e.call(this),u.from=n,u.to=i,u.gapFrom=o,u.gapTo=s,u.slice=a,u.insert=l,u.structure=c,u}return ut(t,[{key:"apply",value:function(i){if(this.structure&&($c(i,this.from,this.gapFrom)||$c(i,this.gapTo,this.to)))return at.fail("Structure gap-replace would overwrite content");var o=i.slice(this.gapFrom,this.gapTo);if(o.openStart||o.openEnd)return at.fail("Gap is not a flat range");var s=this.slice.insertAt(this.insert,o.content);return s?at.fromReplace(i,this.from,this.to,s):at.fail("Content does not fit in gap")}},{key:"getMap",value:function(){return new Ur([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}},{key:"invert",value:function(i){var o=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+o,this.from+this.insert,this.from+this.insert+o,i.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}},{key:"map",value:function(i){var o=i.mapResult(this.from,1),s=i.mapResult(this.to,-1),a=this.from==this.gapFrom?o.pos:i.map(this.gapFrom,-1),l=this.to==this.gapTo?s.pos:i.map(this.gapTo,1);return o.deletedAcross&&s.deletedAcross||a<o.pos||l>s.pos?null:new t(o.pos,s.pos,a,l,this.slice,this.insert,this.structure)}},{key:"toJSON",value:function(){var i={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(i.slice=this.slice.toJSON()),this.structure&&(i.structure=!0),i}}],[{key:"fromJSON",value:function(i,o){if(typeof o.from!="number"||typeof o.to!="number"||typeof o.gapFrom!="number"||typeof o.gapTo!="number"||typeof o.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(o.from,o.to,o.gapFrom,o.gapTo,ge.Slice.fromJSON(i,o.slice),o.insert,!!o.structure)}}]),t})(tt);tt.jsonID("replaceAround",gn);function $c(r,e,t){for(var n=r.resolve(e),i=t-e,o=n.depth;i>0&&o>0&&n.indexAfter(o)==n.node(o).childCount;)o--,i--;if(i>0)for(var s=n.node(o).maybeChild(n.indexAfter(o));i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}return!1}function SN(r,e,t,n){var i=[],o=[],s,a;r.doc.nodesBetween(e,t,function(l,u,c){if(l.isInline){var f=l.marks;if(!n.isInSet(f)&&c.type.allowsMarkType(n.type)){for(var h=Math.max(u,e),d=Math.min(u+l.nodeSize,t),m=n.addToSet(f),g=0;g<f.length;g++)f[g].isInSet(m)||(s&&s.to==h&&s.mark.eq(f[g])?s.to=d:i.push(s=new Kn(h,d,f[g])));a&&a.to==h?a.to=d:o.push(a=new zs(h,d,n))}}}),i.forEach(function(l){return r.step(l)}),o.forEach(function(l){return r.step(l)})}function xN(r,e,t,n){var i=[],o=0;r.doc.nodesBetween(e,t,function(s,a){if(s.isInline){o++;var l=null;if(n instanceof ge.MarkType)for(var u=s.marks,c;c=n.isInSet(u);)(l||(l=[])).push(c),u=c.removeFromSet(u);else n?n.isInSet(s.marks)&&(l=[n]):l=s.marks;if(l&&l.length)for(var f=Math.min(a+s.nodeSize,t),h=0;h<l.length;h++){for(var d=l[h],m=void 0,g=0;g<i.length;g++){var b=i[g];b.step==o-1&&d.eq(i[g].style)&&(m=b)}m?(m.to=f,m.step=o):i.push({style:d,from:Math.max(a,e),to:f,step:o})}}}),i.forEach(function(s){return r.step(new Kn(s.from,s.to,s.style))})}function Gc(r,e,t){for(var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t.contentMatch,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=r.doc.nodeAt(e),s=[],a=e+1,l=0;l<o.childCount;l++){var u=o.child(l),c=a+u.nodeSize,f=n.matchType(u.type);if(!f)s.push(new Tr(a,c,ge.Slice.empty));else{n=f;for(var h=0;h<u.marks.length;h++)t.allowsMarkType(u.marks[h].type)||r.step(new Kn(a,c,u.marks[h]));if(i&&u.isText&&t.whitespace!="pre")for(var d=void 0,m=/\r?\n|\r/g,g=void 0;d=m.exec(u.text);)g||(g=new ge.Slice(ge.Fragment.from(t.schema.text(" ",t.allowedMarks(u.marks))),0,0)),s.push(new Tr(a+d.index,a+d.index+d[0].length,g))}a=c}if(!n.validEnd){var b=n.fillBefore(ge.Fragment.empty,!0);r.replace(a,a,new ge.Slice(b,0,0))}for(var p=s.length-1;p>=0;p--)r.step(s[p])}function EN(r,e,t){return(e==0||r.canReplace(e,r.childCount))&&(t==r.childCount||r.canReplace(0,t))}function _N(r){for(var e=r.parent,t=e.content.cutByIndex(r.startIndex,r.endIndex),n=r.depth,i=0,o=0;;--n){var s=r.$from.node(n),a=r.$from.index(n)+i,l=r.$to.indexAfter(n)-o;if(n<r.depth&&s.canReplace(a,l,t))return n;if(n==0||s.type.spec.isolating||!EN(s,a,l))break;a&&(i=1),l<s.childCount&&(o=1)}return null}function TN(r,e,t){for(var n=e.$from,i=e.$to,o=e.depth,s=n.before(o+1),a=i.after(o+1),l=s,u=a,c=ge.Fragment.empty,f=0,h=o,d=!1;h>t;h--)d||n.index(h)>0?(d=!0,c=ge.Fragment.from(n.node(h).copy(c)),f++):l--;for(var m=ge.Fragment.empty,g=0,b=o,p=!1;b>t;b--)p||i.after(b+1)<i.end(b)?(p=!0,m=ge.Fragment.from(i.node(b).copy(m)),g++):u++;r.step(new gn(l,u,s,a,new ge.Slice(c.append(m),f,g),c.size-f,!0))}function AN(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r,i=ON(r,e),o=i&&CN(n,e);return o?i.map(N0).concat({type:e,attrs:t}).concat(o.map(N0)):null}function N0(r){return{type:r,attrs:null}}function ON(r,e){var t=r.parent,n=r.startIndex,i=r.endIndex,o=t.contentMatchAt(n).findWrapping(e);if(!o)return null;var s=o.length?o[0]:e;return t.canReplaceWith(n,i,s)?o:null}function CN(r,e){var t=r.parent,n=r.startIndex,i=r.endIndex,o=t.child(n),s=e.contentMatch.findWrapping(o.type);if(!s)return null;for(var a=s.length?s[s.length-1]:e,l=a.contentMatch,u=n;l&&u<i;u++)l=l.matchType(t.child(u).type);return!l||!l.validEnd?null:s}function NN(r,e,t){for(var n=ge.Fragment.empty,i=t.length-1;i>=0;i--){if(n.size){var o=t[i].type.contentMatch.matchFragment(n);if(!o||!o.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=ge.Fragment.from(t[i].type.create(t[i].attrs,n))}var s=e.start,a=e.end;r.step(new gn(s,a,s,a,new ge.Slice(n,0,0),t.length,!0))}function RN(r,e,t,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var o=r.steps.length;r.doc.nodesBetween(e,t,function(s,a){var l=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(n,l)&&MN(r.doc,r.mapping.slice(o).map(a),n)){var u=null;if(n.schema.linebreakReplacement){var c=n.whitespace=="pre",f=!!n.contentMatch.matchType(n.schema.linebreakReplacement);c&&!f?u=!1:!c&&f&&(u=!0)}u===!1&&z0(r,s,a,o),Gc(r,r.mapping.slice(o).map(a,1),n,void 0,u===null);var h=r.mapping.slice(o),d=h.map(a,1),m=h.map(a+s.nodeSize,1);return r.step(new gn(d,m,d+1,m-1,new ge.Slice(ge.Fragment.from(n.create(l,null,s.marks)),0,0),1,!0)),u===!0&&B0(r,s,a,o),!1}})}function B0(r,e,t,n){e.forEach(function(i,o){if(i.isText)for(var s,a=/\r?\n|\r/g;s=a.exec(i.text);){var l=r.mapping.slice(n).map(t+1+o+s.index);r.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}})}function z0(r,e,t,n){e.forEach(function(i,o){if(i.type==i.type.schema.linebreakReplacement){var s=r.mapping.slice(n).map(t+1+o);r.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function MN(r,e,t){var n=r.resolve(e),i=n.index();return n.parent.canReplaceWith(i,i+1,t)}function IN(r,e,t,n,i){var o=r.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);var s=t.create(n,null,i||o.marks);if(o.isLeaf)return r.replaceWith(e,e+o.nodeSize,s);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);r.step(new gn(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new ge.Slice(ge.Fragment.from(s),0,0),1,!0))}function PN(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=arguments.length>3?arguments[3]:void 0,i=r.resolve(e),o=i.depth-t,s=n&&n[n.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(var a=i.depth-1,l=t-2;a>o;a--,l--){var u=i.node(a),c=i.index(a);if(u.type.spec.isolating)return!1;var f=u.content.cutByIndex(c,u.childCount),h=n&&n[l+1];h&&(f=f.replaceChild(0,h.type.create(h.attrs)));var d=n&&n[l]||u;if(!u.canReplace(c+1,u.childCount)||!d.type.validContent(f))return!1}var m=i.indexAfter(o),g=n&&n[0];return i.node(o).canReplaceWith(m,m,g?g.type:i.node(o+1).type)}function DN(r,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=arguments.length>3?arguments[3]:void 0,i=r.doc.resolve(e),o=ge.Fragment.empty,s=ge.Fragment.empty,a=i.depth,l=i.depth-t,u=t-1;a>l;a--,u--){o=ge.Fragment.from(i.node(a).copy(o));var c=n&&n[u];s=ge.Fragment.from(c?c.type.create(c.attrs,s):i.node(a).copy(s))}r.step(new Tr(e,e,new ge.Slice(o.append(s),t,t),!0))}function LN(r,e){var t=r.resolve(e),n=t.index();return H0(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(n,n+1)}function FN(r,e){e.content.size||r.type.compatibleContent(e.type);for(var t=r.contentMatchAt(r.childCount),n=r.type.schema.linebreakReplacement,i=0;i<e.childCount;i++){var o=e.child(i),s=o.type==n?r.type.schema.nodes.text:o.type;if(t=t.matchType(s),!t||!r.type.allowsMarks(o.marks))return!1}return t.validEnd}function H0(r,e){return!!(r&&e&&!r.isLeaf&&FN(r,e))}function BN(r,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,n=r.resolve(e),i=n.depth;;i--){var o=void 0,s=void 0,a=n.index(i);if(i==n.depth?(o=n.nodeBefore,s=n.nodeAfter):t>0?(o=n.node(i+1),a++,s=n.node(i).maybeChild(a)):(o=n.node(i).maybeChild(a-1),s=n.node(i+1)),o&&!o.isTextblock&&H0(o,s)&&n.node(i).canReplace(a,a+1))return e;if(i==0)break;e=t<0?n.before(i):n.after(i)}}function zN(r,e,t){var n=null,i=r.doc.type.schema.linebreakReplacement,o=r.doc.resolve(e-t),s=o.node().type;if(i&&s.inlineContent){var a=s.whitespace=="pre",l=!!s.contentMatch.matchType(i);a&&!l?n=!1:!a&&l&&(n=!0)}var u=r.steps.length;if(n===!1){var c=r.doc.resolve(e+t);z0(r,c.node(),c.before(),u)}s.inlineContent&&Gc(r,e+t-1,s,o.node().contentMatchAt(o.index()),n==null);var f=r.mapping.slice(u),h=f.map(e-t);if(r.step(new Tr(h,f.map(e+t,-1),ge.Slice.empty,!0)),n===!0){var d=r.doc.resolve(h);B0(r,d.node(),d.before(),r.steps.length)}return r}function j0(r,e,t){var n=r.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),t))return e;if(n.parentOffset==0)for(var i=n.depth-1;i>=0;i--){var o=n.index(i);if(n.node(i).canReplaceWith(o,o,t))return n.before(i+1);if(o>0)return null}if(n.parentOffset==n.parent.content.size)for(var s=n.depth-1;s>=0;s--){var a=n.indexAfter(s);if(n.node(s).canReplaceWith(a,a,t))return n.after(s+1);if(a<n.node(s).childCount)return null}return null}function HN(r,e,t){var n=r.resolve(e);if(!t.content.size)return e;for(var i=t.content,o=0;o<t.openStart;o++)i=i.firstChild.content;for(var s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(var a=n.depth;a>=0;a--){var l=a==n.depth?0:n.pos<=(n.start(a+1)+n.end(a+1))/2?-1:1,u=n.index(a)+(l>0?1:0),c=n.node(a),f=!1;if(s==1)f=c.canReplace(u,u,i);else{var h=c.contentMatchAt(u).findWrapping(i.firstChild.type);f=h&&c.canReplaceWith(u,u,h[0])}if(f)return l==0?n.pos:l<0?n.before(a+1):n.after(a+1)}return null}function U0(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:ge.Slice.empty;if(e==t&&!n.size)return null;var i=r.resolve(e),o=r.resolve(t);return q0(i,o,n)?new Tr(e,t,n):new jN(i,o,n).fit()}function q0(r,e,t){return!t.openStart&&!t.openEnd&&r.start()==e.start()&&r.parent.canReplace(r.index(),e.index(),t.content)}var jN=(function(){function r(e,t,n){lt(this,r),this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=ge.Fragment.empty;for(var i=0;i<=e.depth;i++){var o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(var s=e.depth;s>0;s--)this.placed=ge.Fragment.from(e.node(s).copy(this.placed))}return ut(r,[{key:"depth",get:function(){return this.frontier.length-1}},{key:"fit",value:function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var n=this.mustMoveInline(),i=this.placed.size-this.depth-this.$from.depth,o=this.$from,s=this.close(n<0?this.$to:o.doc.resolve(n));if(!s)return null;for(var a=this.placed,l=o.depth,u=s.depth;l&&u&&a.childCount==1;)a=a.firstChild.content,l--,u--;var c=new ge.Slice(a,l,u);return n>-1?new gn(o.pos,n,this.$to.pos,this.$to.end(),c,i):c.size||o.pos!=this.$to.pos?new Tr(o.pos,s.pos,c):null}},{key:"findFittable",value:function(){for(var t=this.unplaced.openStart,n=this.unplaced.content,i=0,o=this.unplaced.openEnd;i<t;i++){var s=n.firstChild;if(n.childCount>1&&(o=0),s.type.spec.isolating&&o<=i){t=i;break}n=s.content}for(var a=1;a<=2;a++)for(var l=a==1?t:this.unplaced.openStart;l>=0;l--){var u=void 0,c=null;l?(c=qc(this.unplaced.content,l-1).firstChild,u=c.content):u=this.unplaced.content;for(var f=u.firstChild,h=this.depth;h>=0;h--){var d=this.frontier[h],m=d.type,g=d.match,b=void 0,p=null;if(a==1&&(f?g.matchType(f.type)||(p=g.fillBefore(ge.Fragment.from(f),!1)):c&&m.compatibleContent(c.type)))return{sliceDepth:l,frontierDepth:h,parent:c,inject:p};if(a==2&&f&&(b=g.findWrapping(f.type)))return{sliceDepth:l,frontierDepth:h,parent:c,wrap:b};if(c&&g.matchType(c.type))break}}}},{key:"openMore",value:function(){var t=this.unplaced,n=t.content,i=t.openStart,o=t.openEnd,s=qc(n,i);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new ge.Slice(n,i+1,Math.max(o,s.size+i>=n.size-o?i+1:0)),!0)}},{key:"dropNode",value:function(){var t=this.unplaced,n=t.content,i=t.openStart,o=t.openEnd,s=qc(n,i);if(s.childCount<=1&&i>0){var a=n.size-i<=i+s.size;this.unplaced=new ge.Slice($i(n,i-1,1),i-1,a?i-1:o)}else this.unplaced=new ge.Slice($i(n,i,1),i,o)}},{key:"placeNodes",value:function(t){for(var n=t.sliceDepth,i=t.frontierDepth,o=t.parent,s=t.inject,a=t.wrap;this.depth>i;)this.closeFrontierNode();if(a)for(var l=0;l<a.length;l++)this.openFrontierNode(a[l]);var u=this.unplaced,c=o?o.content:u.content,f=u.openStart-n,h=0,d=[],m=this.frontier[i],g=m.match,b=m.type;if(s){for(var p=0;p<s.childCount;p++)d.push(s.child(p));g=g.matchFragment(s)}for(var S=c.size+n-(u.content.size-u.openEnd);h<c.childCount;){var k=c.child(h),w=g.matchType(k.type);if(!w)break;h++,(h>1||f==0||k.content.size)&&(g=w,d.push(W0(k.mark(b.allowedMarks(k.marks)),h==1?f:0,h==c.childCount?S:-1)))}var x=h==c.childCount;x||(S=-1),this.placed=Ki(this.placed,i,ge.Fragment.from(d)),this.frontier[i].match=g,x&&S<0&&o&&o.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var M=0,I=c;M<S;M++){var F=I.lastChild;this.frontier.push({type:F.type,match:F.contentMatchAt(F.childCount)}),I=F.content}this.unplaced=x?n==0?ge.Slice.empty:new ge.Slice($i(u.content,n-1,1),n-1,S<0?u.openEnd:n-1):new ge.Slice($i(u.content,n,h),u.openStart,u.openEnd)}},{key:"mustMoveInline",value:function(){if(!this.$to.parent.isTextblock)return-1;var t=this.frontier[this.depth],n;if(!t.type.isTextblock||!Wc(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;for(var i=this.$to.depth,o=this.$to.after(i);i>1&&o==this.$to.end(--i);)++o;return o}},{key:"findCloseLevel",value:function(t){e:for(var n=Math.min(this.depth,t.depth);n>=0;n--){var i=this.frontier[n],o=i.match,s=i.type,a=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),l=Wc(t,n,s,o,a);if(l){for(var u=n-1;u>=0;u--){var c=this.frontier[u],f=c.match,h=c.type,d=Wc(t,u,h,f,!0);if(!d||d.childCount)continue e}return{depth:n,fit:l,move:a?t.doc.resolve(t.after(n+1)):t}}}}},{key:"close",value:function(t){var n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Ki(this.placed,n.depth,n.fit)),t=n.move;for(var i=n.depth+1;i<=t.depth;i++){var o=t.node(i),s=o.type.contentMatch.fillBefore(o.content,!0,t.index(i));this.openFrontierNode(o.type,o.attrs,s)}return t}},{key:"openFrontierNode",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0,o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=Ki(this.placed,this.depth,ge.Fragment.from(t.create(n,i))),this.frontier.push({type:t,match:t.contentMatch})}},{key:"closeFrontierNode",value:function(){var t=this.frontier.pop(),n=t.match.fillBefore(ge.Fragment.empty,!0);n.childCount&&(this.placed=Ki(this.placed,this.frontier.length,n))}}]),r})();function $i(r,e,t){return e==0?r.cutByIndex(t,r.childCount):r.replaceChild(0,r.firstChild.copy($i(r.firstChild.content,e-1,t)))}function Ki(r,e,t){return e==0?r.append(t):r.replaceChild(r.childCount-1,r.lastChild.copy(Ki(r.lastChild.content,e-1,t)))}function qc(r,e){for(var t=0;t<e;t++)r=r.firstChild.content;return r}function W0(r,e,t){if(e<=0)return r;var n=r.content;return e>1&&(n=n.replaceChild(0,W0(n.firstChild,e-1,n.childCount==1?t-1:0))),e>0&&(n=r.type.contentMatch.fillBefore(n).append(n),t<=0&&(n=n.append(r.type.contentMatch.matchFragment(n).fillBefore(ge.Fragment.empty,!0)))),r.copy(n)}function Wc(r,e,t,n,i){var o=r.node(e),s=i?r.indexAfter(e):r.index(e);if(s==o.childCount&&!t.compatibleContent(o.type))return null;var a=n.fillBefore(o.content,!0,s);return a&&!UN(t,o.content,s)?a:null}function UN(r,e,t){for(var n=t;n<e.childCount;n++)if(!r.allowsMarks(e.child(n).marks))return!0;return!1}function qN(r){return r.spec.defining||r.spec.definingForContent}function WN(r,e,t,n){if(!n.size)return r.deleteRange(e,t);var i=r.doc.resolve(e),o=r.doc.resolve(t);if(q0(i,o,n))return r.step(new Tr(e,t,n));var s=$0(i,o);s[s.length-1]==0&&s.pop();var a=-(i.depth+1);s.unshift(a);for(var l=i.depth,u=i.pos-1;l>0;l--,u--){var c=i.node(l).type.spec;if(c.defining||c.definingAsContext||c.isolating)break;s.indexOf(l)>-1?a=l:i.before(l)==u&&s.splice(1,0,-l)}for(var f=s.indexOf(a),h=[],d=n.openStart,m=n.content,g=0;;g++){var b=m.firstChild;if(h.push(b),g==n.openStart)break;m=b.content}for(var p=d-1;p>=0;p--){var S=h[p],k=qN(S.type);if(k&&!S.sameMarkup(i.node(Math.abs(a)-1)))d=p;else if(k||!S.type.isTextblock)break}for(var w=n.openStart;w>=0;w--){var x=(w+d+1)%(n.openStart+1),M=h[x];if(M)for(var I=0;I<s.length;I++){var F=s[(I+f)%s.length],N=!0;F<0&&(N=!1,F=-F);var K=i.node(F-1),ae=i.index(F-1);if(K.canReplaceWith(ae,ae,M.type,M.marks))return r.replace(i.before(F),N?o.after(F):t,new ge.Slice(V0(n.content,0,n.openStart,x),x,n.openEnd))}}for(var R=r.steps.length,H=s.length-1;H>=0&&(r.replace(e,t,n),!(r.steps.length>R));H--){var T=s[H];T<0||(e=i.before(T),t=o.after(T))}}function V0(r,e,t,n,i){if(e<t){var o=r.firstChild;r=r.replaceChild(0,o.copy(V0(o.content,e+1,t,n,o)))}if(e>n){var s=i.contentMatchAt(0),a=s.fillBefore(r).append(r);r=a.append(s.matchFragment(a).fillBefore(ge.Fragment.empty,!0))}return r}function VN(r,e,t,n){if(!n.isInline&&e==t&&r.doc.resolve(e).parent.content.size){var i=j0(r.doc,e,n.type);i!=null&&(e=t=i)}r.replaceRange(e,t,new ge.Slice(ge.Fragment.from(n),0,0))}function $N(r,e,t){for(var n=r.doc.resolve(e),i=r.doc.resolve(t),o=$0(n,i),s=0;s<o.length;s++){var a=o[s],l=s==o.length-1;if(l&&a==0||n.node(a).type.contentMatch.validEnd)return r.delete(n.start(a),i.end(a));if(a>0&&(l||n.node(a-1).canReplace(n.index(a-1),i.indexAfter(a-1))))return r.delete(n.before(a),i.after(a))}for(var u=1;u<=n.depth&&u<=i.depth;u++)if(e-n.start(u)==n.depth-u&&t>n.end(u)&&i.end(u)-t!=i.depth-u&&n.start(u-1)==i.start(u-1)&&n.node(u-1).canReplace(n.index(u-1),i.index(u-1)))return r.delete(n.before(u),t);r.delete(e,t)}function $0(r,e){for(var t=[],n=Math.min(r.depth,e.depth),i=n;i>=0;i--){var o=r.start(i);if(o<r.pos-(r.depth-i)||e.end(i)>e.pos+(e.depth-i)||r.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==r.depth&&i==e.depth&&r.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&t.push(i)}return t}var Jc=(function(r){Ar(t,r);var e=Or(t);function t(n,i,o){var s;return lt(this,t),s=e.call(this),s.pos=n,s.attr=i,s.value=o,s}return ut(t,[{key:"apply",value:function(i){var o=i.nodeAt(this.pos);if(!o)return at.fail("No node at attribute step's position");var s=Object.create(null);for(var a in o.attrs)s[a]=o.attrs[a];s[this.attr]=this.value;var l=o.type.create(s,null,o.marks);return at.fromReplace(i,this.pos,this.pos+1,new ge.Slice(ge.Fragment.from(l),0,o.isLeaf?0:1))}},{key:"getMap",value:function(){return Ur.empty}},{key:"invert",value:function(i){return new t(this.pos,this.attr,i.nodeAt(this.pos).attrs[this.attr])}},{key:"map",value:function(i){var o=i.mapResult(this.pos,1);return o.deletedAfter?null:new t(o.pos,this.attr,this.value)}},{key:"toJSON",value:function(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}}],[{key:"fromJSON",value:function(i,o){if(typeof o.pos!="number"||typeof o.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new t(o.pos,o.attr,o.value)}}]),t})(tt);tt.jsonID("attr",Jc);var Xc=(function(r){Ar(t,r);var e=Or(t);function t(n,i){var o;return lt(this,t),o=e.call(this),o.attr=n,o.value=i,o}return ut(t,[{key:"apply",value:function(i){var o=Object.create(null);for(var s in i.attrs)o[s]=i.attrs[s];o[this.attr]=this.value;var a=i.type.create(o,i.content,i.marks);return at.ok(a)}},{key:"getMap",value:function(){return Ur.empty}},{key:"invert",value:function(i){return new t(this.attr,i.attrs[this.attr])}},{key:"map",value:function(i){return this}},{key:"toJSON",value:function(){return{stepType:"docAttr",attr:this.attr,value:this.value}}}],[{key:"fromJSON",value:function(i,o){if(typeof o.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new t(o.attr,o.value)}}]),t})(tt);tt.jsonID("docAttr",Xc);Ne.TransformError=(function(r){Ar(t,r);var e=Or(t);function t(){return lt(this,t),e.apply(this,arguments)}return ut(t)})(Vc(Error));Ne.TransformError=function r(e){var t=Error.call(this,e);return t.__proto__=r.prototype,t};Ne.TransformError.prototype=Object.create(Error.prototype);Ne.TransformError.prototype.constructor=Ne.TransformError;Ne.TransformError.prototype.name="TransformError";var KN=(function(){function r(e){lt(this,r),this.doc=e,this.steps=[],this.docs=[],this.mapping=new F0}return ut(r,[{key:"before",get:function(){return this.docs.length?this.docs[0]:this.doc}},{key:"step",value:function(t){var n=this.maybeStep(t);if(n.failed)throw new Ne.TransformError(n.failed);return this}},{key:"maybeStep",value:function(t){var n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}},{key:"docChanged",get:function(){return this.steps.length>0}},{key:"addStep",value:function(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}},{key:"replace",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ge.Slice.empty,o=U0(this.doc,t,n,i);return o&&this.step(o),this}},{key:"replaceWith",value:function(t,n,i){return this.replace(t,n,new ge.Slice(ge.Fragment.from(i),0,0))}},{key:"delete",value:function(t,n){return this.replace(t,n,ge.Slice.empty)}},{key:"insert",value:function(t,n){return this.replaceWith(t,t,n)}},{key:"replaceRange",value:function(t,n,i){return WN(this,t,n,i),this}},{key:"replaceRangeWith",value:function(t,n,i){return VN(this,t,n,i),this}},{key:"deleteRange",value:function(t,n){return $N(this,t,n),this}},{key:"lift",value:function(t,n){return TN(this,t,n),this}},{key:"join",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return zN(this,t,n),this}},{key:"wrap",value:function(t,n){return NN(this,t,n),this}},{key:"setBlockType",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return RN(this,t,n,i,o),this}},{key:"setNodeMarkup",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3?arguments[3]:void 0;return IN(this,t,n,i,o),this}},{key:"setNodeAttribute",value:function(t,n,i){return this.step(new Jc(t,n,i)),this}},{key:"setDocAttribute",value:function(t,n){return this.step(new Xc(t,n)),this}},{key:"addNodeMark",value:function(t,n){return this.step(new Hs(t,n)),this}},{key:"removeNodeMark",value:function(t,n){var i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at position "+t);if(n instanceof ge.Mark)n.isInSet(i.marks)&&this.step(new Xi(t,n));else{for(var o=i.marks,s,a=[];s=n.isInSet(o);)a.push(new Xi(t,s)),o=s.removeFromSet(o);for(var l=a.length-1;l>=0;l--)this.step(a[l])}return this}},{key:"split",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0;return DN(this,t,n,i),this}},{key:"addMark",value:function(t,n,i){return SN(this,t,n,i),this}},{key:"removeMark",value:function(t,n,i){return xN(this,t,n,i),this}},{key:"clearIncompatible",value:function(t,n,i){return Gc(this,t,n,i),this}}]),r})();Ne.AddMarkStep=zs;Ne.AddNodeMarkStep=Hs;Ne.AttrStep=Jc;Ne.DocAttrStep=Xc;Ne.MapResult=Bs;Ne.Mapping=F0;Ne.RemoveMarkStep=Kn;Ne.RemoveNodeMarkStep=Xi;Ne.ReplaceAroundStep=gn;Ne.ReplaceStep=Tr;Ne.Step=tt;Ne.StepMap=Ur;Ne.StepResult=at;Ne.Transform=KN;Ne.canJoin=LN;Ne.canSplit=PN;Ne.dropPoint=HN;Ne.findWrapping=AN;Ne.insertPoint=j0;Ne.joinPoint=BN;Ne.liftTarget=_N;Ne.replaceStep=U0});var jt=me(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});function GN(r){Object.keys(r).filter(e=>e!=="default"&&e!=="__esModule").forEach(e=>{js.hasOwnProperty(e)||Object.defineProperty(js,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})}var JN=qr();GN(JN)});var Cr=me(Qt=>{"use strict";function Jn(){return typeof Reflect<"u"&&Reflect.get?Jn=Reflect.get.bind():Jn=function(e,t,n){var i=XN(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Jn.apply(this,arguments)}function XN(r,e){for(;!Object.prototype.hasOwnProperty.call(r,e)&&(r=Wr(r),r!==null););return r}function qs(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&ef(r,e)}function ef(r,e){return ef=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ef(r,e)}function Ws(r){var e=QN();return function(){var n=Wr(r),i;if(e){var o=Wr(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return YN(this,i)}}function YN(r,e){if(e&&(vn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZN(r)}function ZN(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function QN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Wr(r){return Wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wr(r)}function vn(r){"@babel/helpers - typeof";return vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(r)}function Ot(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function K0(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,eR(n.key),n)}}function Ct(r,e,t){return e&&K0(r.prototype,e),t&&K0(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function eR(r){var e=tR(r,"string");return vn(e)==="symbol"?e:String(e)}function tR(r,e){if(vn(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(vn(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Ut=jr(),tf=qr(),Yc=Object.create(null),Ue=(function(){function r(e,t,n){Ot(this,r),this.$anchor=e,this.$head=t,this.ranges=n||[new eb(e.min(t),e.max(t))]}return Ct(r,[{key:"anchor",get:function(){return this.$anchor.pos}},{key:"head",get:function(){return this.$head.pos}},{key:"from",get:function(){return this.$from.pos}},{key:"to",get:function(){return this.$to.pos}},{key:"$from",get:function(){return this.ranges[0].$from}},{key:"$to",get:function(){return this.ranges[0].$to}},{key:"empty",get:function(){for(var t=this.ranges,n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}},{key:"content",value:function(){return this.$from.doc.slice(this.from,this.to,!0)}},{key:"replace",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ut.Slice.empty,i=n.content.lastChild,o=null,s=0;s<n.openEnd;s++)o=i,i=i.lastChild;for(var a=t.steps.length,l=this.ranges,u=0;u<l.length;u++){var c=l[u],f=c.$from,h=c.$to,d=t.mapping.slice(a);t.replaceRange(d.map(f.pos),d.map(h.pos),u?Ut.Slice.empty:n),u==0&&X0(t,a,(i?i.isInline:o&&o.isTextblock)?-1:1)}}},{key:"replaceWith",value:function(t,n){for(var i=t.steps.length,o=this.ranges,s=0;s<o.length;s++){var a=o[s],l=a.$from,u=a.$to,c=t.mapping.slice(i),f=c.map(l.pos),h=c.map(u.pos);s?t.deleteRange(f,h):(t.replaceRangeWith(f,h,n),X0(t,i,n.isInline?-1:1))}}},{key:"getBookmark",value:function(){return Yn.between(this.$anchor,this.$head).getBookmark()}}],[{key:"findFrom",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=t.parent.inlineContent?new Yn(t):Gn(t.node(0),t.parent,t.pos,t.index(),n,i);if(o)return o;for(var s=t.depth-1;s>=0;s--){var a=n<0?Gn(t.node(0),t.node(s),t.before(s+1),t.index(s),n,i):Gn(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,i);if(a)return a}return null}},{key:"near",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this.findFrom(t,n)||this.findFrom(t,-n)||new Xn(t.node(0))}},{key:"atStart",value:function(t){return Gn(t,t,0,0,1)||new Xn(t)}},{key:"atEnd",value:function(t){return Gn(t,t,t.content.size,t.childCount,-1)||new Xn(t)}},{key:"fromJSON",value:function(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");var i=Yc[n.type];if(!i)throw new RangeError("No selection type ".concat(n.type," defined"));return i.fromJSON(t,n)}},{key:"jsonID",value:function(t,n){if(t in Yc)throw new RangeError("Duplicate use of selection JSON ID "+t);return Yc[t]=n,n.prototype.jsonID=t,n}}]),r})();Ue.prototype.visible=!0;var eb=Ct(function r(e,t){Ot(this,r),this.$from=e,this.$to=t}),G0=!1;function J0(r){!G0&&!r.parent.inlineContent&&(G0=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+r.parent.type.name+")"))}var Yn=(function(r){qs(t,r);var e=Ws(t);function t(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n;return Ot(this,t),J0(n),J0(i),e.call(this,n,i)}return Ct(t,[{key:"$cursor",get:function(){return this.$anchor.pos==this.$head.pos?this.$head:null}},{key:"map",value:function(i,o){var s=i.resolve(o.map(this.head));if(!s.parent.inlineContent)return Ue.near(s);var a=i.resolve(o.map(this.anchor));return new t(a.parent.inlineContent?a:s,s)}},{key:"replace",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ut.Slice.empty;if(Jn(Wr(t.prototype),"replace",this).call(this,i,o),o==Ut.Slice.empty){var s=this.$from.marksAcross(this.$to);s&&i.ensureMarks(s)}}},{key:"eq",value:function(i){return i instanceof t&&i.anchor==this.anchor&&i.head==this.head}},{key:"getBookmark",value:function(){return new tb(this.anchor,this.head)}},{key:"toJSON",value:function(){return{type:"text",anchor:this.anchor,head:this.head}}}],[{key:"fromJSON",value:function(i,o){if(typeof o.anchor!="number"||typeof o.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(i.resolve(o.anchor),i.resolve(o.head))}},{key:"create",value:function(i,o){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o,a=i.resolve(o);return new this(a,s==o?a:i.resolve(s))}},{key:"between",value:function(i,o,s){var a=i.pos-o.pos;if((!s||a)&&(s=a>=0?1:-1),!o.parent.inlineContent){var l=Ue.findFrom(o,s,!0)||Ue.findFrom(o,-s,!0);if(l)o=l.$head;else return Ue.near(o,s)}return i.parent.inlineContent||(a==0?i=o:(i=(Ue.findFrom(i,-s,!0)||Ue.findFrom(i,s,!0)).$anchor,i.pos<o.pos!=a<0&&(i=o))),new t(i,o)}}]),t})(Ue);Ue.jsonID("text",Yn);var tb=(function(){function r(e,t){Ot(this,r),this.anchor=e,this.head=t}return Ct(r,[{key:"map",value:function(t){return new r(t.map(this.anchor),t.map(this.head))}},{key:"resolve",value:function(t){return Yn.between(t.resolve(this.anchor),t.resolve(this.head))}}]),r})(),yn=(function(r){qs(t,r);var e=Ws(t);function t(n){var i;Ot(this,t);var o=n.nodeAfter,s=n.node(0).resolve(n.pos+o.nodeSize);return i=e.call(this,n,s),i.node=o,i}return Ct(t,[{key:"map",value:function(i,o){var s=o.mapResult(this.anchor),a=s.deleted,l=s.pos,u=i.resolve(l);return a?Ue.near(u):new t(u)}},{key:"content",value:function(){return new Ut.Slice(Ut.Fragment.from(this.node),0,0)}},{key:"eq",value:function(i){return i instanceof t&&i.anchor==this.anchor}},{key:"toJSON",value:function(){return{type:"node",anchor:this.anchor}}},{key:"getBookmark",value:function(){return new rR(this.anchor)}}],[{key:"fromJSON",value:function(i,o){if(typeof o.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(i.resolve(o.anchor))}},{key:"create",value:function(i,o){return new t(i.resolve(o))}},{key:"isSelectable",value:function(i){return!i.isText&&i.type.spec.selectable!==!1}}]),t})(Ue);yn.prototype.visible=!1;Ue.jsonID("node",yn);var rR=(function(){function r(e){Ot(this,r),this.anchor=e}return Ct(r,[{key:"map",value:function(t){var n=t.mapResult(this.anchor),i=n.deleted,o=n.pos;return i?new tb(o,o):new r(o)}},{key:"resolve",value:function(t){var n=t.resolve(this.anchor),i=n.nodeAfter;return i&&yn.isSelectable(i)?new yn(n):Ue.near(n)}}]),r})(),Xn=(function(r){qs(t,r);var e=Ws(t);function t(n){return Ot(this,t),e.call(this,n.resolve(0),n.resolve(n.content.size))}return Ct(t,[{key:"replace",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ut.Slice.empty;if(o==Ut.Slice.empty){i.delete(0,i.doc.content.size);var s=Ue.atStart(i.doc);s.eq(i.selection)||i.setSelection(s)}else Jn(Wr(t.prototype),"replace",this).call(this,i,o)}},{key:"toJSON",value:function(){return{type:"all"}}},{key:"map",value:function(i){return new t(i)}},{key:"eq",value:function(i){return i instanceof t}},{key:"getBookmark",value:function(){return nR}}],[{key:"fromJSON",value:function(i){return new t(i)}}]),t})(Ue);Ue.jsonID("all",Xn);var nR={map:function(){return this},resolve:function(e){return new Xn(e)}};function Gn(r,e,t,n,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;if(e.inlineContent)return Yn.create(r,t);for(var s=n-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){var a=e.child(s);if(a.isAtom){if(!o&&yn.isSelectable(a))return yn.create(r,t-(i<0?a.nodeSize:0))}else{var l=Gn(r,a,t+i,i<0?a.childCount:0,i,o);if(l)return l}t+=a.nodeSize*i}return null}function X0(r,e,t){var n=r.steps.length-1;if(!(n<e)){var i=r.steps[n];if(i instanceof tf.ReplaceStep||i instanceof tf.ReplaceAroundStep){var o=r.mapping.maps[n],s;o.forEach(function(a,l,u,c){s==null&&(s=c)}),r.setSelection(Ue.near(r.doc.resolve(s),t))}}}var Y0=1,Us=2,Z0=4,rb=(function(r){qs(t,r);var e=Ws(t);function t(n){var i;return Ot(this,t),i=e.call(this,n.doc),i.curSelectionFor=0,i.updated=0,i.meta=Object.create(null),i.time=Date.now(),i.curSelection=n.selection,i.storedMarks=n.storedMarks,i}return Ct(t,[{key:"selection",get:function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}},{key:"setSelection",value:function(i){if(i.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=i,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Y0)&~Us,this.storedMarks=null,this}},{key:"selectionSet",get:function(){return(this.updated&Y0)>0}},{key:"setStoredMarks",value:function(i){return this.storedMarks=i,this.updated|=Us,this}},{key:"ensureMarks",value:function(i){return Ut.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),i)||this.setStoredMarks(i),this}},{key:"addStoredMark",value:function(i){return this.ensureMarks(i.addToSet(this.storedMarks||this.selection.$head.marks()))}},{key:"removeStoredMark",value:function(i){return this.ensureMarks(i.removeFromSet(this.storedMarks||this.selection.$head.marks()))}},{key:"storedMarksSet",get:function(){return(this.updated&Us)>0}},{key:"addStep",value:function(i,o){Jn(Wr(t.prototype),"addStep",this).call(this,i,o),this.updated=this.updated&~Us,this.storedMarks=null}},{key:"setTime",value:function(i){return this.time=i,this}},{key:"replaceSelection",value:function(i){return this.selection.replace(this,i),this}},{key:"replaceSelectionWith",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s=this.selection;return o&&(i=i.mark(this.storedMarks||(s.empty?s.$from.marks():s.$from.marksAcross(s.$to)||Ut.Mark.none))),s.replaceWith(this,i),this}},{key:"deleteSelection",value:function(){return this.selection.replace(this),this}},{key:"insertText",value:function(i,o,s){var a=this.doc.type.schema;if(o==null)return i?this.replaceSelectionWith(a.text(i),!0):this.deleteSelection();if(s==null&&(s=o),!i)return this.deleteRange(o,s);var l=this.storedMarks;if(!l){var u=this.doc.resolve(o);l=s==o?u.marks():u.marksAcross(this.doc.resolve(s))}return this.replaceRangeWith(o,s,a.text(i,l)),!this.selection.empty&&this.selection.to==o+i.length&&this.setSelection(Ue.near(this.selection.$to)),this}},{key:"setMeta",value:function(i,o){return this.meta[typeof i=="string"?i:i.key]=o,this}},{key:"getMeta",value:function(i){return this.meta[typeof i=="string"?i:i.key]}},{key:"isGeneric",get:function(){for(var i in this.meta)return!1;return!0}},{key:"scrollIntoView",value:function(){return this.updated|=Z0,this}},{key:"scrolledIntoView",get:function(){return(this.updated&Z0)>0}}]),t})(tf.Transform);function Q0(r,e){return!e||!r?r:r.bind(e)}var Yi=Ct(function r(e,t,n){Ot(this,r),this.name=e,this.init=Q0(t.init,n),this.apply=Q0(t.apply,n)}),iR=[new Yi("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new Yi("selection",{init:function(e,t){return e.selection||Ue.atStart(t.doc)},apply:function(e){return e.selection}}),new Yi("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,i){return i.selection.$cursor?e.storedMarks:null}}),new Yi("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],Zc=Ct(function r(e,t){var n=this;Ot(this,r),this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=iR.slice(),t&&t.forEach(function(i){if(n.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");n.plugins.push(i),n.pluginsByKey[i.key]=i,i.spec.state&&n.fields.push(new Yi(i.key,i.spec.state,i))})}),oR=(function(){function r(e){Ot(this,r),this.config=e}return Ct(r,[{key:"schema",get:function(){return this.config.schema}},{key:"plugins",get:function(){return this.config.plugins}},{key:"apply",value:function(t){return this.applyTransaction(t).state}},{key:"filterTransaction",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,i=0;i<this.config.plugins.length;i++)if(i!=n){var o=this.config.plugins[i];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,t,this))return!1}return!0}},{key:"applyTransaction",value:function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var n=[t],i=this.applyInner(t),o=null;;){for(var s=!1,a=0;a<this.config.plugins.length;a++){var l=this.config.plugins[a];if(l.spec.appendTransaction){var u=o?o[a].n:0,c=o?o[a].state:this,f=u<n.length&&l.spec.appendTransaction.call(l,u?n.slice(u):n,c,i);if(f&&i.filterTransaction(f,a)){if(f.setMeta("appendedTransaction",t),!o){o=[];for(var h=0;h<this.config.plugins.length;h++)o.push(h<a?{state:i,n:n.length}:{state:this,n:0})}n.push(f),i=i.applyInner(f),s=!0}o&&(o[a]={state:i,n:n.length})}}if(!s)return{state:i,transactions:n}}}},{key:"applyInner",value:function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var n=new r(this.config),i=this.config.fields,o=0;o<i.length;o++){var s=i[o];n[s.name]=s.apply(t,this[s.name],this,n)}return n}},{key:"tr",get:function(){return new rb(this)}},{key:"reconfigure",value:function(t){for(var n=new Zc(this.schema,t.plugins),i=n.fields,o=new r(n),s=0;s<i.length;s++){var a=i[s].name;o[a]=this.hasOwnProperty(a)?this[a]:i[s].init(t,o)}return o}},{key:"toJSON",value:function(t){var n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(function(a){return a.toJSON()})),t&&vn(t)=="object")for(var i in t){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");var o=t[i],s=o.spec.state;s&&s.toJSON&&(n[i]=s.toJSON.call(o,this[o.key]))}return n}}],[{key:"create",value:function(t){for(var n=new Zc(t.doc?t.doc.type.schema:t.schema,t.plugins),i=new r(n),o=0;o<n.fields.length;o++)i[n.fields[o].name]=n.fields[o].init(t,i);return i}},{key:"fromJSON",value:function(t,n,i){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new Zc(t.schema,t.plugins),s=new r(o);return o.fields.forEach(function(a){if(a.name=="doc")s.doc=Ut.Node.fromJSON(t.schema,n.doc);else if(a.name=="selection")s.selection=Ue.fromJSON(s.doc,n.selection);else if(a.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(i)for(var l in i){var u=i[l],c=u.spec.state;if(u.key==a.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[a.name]=c.fromJSON.call(u,t,n[l],s);return}}s[a.name]=a.init(t,s)}}),s}}]),r})();function nb(r,e,t){for(var n in r){var i=r[n];i instanceof Function?i=i.bind(e):n=="handleDOMEvents"&&(i=nb(i,e,{})),t[n]=i}return t}var sR=(function(){function r(e){Ot(this,r),this.spec=e,this.props={},e.props&&nb(e.props,this,this.props),this.key=e.key?e.key.key:ib("plugin")}return Ct(r,[{key:"getState",value:function(t){return t[this.key]}}]),r})(),Qc=Object.create(null);function ib(r){return r in Qc?r+"$"+ ++Qc[r]:(Qc[r]=0,r+"$")}var aR=(function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"key";Ot(this,r),this.key=ib(e)}return Ct(r,[{key:"get",value:function(t){return t.config.pluginsByKey[this.key]}},{key:"getState",value:function(t){return t[this.key]}}]),r})();Qt.AllSelection=Xn;Qt.EditorState=oR;Qt.NodeSelection=yn;Qt.Plugin=sR;Qt.PluginKey=aR;Qt.Selection=Ue;Qt.SelectionRange=eb;Qt.TextSelection=Yn;Qt.Transaction=rb});var xb=me(Re=>{"use strict";var ze=qr(),er=jr(),Ie=Cr(),of=function(e,t){return e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)};function sb(r,e){var t=r.selection.$cursor;return!t||(e?!e.endOfTextblock("backward",r):t.parentOffset>0)?null:t}var ab=function(e,t,n){var i=sb(e,n);if(!i)return!1;var o=sf(i);if(!o){var s=i.blockRange(),a=s&&ze.liftTarget(s);return a==null?!1:(t&&t(e.tr.lift(s,a).scrollIntoView()),!0)}var l=o.nodeBefore;if(wb(e,o,t,-1))return!0;if(i.parent.content.size==0&&(Zn(l,"end")||Ie.NodeSelection.isSelectable(l)))for(var u=i.depth;;u--){var c=ze.replaceStep(e.doc,i.before(u),i.after(u),er.Slice.empty);if(c&&c.slice.size<c.to-c.from){if(t){var f=e.tr.step(c);f.setSelection(Zn(l,"end")?Ie.Selection.findFrom(f.doc.resolve(f.mapping.map(o.pos,-1)),-1):Ie.NodeSelection.create(f.doc,o.pos-l.nodeSize)),t(f.scrollIntoView())}return!0}if(u==1||i.node(u-1).childCount>1)break}return l.isAtom&&o.depth==i.depth-1?(t&&t(e.tr.delete(o.pos-l.nodeSize,o.pos).scrollIntoView()),!0):!1},lR=function(e,t,n){var i=sb(e,n);if(!i)return!1;var o=sf(i);return o?lb(e,o,t):!1},uR=function(e,t,n){var i=cb(e,n);if(!i)return!1;var o=af(i);return o?lb(e,o,t):!1};function lb(r,e,t){for(var n=e.nodeBefore,i=n,o=e.pos-1;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;var s=i.lastChild;if(!s)return!1;i=s}for(var a=e.nodeAfter,l=a,u=e.pos+1;!l.isTextblock;u++){if(l.type.spec.isolating)return!1;var c=l.firstChild;if(!c)return!1;l=c}var f=ze.replaceStep(r.doc,o,u,er.Slice.empty);if(!f||f.from!=o||f instanceof ze.ReplaceStep&&f.slice.size>=u-o)return!1;if(t){var h=r.tr.step(f);h.setSelection(Ie.TextSelection.create(h.doc,o)),t(h.scrollIntoView())}return!0}function Zn(r,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=r;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(t&&n.childCount!=1)return!1}return!1}var ub=function(e,t,n){var i=e.selection,o=i.$head,s=i.empty,a=o;if(!s)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):o.parentOffset>0)return!1;a=sf(o)}var l=a&&a.nodeBefore;return!l||!Ie.NodeSelection.isSelectable(l)?!1:(t&&t(e.tr.setSelection(Ie.NodeSelection.create(e.doc,a.pos-l.nodeSize)).scrollIntoView()),!0)};function sf(r){if(!r.parent.type.spec.isolating)for(var e=r.depth-1;e>=0;e--){if(r.index(e)>0)return r.doc.resolve(r.before(e+1));if(r.node(e).type.spec.isolating)break}return null}function cb(r,e){var t=r.selection.$cursor;return!t||(e?!e.endOfTextblock("forward",r):t.parentOffset<t.parent.content.size)?null:t}var fb=function(e,t,n){var i=cb(e,n);if(!i)return!1;var o=af(i);if(!o)return!1;var s=o.nodeAfter;if(wb(e,o,t,1))return!0;if(i.parent.content.size==0&&(Zn(s,"start")||Ie.NodeSelection.isSelectable(s))){var a=ze.replaceStep(e.doc,i.before(),i.after(),er.Slice.empty);if(a&&a.slice.size<a.to-a.from){if(t){var l=e.tr.step(a);l.setSelection(Zn(s,"start")?Ie.Selection.findFrom(l.doc.resolve(l.mapping.map(o.pos)),1):Ie.NodeSelection.create(l.doc,l.mapping.map(o.pos))),t(l.scrollIntoView())}return!0}}return s.isAtom&&o.depth==i.depth-1?(t&&t(e.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0):!1},hb=function(e,t,n){var i=e.selection,o=i.$head,s=i.empty,a=o;if(!s)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size)return!1;a=af(o)}var l=a&&a.nodeAfter;return!l||!Ie.NodeSelection.isSelectable(l)?!1:(t&&t(e.tr.setSelection(Ie.NodeSelection.create(e.doc,a.pos)).scrollIntoView()),!0)};function af(r){if(!r.parent.type.spec.isolating)for(var e=r.depth-1;e>=0;e--){var t=r.node(e);if(r.index(e)+1<t.childCount)return r.doc.resolve(r.after(e+1));if(t.type.spec.isolating)break}return null}var cR=function(e,t){var n=e.selection,i=n instanceof Ie.NodeSelection,o;if(i){if(n.node.isTextblock||!ze.canJoin(e.doc,n.from))return!1;o=n.from}else if(o=ze.joinPoint(e.doc,n.from,-1),o==null)return!1;if(t){var s=e.tr.join(o);i&&s.setSelection(Ie.NodeSelection.create(s.doc,o-e.doc.resolve(o).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},fR=function(e,t){var n=e.selection,i;if(n instanceof Ie.NodeSelection){if(n.node.isTextblock||!ze.canJoin(e.doc,n.to))return!1;i=n.to}else if(i=ze.joinPoint(e.doc,n.to,1),i==null)return!1;return t&&t(e.tr.join(i).scrollIntoView()),!0},hR=function(e,t){var n=e.selection,i=n.$from,o=n.$to,s=i.blockRange(o),a=s&&ze.liftTarget(s);return a==null?!1:(t&&t(e.tr.lift(s,a).scrollIntoView()),!0)},db=function(e,t){var n=e.selection,i=n.$head,o=n.$anchor;return!i.parent.type.spec.code||!i.sameParent(o)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function lf(r){for(var e=0;e<r.edgeCount;e++){var t=r.edge(e),n=t.type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}var pb=function(e,t){var n=e.selection,i=n.$head,o=n.$anchor;if(!i.parent.type.spec.code||!i.sameParent(o))return!1;var s=i.node(-1),a=i.indexAfter(-1),l=lf(s.contentMatchAt(a));if(!l||!s.canReplaceWith(a,a,l))return!1;if(t){var u=i.after(),c=e.tr.replaceWith(u,u,l.createAndFill());c.setSelection(Ie.Selection.near(c.doc.resolve(u),1)),t(c.scrollIntoView())}return!0},mb=function(e,t){var n=e.selection,i=n.$from,o=n.$to;if(n instanceof Ie.AllSelection||i.parent.inlineContent||o.parent.inlineContent)return!1;var s=lf(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){var a=(!i.parentOffset&&o.index()<o.parent.childCount?i:o).pos,l=e.tr.insert(a,s.createAndFill());l.setSelection(Ie.TextSelection.create(l.doc,a+1)),t(l.scrollIntoView())}return!0},gb=function(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var i=n.before();if(ze.canSplit(e.doc,i))return t&&t(e.tr.split(i).scrollIntoView()),!0}var o=n.blockRange(),s=o&&ze.liftTarget(o);return s==null?!1:(t&&t(e.tr.lift(o,s).scrollIntoView()),!0)};function vb(r){return function(e,t){var n=e.selection,i=n.$from,o=n.$to;if(e.selection instanceof Ie.NodeSelection&&e.selection.node.isBlock)return!i.parentOffset||!ze.canSplit(e.doc,i.pos)?!1:(t&&t(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.depth)return!1;for(var s=[],a,l,u=!1,c=!1,f=i.depth;;f--){var h=i.node(f);if(h.isBlock){u=i.end(f)==i.pos+(i.depth-f),c=i.start(f)==i.pos-(i.depth-f),l=lf(i.node(f-1).contentMatchAt(i.indexAfter(f-1)));var d=r&&r(o.parent,u,i);s.unshift(d||(u&&l?{type:l}:null)),a=f;break}else{if(f==1)return!1;s.unshift(null)}}var m=e.tr;(e.selection instanceof Ie.TextSelection||e.selection instanceof Ie.AllSelection)&&m.deleteSelection();var g=m.mapping.map(i.pos),b=ze.canSplit(m.doc,g,s.length,s);if(b||(s[0]=l?{type:l}:null,b=ze.canSplit(m.doc,g,s.length,s)),!b)return!1;if(m.split(g,s.length,s),!u&&c&&i.node(a).type!=l){var p=m.mapping.map(i.before(a)),S=m.doc.resolve(p);l&&i.node(a-1).canReplaceWith(S.index(),S.index()+1,l)&&m.setNodeMarkup(m.mapping.map(i.before(a)),l)}return t&&t(m.scrollIntoView()),!0}}var uf=vb(),dR=function(e,t){return uf(e,t&&function(n){var i=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();i&&n.ensureMarks(i),t(n)})},pR=function(e,t){var n=e.selection,i=n.$from,o=n.to,s,a=i.sharedDepth(o);return a==0?!1:(s=i.before(a),t&&t(e.tr.setSelection(Ie.NodeSelection.create(e.doc,s))),!0)},yb=function(e,t){return t&&t(e.tr.setSelection(new Ie.AllSelection(e.doc))),!0};function mR(r,e,t){var n=e.nodeBefore,i=e.nodeAfter,o=e.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&e.parent.canReplace(o-1,o)?(t&&t(r.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||ze.canJoin(r.doc,e.pos))?!1:(t&&t(r.tr.join(e.pos).scrollIntoView()),!0)}function wb(r,e,t,n){var i=e.nodeBefore,o=e.nodeAfter,s,a,l=i.type.spec.isolating||o.type.spec.isolating;if(!l&&mR(r,e,t))return!0;var u=!l&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(s=(a=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&a.matchType(s[0]||o.type).validEnd){if(t){for(var c=e.pos+o.nodeSize,f=er.Fragment.empty,h=s.length-1;h>=0;h--)f=er.Fragment.from(s[h].create(null,f));f=er.Fragment.from(i.copy(f));var d=r.tr.step(new ze.ReplaceAroundStep(e.pos-1,c,e.pos,c,new er.Slice(f,1,0),s.length,!0)),m=d.doc.resolve(c+2*s.length);m.nodeAfter&&m.nodeAfter.type==i.type&&ze.canJoin(d.doc,m.pos)&&d.join(m.pos),t(d.scrollIntoView())}return!0}var g=o.type.spec.isolating||n>0&&l?null:Ie.Selection.findFrom(e,1),b=g&&g.$from.blockRange(g.$to),p=b&&ze.liftTarget(b);if(p!=null&&p>=e.depth)return t&&t(r.tr.lift(b,p).scrollIntoView()),!0;if(u&&Zn(o,"start",!0)&&Zn(i,"end")){for(var S=i,k=[];k.push(S),!S.isTextblock;)S=S.lastChild;for(var w=o,x=1;!w.isTextblock;w=w.firstChild)x++;if(S.canReplace(S.childCount,S.childCount,w.content)){if(t){for(var M=er.Fragment.empty,I=k.length-1;I>=0;I--)M=er.Fragment.from(k[I].copy(M));var F=r.tr.step(new ze.ReplaceAroundStep(e.pos-k.length,e.pos+o.nodeSize,e.pos+x,e.pos+o.nodeSize-x,new er.Slice(M,k.length,0),0,!0));t(F.scrollIntoView())}return!0}}return!1}function bb(r){return function(e,t){for(var n=e.selection,i=r<0?n.$from:n.$to,o=i.depth;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(t&&t(e.tr.setSelection(Ie.TextSelection.create(e.doc,r<0?i.start(o):i.end(o)))),!0):!1}}var kb=bb(-1),Sb=bb(1);function gR(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return function(t,n){var i=t.selection,o=i.$from,s=i.$to,a=o.blockRange(s),l=a&&ze.findWrapping(a,r,e);return l?(n&&n(t.tr.wrap(a,l).scrollIntoView()),!0):!1}}function vR(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return function(t,n){for(var i=!1,o=0;o<t.selection.ranges.length&&!i;o++){var s=t.selection.ranges[o],a=s.$from.pos,l=s.$to.pos;t.doc.nodesBetween(a,l,function(m,g){if(i)return!1;if(!(!m.isTextblock||m.hasMarkup(r,e)))if(m.type==r)i=!0;else{var b=t.doc.resolve(g),p=b.index();i=b.parent.canReplaceWith(p,p+1,r)}})}if(!i)return!1;if(n){for(var u=t.tr,c=0;c<t.selection.ranges.length;c++){var f=t.selection.ranges[c],h=f.$from.pos,d=f.$to.pos;u.setBlockType(h,d,r,e)}n(u.scrollIntoView())}return!0}}function yR(r,e,t,n){for(var i=function(){var l=e[s],u=l.$from,c=l.$to,f=u.depth==0?r.inlineContent&&r.type.allowsMarkType(t):!1;if(r.nodesBetween(u.pos,c.pos,function(h,d){if(f||!n&&h.isAtom&&h.isInline&&d>=u.pos&&d+h.nodeSize<=c.pos)return!1;f=h.inlineContent&&h.type.allowsMarkType(t)}),f)return{v:!0}},o,s=0;s<e.length;s++)if(o=i(),o)return o.v;return!1}function wR(r){for(var e=[],t=function(){var o=r[n],s=o.$from,a=o.$to;s.doc.nodesBetween(s.pos,a.pos,function(l,u){if(l.isAtom&&l.content.size&&l.isInline&&u>=s.pos&&u+l.nodeSize<=a.pos)return u+1>s.pos&&e.push(new Ie.SelectionRange(s,s.doc.resolve(u+1))),s=s.doc.resolve(u+1+l.content.size),!1}),s.pos<a.pos&&e.push(new Ie.SelectionRange(s,a))},n=0;n<r.length;n++)t();return e}function bR(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2?arguments[2]:void 0,n=(t&&t.removeWhenPresent)!==!1,i=(t&&t.enterInlineAtoms)!==!1,o=!(t&&t.includeWhitespace);return function(s,a){var l=s.selection,u=l.empty,c=l.$cursor,f=l.ranges;if(u&&!c||!yR(s.doc,f,r,i))return!1;if(a)if(c)r.isInSet(s.storedMarks||c.marks())?a(s.tr.removeStoredMark(r)):a(s.tr.addStoredMark(r.create(e)));else{var h,d=s.tr;i||(f=wR(f)),n?h=!f.some(function(F){return s.doc.rangeHasMark(F.$from.pos,F.$to.pos,r)}):h=!f.every(function(F){var N=!1;return d.doc.nodesBetween(F.$from.pos,F.$to.pos,function(K,ae,R){if(N)return!1;N=!r.isInSet(K.marks)&&!!R&&R.type.allowsMarkType(r)&&!(K.isText&&/^\s*$/.test(K.textBetween(Math.max(0,F.$from.pos-ae),Math.min(K.nodeSize,F.$to.pos-ae))))}),!N});for(var m=0;m<f.length;m++){var g=f[m],b=g.$from,p=g.$to;if(!h)d.removeMark(b.pos,p.pos,r);else{var S=b.pos,k=p.pos,w=b.nodeAfter,x=p.nodeBefore,M=o&&w&&w.isText?/^\s*/.exec(w.text)[0].length:0,I=o&&x&&x.isText?/\s*$/.exec(x.text)[0].length:0;S+M<k&&(S+=M,k-=I),d.addMark(S,k,r.create(e))}}a(d.scrollIntoView())}return!0}}function kR(r,e){return function(t){if(!t.isGeneric)return r(t);for(var n=[],i=0;i<t.mapping.maps.length;i++){for(var o=t.mapping.maps[i],s=0;s<n.length;s++)n[s]=o.map(n[s]);o.forEach(function(k,w,x,M){return n.push(x,M)})}for(var a=[],l=0;l<n.length;l+=2)for(var u=n[l],c=n[l+1],f=t.doc.resolve(u),h=f.sharedDepth(c),d=f.node(h),m=f.indexAfter(h),g=f.after(h+1);g<=c;++m){var b=d.maybeChild(m);if(!b)break;if(m&&a.indexOf(g)==-1){var p=d.child(m-1);p.type==b.type&&e(p,b)&&a.push(g)}g+=b.nodeSize}a.sort(function(k,w){return k-w});for(var S=a.length-1;S>=0;S--)ze.canJoin(t.doc,a[S])&&t.join(a[S]);r(t)}}function SR(r,e){var t=Array.isArray(e)?function(n){return e.indexOf(n.type.name)>-1}:e;return function(n,i,o){return r(n,i&&kR(i,t),o)}}function Vs(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return function(n,i,o){for(var s=0;s<e.length;s++)if(e[s](n,i,o))return!0;return!1}}var rf=Vs(of,ab,ub),ob=Vs(of,fb,hb),tr={Enter:Vs(db,mb,gb,uf),"Mod-Enter":pb,Backspace:rf,"Mod-Backspace":rf,"Shift-Backspace":rf,Delete:ob,"Mod-Delete":ob,"Mod-a":yb},cf={"Ctrl-h":tr.Backspace,"Alt-Backspace":tr["Mod-Backspace"],"Ctrl-d":tr.Delete,"Ctrl-Alt-Backspace":tr["Mod-Delete"],"Alt-Delete":tr["Mod-Delete"],"Alt-d":tr["Mod-Delete"],"Ctrl-a":kb,"Ctrl-e":Sb};for(nf in tr)cf[nf]=tr[nf];var nf,xR=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,ER=xR?cf:tr;Re.autoJoin=SR;Re.baseKeymap=ER;Re.chainCommands=Vs;Re.createParagraphNear=mb;Re.deleteSelection=of;Re.exitCode=pb;Re.joinBackward=ab;Re.joinDown=fR;Re.joinForward=fb;Re.joinTextblockBackward=lR;Re.joinTextblockForward=uR;Re.joinUp=cR;Re.lift=hR;Re.liftEmptyBlock=gb;Re.macBaseKeymap=cf;Re.newlineInCode=db;Re.pcBaseKeymap=tr;Re.selectAll=yb;Re.selectNodeBackward=ub;Re.selectNodeForward=hb;Re.selectParentNode=pR;Re.selectTextblockEnd=Sb;Re.selectTextblockStart=kb;Re.setBlockType=vR;Re.splitBlock=uf;Re.splitBlockAs=vb;Re.splitBlockKeepMarks=dR;Re.toggleMark=bR;Re.wrapIn=gR});var rt=me($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});function _R(r){Object.keys(r).filter(e=>e!=="default"&&e!=="__esModule").forEach(e=>{$s.hasOwnProperty(e)||Object.defineProperty($s,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})}var TR=xb();_R(TR)});var Te=me(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});function AR(r){Object.keys(r).filter(e=>e!=="default"&&e!=="__esModule").forEach(e=>{Ks.hasOwnProperty(e)||Object.defineProperty(Ks,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})}var OR=Cr();AR(OR)});var qt=me(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});function CR(r){Object.keys(r).filter(e=>e!=="default"&&e!=="__esModule").forEach(e=>{Gs.hasOwnProperty(e)||Object.defineProperty(Gs,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})}var NR=jr();CR(NR)});var Cb=me(Wt=>{"use strict";var Nr=qr(),De=jr(),RR=Cr(),MR=["ol",0],IR=["ul",0],PR=["li",0],Eb={attrs:{order:{default:1,validate:"number"}},parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function(e){return e.attrs.order==1?MR:["ol",{start:e.attrs.order},0]}},_b={parseDOM:[{tag:"ul"}],toDOM:function(){return IR}},Tb={parseDOM:[{tag:"li"}],toDOM:function(){return PR},defining:!0};function ff(r,e){var t={};for(var n in r)t[n]=r[n];for(var i in e)t[i]=e[i];return t}function DR(r,e,t){return r.append({ordered_list:ff(Eb,{content:"list_item+",group:t}),bullet_list:ff(_b,{content:"list_item+",group:t}),list_item:ff(Tb,{content:e})})}function LR(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return function(t,n){var i=t.selection,o=i.$from,s=i.$to,a=o.blockRange(s);if(!a)return!1;var l=n?t.tr:null;return Ab(l,a,r,e)?(n&&n(l.scrollIntoView()),!0):!1}}function Ab(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=!1,o=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;var a=s.resolve(e.start-2);o=new De.NodeRange(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new De.NodeRange(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}var l=Nr.findWrapping(o,t,n,e);return l?(r&&FR(r,e,l,i,t),!0):!1}function FR(r,e,t,n,i){for(var o=De.Fragment.empty,s=t.length-1;s>=0;s--)o=De.Fragment.from(t[s].type.create(t[s].attrs,o));r.step(new Nr.ReplaceAroundStep(e.start-(n?2:0),e.end,e.start,e.end,new De.Slice(o,0,0),t.length,!0));for(var a=0,l=0;l<t.length;l++)t[l].type==i&&(a=l+1);for(var u=t.length-a,c=e.start+t.length-(n?2:0),f=e.parent,h=e.startIndex,d=e.endIndex,m=!0;h<d;h++,m=!1)!m&&Nr.canSplit(r.doc,c,u)&&(r.split(c,u),c+=2*u),c+=f.child(h).nodeSize;return r}function Ob(r,e){return function(t,n){var i=t.selection,o=i.$from,s=i.$to,a=i.node;if(a&&a.isBlock||o.depth<2||!o.sameParent(s))return!1;var l=o.node(-1);if(l.type!=r)return!1;if(o.parent.content.size==0&&o.node(-1).childCount==o.indexAfter(-1)){if(o.depth==3||o.node(-3).type!=r||o.index(-2)!=o.node(-2).childCount-1)return!1;if(n){for(var u=De.Fragment.empty,c=o.index(-1)?1:o.index(-2)?2:3,f=o.depth-c;f>=o.depth-3;f--)u=De.Fragment.from(o.node(f).copy(u));var h=o.indexAfter(-1)<o.node(-2).childCount?1:o.indexAfter(-2)<o.node(-3).childCount?2:3;u=u.append(De.Fragment.from(r.createAndFill()));var d=o.before(o.depth-(c-1)),m=t.tr.replace(d,o.after(-h),new De.Slice(u,4-c,0)),g=-1;m.doc.nodesBetween(d,m.doc.content.size,function(k,w){if(g>-1)return!1;k.isTextblock&&k.content.size==0&&(g=w+1)}),g>-1&&m.setSelection(RR.Selection.near(m.doc.resolve(g))),n(m.scrollIntoView())}return!0}var b=s.pos==o.end()?l.contentMatchAt(0).defaultType:null,p=t.tr.delete(o.pos,s.pos),S=b?[e?{type:r,attrs:e}:null,{type:b}]:void 0;return Nr.canSplit(p.doc,o.pos,2,S)?(n&&n(p.split(o.pos,2,S).scrollIntoView()),!0):!1}}function BR(r,e){var t=Ob(r,e);return function(n,i){return t(n,i&&function(o){var s=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();s&&o.ensureMarks(s),i(o)})}}function zR(r){return function(e,t){var n=e.selection,i=n.$from,o=n.$to,s=i.blockRange(o,function(a){return a.childCount>0&&a.firstChild.type==r});return s?t?i.node(s.depth-1).type==r?HR(e,t,r,s):jR(e,t,s):!0:!1}}function HR(r,e,t,n){var i=r.tr,o=n.end,s=n.$to.end(n.depth);o<s&&(i.step(new Nr.ReplaceAroundStep(o-1,s,o,s,new De.Slice(De.Fragment.from(t.create(null,n.parent.copy())),1,0),1,!0)),n=new De.NodeRange(i.doc.resolve(n.$from.pos),i.doc.resolve(s),n.depth));var a=Nr.liftTarget(n);if(a==null)return!1;i.lift(n,a);var l=i.doc.resolve(i.mapping.map(o,-1)-1);return Nr.canJoin(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function jR(r,e,t){for(var n=r.tr,i=t.parent,o=t.end,s=t.endIndex-1,a=t.startIndex;s>a;s--)o-=i.child(s).nodeSize,n.delete(o-1,o+1);var l=n.doc.resolve(t.start),u=l.nodeAfter;if(n.mapping.map(t.end)!=t.start+l.nodeAfter.nodeSize)return!1;var c=t.startIndex==0,f=t.endIndex==i.childCount,h=l.node(-1),d=l.index(-1);if(!h.canReplace(d+(c?0:1),d+1,u.content.append(f?De.Fragment.empty:De.Fragment.from(i))))return!1;var m=l.pos,g=m+u.nodeSize;return n.step(new Nr.ReplaceAroundStep(m-(c?1:0),g+(f?1:0),m+1,g-1,new De.Slice((c?De.Fragment.empty:De.Fragment.from(i.copy(De.Fragment.empty))).append(f?De.Fragment.empty:De.Fragment.from(i.copy(De.Fragment.empty))),c?0:1,f?0:1),c?0:1)),e(n.scrollIntoView()),!0}function UR(r){return function(e,t){var n=e.selection,i=n.$from,o=n.$to,s=i.blockRange(o,function(g){return g.childCount>0&&g.firstChild.type==r});if(!s)return!1;var a=s.startIndex;if(a==0)return!1;var l=s.parent,u=l.child(a-1);if(u.type!=r)return!1;if(t){var c=u.lastChild&&u.lastChild.type==l.type,f=De.Fragment.from(c?r.create():null),h=new De.Slice(De.Fragment.from(r.create(null,De.Fragment.from(l.type.create(null,f)))),c?3:1,0),d=s.start,m=s.end;t(e.tr.step(new Nr.ReplaceAroundStep(d-(c?3:1),m,d,m,h,1,!0)).scrollIntoView())}return!0}}Wt.addListNodes=DR;Wt.bulletList=_b;Wt.liftListItem=zR;Wt.listItem=Tb;Wt.orderedList=Eb;Wt.sinkListItem=UR;Wt.splitListItem=Ob;Wt.splitListItemKeepMarks=BR;Wt.wrapInList=LR;Wt.wrapRangeInList=Ab});var Xs=me(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});function qR(r){Object.keys(r).filter(e=>e!=="default"&&e!=="__esModule").forEach(e=>{Js.hasOwnProperty(e)||Object.defineProperty(Js,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})}var WR=Cb();qR(WR)});var zf=me(ai=>{"use strict";function h1(r,e){return KR(r)||$R(r,e)||d1(r,e)||VR()}function VR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $R(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,o,s,a=[],l=!0,u=!1;try{if(o=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=o.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}function KR(r){if(Array.isArray(r))return r}function yf(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=d1(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(s)throw a}}}}function d1(r,e){if(r){if(typeof r=="string")return Nb(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Nb(r,e)}}function Nb(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function mt(){return typeof Reflect<"u"&&Reflect.get?mt=Reflect.get.bind():mt=function(e,t,n){var i=GR(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},mt.apply(this,arguments)}function GR(r,e){for(;!Object.prototype.hasOwnProperty.call(r,e)&&(r=nt(r),r!==null););return r}function _n(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&wf(r,e)}function wf(r,e){return wf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},wf(r,e)}function Tn(r){var e=XR();return function(){var n=nt(r),i;if(e){var o=nt(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return JR(this,i)}}function JR(r,e){if(e&&(ii(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p1(r)}function p1(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function XR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function nt(r){return nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nt(r)}function ii(r){"@babel/helpers - typeof";return ii=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ii(r)}function qe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Rb(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,YR(n.key),n)}}function We(r,e,t){return e&&Rb(r.prototype,e),t&&Rb(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function YR(r){var e=ZR(r,"string");return ii(e)==="symbol"?e:String(e)}function ZR(r,e){if(ii(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(ii(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var xe=Cr(),Be=jr(),QR=qr(),it=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},oi=function(e){var t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t},bf=null,Mr=function(e,t,n){var i=bf||(bf=document.createRange());return i.setEnd(e,n??e.nodeValue.length),i.setStart(e,t||0),i},eM=function(){bf=null},En=function(e,t,n,i){return n&&(Mb(e,t,n,i,-1)||Mb(e,t,n,i,1))},tM=/^(img|br|input|textarea|hr)$/i;function Mb(r,e,t,n,i){for(var o;;){if(r==t&&e==n)return!0;if(e==(i<0?0:Rt(r))){var s=r.parentNode;if(!s||s.nodeType!=1||so(r)||tM.test(r.nodeName)||r.contentEditable=="false")return!1;e=it(r)+(i<0?0:1),r=s}else if(r.nodeType==1){var a=r.childNodes[e+(i<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((o=a.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=i;else return!1;else r=a,e=i<0?Rt(r):0}else return!1}}function Rt(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function rM(r,e){for(;;){if(r.nodeType==3&&e)return r;if(r.nodeType==1&&e>0){if(r.contentEditable=="false")return null;r=r.childNodes[e-1],e=Rt(r)}else if(r.parentNode&&!so(r))e=it(r),r=r.parentNode;else return null}}function nM(r,e){for(;;){if(r.nodeType==3&&e<r.nodeValue.length)return r;if(r.nodeType==1&&e<r.childNodes.length){if(r.contentEditable=="false")return null;r=r.childNodes[e],e=0}else if(r.parentNode&&!so(r))e=it(r)+1,r=r.parentNode;else return null}}function iM(r,e,t){for(var n=e==0,i=e==Rt(r);n||i;){if(r==t)return!0;var o=it(r);if(r=r.parentNode,!r)return!1;n=n&&o==0,i=i&&o==Rt(r)}}function so(r){for(var e,t=r;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==r||e.contentDOM==r)}var ta=function(e){return e.focusNode&&En(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function wn(r,e){var t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=r,t.key=t.code=e,t}function oM(r){for(var e=r.activeElement;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function sM(r,e,t){if(r.caretPositionFromPoint)try{var n=r.caretPositionFromPoint(e,t);if(n)return{node:n.offsetNode,offset:Math.min(Rt(n.offsetNode),n.offset)}}catch{}if(r.caretRangeFromPoint){var i=r.caretRangeFromPoint(e,t);if(i)return{node:i.startContainer,offset:Math.min(Rt(i.startContainer),i.startOffset)}}}var rr=typeof navigator<"u"?navigator:null,Ib=typeof document<"u"?document:null,Jr=rr&&rr.userAgent||"",kf=/Edge\/(\d+)/.exec(Jr),m1=/MSIE \d/.exec(Jr),Sf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Jr),Et=!!(m1||Sf||kf),Gr=m1?document.documentMode:Sf?+Sf[1]:kf?+kf[1]:0,Mt=!Et&&/gecko\/(\d+)/i.test(Jr);Mt&&+(/Firefox\/(\d+)/.exec(Jr)||[0,0])[1];var xf=!Et&&/Chrome\/(\d+)/.exec(Jr),ft=!!xf,g1=xf?+xf[1]:0,gt=!Et&&!!rr&&/Apple Computer/.test(rr.vendor),si=gt&&(/Mobile\/\w+/.test(Jr)||!!rr&&rr.maxTouchPoints>2),Nt=si||(rr?/Mac/.test(rr.platform):!1),aM=rr?/Win/.test(rr.platform):!1,Ir=/Android \d/.test(Jr),ao=!!Ib&&"webkitFontSmoothing"in Ib.documentElement.style,lM=ao?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function uM(r){var e=r.defaultView&&r.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:r.documentElement.clientWidth,top:0,bottom:r.documentElement.clientHeight}}function Rr(r,e){return typeof r=="number"?r:r[e]}function cM(r){var e=r.getBoundingClientRect(),t=e.width/r.offsetWidth||1,n=e.height/r.offsetHeight||1;return{left:e.left,right:e.left+r.clientWidth*t,top:e.top,bottom:e.top+r.clientHeight*n}}function Pb(r,e,t){for(var n=r.someProp("scrollThreshold")||0,i=r.someProp("scrollMargin")||5,o=r.dom.ownerDocument,s=t||r.dom;s;){if(s.nodeType!=1){s=oi(s);continue}var a=s,l=a==o.body,u=l?uM(o):cM(a),c=0,f=0;if(e.top<u.top+Rr(n,"top")?f=-(u.top-e.top+Rr(i,"top")):e.bottom>u.bottom-Rr(n,"bottom")&&(f=e.bottom-e.top>u.bottom-u.top?e.top+Rr(i,"top")-u.top:e.bottom-u.bottom+Rr(i,"bottom")),e.left<u.left+Rr(n,"left")?c=-(u.left-e.left+Rr(i,"left")):e.right>u.right-Rr(n,"right")&&(c=e.right-u.right+Rr(i,"right")),c||f)if(l)o.defaultView.scrollBy(c,f);else{var h=a.scrollLeft,d=a.scrollTop;f&&(a.scrollTop+=f),c&&(a.scrollLeft+=c);var m=a.scrollLeft-h,g=a.scrollTop-d;e={left:e.left-m,top:e.top-g,right:e.right-m,bottom:e.bottom-g}}var b=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(b))break;s=b=="absolute"?s.offsetParent:oi(s)}}function fM(r){for(var e=r.dom.getBoundingClientRect(),t=Math.max(0,e.top),n,i,o=(e.left+e.right)/2,s=t+1;s<Math.min(innerHeight,e.bottom);s+=5){var a=r.root.elementFromPoint(o,s);if(!(!a||a==r.dom||!r.dom.contains(a))){var l=a.getBoundingClientRect();if(l.top>=t-20){n=a,i=l.top;break}}}return{refDOM:n,refTop:i,stack:v1(r.dom)}}function v1(r){for(var e=[],t=r.ownerDocument,n=r;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),r!=t);n=oi(n));return e}function hM(r){var e=r.refDOM,t=r.refTop,n=r.stack,i=e?e.getBoundingClientRect().top:0;y1(n,i==0?0:i-t)}function y1(r,e){for(var t=0;t<r.length;t++){var n=r[t],i=n.dom,o=n.top,s=n.left;i.scrollTop!=o+e&&(i.scrollTop=o+e),i.scrollLeft!=s&&(i.scrollLeft=s)}}var Qn=null;function dM(r){if(r.setActive)return r.setActive();if(Qn)return r.focus(Qn);var e=v1(r);r.focus(Qn==null?{get preventScroll(){return Qn={preventScroll:!0},!0}}:void 0),Qn||(Qn=!1,y1(e,0))}function w1(r,e){for(var t,n=2e8,i,o=0,s=e.top,a=e.top,l,u,c=r.firstChild,f=0;c;c=c.nextSibling,f++){var h=void 0;if(c.nodeType==1)h=c.getClientRects();else if(c.nodeType==3)h=Mr(c).getClientRects();else continue;for(var d=0;d<h.length;d++){var m=h[d];if(m.top<=s&&m.bottom>=a){s=Math.max(m.bottom,s),a=Math.min(m.top,a);var g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<n){t=c,n=g,i=g&&t.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,c.nodeType==1&&g&&(o=f+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=c,u={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!t&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(o=f+1)}}return!t&&l&&(t=l,i=u,n=0),t&&t.nodeType==3?pM(t,i):!t||n&&t.nodeType==1?{node:r,offset:o}:w1(t,i)}function pM(r,e){for(var t=r.nodeValue.length,n=document.createRange(),i=0;i<t;i++){n.setEnd(r,i+1),n.setStart(r,i);var o=Vr(n,1);if(o.top!=o.bottom&&Nf(e,o))return{node:r,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:r,offset:0}}function Nf(r,e){return r.left>=e.left-1&&r.left<=e.right+1&&r.top>=e.top-1&&r.top<=e.bottom+1}function mM(r,e){var t=r.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<r.getBoundingClientRect().left?t:r}function gM(r,e,t){var n=w1(e,t),i=n.node,o=n.offset,s=-1;if(i.nodeType==1&&!i.firstChild){var a=i.getBoundingClientRect();s=a.left!=a.right&&t.left>(a.left+a.right)/2?1:-1}return r.docView.posFromDOM(i,o,s)}function vM(r,e,t,n){for(var i=-1,o=e,s=!1;o!=r.dom;){var a=r.docView.nearestDesc(o,!0),l=void 0;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!s&&l.left>n.left||l.top>n.top?i=a.posBefore:(!s&&l.right<n.left||l.bottom<n.top)&&(i=a.posAfter),s=!0),!a.contentDOM&&i<0&&!a.node.isText)){var u=a.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2;return u?a.posBefore:a.posAfter}o=a.dom.parentNode}return i>-1?i:r.docView.posFromDOM(e,t,-1)}function b1(r,e,t){var n=r.childNodes.length;if(n&&t.top<t.bottom)for(var i=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-t.top)/(t.bottom-t.top))-2)),o=i;;){var s=r.childNodes[o];if(s.nodeType==1)for(var a=s.getClientRects(),l=0;l<a.length;l++){var u=a[l];if(Nf(e,u))return b1(s,e,u)}if((o=(o+1)%n)==i)break}return r}function yM(r,e){var t=r.dom.ownerDocument,n,i=0,o=sM(t,e.left,e.top);o&&(n=o.node,i=o.offset);var s=(r.root.elementFromPoint?r.root:t).elementFromPoint(e.left,e.top),a;if(!s||!r.dom.contains(s.nodeType!=1?s.parentNode:s)){var l=r.dom.getBoundingClientRect();if(!Nf(e,l)||(s=b1(r.dom,e,l),!s))return null}if(gt)for(var u=s;n&&u;u=oi(u))u.draggable&&(n=void 0);if(s=mM(s,e),n){if(Mt&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){var c=n.childNodes[i],f;c.nodeName=="IMG"&&(f=c.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}var h;ao&&i&&n.nodeType==1&&(h=n.childNodes[i-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&i--,n==r.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?a=r.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(a=vM(r,n,i,e))}a==null&&(a=gM(r,s,e));var d=r.docView.nearestDesc(s,!0);return{pos:a,inside:d?d.posAtStart-d.border:-1}}function Db(r){return r.top<r.bottom||r.left<r.right}function Vr(r,e){var t=r.getClientRects();if(t.length){var n=t[e<0?0:t.length-1];if(Db(n))return n}return Array.prototype.find.call(t,Db)||r.getBoundingClientRect()}var wM=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function k1(r,e,t){var n=r.docView.domFromPos(e,t<0?-1:1),i=n.node,o=n.offset,s=n.atom,a=ao||Mt;if(i.nodeType==3)if(a&&(wM.test(i.nodeValue)||(t<0?!o:o==i.nodeValue.length))){var l=Vr(Mr(i,o,o),t);if(Mt&&o&&/\s/.test(i.nodeValue[o-1])&&o<i.nodeValue.length){var u=Vr(Mr(i,o-1,o-1),-1);if(u.top==l.top){var c=Vr(Mr(i,o,o+1),-1);if(c.top!=l.top)return Zi(c,c.left<u.left)}}return l}else{var f=o,h=o,d=t<0?1:-1;return t<0&&!o?(h++,d=-1):t>=0&&o==i.nodeValue.length?(f--,d=1):t<0?f--:h++,Zi(Vr(Mr(i,f,h),d),d<0)}var m=r.state.doc.resolve(e-(s||0));if(!m.parent.inlineContent){if(s==null&&o&&(t<0||o==Rt(i))){var g=i.childNodes[o-1];if(g.nodeType==1)return hf(g.getBoundingClientRect(),!1)}if(s==null&&o<Rt(i)){var b=i.childNodes[o];if(b.nodeType==1)return hf(b.getBoundingClientRect(),!0)}return hf(i.getBoundingClientRect(),t>=0)}if(s==null&&o&&(t<0||o==Rt(i))){var p=i.childNodes[o-1],S=p.nodeType==3?Mr(p,Rt(p)-(a?0:1)):p.nodeType==1&&(p.nodeName!="BR"||!p.nextSibling)?p:null;if(S)return Zi(Vr(S,1),!1)}if(s==null&&o<Rt(i)){for(var k=i.childNodes[o];k.pmViewDesc&&k.pmViewDesc.ignoreForCoords;)k=k.nextSibling;var w=k?k.nodeType==3?Mr(k,0,a?0:1):k.nodeType==1?k:null:null;if(w)return Zi(Vr(w,-1),!0)}return Zi(Vr(i.nodeType==3?Mr(i):i,-t),t>=0)}function Zi(r,e){if(r.width==0)return r;var t=e?r.left:r.right;return{top:r.top,bottom:r.bottom,left:t,right:t}}function hf(r,e){if(r.height==0)return r;var t=e?r.top:r.bottom;return{top:t,bottom:t,left:r.left,right:r.right}}function S1(r,e,t){var n=r.state,i=r.root.activeElement;n!=e&&r.updateState(e),i!=r.dom&&r.focus();try{return t()}finally{n!=e&&r.updateState(n),i!=r.dom&&i&&i.focus()}}function bM(r,e,t){var n=e.selection,i=t=="up"?n.$from:n.$to;return S1(r,e,function(){for(var o=r.docView.domFromPos(i.pos,t=="up"?-1:1),s=o.node;;){var a=r.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}for(var l=k1(r,i.pos,1),u=s.firstChild;u;u=u.nextSibling){var c=void 0;if(u.nodeType==1)c=u.getClientRects();else if(u.nodeType==3)c=Mr(u,0,u.nodeValue.length).getClientRects();else continue;for(var f=0;f<c.length;f++){var h=c[f];if(h.bottom>h.top+1&&(t=="up"?l.top-h.top>(h.bottom-l.top)*2:h.bottom-l.bottom>(l.bottom-h.top)*2))return!1}}return!0})}var kM=/[\u0590-\u08ac]/;function SM(r,e,t){var n=e.selection.$head;if(!n.parent.isTextblock)return!1;var i=n.parentOffset,o=!i,s=i==n.parent.content.size,a=r.domSelection();return a?!kM.test(n.parent.textContent)||!a.modify?t=="left"||t=="backward"?o:s:S1(r,e,function(){var l=r.domSelectionRange(),u=l.focusNode,c=l.focusOffset,f=l.anchorNode,h=l.anchorOffset,d=a.caretBidiLevel;a.modify("move",t,"character");var m=n.depth?r.docView.domAfterPos(n.before()):r.dom,g=r.domSelectionRange(),b=g.focusNode,p=g.focusOffset,S=b&&!m.contains(b.nodeType==1?b:b.parentNode)||u==b&&c==p;try{a.collapse(f,h),u&&(u!=f||c!=h)&&a.extend&&a.extend(u,c)}catch{}return d!=null&&(a.caretBidiLevel=d),S}):n.pos==n.start()||n.pos==n.end()}var Lb=null,Fb=null,Bb=!1;function xM(r,e,t){return Lb==e&&Fb==t?Bb:(Lb=e,Fb=t,Bb=t=="up"||t=="down"?bM(r,e,t):SM(r,e,t))}var It=0,zb=1,bn=2,nr=3,lo=(function(){function r(e,t,n,i){qe(this,r),this.parent=e,this.children=t,this.dom=n,this.contentDOM=i,this.dirty=It,n.pmViewDesc=this}return We(r,[{key:"matchesWidget",value:function(t){return!1}},{key:"matchesMark",value:function(t){return!1}},{key:"matchesNode",value:function(t,n,i){return!1}},{key:"matchesHack",value:function(t){return!1}},{key:"parseRule",value:function(){return null}},{key:"stopEvent",value:function(t){return!1}},{key:"size",get:function(){for(var t=0,n=0;n<this.children.length;n++)t+=this.children[n].size;return t}},{key:"border",get:function(){return 0}},{key:"destroy",value:function(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(var t=0;t<this.children.length;t++)this.children[t].destroy()}},{key:"posBeforeChild",value:function(t){for(var n=0,i=this.posAtStart;;n++){var o=this.children[n];if(o==t)return i;i+=o.size}}},{key:"posBefore",get:function(){return this.parent.posBeforeChild(this)}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}},{key:"posAfter",get:function(){return this.posBefore+this.size}},{key:"posAtEnd",get:function(){return this.posAtStart+this.size-2*this.border}},{key:"localPosFromDOM",value:function(t,n,i){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(i<0){var o,s;if(t==this.contentDOM)o=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{var a,l;if(t==this.contentDOM)a=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;a=t.nextSibling}for(;a&&!((l=a.pmViewDesc)&&l.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(l):this.posAtEnd}var u;if(t==this.dom&&this.contentDOM)u=n>it(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))u=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(var c=t;;c=c.parentNode){if(c==this.dom){u=!1;break}if(c.previousSibling)break}if(u==null&&n==t.childNodes.length)for(var f=t;;f=f.parentNode){if(f==this.dom){u=!0;break}if(f.nextSibling)break}}return u??i>0?this.posAtEnd:this.posAtStart}},{key:"nearestDesc",value:function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=!0,o=t;o;o=o.parentNode){var s=this.getDesc(o),a=void 0;if(s&&(!n||s.node))if(i&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(t.nodeType==1?t:t.parentNode):a==t))i=!1;else return s}}},{key:"getDesc",value:function(t){for(var n=t.pmViewDesc,i=n;i;i=i.parent)if(i==this)return n}},{key:"posFromDOM",value:function(t,n,i){for(var o=t;o;o=o.parentNode){var s=this.getDesc(o);if(s)return s.localPosFromDOM(t,n,i)}return-1}},{key:"descAt",value:function(t){for(var n=0,i=0;n<this.children.length;n++){var o=this.children[n],s=i+o.size;if(i==t&&s!=i){for(;!o.border&&o.children.length;)for(var a=0;a<o.children.length;a++){var l=o.children[a];if(l.size){o=l;break}}return o}if(t<s)return o.descAt(t-i-o.border);i=s}}},{key:"domFromPos",value:function(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};for(var i=0,o=0,s=0;i<this.children.length;i++){var a=this.children[i],l=s+a.size;if(l>t||a instanceof _1){o=t-s;break}s=l}if(o)return this.children[i].domFromPos(o-this.children[i].border,n);for(var u;i&&!(u=this.children[i-1]).size&&u instanceof x1&&u.side>=0;i--);if(n<=0){for(var c,f=!0;c=i?this.children[i-1]:null,!(!c||c.dom.parentNode==this.contentDOM);i--,f=!1);return c&&n&&f&&!c.border&&!c.domAtom?c.domFromPos(c.size,n):{node:this.contentDOM,offset:c?it(c.dom)+1:0}}else{for(var h,d=!0;h=i<this.children.length?this.children[i]:null,!(!h||h.dom.parentNode==this.contentDOM);i++,d=!1);return h&&d&&!h.border&&!h.domAtom?h.domFromPos(0,n):{node:this.contentDOM,offset:h?it(h.dom):this.contentDOM.childNodes.length}}}},{key:"parseRange",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var o=-1,s=-1,a=i,l=0;;l++){var u=this.children[l],c=a+u.size;if(o==-1&&t<=c){var f=a+u.border;if(t>=f&&n<=c-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(t,n,f);t=a;for(var h=l;h>0;h--){var d=this.children[h-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){o=it(d.dom)+1;break}t-=d.size}o==-1&&(o=0)}if(o>-1&&(c>n||l==this.children.length-1)){n=c;for(var m=l+1;m<this.children.length;m++){var g=this.children[m];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){s=it(g.dom);break}n+=g.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=c}return{node:this.contentDOM,from:t,to:n,fromOffset:o,toOffset:s}}},{key:"emptyChildAt",value:function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}},{key:"domAfterPos",value:function(t){var n=this.domFromPos(t,0),i=n.node,o=n.offset;if(i.nodeType!=1||o==i.childNodes.length)throw new RangeError("No node after pos "+t);return i.childNodes[o]}},{key:"setSelection",value:function(t,n,i){for(var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=Math.min(t,n),a=Math.max(t,n),l=0,u=0;l<this.children.length;l++){var c=this.children[l],f=u+c.size;if(s>u&&a<f)return c.setSelection(t-u-c.border,n-u-c.border,i,o);u=f}var h=this.domFromPos(t,t?-1:1),d=n==t?h:this.domFromPos(n,n?-1:1),m=i.root.getSelection(),g=i.domSelectionRange(),b=!1;if((Mt||gt)&&t==n){var p=h,S=p.node,k=p.offset;if(S.nodeType==3){if(b=!!(k&&S.nodeValue[k-1]==`
`),b&&k==S.nodeValue.length)for(var w=S,x;w;w=w.parentNode){if(x=w.nextSibling){x.nodeName=="BR"&&(h=d={node:x.parentNode,offset:it(x)+1});break}var M=w.pmViewDesc;if(M&&M.node&&M.node.isBlock)break}}else{var I=S.childNodes[k-1];b=I&&(I.nodeName=="BR"||I.contentEditable=="false")}}if(Mt&&g.focusNode&&g.focusNode!=d.node&&g.focusNode.nodeType==1){var F=g.focusNode.childNodes[g.focusOffset];F&&F.contentEditable=="false"&&(o=!0)}if(!(!(o||b&&gt)&&En(h.node,h.offset,g.anchorNode,g.anchorOffset)&&En(d.node,d.offset,g.focusNode,g.focusOffset))){var N=!1;if((m.extend||t==n)&&!(b&&Mt)){m.collapse(h.node,h.offset);try{t!=n&&m.extend(d.node,d.offset),N=!0}catch{}}if(!N){if(t>n){var K=h;h=d,d=K}var ae=document.createRange();ae.setEnd(d.node,d.offset),ae.setStart(h.node,h.offset),m.removeAllRanges(),m.addRange(ae)}}}},{key:"ignoreMutation",value:function(t){return!this.contentDOM&&t.type!="selection"}},{key:"contentLost",get:function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}},{key:"markDirty",value:function(t,n){for(var i=0,o=0;o<this.children.length;o++){var s=this.children[o],a=i+s.size;if(i==a?t<=a&&n>=i:t<a&&n>i){var l=i+s.border,u=a-s.border;if(t>=l&&n<=u){this.dirty=t==i||n==a?bn:zb,t==l&&n==u&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=nr:s.markDirty(t-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?bn:nr}i=a}this.dirty=bn}},{key:"markParentsDirty",value:function(){for(var t=1,n=this.parent;n;n=n.parent,t++){var i=t==1?bn:zb;n.dirty<i&&(n.dirty=i)}}},{key:"domAtom",get:function(){return!1}},{key:"ignoreForCoords",get:function(){return!1}},{key:"ignoreForSelection",get:function(){return!1}},{key:"isText",value:function(t){return!1}}]),r})(),x1=(function(r){_n(t,r);var e=Tn(t);function t(n,i,o,s){var a;qe(this,t);var l,u=i.type.toDOM;if(typeof u=="function"&&(u=u(o,function(){if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)})),!i.type.spec.raw){if(u.nodeType!=1){var c=document.createElement("span");c.appendChild(u),u=c}u.contentEditable="false",u.classList.add("ProseMirror-widget")}return a=e.call(this,n,[],u,null),a.widget=i,a.widget=i,l=p1(a),a}return We(t,[{key:"matchesWidget",value:function(i){return this.dirty==It&&i.type.eq(this.widget.type)}},{key:"parseRule",value:function(){return{ignore:!0}}},{key:"stopEvent",value:function(i){var o=this.widget.spec.stopEvent;return o?o(i):!1}},{key:"ignoreMutation",value:function(i){return i.type!="selection"||this.widget.spec.ignoreSelection}},{key:"destroy",value:function(){this.widget.type.destroy(this.dom),mt(nt(t.prototype),"destroy",this).call(this)}},{key:"domAtom",get:function(){return!0}},{key:"ignoreForSelection",get:function(){return!!this.widget.type.spec.relaxedSide}},{key:"side",get:function(){return this.widget.type.side}}]),t})(lo),EM=(function(r){_n(t,r);var e=Tn(t);function t(n,i,o,s){var a;return qe(this,t),a=e.call(this,n,[],i,null),a.textDOM=o,a.text=s,a}return We(t,[{key:"size",get:function(){return this.text.length}},{key:"localPosFromDOM",value:function(i,o){return i!=this.textDOM?this.posAtStart+(o?this.size:0):this.posAtStart+o}},{key:"domFromPos",value:function(i){return{node:this.textDOM,offset:i}}},{key:"ignoreMutation",value:function(i){return i.type==="characterData"&&i.target.nodeValue==i.oldValue}}]),t})(lo),Ys=(function(r){_n(t,r);var e=Tn(t);function t(n,i,o,s,a){var l;return qe(this,t),l=e.call(this,n,[],o,s),l.mark=i,l.spec=a,l}return We(t,[{key:"parseRule",value:function(){return this.dirty&nr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}},{key:"matchesMark",value:function(i){return this.dirty!=nr&&this.mark.eq(i)}},{key:"markDirty",value:function(i,o){if(mt(nt(t.prototype),"markDirty",this).call(this,i,o),this.dirty!=It){for(var s=this.parent;!s.node;)s=s.parent;s.dirty<this.dirty&&(s.dirty=this.dirty),this.dirty=It}}},{key:"slice",value:function(i,o,s){var a=t.create(this.parent,this.mark,!0,s),l=this.children,u=this.size;o<u&&(l=_f(l,o,u,s)),i>0&&(l=_f(l,0,i,s));for(var c=0;c<l.length;c++)l[c].parent=a;return a.children=l,a}},{key:"ignoreMutation",value:function(i){return this.spec.ignoreMutation?this.spec.ignoreMutation(i):mt(nt(t.prototype),"ignoreMutation",this).call(this,i)}},{key:"destroy",value:function(){this.spec.destroy&&this.spec.destroy(),mt(nt(t.prototype),"destroy",this).call(this)}}],[{key:"create",value:function(i,o,s,a){var l=a.nodeViews[o.type.name],u=l&&l(o,a,s);return(!u||!u.dom)&&(u=Be.DOMSerializer.renderSpec(document,o.type.spec.toDOM(o,s),null,o.attrs)),new t(i,o,u.dom,u.contentDOM||u.dom,u)}}]),t})(lo),ri=(function(r){_n(t,r);var e=Tn(t);function t(n,i,o,s,a,l,u,c,f){var h;return qe(this,t),h=e.call(this,n,[],a,l),h.node=i,h.outerDeco=o,h.innerDeco=s,h.nodeDOM=u,h}return We(t,[{key:"parseRule",value:function(){var i=this;if(this.node.type.spec.reparseInView)return null;var o={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(o.preserveWhitespace="full"),!this.contentDOM)o.getContent=function(){return i.node.content};else if(!this.contentLost)o.contentElement=this.contentDOM;else{for(var s=this.children.length-1;s>=0;s--){var a=this.children[s];if(this.dom.contains(a.dom.parentNode)){o.contentElement=a.dom.parentNode;break}}o.contentElement||(o.getContent=function(){return Be.Fragment.empty})}return o}},{key:"matchesNode",value:function(i,o,s){return this.dirty==It&&i.eq(this.node)&&Zs(o,this.outerDeco)&&s.eq(this.innerDeco)}},{key:"size",get:function(){return this.node.nodeSize}},{key:"border",get:function(){return this.node.isLeaf?0:1}},{key:"updateChildren",value:function(i,o){var s=this,a=this.node.inlineContent,l=o,u=i.composing?this.localCompositionInfo(i,o):null,c=u&&u.pos>-1?u:null,f=u&&u.pos<0,h=new AM(this,c&&c.node,i);NM(this.node,this.innerDeco,function(d,m,g){d.spec.marks?h.syncToMarks(d.spec.marks,a,i):d.type.side>=0&&!g&&h.syncToMarks(m==s.node.childCount?Be.Mark.none:s.node.child(m).marks,a,i),h.placeWidget(d,i,l)},function(d,m,g,b){h.syncToMarks(d.marks,a,i);var p;h.findNodeMatch(d,m,g,b)||f&&i.state.selection.from>l&&i.state.selection.to<l+d.nodeSize&&(p=h.findIndexWithChild(u.node))>-1&&h.updateNodeAt(d,m,g,p,i)||h.updateNextNode(d,m,g,i,b,l)||h.addNode(d,m,g,i,l),l+=d.nodeSize}),h.syncToMarks([],a,i),this.node.isTextblock&&h.addTextblockHacks(),h.destroyRest(),(h.changed||this.dirty==bn)&&(c&&this.protectLocalComposition(i,c),T1(this.contentDOM,this.children,i),si&&RM(this.dom))}},{key:"localCompositionInfo",value:function(i,o){var s=i.state.selection,a=s.from,l=s.to;if(!(i.state.selection instanceof xe.TextSelection)||a<o||l>o+this.node.content.size)return null;var u=i.input.compositionNode;if(!u||!this.dom.contains(u.parentNode))return null;if(this.node.inlineContent){var c=u.nodeValue,f=MM(this.node.content,c,a-o,l-o);return f<0?null:{node:u,pos:f,text:c}}else return{node:u,pos:-1,text:""}}},{key:"protectLocalComposition",value:function(i,o){var s=o.node,a=o.pos,l=o.text;if(!this.getDesc(s)){for(var u=s;u.parentNode!=this.contentDOM;u=u.parentNode){for(;u.previousSibling;)u.parentNode.removeChild(u.previousSibling);for(;u.nextSibling;)u.parentNode.removeChild(u.nextSibling);u.pmViewDesc&&(u.pmViewDesc=void 0)}var c=new EM(this,u,s,l);i.input.compositionNodes.push(c),this.children=_f(this.children,a,a+l.length,i,c)}}},{key:"update",value:function(i,o,s,a){return this.dirty==nr||!i.sameMarkup(this.node)?!1:(this.updateInner(i,o,s,a),!0)}},{key:"updateInner",value:function(i,o,s,a){this.updateOuterDeco(o),this.node=i,this.innerDeco=s,this.contentDOM&&this.updateChildren(a,this.posAtStart),this.dirty=It}},{key:"updateOuterDeco",value:function(i){if(!Zs(i,this.outerDeco)){var o=this.nodeDOM.nodeType!=1,s=this.dom;this.dom=A1(this.dom,this.nodeDOM,Ef(this.outerDeco,this.node,o),Ef(i,this.node,o)),this.dom!=s&&(s.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=i}}},{key:"selectNode",value:function(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}},{key:"deselectNode",value:function(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}},{key:"domAtom",get:function(){return this.node.isAtom}}],[{key:"create",value:function(i,o,s,a,l,u){var c=l.nodeViews[o.type.name],f,h=c&&c(o,l,function(){if(!f)return u;if(f.parent)return f.parent.posBeforeChild(f)},s,a),d=h&&h.dom,m=h&&h.contentDOM;if(o.isText){if(!d)d=document.createTextNode(o.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else if(!d){var g=Be.DOMSerializer.renderSpec(document,o.type.spec.toDOM(o),null,o.attrs);d=g.dom,m=g.contentDOM}!m&&!o.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),o.type.spec.draggable&&(d.draggable=!0));var b=d;return d=O1(d,s,o),h?f=new _M(i,o,s,a,d,m||null,b,h,l,u+1):o.isText?new E1(i,o,s,a,d,b,l):new t(i,o,s,a,d,m||null,b,l,u+1)}}]),t})(lo);function Hb(r,e,t,n,i){O1(n,e,r);var o=new ri(void 0,r,e,t,n,n,n,i,0);return o.contentDOM&&o.updateChildren(i,0),o}var E1=(function(r){_n(t,r);var e=Tn(t);function t(n,i,o,s,a,l,u){return qe(this,t),e.call(this,n,i,o,s,a,null,l,u,0)}return We(t,[{key:"parseRule",value:function(){for(var i=this.nodeDOM.parentNode;i&&i!=this.dom&&!i.pmIsDeco;)i=i.parentNode;return{skip:i||!0}}},{key:"update",value:function(i,o,s,a){return this.dirty==nr||this.dirty!=It&&!this.inParent()||!i.sameMarkup(this.node)?!1:(this.updateOuterDeco(o),(this.dirty!=It||i.text!=this.node.text)&&i.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=i.text,a.trackWrites==this.nodeDOM&&(a.trackWrites=null)),this.node=i,this.dirty=It,!0)}},{key:"inParent",value:function(){for(var i=this.parent.contentDOM,o=this.nodeDOM;o;o=o.parentNode)if(o==i)return!0;return!1}},{key:"domFromPos",value:function(i){return{node:this.nodeDOM,offset:i}}},{key:"localPosFromDOM",value:function(i,o,s){return i==this.nodeDOM?this.posAtStart+Math.min(o,this.node.text.length):mt(nt(t.prototype),"localPosFromDOM",this).call(this,i,o,s)}},{key:"ignoreMutation",value:function(i){return i.type!="characterData"&&i.type!="selection"}},{key:"slice",value:function(i,o,s){var a=this.node.cut(i,o),l=document.createTextNode(a.text);return new t(this.parent,a,this.outerDeco,this.innerDeco,l,l,s)}},{key:"markDirty",value:function(i,o){mt(nt(t.prototype),"markDirty",this).call(this,i,o),this.dom!=this.nodeDOM&&(i==0||o==this.nodeDOM.nodeValue.length)&&(this.dirty=nr)}},{key:"domAtom",get:function(){return!1}},{key:"isText",value:function(i){return this.node.text==i}}]),t})(ri),_1=(function(r){_n(t,r);var e=Tn(t);function t(){return qe(this,t),e.apply(this,arguments)}return We(t,[{key:"parseRule",value:function(){return{ignore:!0}}},{key:"matchesHack",value:function(i){return this.dirty==It&&this.dom.nodeName==i}},{key:"domAtom",get:function(){return!0}},{key:"ignoreForCoords",get:function(){return this.dom.nodeName=="IMG"}}]),t})(lo),_M=(function(r){_n(t,r);var e=Tn(t);function t(n,i,o,s,a,l,u,c,f,h){var d;return qe(this,t),d=e.call(this,n,i,o,s,a,l,u,f,h),d.spec=c,d}return We(t,[{key:"update",value:function(i,o,s,a){if(this.dirty==nr)return!1;if(this.spec.update&&(this.node.type==i.type||this.spec.multiType)){var l=this.spec.update(i,o,s);return l&&this.updateInner(i,o,s,a),l}else return!this.contentDOM&&!i.isLeaf?!1:mt(nt(t.prototype),"update",this).call(this,i,o,s,a)}},{key:"selectNode",value:function(){this.spec.selectNode?this.spec.selectNode():mt(nt(t.prototype),"selectNode",this).call(this)}},{key:"deselectNode",value:function(){this.spec.deselectNode?this.spec.deselectNode():mt(nt(t.prototype),"deselectNode",this).call(this)}},{key:"setSelection",value:function(i,o,s,a){this.spec.setSelection?this.spec.setSelection(i,o,s.root):mt(nt(t.prototype),"setSelection",this).call(this,i,o,s,a)}},{key:"destroy",value:function(){this.spec.destroy&&this.spec.destroy(),mt(nt(t.prototype),"destroy",this).call(this)}},{key:"stopEvent",value:function(i){return this.spec.stopEvent?this.spec.stopEvent(i):!1}},{key:"ignoreMutation",value:function(i){return this.spec.ignoreMutation?this.spec.ignoreMutation(i):mt(nt(t.prototype),"ignoreMutation",this).call(this,i)}}]),t})(ri);function T1(r,e,t){for(var n=r.firstChild,i=!1,o=0;o<e.length;o++){var s=e[o],a=s.dom;if(a.parentNode==r){for(;a!=n;)n=jb(n),i=!0;n=n.nextSibling}else i=!0,r.insertBefore(a,n);if(s instanceof Ys){var l=n?n.previousSibling:r.lastChild;T1(s.contentDOM,s.children,t),n=l?l.nextSibling:r.firstChild}}for(;n;)n=jb(n),i=!0;i&&t.trackWrites==r&&(t.trackWrites=null)}var Qi=function(e){e&&(this.nodeName=e)};Qi.prototype=Object.create(null);var kn=[new Qi];function Ef(r,e,t){if(r.length==0)return kn;for(var n=t?kn[0]:new Qi,i=[n],o=0;o<r.length;o++){var s=r[o].type.attrs;if(s){s.nodeName&&i.push(n=new Qi(s.nodeName));for(var a in s){var l=s[a];l!=null&&(t&&i.length==1&&i.push(n=new Qi(e.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+l:a=="style"?n.style=(n.style?n.style+";":"")+l:a!="nodeName"&&(n[a]=l))}}}return i}function A1(r,e,t,n){if(t==kn&&n==kn)return e;for(var i=e,o=0;o<n.length;o++){var s=n[o],a=t[o];if(o){var l=void 0;a&&a.nodeName==s.nodeName&&i!=r&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=kn[0]),i=l}TM(i,a||kn[0],s)}return i}function TM(r,e,t){for(var n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in t)&&r.removeAttribute(n);for(var i in t)i!="class"&&i!="style"&&i!="nodeName"&&t[i]!=e[i]&&r.setAttribute(i,t[i]);if(e.class!=t.class){for(var o=e.class?e.class.split(" ").filter(Boolean):[],s=t.class?t.class.split(" ").filter(Boolean):[],a=0;a<o.length;a++)s.indexOf(o[a])==-1&&r.classList.remove(o[a]);for(var l=0;l<s.length;l++)o.indexOf(s[l])==-1&&r.classList.add(s[l]);r.classList.length==0&&r.removeAttribute("class")}if(e.style!=t.style){if(e.style)for(var u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,c;c=u.exec(e.style);)r.style.removeProperty(c[1]);t.style&&(r.style.cssText+=t.style)}}function O1(r,e,t){return A1(r,r,kn,Ef(e,t,r.nodeType!=1))}function Zs(r,e){if(r.length!=e.length)return!1;for(var t=0;t<r.length;t++)if(!r[t].type.eq(e[t].type))return!1;return!0}function jb(r){var e=r.nextSibling;return r.parentNode.removeChild(r),e}var AM=(function(){function r(e,t,n){qe(this,r),this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=OM(e.node.content,e)}return We(r,[{key:"destroyBetween",value:function(t,n){if(t!=n){for(var i=t;i<n;i++)this.top.children[i].destroy();this.top.children.splice(t,n-t),this.changed=!0}}},{key:"destroyRest",value:function(){this.destroyBetween(this.index,this.top.children.length)}},{key:"syncToMarks",value:function(t,n,i){for(var o=0,s=this.stack.length>>1,a=Math.min(s,t.length);o<a&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(t[o])&&t[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=It,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);for(var l=-1,u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){var c=this.top.children[u];if(c.matchesMark(t[s])&&!this.isLocked(c.dom)){l=u;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{var f=Ys.create(this.top,t[s],n,i);this.top.children.splice(this.index,0,f),this.top=f,this.changed=!0}this.index=0,s++}}},{key:"findNodeMatch",value:function(t,n,i,o){var s=-1,a;if(o>=this.preMatch.index&&(a=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&a.matchesNode(t,n,i))s=this.top.children.indexOf(a,this.index);else for(var l=this.index,u=Math.min(this.top.children.length,l+5);l<u;l++){var c=this.top.children[l];if(c.matchesNode(t,n,i)&&!this.preMatch.matched.has(c)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}},{key:"updateNodeAt",value:function(t,n,i,o,s){var a=this.top.children[o];return a.dirty==nr&&a.dom==a.contentDOM&&(a.dirty=bn),a.update(t,n,i,s)?(this.destroyBetween(this.index,o),this.index++,!0):!1}},{key:"findIndexWithChild",value:function(t){for(;;){var n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){var i=t.pmViewDesc;if(i){for(var o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==i)return o}return-1}t=n}}},{key:"updateNextNode",value:function(t,n,i,o,s,a){for(var l=this.index;l<this.top.children.length;l++){var u=this.top.children[l];if(u instanceof ri){var c=this.preMatch.matched.get(u);if(c!=null&&c!=s)return!1;var f=u.dom,h=void 0,d=this.isLocked(f)&&!(t.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==t.text&&u.dirty!=nr&&Zs(n,u.outerDeco));if(!d&&u.update(t,n,i,o))return this.destroyBetween(this.index,l),u.dom!=f&&(this.changed=!0),this.index++,!0;if(!d&&(h=this.recreateWrapper(u,t,n,i,o,a)))return this.destroyBetween(this.index,l),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=bn,h.updateChildren(o,a+1),h.dirty=It),this.changed=!0,this.index++,!0;break}}return!1}},{key:"recreateWrapper",value:function(t,n,i,o,s,a){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!Zs(i,t.outerDeco)||!o.eq(t.innerDeco))return null;var l=ri.create(this.top,n,i,o,s,a);if(l.contentDOM){l.children=t.children,t.children=[];var u=yf(l.children),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;f.parent=l}}catch(h){u.e(h)}finally{u.f()}}return t.destroy(),l}},{key:"addNode",value:function(t,n,i,o,s){var a=ri.create(this.top,t,n,i,o,s);a.contentDOM&&a.updateChildren(o,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}},{key:"placeWidget",value:function(t,n,i){var o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(t)&&(t==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{var s=new x1(this.top,t,n,i);this.top.children.splice(this.index++,0,s),this.changed=!0}}},{key:"addTextblockHacks",value:function(){for(var t=this.top.children[this.index-1],n=this.top;t instanceof Ys;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof E1)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((gt||ft)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}},{key:"addHackNode",value:function(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{var i=document.createElement(t);t=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),t=="BR"&&(i.className="ProseMirror-trailingBreak");var o=new _1(this.top,[],i,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}},{key:"isLocked",value:function(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}]),r})();function OM(r,e){var t=e,n=t.children.length,i=r.childCount,o=new Map,s=[];e:for(;i>0;){for(var a=void 0;;)if(n){var l=t.children[n-1];if(l instanceof Ys)t=l,n=l.children.length;else{a=l,n--;break}}else{if(t==e)break e;n=t.parent.children.indexOf(t),t=t.parent}var u=a.node;if(u){if(u!=r.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function CM(r,e){return r.type.side-e.type.side}function NM(r,e,t,n){var i=e.locals(r),o=0;if(i.length==0){for(var s=0;s<r.childCount;s++){var a=r.child(s);n(a,i,e.forChild(o,a),s),o+=a.nodeSize}return}for(var l=0,u=[],c=null,f=0;;){for(var h=void 0,d=void 0;l<i.length&&i[l].to==o;){var m=i[l++];m.widget&&(h?(d||(d=[h])).push(m):h=m)}if(h)if(d){d.sort(CM);for(var g=0;g<d.length;g++)t(d[g],f,!!c)}else t(h,f,!!c);var b=void 0,p=void 0;if(c)p=-1,b=c,c=null;else if(f<r.childCount)p=f,b=r.child(f++);else break;for(var S=0;S<u.length;S++)u[S].to<=o&&u.splice(S--,1);for(;l<i.length&&i[l].from<=o&&i[l].to>o;)u.push(i[l++]);var k=o+b.nodeSize;if(b.isText){var w=k;l<i.length&&i[l].from<w&&(w=i[l].from);for(var x=0;x<u.length;x++)u[x].to<w&&(w=u[x].to);w<k&&(c=b.cut(w-o),b=b.cut(0,w-o),k=w,p=-1)}else for(;l<i.length&&i[l].to<k;)l++;var M=b.isInline&&!b.isLeaf?u.filter(function(I){return!I.inline}):u.slice();n(b,M,e.forChild(o,b),p),o=k}}function RM(r){if(r.nodeName=="UL"||r.nodeName=="OL"){var e=r.style.cssText;r.style.cssText=e+"; list-style: square !important",window.getComputedStyle(r).listStyle,r.style.cssText=e}}function MM(r,e,t,n){for(var i=0,o=0;i<r.childCount&&o<=n;){var s=r.child(i++),a=o;if(o+=s.nodeSize,!!s.isText){for(var l=s.text;i<r.childCount;){var u=r.child(i++);if(o+=u.nodeSize,!u.isText)break;l+=u.text}if(o>=t){if(o>=n&&l.slice(n-e.length-a,n-a)==e)return n-e.length;var c=a<n?l.lastIndexOf(e,n-a-1):-1;if(c>=0&&c+e.length+a>=t)return a+c;if(t==n&&l.length>=n+e.length-a&&l.slice(n-a,n-a+e.length)==e)return n}}}return-1}function _f(r,e,t,n,i){for(var o=[],s=0,a=0;s<r.length;s++){var l=r[s],u=a,c=a+=l.size;u>=t||c<=e?o.push(l):(u<e&&o.push(l.slice(0,e-u,n)),i&&(o.push(i),i=void 0),c>t&&o.push(l.slice(t-u,l.size,n)))}return o}function Rf(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=r.domSelectionRange(),n=r.state.doc;if(!t.focusNode)return null;var i=r.docView.nearestDesc(t.focusNode),o=i&&i.size==0,s=r.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(s<0)return null;var a=n.resolve(s),l,u;if(ta(t)){for(l=s;i&&!i.node;)i=i.parent;var c=i.node;if(i&&c.isAtom&&xe.NodeSelection.isSelectable(c)&&i.parent&&!(c.isInline&&iM(t.focusNode,t.focusOffset,i.dom))){var f=i.posBefore;u=new xe.NodeSelection(s==f?a:n.resolve(f))}}else{if(t instanceof r.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){for(var h=s,d=s,m=0;m<t.rangeCount;m++){var g=t.getRangeAt(m);h=Math.min(h,r.docView.posFromDOM(g.startContainer,g.startOffset,1)),d=Math.max(d,r.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(h<0)return null;var b=d==r.state.selection.anchor?[d,h]:[h,d],p=h1(b,2);l=p[0],s=p[1],a=n.resolve(s)}else l=r.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(l<0)return null}var S=n.resolve(l);if(!u){var k=e=="pointer"||r.state.selection.head<a.pos&&!o?1:-1;u=Mf(r,S,a,k)}return u}function C1(r){return r.editable?r.hasFocus():R1(r)&&document.activeElement&&document.activeElement.contains(r.dom)}function Pr(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=r.state.selection;if(N1(r,t),!!C1(r)){if(!e&&r.input.mouseDown&&r.input.mouseDown.allowDefault&&ft){var n=r.domSelectionRange(),i=r.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&En(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){r.input.mouseDown.delayedSelectionSync=!0,r.domObserver.setCurSelection();return}}if(r.domObserver.disconnectSelection(),r.cursorWrapper)PM(r);else{var o=t.anchor,s=t.head,a,l;Ub&&!(t instanceof xe.TextSelection)&&(t.$from.parent.inlineContent||(a=qb(r,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(l=qb(r,t.to))),r.docView.setSelection(o,s,r,e),Ub&&(a&&Wb(a),l&&Wb(l)),t.visible?r.dom.classList.remove("ProseMirror-hideselection"):(r.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&IM(r))}r.domObserver.setCurSelection(),r.domObserver.connectSelection()}}var Ub=gt||ft&&g1<63;function qb(r,e){var t=r.docView.domFromPos(e,0),n=t.node,i=t.offset,o=i<n.childNodes.length?n.childNodes[i]:null,s=i?n.childNodes[i-1]:null;if(gt&&o&&o.contentEditable=="false")return df(o);if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o)return df(o);if(s)return df(s)}}function df(r){return r.contentEditable="true",gt&&r.draggable&&(r.draggable=!1,r.wasDraggable=!0),r}function Wb(r){r.contentEditable="false",r.wasDraggable&&(r.draggable=!0,r.wasDraggable=null)}function IM(r){var e=r.dom.ownerDocument;e.removeEventListener("selectionchange",r.input.hideSelectionGuard);var t=r.domSelectionRange(),n=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",r.input.hideSelectionGuard=function(){(t.anchorNode!=n||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",r.input.hideSelectionGuard),setTimeout(function(){(!C1(r)||r.state.selection.visible)&&r.dom.classList.remove("ProseMirror-hideselection")},20))})}function PM(r){var e=r.domSelection();if(e){var t=r.cursorWrapper.dom,n=t.nodeName=="IMG";n?e.collapse(t.parentNode,it(t)+1):e.collapse(t,0),!n&&!r.state.selection.visible&&Et&&Gr<=11&&(t.disabled=!0,t.disabled=!1)}}function N1(r,e){if(e instanceof xe.NodeSelection){var t=r.docView.descAt(e.from);t!=r.lastSelectedViewDesc&&(Vb(r),t&&t.selectNode(),r.lastSelectedViewDesc=t)}else Vb(r)}function Vb(r){r.lastSelectedViewDesc&&(r.lastSelectedViewDesc.parent&&r.lastSelectedViewDesc.deselectNode(),r.lastSelectedViewDesc=void 0)}function Mf(r,e,t,n){return r.someProp("createSelectionBetween",function(i){return i(r,e,t)})||xe.TextSelection.between(e,t,n)}function $b(r){return r.editable&&!r.hasFocus()?!1:R1(r)}function R1(r){var e=r.domSelectionRange();if(!e.anchorNode)return!1;try{return r.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(r.editable||r.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function DM(r){var e=r.docView.domFromPos(r.state.selection.anchor,0),t=r.domSelectionRange();return En(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Tf(r,e){var t=r.selection,n=t.$anchor,i=t.$head,o=e>0?n.max(i):n.min(i),s=o.parent.inlineContent?o.depth?r.doc.resolve(e>0?o.after():o.before()):null:o;return s&&xe.Selection.findFrom(s,e)}function $r(r,e){return r.dispatch(r.state.tr.setSelection(e).scrollIntoView()),!0}function Kb(r,e,t){var n=r.state.selection;if(n instanceof xe.TextSelection)if(t.indexOf("s")>-1){var i=n.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;var s=r.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return $r(r,new xe.TextSelection(n.$anchor,s))}else if(n.empty){if(r.endOfTextblock(e>0?"forward":"backward")){var a=Tf(r.state,e);return a&&a instanceof xe.NodeSelection?$r(r,a):!1}else if(!(Nt&&t.indexOf("m")>-1)){var l=n.$head,u=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter,c;if(!u||u.isText)return!1;var f=e<0?l.pos-u.nodeSize:l.pos;return u.isAtom||(c=r.docView.descAt(f))&&!c.contentDOM?xe.NodeSelection.isSelectable(u)?$r(r,new xe.NodeSelection(e<0?r.state.doc.resolve(l.pos-u.nodeSize):l)):ao?$r(r,new xe.TextSelection(r.state.doc.resolve(e<0?f:f+u.nodeSize))):!1:!1}}else return!1;else{if(n instanceof xe.NodeSelection&&n.node.isInline)return $r(r,new xe.TextSelection(e>0?n.$to:n.$from));var h=Tf(r.state,e);return h?$r(r,h):!1}}function Qs(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function eo(r,e){var t=r.pmViewDesc;return t&&t.size==0&&(e<0||r.nextSibling||r.nodeName!="BR")}function ei(r,e){return e<0?LM(r):FM(r)}function LM(r){var e=r.domSelectionRange(),t=e.focusNode,n=e.focusOffset;if(t){var i,o,s=!1;for(Mt&&t.nodeType==1&&n<Qs(t)&&eo(t.childNodes[n],-1)&&(s=!0);;)if(n>0){if(t.nodeType!=1)break;var a=t.childNodes[n-1];if(eo(a,-1))i=t,o=--n;else if(a.nodeType==3)t=a,n=t.nodeValue.length;else break}else{if(M1(t))break;for(var l=t.previousSibling;l&&eo(l,-1);)i=t.parentNode,o=it(l),l=l.previousSibling;if(l)t=l,n=Qs(t);else{if(t=t.parentNode,t==r.dom)break;n=0}}s?Af(r,t,n):i&&Af(r,i,o)}}function FM(r){var e=r.domSelectionRange(),t=e.focusNode,n=e.focusOffset;if(t){for(var i=Qs(t),o,s;;)if(n<i){if(t.nodeType!=1)break;var a=t.childNodes[n];if(eo(a,1))o=t,s=++n;else break}else{if(M1(t))break;for(var l=t.nextSibling;l&&eo(l,1);)o=l.parentNode,s=it(l)+1,l=l.nextSibling;if(l)t=l,n=0,i=Qs(t);else{if(t=t.parentNode,t==r.dom)break;n=i=0}}o&&Af(r,o,s)}}function M1(r){var e=r.pmViewDesc;return e&&e.node&&e.node.isBlock}function BM(r,e){for(;r&&e==r.childNodes.length&&!so(r);)e=it(r)+1,r=r.parentNode;for(;r&&e<r.childNodes.length;){var t=r.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;r=t,e=0}}function zM(r,e){for(;r&&!e&&!so(r);)e=it(r),r=r.parentNode;for(;r&&e;){var t=r.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;r=t,e=r.childNodes.length}}function Af(r,e,t){if(e.nodeType!=3){var n,i;(i=BM(e,t))?(e=i,t=0):(n=zM(e,t))&&(e=n,t=n.nodeValue.length)}var o=r.domSelection();if(o){if(ta(o)){var s=document.createRange();s.setEnd(e,t),s.setStart(e,t),o.removeAllRanges(),o.addRange(s)}else o.extend&&o.extend(e,t);r.domObserver.setCurSelection();var a=r.state;setTimeout(function(){r.state==a&&Pr(r)},50)}}function Gb(r,e){var t=r.state.doc.resolve(e);if(!(ft||aM)&&t.parent.inlineContent){var n=r.coordsAtPos(e);if(e>t.start()){var i=r.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>n.top&&o<n.bottom&&Math.abs(i.left-n.left)>1)return i.left<n.left?"ltr":"rtl"}if(e<t.end()){var s=r.coordsAtPos(e+1),a=(s.top+s.bottom)/2;if(a>n.top&&a<n.bottom&&Math.abs(s.left-n.left)>1)return s.left>n.left?"ltr":"rtl"}}var l=getComputedStyle(r.dom).direction;return l=="rtl"?"rtl":"ltr"}function Jb(r,e,t){var n=r.state.selection;if(n instanceof xe.TextSelection&&!n.empty||t.indexOf("s")>-1||Nt&&t.indexOf("m")>-1)return!1;var i=n.$from,o=n.$to;if(!i.parent.inlineContent||r.endOfTextblock(e<0?"up":"down")){var s=Tf(r.state,e);if(s&&s instanceof xe.NodeSelection)return $r(r,s)}if(!i.parent.inlineContent){var a=e<0?i:o,l=n instanceof xe.AllSelection?xe.Selection.near(a,e):xe.Selection.findFrom(a,e);return l?$r(r,l):!1}return!1}function Xb(r,e){if(!(r.state.selection instanceof xe.TextSelection))return!0;var t=r.state.selection,n=t.$head,i=t.$anchor,o=t.empty;if(!n.sameParent(i))return!0;if(!o)return!1;if(r.endOfTextblock(e>0?"forward":"backward"))return!0;var s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){var a=r.state.tr;return e<0?a.delete(n.pos-s.nodeSize,n.pos):a.delete(n.pos,n.pos+s.nodeSize),r.dispatch(a),!0}return!1}function Yb(r,e,t){r.domObserver.stop(),e.contentEditable=t,r.domObserver.start()}function HM(r){if(!gt||r.state.selection.$head.parentOffset>0)return!1;var e=r.domSelectionRange(),t=e.focusNode,n=e.focusOffset;if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){var i=t.firstChild;Yb(r,i,"true"),setTimeout(function(){return Yb(r,i,"false")},20)}return!1}function jM(r){var e="";return r.ctrlKey&&(e+="c"),r.metaKey&&(e+="m"),r.altKey&&(e+="a"),r.shiftKey&&(e+="s"),e}function UM(r,e){var t=e.keyCode,n=jM(e);if(t==8||Nt&&t==72&&n=="c")return Xb(r,-1)||ei(r,-1);if(t==46&&!e.shiftKey||Nt&&t==68&&n=="c")return Xb(r,1)||ei(r,1);if(t==13||t==27)return!0;if(t==37||Nt&&t==66&&n=="c"){var i=t==37?Gb(r,r.state.selection.from)=="ltr"?-1:1:-1;return Kb(r,i,n)||ei(r,i)}else if(t==39||Nt&&t==70&&n=="c"){var o=t==39?Gb(r,r.state.selection.from)=="ltr"?1:-1:1;return Kb(r,o,n)||ei(r,o)}else{if(t==38||Nt&&t==80&&n=="c")return Jb(r,-1,n)||ei(r,-1);if(t==40||Nt&&t==78&&n=="c")return HM(r)||Jb(r,1,n)||ei(r,1);if(n==(Nt?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function If(r,e){r.someProp("transformCopied",function(p){e=p(e,r)});for(var t=[],n=e,i=n.content,o=n.openStart,s=n.openEnd;o>1&&s>1&&i.childCount==1&&i.firstChild.childCount==1;){o--,s--;var a=i.firstChild;t.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),i=a.content}var l=r.someProp("clipboardSerializer")||Be.DOMSerializer.fromSchema(r.state.schema),u=F1(),c=u.createElement("div");c.appendChild(l.serializeFragment(i,{document:u}));for(var f=c.firstChild,h,d=0;f&&f.nodeType==1&&(h=L1[f.nodeName.toLowerCase()]);){for(var m=h.length-1;m>=0;m--){for(var g=u.createElement(h[m]);c.firstChild;)g.appendChild(c.firstChild);c.appendChild(g),d++}f=c.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice","".concat(o," ").concat(s).concat(d?" -".concat(d):""," ").concat(JSON.stringify(t)));var b=r.someProp("clipboardTextSerializer",function(p){return p(e,r)})||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:b,slice:e}}function Pf(r,e,t,n,i){var o=i.parent.type.spec.code,s,a;if(!t&&!e)return null;var l=!!e&&(n||o||!t);if(l){if(r.someProp("transformPastedText",function(M){e=M(e,o||n,r)}),o)return a=new Be.Slice(Be.Fragment.from(r.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),r.someProp("transformPasted",function(M){a=M(a,r,!0)}),a;var u=r.someProp("clipboardTextParser",function(M){return M(e,i,n,r)});if(u)a=u;else{var c=i.marks(),f=r.state.schema,h=Be.DOMSerializer.fromSchema(f);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(function(M){var I=s.appendChild(document.createElement("p"));M&&I.appendChild(h.serializeNode(f.text(M,c)))})}}else r.someProp("transformPastedHTML",function(M){t=M(t,r)}),s=$M(t),ao&&KM(s);var d=s&&s.querySelector("[data-pm-slice]"),m=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(m&&m[3])for(var g=+m[3];g>0;g--){for(var b=s.firstChild;b&&b.nodeType!=1;)b=b.nextSibling;if(!b)break;s=b}if(!a){var p=r.someProp("clipboardParser")||r.someProp("domParser")||Be.DOMParser.fromSchema(r.state.schema);a=p.parseSlice(s,{preserveWhitespace:!!(l||m),context:i,ruleFromNode:function(I){return I.nodeName=="BR"&&!I.nextSibling&&I.parentNode&&!qM.test(I.parentNode.nodeName)?{ignore:!0}:null}})}if(m)a=GM(Zb(a,+m[1],+m[2]),m[4]);else if(a=Be.Slice.maxOpen(WM(a.content,i),!0),a.openStart||a.openEnd){for(var S=0,k=0,w=a.content.firstChild;S<a.openStart&&!w.type.spec.isolating;S++,w=w.firstChild);for(var x=a.content.lastChild;k<a.openEnd&&!x.type.spec.isolating;k++,x=x.lastChild);a=Zb(a,S,k)}return r.someProp("transformPasted",function(M){a=M(a,r,l)}),a}var qM=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function WM(r,e){if(r.childCount<2)return r;for(var t=function(){var s=e.node(i),a=s.contentMatchAt(e.index(i)),l,u=[];if(r.forEach(function(c){if(u){var f=a.findWrapping(c.type),h;if(!f)return u=null;if(h=u.length&&l.length&&P1(f,l,c,u[u.length-1],0))u[u.length-1]=h;else{u.length&&(u[u.length-1]=D1(u[u.length-1],l.length));var d=I1(c,f);u.push(d),a=a.matchType(d.type),l=f}}}),u)return{v:Be.Fragment.from(u)}},n,i=e.depth;i>=0;i--)if(n=t(),n)return n.v;return r}function I1(r,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=e.length-1;n>=t;n--)r=e[n].create(null,Be.Fragment.from(r));return r}function P1(r,e,t,n,i){if(i<r.length&&i<e.length&&r[i]==e[i]){var o=P1(r,e,t,n.lastChild,i+1);if(o)return n.copy(n.content.replaceChild(n.childCount-1,o));var s=n.contentMatchAt(n.childCount);if(s.matchType(i==r.length-1?t.type:r[i+1]))return n.copy(n.content.append(Be.Fragment.from(I1(t,r,i+1))))}}function D1(r,e){if(e==0)return r;var t=r.content.replaceChild(r.childCount-1,D1(r.lastChild,e-1)),n=r.contentMatchAt(r.childCount).fillBefore(Be.Fragment.empty,!0);return r.copy(t.append(n))}function Of(r,e,t,n,i,o){var s=e<0?r.firstChild:r.lastChild,a=s.content;return r.childCount>1&&(o=0),i<n-1&&(a=Of(a,e,t,n,i+1,o)),i>=t&&(a=e<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(Be.Fragment.empty,!0))),r.replaceChild(e<0?0:r.childCount-1,s.copy(a))}function Zb(r,e,t){return e<r.openStart&&(r=new Be.Slice(Of(r.content,-1,e,r.openStart,0,r.openEnd),e,r.openEnd)),t<r.openEnd&&(r=new Be.Slice(Of(r.content,1,t,r.openEnd,0,0),r.openStart,t)),r}var L1={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Qb=null;function F1(){return Qb||(Qb=document.implementation.createHTMLDocument("title"))}var pf=null;function VM(r){var e=window.trustedTypes;return e?(pf||(pf=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:function(n){return n}})),pf.createHTML(r)):r}function $M(r){var e=/^(\s*<meta [^>]*>)*/.exec(r);e&&(r=r.slice(e[0].length));var t=F1().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(r),i;if((i=n&&L1[n[1].toLowerCase()])&&(r=i.map(function(s){return"<"+s+">"}).join("")+r+i.map(function(s){return"</"+s+">"}).reverse().join("")),t.innerHTML=VM(r),i)for(var o=0;o<i.length;o++)t=t.querySelector(i[o])||t;return t}function KM(r){for(var e=r.querySelectorAll(ft?"span:not([class]):not([style])":"span.Apple-converted-space"),t=0;t<e.length;t++){var n=e[t];n.childNodes.length==1&&n.textContent=="\xA0"&&n.parentNode&&n.parentNode.replaceChild(r.ownerDocument.createTextNode(" "),n)}}function GM(r,e){if(!r.size)return r;var t=r.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return r}for(var i=r.content,o=r.openStart,s=r.openEnd,a=n.length-2;a>=0;a-=2){var l=t.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;i=Be.Fragment.from(l.create(n[a+1],i)),o++,s++}return new Be.Slice(i,o,s)}var vt={},yt={},JM={touchstart:!0,touchmove:!0},XM=We(function r(){qe(this,r),this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null});function YM(r){var e=function(){var i=vt[t];r.dom.addEventListener(t,r.input.eventHandlers[t]=function(o){QM(r,o)&&!Df(r,o)&&(r.editable||!(o.type in yt))&&i(r,o)},JM[t]?{passive:!0}:void 0)};for(var t in vt)e();gt&&r.dom.addEventListener("input",function(){return null}),Cf(r)}function Kr(r,e){r.input.lastSelectionOrigin=e,r.input.lastSelectionTime=Date.now()}function ZM(r){r.domObserver.stop();for(var e in r.input.eventHandlers)r.dom.removeEventListener(e,r.input.eventHandlers[e]);clearTimeout(r.input.composingTimeout),clearTimeout(r.input.lastIOSEnterFallbackTimeout)}function Cf(r){r.someProp("handleDOMEvents",function(e){for(var t in e)r.input.eventHandlers[t]||r.dom.addEventListener(t,r.input.eventHandlers[t]=function(n){return Df(r,n)})})}function Df(r,e){return r.someProp("handleDOMEvents",function(t){var n=t[e.type];return n?n(r,e)||e.defaultPrevented:!1})}function QM(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var t=e.target;t!=r.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function eI(r,e){!Df(r,e)&&vt[e.type]&&(r.editable||!(e.type in yt))&&vt[e.type](r,e)}yt.keydown=function(r,e){var t=e;if(r.input.shiftKey=t.keyCode==16||t.shiftKey,!z1(r,t)&&(r.input.lastKeyCode=t.keyCode,r.input.lastKeyCodeTime=Date.now(),!(Ir&&ft&&t.keyCode==13)))if(t.keyCode!=229&&r.domObserver.forceFlush(),si&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){var n=Date.now();r.input.lastIOSEnter=n,r.input.lastIOSEnterFallbackTimeout=setTimeout(function(){r.input.lastIOSEnter==n&&(r.someProp("handleKeyDown",function(i){return i(r,wn(13,"Enter"))}),r.input.lastIOSEnter=0)},200)}else r.someProp("handleKeyDown",function(i){return i(r,t)})||UM(r,t)?t.preventDefault():Kr(r,"key")};yt.keyup=function(r,e){e.keyCode==16&&(r.input.shiftKey=!1)};yt.keypress=function(r,e){var t=e;if(!(z1(r,t)||!t.charCode||t.ctrlKey&&!t.altKey||Nt&&t.metaKey)){if(r.someProp("handleKeyPress",function(s){return s(r,t)})){t.preventDefault();return}var n=r.state.selection;if(!(n instanceof xe.TextSelection)||!n.$from.sameParent(n.$to)){var i=String.fromCharCode(t.charCode),o=function(){return r.state.tr.insertText(i).scrollIntoView()};!/[\r\n]/.test(i)&&!r.someProp("handleTextInput",function(s){return s(r,n.$from.pos,n.$to.pos,i,o)})&&r.dispatch(o()),t.preventDefault()}}};function ra(r){return{left:r.clientX,top:r.clientY}}function tI(r,e){var t=e.x-r.clientX,n=e.y-r.clientY;return t*t+n*n<100}function Lf(r,e,t,n,i){if(n==-1)return!1;for(var o=r.state.doc.resolve(n),s=function(c){if(r.someProp(e,function(f){return c>o.depth?f(r,t,o.nodeAfter,o.before(c),i,!0):f(r,t,o.node(c),o.before(c),i,!1)}))return{v:!0}},a,l=o.depth+1;l>0;l--)if(a=s(l),a)return a.v;return!1}function ni(r,e,t){if(r.focused||r.focus(),!r.state.selection.eq(e)){var n=r.state.tr.setSelection(e);t=="pointer"&&n.setMeta("pointer",!0),r.dispatch(n)}}function rI(r,e){if(e==-1)return!1;var t=r.state.doc.resolve(e),n=t.nodeAfter;return n&&n.isAtom&&xe.NodeSelection.isSelectable(n)?(ni(r,new xe.NodeSelection(t),"pointer"),!0):!1}function nI(r,e){if(e==-1)return!1;var t=r.state.selection,n,i;t instanceof xe.NodeSelection&&(n=t.node);for(var o=r.state.doc.resolve(e),s=o.depth+1;s>0;s--){var a=s>o.depth?o.nodeAfter:o.node(s);if(xe.NodeSelection.isSelectable(a)){n&&t.$from.depth>0&&s>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?i=o.before(t.$from.depth):i=o.before(s);break}}return i!=null?(ni(r,xe.NodeSelection.create(r.state.doc,i),"pointer"),!0):!1}function iI(r,e,t,n,i){return Lf(r,"handleClickOn",e,t,n)||r.someProp("handleClick",function(o){return o(r,e,n)})||(i?nI(r,t):rI(r,t))}function oI(r,e,t,n){return Lf(r,"handleDoubleClickOn",e,t,n)||r.someProp("handleDoubleClick",function(i){return i(r,e,n)})}function sI(r,e,t,n){return Lf(r,"handleTripleClickOn",e,t,n)||r.someProp("handleTripleClick",function(i){return i(r,e,n)})||aI(r,t,n)}function aI(r,e,t){if(t.button!=0)return!1;var n=r.state.doc;if(e==-1)return n.inlineContent?(ni(r,xe.TextSelection.create(n,0,n.content.size),"pointer"),!0):!1;for(var i=n.resolve(e),o=i.depth+1;o>0;o--){var s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)ni(r,xe.TextSelection.create(n,a+1,a+1+s.content.size),"pointer");else if(xe.NodeSelection.isSelectable(s))ni(r,xe.NodeSelection.create(n,a),"pointer");else continue;return!0}}function Ff(r){return ro(r)}var B1=Nt?"metaKey":"ctrlKey";vt.mousedown=function(r,e){var t=e;r.input.shiftKey=t.shiftKey;var n=Ff(r),i=Date.now(),o="singleClick";i-r.input.lastClick.time<500&&tI(t,r.input.lastClick)&&!t[B1]&&r.input.lastClick.button==t.button&&(r.input.lastClick.type=="singleClick"?o="doubleClick":r.input.lastClick.type=="doubleClick"&&(o="tripleClick")),r.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:o,button:t.button};var s=r.posAtCoords(ra(t));s&&(o=="singleClick"?(r.input.mouseDown&&r.input.mouseDown.done(),r.input.mouseDown=new lI(r,s,t,!!n)):(o=="doubleClick"?oI:sI)(r,s.pos,s.inside,t)?t.preventDefault():Kr(r,"pointer"))};var lI=(function(){function r(e,t,n,i){var o=this;qe(this,r),this.view=e,this.pos=t,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[B1],this.allowDefault=n.shiftKey;var s,a;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),a=t.inside;else{var l=e.state.doc.resolve(t.pos);s=l.parent,a=l.depth?l.before():0}var u=i?null:n.target,c=u?e.docView.nearestDesc(u,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;var f=e.state.selection;(n.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||f instanceof xe.NodeSelection&&f.from<=a&&f.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Mt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){o.view.input.mouseDown==o&&o.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Kr(e,"pointer")}return We(r,[{key:"done",value:function(){var t=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(function(){return Pr(t.view)}),this.view.input.mouseDown=null}},{key:"up",value:function(t){if(this.done(),!!this.view.dom.contains(t.target)){var n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(ra(t))),this.updateAllowDefault(t),this.allowDefault||!n?Kr(this.view,"pointer"):iI(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||gt&&this.mightDrag&&!this.mightDrag.node.isAtom||ft&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ni(this.view,xe.Selection.near(this.view.state.doc.resolve(n.pos)),"pointer"),t.preventDefault()):Kr(this.view,"pointer")}}},{key:"move",value:function(t){this.updateAllowDefault(t),Kr(this.view,"pointer"),t.buttons==0&&this.done()}},{key:"updateAllowDefault",value:function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}]),r})();vt.touchstart=function(r){r.input.lastTouch=Date.now(),Ff(r),Kr(r,"pointer")};vt.touchmove=function(r){r.input.lastTouch=Date.now(),Kr(r,"pointer")};vt.contextmenu=function(r){return Ff(r)};function z1(r,e){return r.composing?!0:gt&&Math.abs(e.timeStamp-r.input.compositionEndedAt)<500?(r.input.compositionEndedAt=-2e8,!0):!1}var uI=Ir?5e3:-1;yt.compositionstart=yt.compositionupdate=function(r){if(!r.composing){r.domObserver.flush();var e=r.state,t=e.selection.$to;if(e.selection instanceof xe.TextSelection&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(function(l){return l.type.spec.inclusive===!1})))r.markCursor=r.state.storedMarks||t.marks(),ro(r,!0),r.markCursor=null;else if(ro(r,!e.selection.empty),Mt&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length)for(var n=r.domSelectionRange(),i=n.focusNode,o=n.focusOffset;i&&i.nodeType==1&&o!=0;){var s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){var a=r.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else i=s,o=-1}r.input.composing=!0}H1(r,uI)};yt.compositionend=function(r,e){r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=e.timeStamp,r.input.compositionPendingChanges=r.domObserver.pendingRecords().length?r.input.compositionID:0,r.input.compositionNode=null,r.input.compositionPendingChanges&&Promise.resolve().then(function(){return r.domObserver.flush()}),r.input.compositionID++,H1(r,20))};function H1(r,e){clearTimeout(r.input.composingTimeout),e>-1&&(r.input.composingTimeout=setTimeout(function(){return ro(r)},e))}function j1(r){for(r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=fI());r.input.compositionNodes.length>0;)r.input.compositionNodes.pop().markParentsDirty()}function cI(r){var e=r.domSelectionRange();if(!e.focusNode)return null;var t=rM(e.focusNode,e.focusOffset),n=nM(e.focusNode,e.focusOffset);if(t&&n&&t!=n){var i=n.pmViewDesc,o=r.domObserver.lastChangedTextNode;if(t==o||n==o)return o;if(!i||!i.isText(n.nodeValue))return n;if(r.input.compositionNode==n){var s=t.pmViewDesc;if(!(!s||!s.isText(t.nodeValue)))return n}}return t||n}function fI(){var r=document.createEvent("Event");return r.initEvent("event",!0,!0),r.timeStamp}function ro(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!(Ir&&r.domObserver.flushingSoon>=0)){if(r.domObserver.forceFlush(),j1(r),e||r.docView&&r.docView.dirty){var t=Rf(r),n=r.state.selection;return t&&!t.eq(n)?r.dispatch(r.state.tr.setSelection(t)):(r.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?r.dispatch(r.state.tr.deleteSelection()):r.updateState(r.state),!0}return!1}}function hI(r,e){if(r.dom.parentNode){var t=r.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";var n=getSelection(),i=document.createRange();i.selectNodeContents(e),r.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t),r.focus()},50)}}var no=Et&&Gr<15||si&&lM<604;vt.copy=yt.cut=function(r,e){var t=e,n=r.state.selection,i=t.type=="cut";if(!n.empty){var o=no?null:t.clipboardData,s=n.content(),a=If(r,s),l=a.dom,u=a.text;o?(t.preventDefault(),o.clearData(),o.setData("text/html",l.innerHTML),o.setData("text/plain",u)):hI(r,l),i&&r.dispatch(r.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}};function dI(r){return r.openStart==0&&r.openEnd==0&&r.content.childCount==1?r.content.firstChild:null}function pI(r,e){if(r.dom.parentNode){var t=r.input.shiftKey||r.state.selection.$from.parent.type.spec.code,n=r.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();var i=r.input.shiftKey&&r.input.lastKeyCode!=45;setTimeout(function(){r.focus(),n.parentNode&&n.parentNode.removeChild(n),t?io(r,n.value,null,i,e):io(r,n.textContent,n.innerHTML,i,e)},50)}}function io(r,e,t,n,i){var o=Pf(r,e,t,n,r.state.selection.$from);if(r.someProp("handlePaste",function(l){return l(r,i,o||Be.Slice.empty)}))return!0;if(!o)return!1;var s=dI(o),a=s?r.state.tr.replaceSelectionWith(s,n):r.state.tr.replaceSelection(o);return r.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function U1(r){var e=r.getData("text/plain")||r.getData("Text");if(e)return e;var t=r.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}yt.paste=function(r,e){var t=e;if(!(r.composing&&!Ir)){var n=no?null:t.clipboardData,i=r.input.shiftKey&&r.input.lastKeyCode!=45;n&&io(r,U1(n),n.getData("text/html"),i,t)?t.preventDefault():pI(r,t)}};var q1=We(function r(e,t,n){qe(this,r),this.slice=e,this.move=t,this.node=n}),mI=Nt?"altKey":"ctrlKey";function W1(r,e){var t=r.someProp("dragCopies",function(n){return!n(e)});return t??!e[mI]}vt.dragstart=function(r,e){var t=e,n=r.input.mouseDown;if(n&&n.done(),!!t.dataTransfer){var i=r.state.selection,o=i.empty?null:r.posAtCoords(ra(t)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof xe.NodeSelection?i.to-1:i.to))){if(n&&n.mightDrag)s=xe.NodeSelection.create(r.state.doc,n.mightDrag.pos);else if(t.target&&t.target.nodeType==1){var a=r.docView.nearestDesc(t.target,!0);a&&a.node.type.spec.draggable&&a!=r.docView&&(s=xe.NodeSelection.create(r.state.doc,a.posBefore))}}var l=(s||r.state.selection).content(),u=If(r,l),c=u.dom,f=u.text,h=u.slice;(!t.dataTransfer.files.length||!ft||g1>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(no?"Text":"text/html",c.innerHTML),t.dataTransfer.effectAllowed="copyMove",no||t.dataTransfer.setData("text/plain",f),r.dragging=new q1(h,W1(r,t),s)}};vt.dragend=function(r){var e=r.dragging;window.setTimeout(function(){r.dragging==e&&(r.dragging=null)},50)};yt.dragover=yt.dragenter=function(r,e){return e.preventDefault()};yt.drop=function(r,e){var t=e,n=r.dragging;if(r.dragging=null,!!t.dataTransfer){var i=r.posAtCoords(ra(t));if(i){var o=r.state.doc.resolve(i.pos),s=n&&n.slice;s?r.someProp("transformPasted",function(b){s=b(s,r,!1)}):s=Pf(r,U1(t.dataTransfer),no?null:t.dataTransfer.getData("text/html"),!1,o);var a=!!(n&&W1(r,t));if(r.someProp("handleDrop",function(b){return b(r,t,s||Be.Slice.empty,a)})){t.preventDefault();return}if(s){t.preventDefault();var l=s?QR.dropPoint(r.state.doc,o.pos,s):o.pos;l==null&&(l=o.pos);var u=r.state.tr;if(a){var c=n.node;c?c.replace(u):u.deleteSelection()}var f=u.mapping.map(l),h=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=u.doc;if(h?u.replaceRangeWith(f,f,s.content.firstChild):u.replaceRange(f,f,s),!u.doc.eq(d)){var m=u.doc.resolve(f);if(h&&xe.NodeSelection.isSelectable(s.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new xe.NodeSelection(m));else{var g=u.mapping.map(l);u.mapping.maps[u.mapping.maps.length-1].forEach(function(b,p,S,k){return g=k}),u.setSelection(Mf(r,m,u.doc.resolve(g)))}r.focus(),r.dispatch(u.setMeta("uiEvent","drop"))}}}}};vt.focus=function(r){r.input.lastFocus=Date.now(),r.focused||(r.domObserver.stop(),r.dom.classList.add("ProseMirror-focused"),r.domObserver.start(),r.focused=!0,setTimeout(function(){r.docView&&r.hasFocus()&&!r.domObserver.currentSelection.eq(r.domSelectionRange())&&Pr(r)},20))};vt.blur=function(r,e){var t=e;r.focused&&(r.domObserver.stop(),r.dom.classList.remove("ProseMirror-focused"),r.domObserver.start(),t.relatedTarget&&r.dom.contains(t.relatedTarget)&&r.domObserver.currentSelection.clear(),r.focused=!1)};vt.beforeinput=function(r,e){var t=e;if(ft&&Ir&&t.inputType=="deleteContentBackward"){r.domObserver.flushSoon();var n=r.input.domChangeCount;setTimeout(function(){if(r.input.domChangeCount==n&&(r.dom.blur(),r.focus(),!r.someProp("handleKeyDown",function(o){return o(r,wn(8,"Backspace"))}))){var i=r.state.selection.$cursor;i&&i.pos>0&&r.dispatch(r.state.tr.delete(i.pos-1,i.pos).scrollIntoView())}},50)}};for(mf in yt)vt[mf]=yt[mf];var mf;function oo(r,e){if(r==e)return!0;for(var t in r)if(r[t]!==e[t])return!1;for(var n in e)if(!(n in r))return!1;return!0}var e1=(function(){function r(e,t){qe(this,r),this.toDOM=e,this.spec=t||Sn,this.side=this.spec.side||0}return We(r,[{key:"map",value:function(t,n,i,o){var s=t.mapResult(n.from+o,this.side<0?-1:1),a=s.pos,l=s.deleted;return l?null:new An(a-i,a-i,this)}},{key:"valid",value:function(){return!0}},{key:"eq",value:function(t){return this==t||t instanceof r&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&oo(this.spec,t.spec))}},{key:"destroy",value:function(t){this.spec.destroy&&this.spec.destroy(t)}}]),r})(),to=(function(){function r(e,t){qe(this,r),this.attrs=e,this.spec=t||Sn}return We(r,[{key:"map",value:function(t,n,i,o){var s=t.map(n.from+o,this.spec.inclusiveStart?-1:1)-i,a=t.map(n.to+o,this.spec.inclusiveEnd?1:-1)-i;return s>=a?null:new An(s,a,this)}},{key:"valid",value:function(t,n){return n.from<n.to}},{key:"eq",value:function(t){return this==t||t instanceof r&&oo(this.attrs,t.attrs)&&oo(this.spec,t.spec)}},{key:"destroy",value:function(){}}],[{key:"is",value:function(t){return t.type instanceof r}}]),r})(),gI=(function(){function r(e,t){qe(this,r),this.attrs=e,this.spec=t||Sn}return We(r,[{key:"map",value:function(t,n,i,o){var s=t.mapResult(n.from+o,1);if(s.deleted)return null;var a=t.mapResult(n.to+o,-1);return a.deleted||a.pos<=s.pos?null:new An(s.pos-i,a.pos-i,this)}},{key:"valid",value:function(t,n){var i=t.content.findIndex(n.from),o=i.index,s=i.offset,a;return s==n.from&&!(a=t.child(o)).isText&&s+a.nodeSize==n.to}},{key:"eq",value:function(t){return this==t||t instanceof r&&oo(this.attrs,t.attrs)&&oo(this.spec,t.spec)}},{key:"destroy",value:function(){}}]),r})(),An=(function(){function r(e,t,n){qe(this,r),this.from=e,this.to=t,this.type=n}return We(r,[{key:"copy",value:function(t,n){return new r(t,n,this.type)}},{key:"eq",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}},{key:"map",value:function(t,n,i){return this.type.map(t,this,n,i)}},{key:"spec",get:function(){return this.type.spec}},{key:"inline",get:function(){return this.type instanceof to}},{key:"widget",get:function(){return this.type instanceof e1}}],[{key:"widget",value:function(t,n,i){return new r(t,t,new e1(n,i))}},{key:"inline",value:function(t,n,i,o){return new r(t,n,new to(i,o))}},{key:"node",value:function(t,n,i,o){return new r(t,n,new gI(i,o))}}]),r})(),ti=[],Sn={},Vt=(function(){function r(e,t){qe(this,r),this.local=e.length?e:ti,this.children=t.length?t:ti}return We(r,[{key:"find",value:function(t,n,i){var o=[];return this.findInner(t??0,n??1e9,o,0,i),o}},{key:"findInner",value:function(t,n,i,o,s){for(var a=0;a<this.local.length;a++){var l=this.local[a];l.from<=n&&l.to>=t&&(!s||s(l.spec))&&i.push(l.copy(l.from+o,l.to+o))}for(var u=0;u<this.children.length;u+=3)if(this.children[u]<n&&this.children[u+1]>t){var c=this.children[u]+1;this.children[u+2].findInner(t-c,n-c,i,o+c,s)}}},{key:"map",value:function(t,n,i){return this==ct||t.maps.length==0?this:this.mapInner(t,n,0,0,i||Sn)}},{key:"mapInner",value:function(t,n,i,o,s){for(var a,l=0;l<this.local.length;l++){var u=this.local[l].map(t,i,o);u&&u.type.valid(n,u)?(a||(a=[])).push(u):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?vI(this.children,a||[],t,n,i,o,s):a?new r(a.sort(xn),ti):ct}},{key:"add",value:function(t,n){return n.length?this==ct?r.create(t,n):this.addInner(t,n,0):this}},{key:"addInner",value:function(t,n,i){var o=this,s,a=0;t.forEach(function(c,f){var h=f+i,d;if(d=K1(n,c,h)){for(s||(s=o.children.slice());a<s.length&&s[a]<f;)a+=3;s[a]==f?s[a+2]=s[a+2].addInner(c,d,h+1):s.splice(a,0,f,f+c.nodeSize,ea(d,c,h+1,Sn)),a+=3}});for(var l=$1(a?G1(n):n,-i),u=0;u<l.length;u++)l[u].type.valid(t,l[u])||l.splice(u--,1);return new r(l.length?this.local.concat(l).sort(xn):this.local,s||this.children)}},{key:"remove",value:function(t){return t.length==0||this==ct?this:this.removeInner(t,0)}},{key:"removeInner",value:function(t,n){for(var i=this.children,o=this.local,s=0;s<i.length;s+=3){for(var a=void 0,l=i[s]+n,u=i[s+1]+n,c=0,f;c<t.length;c++)(f=t[c])&&f.from>l&&f.to<u&&(t[c]=null,(a||(a=[])).push(f));if(a){i==this.children&&(i=this.children.slice());var h=i[s+2].removeInner(a,l+1);h!=ct?i[s+2]=h:(i.splice(s,3),s-=3)}}if(o.length){for(var d=0,m;d<t.length;d++)if(m=t[d])for(var g=0;g<o.length;g++)o[g].eq(m,n)&&(o==this.local&&(o=this.local.slice()),o.splice(g--,1))}return i==this.children&&o==this.local?this:o.length||i.length?new r(o,i):ct}},{key:"forChild",value:function(t,n){if(this==ct)return this;if(n.isLeaf)return r.empty;for(var i,o,s=0;s<this.children.length;s+=3)if(this.children[s]>=t){this.children[s]==t&&(i=this.children[s+2]);break}for(var a=t+1,l=a+n.content.size,u=0;u<this.local.length;u++){var c=this.local[u];if(c.from<l&&c.to>a&&c.type instanceof to){var f=Math.max(a,c.from)-a,h=Math.min(l,c.to)-a;f<h&&(o||(o=[])).push(c.copy(f,h))}}if(o){var d=new r(o.sort(xn),ti);return i?new V1([d,i]):d}return i||ct}},{key:"eq",value:function(t){if(this==t)return!0;if(!(t instanceof r)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(var i=0;i<this.children.length;i+=3)if(this.children[i]!=t.children[i]||this.children[i+1]!=t.children[i+1]||!this.children[i+2].eq(t.children[i+2]))return!1;return!0}},{key:"locals",value:function(t){return Bf(this.localsInner(t))}},{key:"localsInner",value:function(t){if(this==ct)return ti;if(t.inlineContent||!this.local.some(to.is))return this.local;for(var n=[],i=0;i<this.local.length;i++)this.local[i].type instanceof to||n.push(this.local[i]);return n}},{key:"forEachSet",value:function(t){t(this)}}],[{key:"create",value:function(t,n){return n.length?ea(n,t,0,Sn):ct}}]),r})();Vt.empty=new Vt([],[]);Vt.removeOverlap=Bf;var ct=Vt.empty,V1=(function(){function r(e){qe(this,r),this.members=e}return We(r,[{key:"map",value:function(t,n){var i=this.members.map(function(o){return o.map(t,n,Sn)});return r.from(i)}},{key:"forChild",value:function(t,n){if(n.isLeaf)return Vt.empty;for(var i=[],o=0;o<this.members.length;o++){var s=this.members[o].forChild(t,n);s!=ct&&(s instanceof r?i=i.concat(s.members):i.push(s))}return r.from(i)}},{key:"eq",value:function(t){if(!(t instanceof r)||t.members.length!=this.members.length)return!1;for(var n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}},{key:"locals",value:function(t){for(var n,i=!0,o=0;o<this.members.length;o++){var s=this.members[o].localsInner(t);if(s.length)if(!n)n=s;else{i&&(n=n.slice(),i=!1);for(var a=0;a<s.length;a++)n.push(s[a])}}return n?Bf(i?n:n.sort(xn)):ti}},{key:"forEachSet",value:function(t){for(var n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}],[{key:"from",value:function(t){switch(t.length){case 0:return ct;case 1:return t[0];default:return new r(t.every(function(n){return n instanceof Vt})?t:t.reduce(function(n,i){return n.concat(i instanceof Vt?i:i.members)},[]))}}}]),r})();function vI(r,e,t,n,i,o,s){for(var a=r.slice(),l=function(H){var T=0;t.maps[u].forEach(function(V,Q,U,oe){for(var te=oe-U-(Q-V),fe=0;fe<a.length;fe+=3){var J=a[fe+1];if(!(J<0||V>J+H-T)){var D=a[fe]+H-T;Q>=D?a[fe+1]=V<=D?-2:-1:V>=H&&te&&(a[fe]+=te,a[fe+1]+=te)}}T+=te}),H=t.maps[u].map(H,-1),c=H},u=0,c=o;u<t.maps.length;u++)l(c);for(var f=!1,h=0;h<a.length;h+=3)if(a[h+1]<0){if(a[h+1]==-2){f=!0,a[h+1]=-1;continue}var d=t.map(r[h]+o),m=d-i;if(m<0||m>=n.content.size){f=!0;continue}var g=t.map(r[h+1]+o,-1),b=g-i,p=n.content.findIndex(m),S=p.index,k=p.offset,w=n.maybeChild(S);if(w&&k==m&&k+w.nodeSize==b){var x=a[h+2].mapInner(t,w,d+1,r[h]+o+1,s);x!=ct?(a[h]=m,a[h+1]=b,a[h+2]=x):(a[h+1]=-2,f=!0)}else f=!0}if(f){var M=yI(a,r,e,t,i,o,s),I=ea(M,n,0,s);e=I.local;for(var F=0;F<a.length;F+=3)a[F+1]<0&&(a.splice(F,3),F-=3);for(var N=0,K=0;N<I.children.length;N+=3){for(var ae=I.children[N];K<a.length&&a[K]<ae;)K+=3;a.splice(K,0,I.children[N],I.children[N+1],I.children[N+2])}}return new Vt(e.sort(xn),a)}function $1(r,e){if(!e||!r.length)return r;for(var t=[],n=0;n<r.length;n++){var i=r[n];t.push(new An(i.from+e,i.to+e,i.type))}return t}function yI(r,e,t,n,i,o,s){function a(u,c){for(var f=0;f<u.local.length;f++){var h=u.local[f].map(n,i,c);h?t.push(h):s.onRemove&&s.onRemove(u.local[f].spec)}for(var d=0;d<u.children.length;d+=3)a(u.children[d+2],u.children[d]+c+1)}for(var l=0;l<r.length;l+=3)r[l+1]==-1&&a(r[l+2],e[l]+o+1);return t}function K1(r,e,t){if(e.isLeaf)return null;for(var n=t+e.nodeSize,i=null,o=0,s;o<r.length;o++)(s=r[o])&&s.from>t&&s.to<n&&((i||(i=[])).push(s),r[o]=null);return i}function G1(r){for(var e=[],t=0;t<r.length;t++)r[t]!=null&&e.push(r[t]);return e}function ea(r,e,t,n){var i=[],o=!1;e.forEach(function(l,u){var c=K1(r,l,u+t);if(c){o=!0;var f=ea(c,l,t+u+1,n);f!=ct&&i.push(u,u+l.nodeSize,f)}});for(var s=$1(o?G1(r):r,-t).sort(xn),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(n.onRemove&&n.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new Vt(s,i):ct}function xn(r,e){return r.from-e.from||r.to-e.to}function Bf(r){for(var e=r,t=0;t<e.length-1;t++){var n=e[t];if(n.from!=n.to)for(var i=t+1;i<e.length;i++){var o=e[i];if(o.from==n.from){o.to!=n.to&&(e==r&&(e=r.slice()),e[i]=o.copy(o.from,n.to),t1(e,i+1,o.copy(n.to,o.to)));continue}else{o.from<n.to&&(e==r&&(e=r.slice()),e[t]=n.copy(n.from,o.from),t1(e,i,n.copy(o.from,n.to)));break}}}return e}function t1(r,e,t){for(;e<r.length&&xn(t,r[e])>0;)e++;r.splice(e,0,t)}function gf(r){var e=[];return r.someProp("decorations",function(t){var n=t(r.state);n&&n!=ct&&e.push(n)}),r.cursorWrapper&&e.push(Vt.create(r.state.doc,[r.cursorWrapper.deco])),V1.from(e)}var wI={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},bI=Et&&Gr<=11,kI=(function(){function r(){qe(this,r),this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}return We(r,[{key:"set",value:function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}},{key:"clear",value:function(){this.anchorNode=this.focusNode=null}},{key:"eq",value:function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}]),r})(),SI=(function(){function r(e,t){var n=this;qe(this,r),this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new kI,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(function(i){for(var o=0;o<i.length;o++)n.queue.push(i[o]);Et&&Gr<=11&&i.some(function(s){return s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length})?n.flushSoon():n.flush()}),bI&&(this.onCharData=function(i){n.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}return We(r,[{key:"flushSoon",value:function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(function(){t.flushingSoon=-1,t.flush()},20))}},{key:"forceFlush",value:function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}},{key:"start",value:function(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,wI)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}},{key:"stop",value:function(){var t=this;if(this.observer){var n=this.observer.takeRecords();if(n.length){for(var i=0;i<n.length;i++)this.queue.push(n[i]);window.setTimeout(function(){return t.flush()},20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}},{key:"connectSelection",value:function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}},{key:"disconnectSelection",value:function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}},{key:"suppressSelectionUpdates",value:function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout(function(){return t.suppressingSelectionUpdates=!1},50)}},{key:"onSelectionChange",value:function(){if($b(this.view)){if(this.suppressingSelectionUpdates)return Pr(this.view);if(Et&&Gr<=11&&!this.view.state.selection.empty){var t=this.view.domSelectionRange();if(t.focusNode&&En(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}},{key:"setCurSelection",value:function(){this.currentSelection.set(this.view.domSelectionRange())}},{key:"ignoreSelectionChange",value:function(t){if(!t.focusNode)return!0;for(var n=new Set,i,o=t.focusNode;o;o=oi(o))n.add(o);for(var s=t.anchorNode;s;s=oi(s))if(n.has(s)){i=s;break}var a=i&&this.view.docView.nearestDesc(i);if(a&&a.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}},{key:"pendingRecords",value:function(){if(this.observer){var t=yf(this.observer.takeRecords()),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;this.queue.push(i)}}catch(o){t.e(o)}finally{t.f()}}return this.queue}},{key:"flush",value:function(){var t=this.view;if(!(!t.docView||this.flushingSoon>-1)){var n=this.pendingRecords();n.length&&(this.queue=[]);var i=t.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&$b(t)&&!this.ignoreSelectionChange(i),s=-1,a=-1,l=!1,u=[];if(t.editable)for(var c=0;c<n.length;c++){var f=this.registerMutation(n[c],u);f&&(s=s<0?f.from:Math.min(f.from,s),a=a<0?f.to:Math.max(f.to,a),f.typeOver&&(l=!0))}if(Mt&&u.length){var h=u.filter(function(M){return M.nodeName=="BR"});if(h.length==2){var d=h1(h,2),m=d[0],g=d[1];m.parentNode&&m.parentNode.parentNode==g.parentNode?g.remove():m.remove()}else{var b=this.currentSelection.focusNode,p=yf(h),S;try{for(p.s();!(S=p.n()).done;){var k=S.value,w=k.parentNode;w&&w.nodeName=="LI"&&(!b||_I(t,b)!=w)&&k.remove()}}catch(M){p.e(M)}finally{p.f()}}}var x=null;s<0&&o&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&ta(i)&&(x=Rf(t))&&x.eq(xe.Selection.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Pr(t),this.currentSelection.set(i),t.scrollToSelection()):(s>-1||o)&&(s>-1&&(t.docView.markDirty(s,a),xI(t)),this.handleDOMChange(s,a,l,u),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(i)||Pr(t),this.currentSelection.set(i))}}},{key:"registerMutation",value:function(t,n){if(n.indexOf(t.target)>-1)return null;var i=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(i==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!i||i.ignoreMutation(t))return null;if(t.type=="childList"){for(var o=0;o<t.addedNodes.length;o++){var s=t.addedNodes[o];n.push(s),s.nodeType==3&&(this.lastChangedTextNode=s)}if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(t.target))return{from:i.posBefore,to:i.posAfter};var a=t.previousSibling,l=t.nextSibling;if(Et&&Gr<=11&&t.addedNodes.length)for(var u=0;u<t.addedNodes.length;u++){var c=t.addedNodes[u],f=c.previousSibling,h=c.nextSibling;(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(a=f),(!h||Array.prototype.indexOf.call(t.addedNodes,h)<0)&&(l=h)}var d=a&&a.parentNode==t.target?it(a)+1:0,m=i.localPosFromDOM(t.target,d,-1),g=l&&l.parentNode==t.target?it(l):t.target.childNodes.length,b=i.localPosFromDOM(t.target,g,1);return{from:m,to:b}}else return t.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:(this.lastChangedTextNode=t.target,{from:i.posAtStart,to:i.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}]),r})(),r1=new WeakMap,n1=!1;function xI(r){if(!r1.has(r)&&(r1.set(r,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(r.dom).whiteSpace)!==-1)){if(r.requiresGeckoHackNode=Mt,n1)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),n1=!0}}function i1(r,e){var t=e.startContainer,n=e.startOffset,i=e.endContainer,o=e.endOffset,s=r.domAtPos(r.state.selection.anchor);if(En(s.node,s.offset,i,o)){var a=[i,o,t,n];t=a[0],n=a[1],i=a[2],o=a[3]}return{anchorNode:t,anchorOffset:n,focusNode:i,focusOffset:o}}function EI(r,e){if(e.getComposedRanges){var t=e.getComposedRanges(r.root)[0];if(t)return i1(r,t)}var n;function i(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return r.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),r.dom.removeEventListener("beforeinput",i,!0),n?i1(r,n):null}function _I(r,e){for(var t=e.parentNode;t&&t!=r.dom;t=t.parentNode){var n=r.docView.nearestDesc(t,!0);if(n&&n.node.isBlock)return t}return null}function TI(r,e,t){var n=r.docView.parseRange(e,t),i=n.node,o=n.fromOffset,s=n.toOffset,a=n.from,l=n.to,u=r.domSelectionRange(),c,f=u.anchorNode;if(f&&r.dom.contains(f.nodeType==1?f:f.parentNode)&&(c=[{node:f,offset:u.anchorOffset}],ta(u)||c.push({node:u.focusNode,offset:u.focusOffset})),ft&&r.input.lastKeyCode===8)for(var h=s;h>o;h--){var d=i.childNodes[h-1],m=d.pmViewDesc;if(d.nodeName=="BR"&&!m){s=h;break}if(!m||m.size)break}var g=r.state.doc,b=r.someProp("domParser")||Be.DOMParser.fromSchema(r.state.schema),p=g.resolve(a),S=null,k=b.parse(i,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:o,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:AI,context:p});if(c&&c[0].pos!=null){var w=c[0].pos,x=c[1]&&c[1].pos;x==null&&(x=w),S={anchor:w+a,head:x+a}}return{doc:k,sel:S,from:a,to:l}}function AI(r){var e=r.pmViewDesc;if(e)return e.parseRule();if(r.nodeName=="BR"&&r.parentNode){if(gt&&/^(ul|ol)$/i.test(r.parentNode.nodeName)){var t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(r.parentNode.lastChild==r||gt&&/^(tr|table)$/i.test(r.parentNode.nodeName))return{ignore:!0}}else if(r.nodeName=="IMG"&&r.getAttribute("mark-placeholder"))return{ignore:!0};return null}var OI=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function CI(r,e,t,n,i){var o=r.input.compositionPendingChanges||(r.composing?r.input.compositionID:0);if(r.input.compositionPendingChanges=0,e<0){var s=r.input.lastSelectionTime>Date.now()-50?r.input.lastSelectionOrigin:null,a=Rf(r,s);if(a&&!r.state.selection.eq(a)){if(ft&&Ir&&r.input.lastKeyCode===13&&Date.now()-100<r.input.lastKeyCodeTime&&r.someProp("handleKeyDown",function(U){return U(r,wn(13,"Enter"))}))return;var l=r.state.tr.setSelection(a);s=="pointer"?l.setMeta("pointer",!0):s=="key"&&l.scrollIntoView(),o&&l.setMeta("composition",o),r.dispatch(l)}return}var u=r.state.doc.resolve(e),c=u.sharedDepth(t);e=u.before(c+1),t=r.state.doc.resolve(t).after(c+1);var f=r.state.selection,h=TI(r,e,t),d=r.state.doc,m=d.slice(h.from,h.to),g,b;r.input.lastKeyCode===8&&Date.now()-100<r.input.lastKeyCodeTime?(g=r.state.selection.to,b="end"):(g=r.state.selection.from,b="start"),r.input.lastKeyCode=null;var p=MI(m.content,h.doc.content,h.from,g,b);if(p&&r.input.domChangeCount++,(si&&r.input.lastIOSEnter>Date.now()-225||Ir)&&i.some(function(U){return U.nodeType==1&&!OI.test(U.nodeName)})&&(!p||p.endA>=p.endB)&&r.someProp("handleKeyDown",function(U){return U(r,wn(13,"Enter"))})){r.input.lastIOSEnter=0;return}if(!p)if(n&&f instanceof xe.TextSelection&&!f.empty&&f.$head.sameParent(f.$anchor)&&!r.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))p={start:f.from,endA:f.to,endB:f.to};else{if(h.sel){var S=o1(r,r.state.doc,h.sel);if(S&&!S.eq(r.state.selection)){var k=r.state.tr.setSelection(S);o&&k.setMeta("composition",o),r.dispatch(k)}}return}r.state.selection.from<r.state.selection.to&&p.start==p.endB&&r.state.selection instanceof xe.TextSelection&&(p.start>r.state.selection.from&&p.start<=r.state.selection.from+2&&r.state.selection.from>=h.from?p.start=r.state.selection.from:p.endA<r.state.selection.to&&p.endA>=r.state.selection.to-2&&r.state.selection.to<=h.to&&(p.endB+=r.state.selection.to-p.endA,p.endA=r.state.selection.to)),Et&&Gr<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>h.from&&h.doc.textBetween(p.start-h.from-1,p.start-h.from+1)==" \xA0"&&(p.start--,p.endA--,p.endB--);var w=h.doc.resolveNoCache(p.start-h.from),x=h.doc.resolveNoCache(p.endB-h.from),M=d.resolve(p.start),I=w.sameParent(x)&&w.parent.inlineContent&&M.end()>=p.endA;if((si&&r.input.lastIOSEnter>Date.now()-225&&(!I||i.some(function(U){return U.nodeName=="DIV"||U.nodeName=="P"}))||!I&&w.pos<h.doc.content.size&&(!w.sameParent(x)||!w.parent.inlineContent)&&w.pos<x.pos&&!/\S/.test(h.doc.textBetween(w.pos,x.pos,"","")))&&r.someProp("handleKeyDown",function(U){return U(r,wn(13,"Enter"))})){r.input.lastIOSEnter=0;return}if(r.state.selection.anchor>p.start&&RI(d,p.start,p.endA,w,x)&&r.someProp("handleKeyDown",function(U){return U(r,wn(8,"Backspace"))})){Ir&&ft&&r.domObserver.suppressSelectionUpdates();return}ft&&p.endB==p.start&&(r.input.lastChromeDelete=Date.now()),Ir&&!I&&w.start()!=x.start()&&x.parentOffset==0&&w.depth==x.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==p.endA&&(p.endB-=2,x=h.doc.resolveNoCache(p.endB-h.from),setTimeout(function(){r.someProp("handleKeyDown",function(U){return U(r,wn(13,"Enter"))})},20));var F=p.start,N=p.endA,K=function(oe){var te=oe||r.state.tr.replace(F,N,h.doc.slice(p.start-h.from,p.endB-h.from));if(h.sel){var fe=o1(r,te.doc,h.sel);fe&&!(ft&&r.composing&&fe.empty&&(p.start!=p.endB||r.input.lastChromeDelete<Date.now()-100)&&(fe.head==F||fe.head==te.mapping.map(N)-1)||Et&&fe.empty&&fe.head==F)&&te.setSelection(fe)}return o&&te.setMeta("composition",o),te.scrollIntoView()},ae;if(I)if(w.pos==x.pos){Et&&Gr<=11&&w.parentOffset==0&&(r.domObserver.suppressSelectionUpdates(),setTimeout(function(){return Pr(r)},20));var R=K(r.state.tr.delete(F,N)),H=d.resolve(p.start).marksAcross(d.resolve(p.endA));H&&R.ensureMarks(H),r.dispatch(R)}else if(p.endA==p.endB&&(ae=NI(w.parent.content.cut(w.parentOffset,x.parentOffset),M.parent.content.cut(M.parentOffset,p.endA-M.start())))){var T=K(r.state.tr);ae.type=="add"?T.addMark(F,N,ae.mark):T.removeMark(F,N,ae.mark),r.dispatch(T)}else if(w.parent.child(w.index()).isText&&w.index()==x.index()-(x.textOffset?0:1)){var V=w.parent.textBetween(w.parentOffset,x.parentOffset),Q=function(){return K(r.state.tr.insertText(V,F,N))};r.someProp("handleTextInput",function(U){return U(r,F,N,V,Q)})||r.dispatch(Q())}else r.dispatch(K());else r.dispatch(K())}function o1(r,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Mf(r,e.resolve(t.anchor),e.resolve(t.head))}function NI(r,e){for(var t=r.firstChild.marks,n=e.firstChild.marks,i=t,o=n,s,a,l,u=0;u<n.length;u++)i=n[u].removeFromSet(i);for(var c=0;c<t.length;c++)o=t[c].removeFromSet(o);if(i.length==1&&o.length==0)a=i[0],s="add",l=function(m){return m.mark(a.addToSet(m.marks))};else if(i.length==0&&o.length==1)a=o[0],s="remove",l=function(m){return m.mark(a.removeFromSet(m.marks))};else return null;for(var f=[],h=0;h<e.childCount;h++)f.push(l(e.child(h)));if(Be.Fragment.from(f).eq(r))return{mark:a,type:s}}function RI(r,e,t,n,i){if(t-e<=i.pos-n.pos||vf(n,!0,!1)<i.pos)return!1;var o=r.resolve(e);if(!n.parent.isTextblock){var s=o.nodeAfter;return s!=null&&t==e+s.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;var a=r.resolve(vf(o,!0,!0));return!a.parent.isTextblock||a.pos>t||vf(a,!0,!1)<t?!1:n.parent.content.cut(n.parentOffset).eq(a.parent.content)}function vf(r,e,t){for(var n=r.depth,i=e?r.end():r.pos;n>0&&(e||r.indexAfter(n)==r.node(n).childCount);)n--,i++,e=!1;if(t)for(var o=r.node(n).maybeChild(r.indexAfter(n));o&&!o.isLeaf;)o=o.firstChild,i++;return i}function MI(r,e,t,n,i){var o=r.findDiffStart(e,t);if(o==null)return null;var s=r.findDiffEnd(e,t+r.size,t+e.size),a=s.a,l=s.b;if(i=="end"){var u=Math.max(0,o-Math.min(a,l));n-=a+u-o}if(a<o&&r.size<e.size){var c=n<=o&&n>=a?o-n:0;o-=c,o&&o<e.size&&s1(e.textBetween(o-1,o+1))&&(o+=c?1:-1),l=o+(l-a),a=o}else if(l<o){var f=n<=o&&n>=l?o-n:0;o-=f,o&&o<r.size&&s1(r.textBetween(o-1,o+1))&&(o+=f?1:-1),a=o+(a-l),l=o}return{start:o,endA:a,endB:l}}function s1(r){if(r.length!=2)return!1;var e=r.charCodeAt(0),t=r.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}var II=Pf,PI=ro,J1=(function(){function r(e,t){var n=this;qe(this,r),this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new XM,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(f1),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=u1(this),l1(this),this.nodeViews=c1(this),this.docView=Hb(this.state.doc,a1(this),gf(this),this.dom,this),this.domObserver=new SI(this,function(i,o,s,a){return CI(n,i,o,s,a)}),this.domObserver.start(),YM(this),this.updatePluginViews()}return We(r,[{key:"composing",get:function(){return this.input.composing}},{key:"props",get:function(){if(this._props.state!=this.state){var t=this._props;this._props={};for(var n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}},{key:"update",value:function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Cf(this);var n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(f1),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}},{key:"setProps",value:function(t){var n={};for(var i in this._props)n[i]=this._props[i];n.state=this.state;for(var o in t)n[o]=t[o];this.update(n)}},{key:"updateState",value:function(t){this.updateStateInner(t,this._props)}},{key:"updateStateInner",value:function(t,n){var i,o=this.state,s=!1,a=!1;t.storedMarks&&this.composing&&(j1(this),a=!0),this.state=t;var l=o.plugins!=t.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){var u=c1(this);LI(u,this.nodeViews)&&(this.nodeViews=u,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&Cf(this),this.editable=u1(this),l1(this);var c=gf(this),f=a1(this),h=o.plugins!=t.plugins&&!o.doc.eq(t.doc)?"reset":t.scrollToSelection>o.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(t.doc,f,c);(d||!t.selection.eq(o.selection))&&(a=!0);var m=h=="preserve"&&a&&this.dom.style.overflowAnchor==null&&fM(this);if(a){this.domObserver.stop();var g=d&&(Et||ft)&&!this.composing&&!o.selection.empty&&!t.selection.empty&&DI(o.selection,t.selection);if(d){var b=ft?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=cI(this)),(s||!this.docView.update(t.doc,f,c,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=Hb(t.doc,f,c,this.dom,this)),b&&!this.trackWrites&&(g=!0)}g||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&DM(this))?Pr(this,g):(N1(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((i=this.dragging)===null||i===void 0)&&i.node&&!o.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,o),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():m&&hM(m)}},{key:"scrollToSelection",value:function(){var t=this,n=this.domSelectionRange().focusNode;if(!(!n||!this.dom.contains(n.nodeType==1?n:n.parentNode))){if(!this.someProp("handleScrollToSelection",function(o){return o(t)}))if(this.state.selection instanceof xe.NodeSelection){var i=this.docView.domAfterPos(this.state.selection.from);i.nodeType==1&&Pb(this,i.getBoundingClientRect(),n)}else Pb(this,this.coordsAtPos(this.state.selection.head,1),n)}}},{key:"destroyPluginViews",value:function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()}},{key:"updatePluginViews",value:function(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var n=0;n<this.directPlugins.length;n++){var i=this.directPlugins[n];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(var o=0;o<this.state.plugins.length;o++){var s=this.state.plugins[o];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}else for(var a=0;a<this.pluginViews.length;a++){var l=this.pluginViews[a];l.update&&l.update(this,t)}}},{key:"updateDraggedNode",value:function(t,n){var i=t.node,o=-1;if(this.state.doc.nodeAt(i.from)==i.node)o=i.from;else{var s=i.from+(this.state.doc.content.size-n.doc.content.size),a=s>0&&this.state.doc.nodeAt(s);a==i.node&&(o=s)}this.dragging=new q1(t.slice,t.move,o<0?void 0:xe.NodeSelection.create(this.state.doc,o))}},{key:"someProp",value:function(t,n){var i=this._props&&this._props[t],o;if(i!=null&&(o=n?n(i):i))return o;for(var s=0;s<this.directPlugins.length;s++){var a=this.directPlugins[s].props[t];if(a!=null&&(o=n?n(a):a))return o}var l=this.state.plugins;if(l)for(var u=0;u<l.length;u++){var c=l[u].props[t];if(c!=null&&(o=n?n(c):c))return o}}},{key:"hasFocus",value:function(){if(Et){var t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}},{key:"focus",value:function(){this.domObserver.stop(),this.editable&&dM(this.dom),Pr(this),this.domObserver.start()}},{key:"root",get:function(){var t=this,n=this._root;if(n==null){for(var i=function(l){if(l.nodeType==9||l.nodeType==11&&l.host)return l.getSelection||(Object.getPrototypeOf(l).getSelection=function(){return l.ownerDocument.getSelection()}),{v:t._root=l}},o,s=this.dom.parentNode;s;s=s.parentNode)if(o=i(s),o)return o.v}return n||document}},{key:"updateRoot",value:function(){this._root=null}},{key:"posAtCoords",value:function(t){return yM(this,t)}},{key:"coordsAtPos",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return k1(this,t,n)}},{key:"domAtPos",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.docView.domFromPos(t,n)}},{key:"nodeDOM",value:function(t){var n=this.docView.descAt(t);return n?n.nodeDOM:null}},{key:"posAtDOM",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,o=this.docView.posFromDOM(t,n,i);if(o==null)throw new RangeError("DOM position not inside the editor");return o}},{key:"endOfTextblock",value:function(t,n){return xM(this,n||this.state,t)}},{key:"pasteHTML",value:function(t,n){return io(this,"",t,!1,n||new ClipboardEvent("paste"))}},{key:"pasteText",value:function(t,n){return io(this,t,null,!0,n||new ClipboardEvent("paste"))}},{key:"serializeForClipboard",value:function(t){return If(this,t)}},{key:"destroy",value:function(){this.docView&&(ZM(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],gf(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,eM())}},{key:"isDestroyed",get:function(){return this.docView==null}},{key:"dispatchEvent",value:function(t){return eI(this,t)}},{key:"domSelectionRange",value:function(){var t=this.domSelection();return t?gt&&this.root.nodeType===11&&oM(this.dom.ownerDocument)==this.dom&&EI(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}},{key:"domSelection",value:function(){return this.root.getSelection()}}]),r})();J1.prototype.dispatch=function(r){var e=this._props.dispatchTransaction;e?e.call(this,r):this.updateState(this.state.apply(r))};function a1(r){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(r.editable),r.someProp("attributes",function(t){if(typeof t=="function"&&(t=t(r.state)),t)for(var n in t)n=="class"?e.class+=" "+t[n]:n=="style"?e.style=(e.style?e.style+";":"")+t[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(t[n]))}),e.translate||(e.translate="no"),[An.node(0,r.state.doc.content.size,e)]}function l1(r){if(r.markCursor){var e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),r.cursorWrapper={dom:e,deco:An.widget(r.state.selection.from,e,{raw:!0,marks:r.markCursor})}}else r.cursorWrapper=null}function u1(r){return!r.someProp("editable",function(e){return e(r.state)===!1})}function DI(r,e){var t=Math.min(r.$anchor.sharedDepth(r.head),e.$anchor.sharedDepth(e.head));return r.$anchor.start(t)!=e.$anchor.start(t)}function c1(r){var e=Object.create(null);function t(n){for(var i in n)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=n[i])}return r.someProp("nodeViews",t),r.someProp("markViews",t),e}function LI(r,e){var t=0,n=0;for(var i in r){if(r[i]!=e[i])return!0;t++}for(var o in e)n++;return t!=n}function f1(r){if(r.spec.state||r.spec.filterTransaction||r.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}ai.Decoration=An;ai.DecorationSet=Vt;ai.EditorView=J1;ai.__endComposition=PI;ai.__parseFromClipboard=II});var uo=me(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});function FI(r){Object.keys(r).filter(e=>e!=="default"&&e!=="__esModule").forEach(e=>{na.hasOwnProperty(e)||Object.defineProperty(na,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})}var BI=zf();FI(BI)});var X1=me(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});var Xr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},co={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},zI=typeof navigator<"u"&&/Mac/.test(navigator.platform),HI=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for($e=0;$e<10;$e++)Xr[48+$e]=Xr[96+$e]=String($e);var $e;for($e=1;$e<=24;$e++)Xr[$e+111]="F"+$e;var $e;for($e=65;$e<=90;$e++)Xr[$e]=String.fromCharCode($e+32),co[$e]=String.fromCharCode($e);var $e;for(ia in Xr)co.hasOwnProperty(ia)||(co[ia]=Xr[ia]);var ia;function jI(r){var e=zI&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||HI&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?co:Xr)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}fo.base=Xr;fo.keyName=jI;fo.shift=co});var Uf=me(jf=>{"use strict";var Y1=X1(),UI=Cr(),qI=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),WI=typeof navigator<"u"&&/Win/.test(navigator.platform);function VI(r){var e=r.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");for(var n,i,o,s,a=0;a<e.length-1;a++){var l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))qI?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(t="Alt-"+t),i&&(t="Ctrl-"+t),s&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function $I(r){var e=Object.create(null);for(var t in r)e[VI(t)]=r[t];return e}function Hf(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t&&e.shiftKey&&(r="Shift-"+r),r}function KI(r){return new UI.Plugin({props:{handleKeyDown:Z1(r)}})}function Z1(r){var e=$I(r);return function(t,n){var i=Y1.keyName(n),o,s=e[Hf(i,n)];if(s&&s(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(n.shiftKey){var a=e[Hf(i,n,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(WI&&n.ctrlKey&&n.altKey)&&(o=Y1.base[n.keyCode])&&o!=i){var l=e[Hf(o,n)];if(l&&l(t.state,t.dispatch,t))return!0}}return!1}}jf.keydownHandler=Z1;jf.keymap=KI});var Q1=me(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});function GI(r){Object.keys(r).filter(e=>e!=="default"&&e!=="__esModule").forEach(e=>{oa.hasOwnProperty(e)||Object.defineProperty(oa,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})}var JI=Uf();GI(JI)});var we=me((oj,fS)=>{"use strict";var Yf=Object.defineProperty,XI=Object.getOwnPropertyDescriptor,YI=Object.getOwnPropertyNames,ZI=Object.prototype.hasOwnProperty,da=(r,e)=>{for(var t in e)Yf(r,t,{get:e[t],enumerable:!0})},QI=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of YI(e))!ZI.call(r,i)&&i!==t&&Yf(r,i,{get:()=>e[i],enumerable:!(n=XI(e,i))||n.enumerable});return r},eP=r=>QI(Yf({},"__esModule",{value:!0}),r),gk={};da(gk,{CommandManager:()=>wo,Editor:()=>wL,Extendable:()=>Ea,Extension:()=>$t,Fragment:()=>_L,InputRule:()=>di,Mark:()=>Fk,MarkView:()=>PL,Node:()=>DL,NodePos:()=>tS,NodeView:()=>LL,PasteRule:()=>_a,ResizableNodeView:()=>nS,ResizableNodeview:()=>AL,Tracker:()=>HL,callOrReturn:()=>Oe,canInsertNode:()=>CL,combineTransactionSteps:()=>bk,commands:()=>Zf,createAtomBlockMarkdownSpec:()=>oS,createBlockMarkdownSpec:()=>sS,createChainableState:()=>yo,createDocument:()=>fa,createElement:()=>pk,createInlineMarkdownSpec:()=>aS,createNodeFromContent:()=>ci,createStyleTag:()=>rS,defaultBlockAt:()=>kk,deleteProps:()=>Kf,elementFromString:()=>ui,escapeForRegEx:()=>NL,extensions:()=>jk,findChildren:()=>dD,findChildrenInRange:()=>pD,findDuplicates:()=>Tk,findParentNode:()=>ko,findParentNodeClosestToPos:()=>Sk,flattenExtensions:()=>ya,fromString:()=>_k,generateHTML:()=>yD,generateJSON:()=>bD,generateText:()=>SD,getAttributes:()=>Ok,getAttributesFromExtensions:()=>ih,getChangedRanges:()=>Nk,getDebugJSON:()=>Rk,getExtensionField:()=>ye,getHTMLFromFragment:()=>So,getMarkAttributes:()=>rh,getMarkRange:()=>ma,getMarkType:()=>or,getMarksBetween:()=>lh,getNodeAtPosition:()=>ED,getNodeAttributes:()=>Ak,getNodeType:()=>Ze,getRenderedAttributes:()=>vo,getSchema:()=>ka,getSchemaByResolvedExtensions:()=>oh,getSchemaTypeByName:()=>ca,getSchemaTypeNameByName:()=>bo,getSplittedAttributes:()=>mo,getText:()=>ah,getTextBetween:()=>sh,getTextContentFromNodes:()=>Mk,getTextSerializersFromSchema:()=>Sa,h:()=>pk,injectExtensionAttributesToParseRule:()=>Gf,inputRulesPlugin:()=>Lk,isActive:()=>Ik,isAndroid:()=>ga,isAtEndOfNode:()=>_D,isAtStartOfNode:()=>TD,isEmptyObject:()=>xk,isExtensionRulesEnabled:()=>Jf,isFunction:()=>nh,isList:()=>Xf,isMacOS:()=>th,isMarkActive:()=>ha,isNodeActive:()=>fi,isNodeEmpty:()=>xa,isNodeSelection:()=>OD,isNumber:()=>zk,isPlainObject:()=>po,isRegExp:()=>pa,isString:()=>RL,isTextSelection:()=>Qf,isiOS:()=>hi,markInputRule:()=>bL,markPasteRule:()=>FL,markdown:()=>iS,mergeAttributes:()=>Ek,mergeDeep:()=>uh,minMax:()=>ir,nodeInputRule:()=>kL,nodePasteRule:()=>BL,objectIncludes:()=>go,parseAttributes:()=>Aa,parseIndentedBlocks:()=>lS,pasteRulesPlugin:()=>Hk,posToDOMRect:()=>CD,removeDuplicates:()=>Ck,renderNestedMarkdownContent:()=>uS,resolveExtensions:()=>ba,resolveFocusPosition:()=>eh,rewriteUnknownContent:()=>ND,selectionToInsertionEnd:()=>wk,serializeAttributes:()=>Oa,sortExtensions:()=>wa,splitExtensions:()=>Cn,textInputRule:()=>xL,textPasteRule:()=>zL,textblockTypeInputRule:()=>SL,updateMarkViewAttributes:()=>ch,wrappingInputRule:()=>EL});fS.exports=eP(gk);function yo(r){let{state:e,transaction:t}=r,{selection:n}=t,{doc:i}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return n},get doc(){return i},get tr(){return n=t.selection,i=t.doc,o=t.storedMarks,t}}}var wo=class{constructor(r){this.editor=r.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=r.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:r,editor:e,state:t}=this,{view:n}=e,{tr:i}=t,o=this.buildProps(i);return Object.fromEntries(Object.entries(r).map(([s,a])=>[s,(...u)=>{let c=a(...u)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(i),c}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(r,e=!0){let{rawCommands:t,editor:n,state:i}=this,{view:o}=n,s=[],a=!!r,l=r||i.tr,u=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(l),s.every(f=>f===!0)),c={...Object.fromEntries(Object.entries(t).map(([f,h])=>[f,(...m)=>{let g=this.buildProps(l,e),b=h(...m)(g);return s.push(b),c}])),run:u};return c}createCan(r){let{rawCommands:e,state:t}=this,n=!1,i=r||t.tr,o=this.buildProps(i,n);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>l(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,n)}}buildProps(r,e=!0){let{rawCommands:t,editor:n,state:i}=this,{view:o}=n,s={tr:r,editor:n,view:o,state:yo({state:i,transaction:r}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(r,e),can:()=>this.createCan(r),get commands(){return Object.fromEntries(Object.entries(t).map(([a,l])=>[a,(...u)=>l(...u)(s)]))}};return s}},Zf={};da(Zf,{blur:()=>tP,clearContent:()=>rP,clearNodes:()=>iP,command:()=>oP,createParagraphNear:()=>aP,cut:()=>uP,deleteCurrentNode:()=>cP,deleteNode:()=>fP,deleteRange:()=>hP,deleteSelection:()=>pP,enter:()=>mP,exitCode:()=>vP,extendMarkRange:()=>wP,first:()=>bP,focus:()=>SP,forEach:()=>xP,insertContent:()=>EP,insertContentAt:()=>OP,joinBackward:()=>RP,joinDown:()=>NP,joinForward:()=>MP,joinItemBackward:()=>PP,joinItemForward:()=>LP,joinTextblockBackward:()=>BP,joinTextblockForward:()=>HP,joinUp:()=>CP,keyboardShortcut:()=>UP,lift:()=>WP,liftEmptyBlock:()=>$P,liftListItem:()=>GP,newlineInCode:()=>XP,resetAttributes:()=>YP,scrollIntoView:()=>ZP,selectAll:()=>eD,selectNodeBackward:()=>rD,selectNodeForward:()=>iD,selectParentNode:()=>sD,selectTextblockEnd:()=>lD,selectTextblockStart:()=>cD,setContent:()=>fD,setMark:()=>MD,setMeta:()=>ID,setNode:()=>PD,setNodeSelection:()=>LD,setTextDirection:()=>FD,setTextSelection:()=>BD,sinkListItem:()=>HD,splitBlock:()=>jD,splitListItem:()=>WD,toggleList:()=>VD,toggleMark:()=>$D,toggleNode:()=>KD,toggleWrap:()=>GD,undoInputRule:()=>JD,unsetAllMarks:()=>XD,unsetMark:()=>YD,unsetTextDirection:()=>ZD,updateAttributes:()=>QD,wrapIn:()=>tL,wrapInList:()=>nL});var tP=()=>({editor:r,view:e})=>(requestAnimationFrame(()=>{var t;r.isDestroyed||(e.dom.blur(),(t=window?.getSelection())==null||t.removeAllRanges())}),!0),rP=(r=!0)=>({commands:e})=>e.setContent("",{emitUpdate:r}),nP=jt(),iP=()=>({state:r,tr:e,dispatch:t})=>{let{selection:n}=e,{ranges:i}=n;return t&&i.forEach(({$from:o,$to:s})=>{r.doc.nodesBetween(o.pos,s.pos,(a,l)=>{if(a.type.isText)return;let{doc:u,mapping:c}=e,f=u.resolve(c.map(l)),h=u.resolve(c.map(l+a.nodeSize)),d=f.blockRange(h);if(!d)return;let m=(0,nP.liftTarget)(d);if(a.type.isTextblock){let{defaultType:g}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(d.start,g)}(m||m===0)&&e.lift(d,m)})}),!0},oP=r=>e=>r(e),sP=rt(),aP=()=>({state:r,dispatch:e})=>(0,sP.createParagraphNear)(r,e),lP=Te(),uP=(r,e)=>({editor:t,tr:n})=>{let{state:i}=t,o=i.doc.slice(r.from,r.to);n.deleteRange(r.from,r.to);let s=n.mapping.map(e);return n.insert(s,o.content),n.setSelection(new lP.TextSelection(n.doc.resolve(Math.max(s-1,0)))),!0},cP=()=>({tr:r,dispatch:e})=>{let{selection:t}=r,n=t.$anchor.node();if(n.content.size>0)return!1;let i=r.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===n.type){if(e){let a=i.before(o),l=i.after(o);r.delete(a,l).scrollIntoView()}return!0}return!1};function Ze(r,e){if(typeof r=="string"){if(!e.nodes[r])throw Error(`There is no node type named '${r}'. Maybe you forgot to add the extension?`);return e.nodes[r]}return r}var fP=r=>({tr:e,state:t,dispatch:n})=>{let i=Ze(r,t.schema),o=e.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===i){if(n){let l=o.before(s),u=o.after(s);e.delete(l,u).scrollIntoView()}return!0}return!1},hP=r=>({tr:e,dispatch:t})=>{let{from:n,to:i}=r;return t&&e.delete(n,i),!0},dP=rt(),pP=()=>({state:r,dispatch:e})=>(0,dP.deleteSelection)(r,e),mP=()=>({commands:r})=>r.keyboardShortcut("Enter"),gP=rt(),vP=()=>({state:r,dispatch:e})=>(0,gP.exitCode)(r,e),yP=Te();function pa(r){return Object.prototype.toString.call(r)==="[object RegExp]"}function go(r,e,t={strict:!0}){let n=Object.keys(e);return n.length?n.every(i=>t.strict?e[i]===r[i]:pa(e[i])?e[i].test(r[i]):e[i]===r[i]):!0}function vk(r,e,t={}){return r.find(n=>n.type===e&&go(Object.fromEntries(Object.keys(t).map(i=>[i,n.attrs[i]])),t))}function ek(r,e,t={}){return!!vk(r,e,t)}function ma(r,e,t){var n;if(!r||!e)return;let i=r.parent.childAfter(r.parentOffset);if((!i.node||!i.node.marks.some(c=>c.type===e))&&(i=r.parent.childBefore(r.parentOffset)),!i.node||!i.node.marks.some(c=>c.type===e)||(t=t||((n=i.node.marks[0])==null?void 0:n.attrs),!vk([...i.node.marks],e,t)))return;let s=i.index,a=r.start()+i.offset,l=s+1,u=a+i.node.nodeSize;for(;s>0&&ek([...r.parent.child(s-1).marks],e,t);)s-=1,a-=r.parent.child(s).nodeSize;for(;l<r.parent.childCount&&ek([...r.parent.child(l).marks],e,t);)u+=r.parent.child(l).nodeSize,l+=1;return{from:a,to:u}}function or(r,e){if(typeof r=="string"){if(!e.marks[r])throw Error(`There is no mark type named '${r}'. Maybe you forgot to add the extension?`);return e.marks[r]}return r}var wP=(r,e={})=>({tr:t,state:n,dispatch:i})=>{let o=or(r,n.schema),{doc:s,selection:a}=t,{$from:l,from:u,to:c}=a;if(i){let f=ma(l,o,e);if(f&&f.from<=u&&f.to>=c){let h=yP.TextSelection.create(s,f.from,f.to);t.setSelection(h)}}return!0},bP=r=>e=>{let t=typeof r=="function"?r(e):r;for(let n=0;n<t.length;n+=1)if(t[n](e))return!0;return!1},kP=Te();function Qf(r){return r instanceof kP.TextSelection}var sa=Te();function ir(r=0,e=0,t=0){return Math.min(Math.max(r,e),t)}function eh(r,e=null){if(!e)return null;let t=sa.Selection.atStart(r),n=sa.Selection.atEnd(r);if(e==="start"||e===!0)return t;if(e==="end")return n;let i=t.from,o=n.to;return e==="all"?sa.TextSelection.create(r,ir(0,i,o),ir(r.content.size,i,o)):sa.TextSelection.create(r,ir(e,i,o),ir(e,i,o))}function ga(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function hi(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var SP=(r=null,e={})=>({editor:t,view:n,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};let s=()=>{(hi()||ga())&&n.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(n.focus(),e?.scrollIntoView&&t.commands.scrollIntoView())})};if(n.hasFocus()&&r===null||r===!1)return!0;if(o&&r===null&&!Qf(t.state.selection))return s(),!0;let a=eh(i.doc,r)||t.state.selection,l=t.state.selection.eq(a);return o&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},xP=(r,e)=>t=>r.every((n,i)=>e(n,{...t,index:i})),EP=(r,e)=>({tr:t,commands:n})=>n.insertContentAt({from:t.selection.from,to:t.selection.to},r,e),_P=qt(),On=qt(),yk=r=>{let e=r.childNodes;for(let t=e.length-1;t>=0;t-=1){let n=e[t];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?r.removeChild(n):n.nodeType===1&&yk(n)}return r};function ui(r){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");let e=`<body>${r}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return yk(t)}function ci(r,e,t){if(r instanceof On.Node||r instanceof On.Fragment)return r;t={slice:!0,parseOptions:{},...t};let n=typeof r=="object"&&r!==null,i=typeof r=="string";if(n)try{if(Array.isArray(r)&&r.length>0)return On.Fragment.fromArray(r.map(a=>e.nodeFromJSON(a)));let s=e.nodeFromJSON(r);return t.errorOnInvalidContent&&s.check(),s}catch(o){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",r,"Error:",o),ci("",e,t)}if(i){if(t.errorOnInvalidContent){let s=!1,a="",l=new On.Schema({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(s=!0,a=typeof u=="string"?u:u.outerHTML,null)}]}})});if(t.slice?On.DOMParser.fromSchema(l).parseSlice(ui(r),t.parseOptions):On.DOMParser.fromSchema(l).parse(ui(r),t.parseOptions),t.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}let o=On.DOMParser.fromSchema(e);return t.slice?o.parseSlice(ui(r),t.parseOptions).content:o.parse(ui(r),t.parseOptions)}return ci("",e,t)}var TP=Te(),tk=jt();function wk(r,e,t){let n=r.steps.length-1;if(n<e)return;let i=r.steps[n];if(!(i instanceof tk.ReplaceStep||i instanceof tk.ReplaceAroundStep))return;let o=r.mapping.maps[n],s=0;o.forEach((a,l,u,c)=>{s===0&&(s=c)}),r.setSelection(TP.Selection.near(r.doc.resolve(s),t))}var AP=r=>!("type"in r),OP=(r,e,t)=>({tr:n,dispatch:i,editor:o})=>{var s;if(i){t={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let a,l=b=>{o.emit("contentError",{editor:o,error:b,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{ci(e,o.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(b){l(b)}try{a=ci(e,o.schema,{parseOptions:u,errorOnInvalidContent:(s=t.errorOnInvalidContent)!=null?s:o.options.enableContentCheck})}catch(b){return l(b),!1}let{from:c,to:f}=typeof r=="number"?{from:r,to:r}:{from:r.from,to:r.to},h=!0,d=!0;if((AP(a)?a:[a]).forEach(b=>{b.check(),h=h?b.isText&&b.marks.length===0:!1,d=d?b.isBlock:!1}),c===f&&d){let{parent:b}=n.doc.resolve(c);b.isTextblock&&!b.type.spec.code&&!b.childCount&&(c-=1,f+=1)}let g;if(h){if(Array.isArray(e))g=e.map(b=>b.text||"").join("");else if(e instanceof _P.Fragment){let b="";e.forEach(p=>{p.text&&(b+=p.text)}),g=b}else typeof e=="object"&&e&&e.text?g=e.text:g=e;n.insertText(g,c,f)}else{g=a;let b=n.doc.resolve(c),p=b.node(),S=b.parentOffset===0,k=p.isText||p.isTextblock,w=p.content.size>0;S&&k&&w&&(c=Math.max(0,c-1)),n.replaceWith(c,f,g)}t.updateSelection&&wk(n,n.steps.length-1,-1),t.applyInputRules&&n.setMeta("applyInputRules",{from:c,text:g}),t.applyPasteRules&&n.setMeta("applyPasteRules",{from:c,text:g})}return!0},va=rt(),CP=()=>({state:r,dispatch:e})=>(0,va.joinUp)(r,e),NP=()=>({state:r,dispatch:e})=>(0,va.joinDown)(r,e),RP=()=>({state:r,dispatch:e})=>(0,va.joinBackward)(r,e),MP=()=>({state:r,dispatch:e})=>(0,va.joinForward)(r,e),IP=jt(),PP=()=>({state:r,dispatch:e,tr:t})=>{try{let n=(0,IP.joinPoint)(r.doc,r.selection.$from.pos,-1);return n==null?!1:(t.join(n,2),e&&e(t),!0)}catch{return!1}},DP=jt(),LP=()=>({state:r,dispatch:e,tr:t})=>{try{let n=(0,DP.joinPoint)(r.doc,r.selection.$from.pos,1);return n==null?!1:(t.join(n,2),e&&e(t),!0)}catch{return!1}},FP=rt(),BP=()=>({state:r,dispatch:e})=>(0,FP.joinTextblockBackward)(r,e),zP=rt(),HP=()=>({state:r,dispatch:e})=>(0,zP.joinTextblockForward)(r,e);function th(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function jP(r){let e=r.split(/-(?!$)/),t=e[e.length-1];t==="Space"&&(t=" ");let n,i,o,s;for(let a=0;a<e.length-1;a+=1){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))hi()||th()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return n&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),s&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}var UP=r=>({editor:e,view:t,tr:n,dispatch:i})=>{let o=jP(r).split(/-(?!$)/),s=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",u=>u(t,a))});return l?.steps.forEach(u=>{let c=u.map(n.mapping);c&&i&&n.maybeStep(c)}),!0},qP=rt();function fi(r,e,t={}){let{from:n,to:i,empty:o}=r.selection,s=e?Ze(e,r.schema):null,a=[];r.doc.nodesBetween(n,i,(f,h)=>{if(f.isText)return;let d=Math.max(n,h),m=Math.min(i,h+f.nodeSize);a.push({node:f,from:d,to:m})});let l=i-n,u=a.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>go(f.node.attrs,t,{strict:!1}));return o?!!u.length:u.reduce((f,h)=>f+h.to-h.from,0)>=l}var WP=(r,e={})=>({state:t,dispatch:n})=>{let i=Ze(r,t.schema);return fi(t,i,e)?(0,qP.lift)(t,n):!1},VP=rt(),$P=()=>({state:r,dispatch:e})=>(0,VP.liftEmptyBlock)(r,e),KP=Xs(),GP=r=>({state:e,dispatch:t})=>{let n=Ze(r,e.schema);return(0,KP.liftListItem)(n)(e,t)},JP=rt(),XP=()=>({state:r,dispatch:e})=>(0,JP.newlineInCode)(r,e);function bo(r,e){return e.nodes[r]?"node":e.marks[r]?"mark":null}function Kf(r,e){let t=typeof e=="string"?[e]:e;return Object.keys(r).reduce((n,i)=>(t.includes(i)||(n[i]=r[i]),n),{})}var YP=(r,e)=>({tr:t,state:n,dispatch:i})=>{let o=null,s=null,a=bo(typeof r=="string"?r:r.name,n.schema);if(!a)return!1;a==="node"&&(o=Ze(r,n.schema)),a==="mark"&&(s=or(r,n.schema));let l=!1;return t.selection.ranges.forEach(u=>{n.doc.nodesBetween(u.$from.pos,u.$to.pos,(c,f)=>{o&&o===c.type&&(l=!0,i&&t.setNodeMarkup(f,void 0,Kf(c.attrs,e))),s&&c.marks.length&&c.marks.forEach(h=>{s===h.type&&(l=!0,i&&t.addMark(f,f+c.nodeSize,s.create(Kf(h.attrs,e))))})})}),l},ZP=()=>({tr:r,dispatch:e})=>(e&&r.scrollIntoView(),!0),QP=Te(),eD=()=>({tr:r,dispatch:e})=>{if(e){let t=new QP.AllSelection(r.doc);r.setSelection(t)}return!0},tD=rt(),rD=()=>({state:r,dispatch:e})=>(0,tD.selectNodeBackward)(r,e),nD=rt(),iD=()=>({state:r,dispatch:e})=>(0,nD.selectNodeForward)(r,e),oD=rt(),sD=()=>({state:r,dispatch:e})=>(0,oD.selectParentNode)(r,e),aD=rt(),lD=()=>({state:r,dispatch:e})=>(0,aD.selectTextblockEnd)(r,e),uD=rt(),cD=()=>({state:r,dispatch:e})=>(0,uD.selectTextblockStart)(r,e);function fa(r,e,t={},n={}){return ci(r,e,{slice:!1,parseOptions:t,errorOnInvalidContent:n.errorOnInvalidContent})}var fD=(r,{errorOnInvalidContent:e,emitUpdate:t=!0,parseOptions:n={}}={})=>({editor:i,tr:o,dispatch:s,commands:a})=>{let{doc:l}=o;if(n.preserveWhitespace!=="full"){let u=fa(r,i.schema,n,{errorOnInvalidContent:e??i.options.enableContentCheck});return s&&o.replaceWith(0,l.content.size,u).setMeta("preventUpdate",!t),!0}return s&&o.setMeta("preventUpdate",!t),a.insertContentAt({from:0,to:l.content.size},r,{parseOptions:n,errorOnInvalidContent:e??i.options.enableContentCheck})};function rh(r,e){let t=or(e,r.schema),{from:n,to:i,empty:o}=r.selection,s=[];o?(r.storedMarks&&s.push(...r.storedMarks),s.push(...r.selection.$head.marks())):r.doc.nodesBetween(n,i,l=>{s.push(...l.marks)});let a=s.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}var hD=jt();function bk(r,e){let t=new hD.Transform(r);return e.forEach(n=>{n.steps.forEach(i=>{t.step(i)})}),t}function kk(r){for(let e=0;e<r.edgeCount;e+=1){let{type:t}=r.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function dD(r,e){let t=[];return r.descendants((n,i)=>{e(n)&&t.push({node:n,pos:i})}),t}function pD(r,e,t){let n=[];return r.nodesBetween(e.from,e.to,(i,o)=>{t(i)&&n.push({node:i,pos:o})}),n}function Sk(r,e){for(let t=r.depth;t>0;t-=1){let n=r.node(t);if(e(n))return{pos:t>0?r.before(t):0,start:r.start(t),depth:t,node:n}}}function ko(r){return e=>Sk(e.$from,r)}function ye(r,e,t){return r.config[e]===void 0&&r.parent?ye(r.parent,e,t):typeof r.config[e]=="function"?r.config[e].bind({...t,parent:r.parent?ye(r.parent,e,t):null}):r.config[e]}function ya(r){return r.map(e=>{let t={name:e.name,options:e.options,storage:e.storage},n=ye(e,"addExtensions",t);return n?[e,...ya(n())]:e}).flat(10)}var mD=qt(),gD=qt();function So(r,e){let t=gD.DOMSerializer.fromSchema(e).serializeFragment(r),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}var vD=qt();function nh(r){return typeof r=="function"}function Oe(r,e=void 0,...t){return nh(r)?e?r.bind(e)(...t):r(...t):r}function xk(r={}){return Object.keys(r).length===0&&r.constructor===Object}function Cn(r){let e=r.filter(i=>i.type==="extension"),t=r.filter(i=>i.type==="node"),n=r.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:n}}function ih(r){let e=[],{nodeExtensions:t,markExtensions:n}=Cn(r),i=[...t,...n],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return r.forEach(s=>{let a={name:s.name,options:s.options,storage:s.storage,extensions:i},l=ye(s,"addGlobalAttributes",a);if(!l)return;l().forEach(c=>{c.types.forEach(f=>{Object.entries(c.attributes).forEach(([h,d])=>{e.push({type:f,name:h,attribute:{...o,...d}})})})})}),i.forEach(s=>{let a={name:s.name,options:s.options,storage:s.storage},l=ye(s,"addAttributes",a);if(!l)return;let u=l();Object.entries(u).forEach(([c,f])=>{let h={...o,...f};typeof h?.default=="function"&&(h.default=h.default()),h?.isRequired&&h?.default===void 0&&delete h.default,e.push({type:s.name,name:c,attribute:h})})}),e}function Ek(...r){return r.filter(e=>!!e).reduce((e,t)=>{let n={...e};return Object.entries(t).forEach(([i,o])=>{if(!n[i]){n[i]=o;return}if(i==="class"){let a=o?String(o).split(" "):[],l=n[i]?n[i].split(" "):[],u=a.filter(c=>!l.includes(c));n[i]=[...l,...u].join(" ")}else if(i==="style"){let a=o?o.split(";").map(c=>c.trim()).filter(Boolean):[],l=n[i]?n[i].split(";").map(c=>c.trim()).filter(Boolean):[],u=new Map;l.forEach(c=>{let[f,h]=c.split(":").map(d=>d.trim());u.set(f,h)}),a.forEach(c=>{let[f,h]=c.split(":").map(d=>d.trim());u.set(f,h)}),n[i]=Array.from(u.entries()).map(([c,f])=>`${c}: ${f}`).join("; ")}else n[i]=o}),n},{})}function vo(r,e){return e.filter(t=>t.type===r.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(r.attrs)||{}:{[t.name]:r.attrs[t.name]}).reduce((t,n)=>Ek(t,n),{})}function _k(r){return typeof r!="string"?r:r.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(r):r==="true"?!0:r==="false"?!1:r}function Gf(r,e){return"style"in r?r:{...r,getAttrs:t=>{let n=r.getAttrs?r.getAttrs(t):r.attrs;if(n===!1)return!1;let i=e.reduce((o,s)=>{let a=s.attribute.parseHTML?s.attribute.parseHTML(t):_k(t.getAttribute(s.name));return a==null?o:{...o,[s.name]:a}},{});return{...n,...i}}}}function rk(r){return Object.fromEntries(Object.entries(r).filter(([e,t])=>e==="attrs"&&xk(t)?!1:t!=null))}function nk(r){var e,t;let n={};return!((e=r?.attribute)!=null&&e.isRequired)&&"default"in(r?.attribute||{})&&(n.default=r.attribute.default),((t=r?.attribute)==null?void 0:t.validate)!==void 0&&(n.validate=r.attribute.validate),[r.name,n]}function oh(r,e){var t;let n=ih(r),{nodeExtensions:i,markExtensions:o}=Cn(r),s=(t=i.find(u=>ye(u,"topNode")))==null?void 0:t.name,a=Object.fromEntries(i.map(u=>{let c=n.filter(p=>p.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},h=r.reduce((p,S)=>{let k=ye(S,"extendNodeSchema",f);return{...p,...k?k(u):{}}},{}),d=rk({...h,content:Oe(ye(u,"content",f)),marks:Oe(ye(u,"marks",f)),group:Oe(ye(u,"group",f)),inline:Oe(ye(u,"inline",f)),atom:Oe(ye(u,"atom",f)),selectable:Oe(ye(u,"selectable",f)),draggable:Oe(ye(u,"draggable",f)),code:Oe(ye(u,"code",f)),whitespace:Oe(ye(u,"whitespace",f)),linebreakReplacement:Oe(ye(u,"linebreakReplacement",f)),defining:Oe(ye(u,"defining",f)),isolating:Oe(ye(u,"isolating",f)),attrs:Object.fromEntries(c.map(nk))}),m=Oe(ye(u,"parseHTML",f));m&&(d.parseDOM=m.map(p=>Gf(p,c)));let g=ye(u,"renderHTML",f);g&&(d.toDOM=p=>g({node:p,HTMLAttributes:vo(p,c)}));let b=ye(u,"renderText",f);return b&&(d.toText=b),[u.name,d]})),l=Object.fromEntries(o.map(u=>{let c=n.filter(b=>b.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},h=r.reduce((b,p)=>{let S=ye(p,"extendMarkSchema",f);return{...b,...S?S(u):{}}},{}),d=rk({...h,inclusive:Oe(ye(u,"inclusive",f)),excludes:Oe(ye(u,"excludes",f)),group:Oe(ye(u,"group",f)),spanning:Oe(ye(u,"spanning",f)),code:Oe(ye(u,"code",f)),attrs:Object.fromEntries(c.map(nk))}),m=Oe(ye(u,"parseHTML",f));m&&(d.parseDOM=m.map(b=>Gf(b,c)));let g=ye(u,"renderHTML",f);return g&&(d.toDOM=b=>g({mark:b,HTMLAttributes:vo(b,c)})),[u.name,d]}));return new vD.Schema({topNode:s,nodes:a,marks:l})}function Tk(r){let e=r.filter((t,n)=>r.indexOf(t)!==n);return Array.from(new Set(e))}function wa(r){return r.sort((t,n)=>{let i=ye(t,"priority")||100,o=ye(n,"priority")||100;return i>o?-1:i<o?1:0})}function ba(r){let e=wa(ya(r)),t=Tk(e.map(n=>n.name));return t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${t.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function ka(r,e){let t=ba(r);return oh(t,e)}function yD(r,e){let t=ka(e),n=mD.Node.fromJSON(t,r);return So(n.content,t)}var wD=qt();function bD(r,e){let t=ka(e),n=ui(r);return wD.DOMParser.fromSchema(t).parse(n).toJSON()}var kD=qt();function sh(r,e,t){let{from:n,to:i}=e,{blockSeparator:o=`

`,textSerializers:s={}}=t||{},a="";return r.nodesBetween(n,i,(l,u,c,f)=>{var h;l.isBlock&&u>n&&(a+=o);let d=s?.[l.type.name];if(d)return c&&(a+=d({node:l,pos:u,parent:c,index:f,range:e})),!1;l.isText&&(a+=(h=l?.text)==null?void 0:h.slice(Math.max(n,u)-u,i-u))}),a}function ah(r,e){let t={from:0,to:r.content.size};return sh(r,t,e)}function Sa(r){return Object.fromEntries(Object.entries(r.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function SD(r,e,t){let{blockSeparator:n=`

`,textSerializers:i={}}=t||{},o=ka(e),s=kD.Node.fromJSON(o,r);return ah(s,{blockSeparator:n,textSerializers:{...Sa(o),...i}})}function Ak(r,e){let t=Ze(e,r.schema),{from:n,to:i}=r.selection,o=[];r.doc.nodesBetween(n,i,a=>{o.push(a)});let s=o.reverse().find(a=>a.type.name===t.name);return s?{...s.attrs}:{}}function Ok(r,e){let t=bo(typeof e=="string"?e:e.name,r.schema);return t==="node"?Ak(r,e):t==="mark"?rh(r,e):{}}function Ck(r,e=JSON.stringify){let t={};return r.filter(n=>{let i=e(n);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function xD(r){let e=Ck(r);return e.length===1?e:e.filter((t,n)=>!e.filter((o,s)=>s!==n).some(o=>t.oldRange.from>=o.oldRange.from&&t.oldRange.to<=o.oldRange.to&&t.newRange.from>=o.newRange.from&&t.newRange.to<=o.newRange.to))}function Nk(r){let{mapping:e,steps:t}=r,n=[];return e.maps.forEach((i,o)=>{let s=[];if(i.ranges.length)i.forEach((a,l)=>{s.push({from:a,to:l})});else{let{from:a,to:l}=t[o];if(a===void 0||l===void 0)return;s.push({from:a,to:l})}s.forEach(({from:a,to:l})=>{let u=e.slice(o).map(a,-1),c=e.slice(o).map(l),f=e.invert().map(u,-1),h=e.invert().map(c);n.push({oldRange:{from:f,to:h},newRange:{from:u,to:c}})})}),xD(n)}function Rk(r,e=0){let n=r.type===r.type.schema.topNodeType?0:1,i=e,o=i+r.nodeSize,s=r.marks.map(u=>{let c={type:u.type.name};return Object.keys(u.attrs).length&&(c.attrs={...u.attrs}),c}),a={...r.attrs},l={type:r.type.name,from:i,to:o};return Object.keys(a).length&&(l.attrs=a),s.length&&(l.marks=s),r.content.childCount&&(l.content=[],r.forEach((u,c)=>{var f;(f=l.content)==null||f.push(Rk(u,e+c+n))})),r.text&&(l.text=r.text),l}function lh(r,e,t){let n=[];return r===e?t.resolve(r).marks().forEach(i=>{let o=t.resolve(r),s=ma(o,i.type);s&&n.push({mark:i,...s})}):t.nodesBetween(r,e,(i,o)=>{!i||i?.nodeSize===void 0||n.push(...i.marks.map(s=>({from:o,to:o+i.nodeSize,mark:s})))}),n}var ED=(r,e,t,n=20)=>{let i=r.doc.resolve(t),o=n,s=null;for(;o>0&&s===null;){let a=i.node(o);a?.type.name===e?s=a:o-=1}return[s,o]};function ca(r,e){return e.nodes[r]||e.marks[r]||null}function mo(r,e,t){return Object.fromEntries(Object.entries(t).filter(([n])=>{let i=r.find(o=>o.type===e&&o.name===n);return i?i.attribute.keepOnSplit:!1}))}var Mk=(r,e=500)=>{let t="",n=r.parentOffset;return r.parent.nodesBetween(Math.max(0,n-e),n,(i,o,s,a)=>{var l,u;let c=((u=(l=i.type.spec).toText)==null?void 0:u.call(l,{node:i,pos:o,parent:s,index:a}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?c:c.slice(0,Math.max(0,n-o))}),t};function ha(r,e,t={}){let{empty:n,ranges:i}=r.selection,o=e?or(e,r.schema):null;if(n)return!!(r.storedMarks||r.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>go(f.attrs,t,{strict:!1}));let s=0,a=[];if(i.forEach(({$from:f,$to:h})=>{let d=f.pos,m=h.pos;r.doc.nodesBetween(d,m,(g,b)=>{if(!g.isText&&!g.marks.length)return;let p=Math.max(d,b),S=Math.min(m,b+g.nodeSize),k=S-p;s+=k,a.push(...g.marks.map(w=>({mark:w,from:p,to:S})))})}),s===0)return!1;let l=a.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>go(f.mark.attrs,t,{strict:!1})).reduce((f,h)=>f+h.to-h.from,0),u=a.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,h)=>f+h.to-h.from,0);return(l>0?l+u:l)>=s}function Ik(r,e,t={}){if(!e)return fi(r,null,t)||ha(r,null,t);let n=bo(e,r.schema);return n==="node"?fi(r,e,t):n==="mark"?ha(r,e,t):!1}var _D=(r,e)=>{let{$from:t,$to:n,$anchor:i}=r.selection;if(e){let o=ko(a=>a.type.name===e)(r.selection);if(!o)return!1;let s=r.doc.resolve(o.pos+1);return i.pos+1===s.end()}return!(n.parentOffset<n.parent.nodeSize-2||t.pos!==n.pos)},TD=r=>{let{$from:e,$to:t}=r.selection;return!(e.parentOffset>0||e.pos!==t.pos)};function Jf(r,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===r.name):e}function Xf(r,e){let{nodeExtensions:t}=Cn(e),n=t.find(s=>s.name===r);if(!n)return!1;let i={name:n.name,options:n.options,storage:n.storage},o=Oe(ye(n,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function xa(r,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var n;if(t){if(r.type.name==="hardBreak")return!0;if(r.isText)return/^\s*$/m.test((n=r.text)!=null?n:"")}if(r.isText)return!r.text;if(r.isAtom||r.isLeaf)return!1;if(r.content.childCount===0)return!0;if(e){let i=!0;return r.content.forEach(o=>{i!==!1&&(xa(o,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}var AD=Te();function OD(r){return r instanceof AD.NodeSelection}function CD(r,e,t){let i=r.state.doc.content.size,o=ir(e,0,i),s=ir(t,0,i),a=r.coordsAtPos(o),l=r.coordsAtPos(s,-1),u=Math.min(a.top,l.top),c=Math.max(a.bottom,l.bottom),f=Math.min(a.left,l.left),h=Math.max(a.right,l.right),d=h-f,m=c-u,p={top:u,bottom:c,left:f,right:h,width:d,height:m,x:f,y:u};return{...p,toJSON:()=>p}}function Pk({json:r,validMarks:e,validNodes:t,options:n,rewrittenContent:i=[]}){return r.marks&&Array.isArray(r.marks)&&(r.marks=r.marks.filter(o=>{let s=typeof o=="string"?o:o.type;return e.has(s)?!0:(i.push({original:JSON.parse(JSON.stringify(o)),unsupported:s}),!1)})),r.content&&Array.isArray(r.content)&&(r.content=r.content.map(o=>Pk({json:o,validMarks:e,validNodes:t,options:n,rewrittenContent:i}).json).filter(o=>o!=null)),r.type&&!t.has(r.type)?(i.push({original:JSON.parse(JSON.stringify(r)),unsupported:r.type}),r.content&&Array.isArray(r.content)&&n?.fallbackToParagraph!==!1?(r.type="paragraph",{json:r,rewrittenContent:i}):{json:null,rewrittenContent:i}):{json:r,rewrittenContent:i}}function ND(r,e,t){return Pk({json:r,validNodes:new Set(Object.keys(e.nodes)),validMarks:new Set(Object.keys(e.marks)),options:t})}function RD(r,e,t){var n;let{selection:i}=e,o=null;if(Qf(i)&&(o=i.$cursor),o){let a=(n=r.storedMarks)!=null?n:o.marks();return o.parent.type.allowsMarkType(t)&&(!!t.isInSet(a)||!a.some(u=>u.type.excludes(t)))}let{ranges:s}=i;return s.some(({$from:a,$to:l})=>{let u=a.depth===0?r.doc.inlineContent&&r.doc.type.allowsMarkType(t):!1;return r.doc.nodesBetween(a.pos,l.pos,(c,f,h)=>{if(u)return!1;if(c.isInline){let d=!h||h.type.allowsMarkType(t),m=!!t.isInSet(c.marks)||!c.marks.some(g=>g.type.excludes(t));u=d&&m}return!u}),u})}var MD=(r,e={})=>({tr:t,state:n,dispatch:i})=>{let{selection:o}=t,{empty:s,ranges:a}=o,l=or(r,n.schema);if(i)if(s){let u=rh(n,l);t.addStoredMark(l.create({...u,...e}))}else a.forEach(u=>{let c=u.$from.pos,f=u.$to.pos;n.doc.nodesBetween(c,f,(h,d)=>{let m=Math.max(d,c),g=Math.min(d+h.nodeSize,f);h.marks.find(p=>p.type===l)?h.marks.forEach(p=>{l===p.type&&t.addMark(m,g,l.create({...p.attrs,...e}))}):t.addMark(m,g,l.create(e))})});return RD(n,t,l)},ID=(r,e)=>({tr:t})=>(t.setMeta(r,e),!0),ik=rt(),PD=(r,e={})=>({state:t,dispatch:n,chain:i})=>{let o=Ze(r,t.schema),s;return t.selection.$anchor.sameParent(t.selection.$head)&&(s=t.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:a})=>(0,ik.setBlockType)(o,{...s,...e})(t)?!0:a.clearNodes()).command(({state:a})=>(0,ik.setBlockType)(o,{...s,...e})(a,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},DD=Te(),LD=r=>({tr:e,dispatch:t})=>{if(t){let{doc:n}=e,i=ir(r,0,n.content.size),o=DD.NodeSelection.create(n,i);e.setSelection(o)}return!0},FD=(r,e)=>({tr:t,state:n,dispatch:i})=>{let{selection:o}=n,s,a;return typeof e=="number"?(s=e,a=e):e&&"from"in e&&"to"in e?(s=e.from,a=e.to):(s=o.from,a=o.to),i&&t.doc.nodesBetween(s,a,(l,u)=>{l.isText||t.setNodeMarkup(u,void 0,{...l.attrs,dir:r})}),!0},qf=Te(),BD=r=>({tr:e,dispatch:t})=>{if(t){let{doc:n}=e,{from:i,to:o}=typeof r=="number"?{from:r,to:r}:r,s=qf.TextSelection.atStart(n).from,a=qf.TextSelection.atEnd(n).to,l=ir(i,s,a),u=ir(o,s,a),c=qf.TextSelection.create(n,l,u);e.setSelection(c)}return!0},zD=Xs(),HD=r=>({state:e,dispatch:t})=>{let n=Ze(r,e.schema);return(0,zD.sinkListItem)(n)(e,t)},ok=Te(),Wf=jt();function sk(r,e){let t=r.storedMarks||r.selection.$to.parentOffset&&r.selection.$from.marks();if(t){let n=t.filter(i=>e?.includes(i.type.name));r.tr.ensureMarks(n)}}var jD=({keepMarks:r=!0}={})=>({tr:e,state:t,dispatch:n,editor:i})=>{let{selection:o,doc:s}=e,{$from:a,$to:l}=o,u=i.extensionManager.attributes,c=mo(u,a.node().type.name,a.node().attrs);if(o instanceof ok.NodeSelection&&o.node.isBlock)return!a.parentOffset||!(0,Wf.canSplit)(s,a.pos)?!1:(n&&(r&&sk(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;let f=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:kk(a.node(-1).contentMatchAt(a.indexAfter(-1))),d=f&&h?[{type:h,attrs:c}]:void 0,m=(0,Wf.canSplit)(e.doc,e.mapping.map(a.pos),1,d);if(!d&&!m&&(0,Wf.canSplit)(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(m=!0,d=h?[{type:h,attrs:c}]:void 0),n){if(m&&(o instanceof ok.TextSelection&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,d),h&&!f&&!a.parentOffset&&a.parent.type!==h)){let g=e.mapping.map(a.before()),b=e.doc.resolve(g);a.node(-1).canReplaceWith(b.index(),b.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}r&&sk(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},aa=qt(),UD=Te(),qD=jt(),WD=(r,e={})=>({tr:t,state:n,dispatch:i,editor:o})=>{var s;let a=Ze(r,n.schema),{$from:l,$to:u}=n.selection,c=n.selection.node;if(c&&c.isBlock||l.depth<2||!l.sameParent(u))return!1;let f=l.node(-1);if(f.type!==a)return!1;let h=o.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let p=aa.Fragment.empty,S=l.index(-1)?1:l.index(-2)?2:3;for(let F=l.depth-S;F>=l.depth-3;F-=1)p=aa.Fragment.from(l.node(F).copy(p));let k=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,w={...mo(h,l.node().type.name,l.node().attrs),...e},x=((s=a.contentMatch.defaultType)==null?void 0:s.createAndFill(w))||void 0;p=p.append(aa.Fragment.from(a.createAndFill(null,x)||void 0));let M=l.before(l.depth-(S-1));t.replace(M,l.after(-k),new aa.Slice(p,4-S,0));let I=-1;t.doc.nodesBetween(M,t.doc.content.size,(F,N)=>{if(I>-1)return!1;F.isTextblock&&F.content.size===0&&(I=N+1)}),I>-1&&t.setSelection(UD.TextSelection.near(t.doc.resolve(I))),t.scrollIntoView()}return!0}let d=u.pos===l.end()?f.contentMatchAt(0).defaultType:null,m={...mo(h,f.type.name,f.attrs),...e},g={...mo(h,l.node().type.name,l.node().attrs),...e};t.delete(l.pos,u.pos);let b=d?[{type:a,attrs:m},{type:d,attrs:g}]:[{type:a,attrs:m}];if(!(0,qD.canSplit)(t.doc,l.pos,2))return!1;if(i){let{selection:p,storedMarks:S}=n,{splittableMarks:k}=o.extensionManager,w=S||p.$to.parentOffset&&p.$from.marks();if(t.split(l.pos,2,b).scrollIntoView(),!w||!i)return!0;let x=w.filter(M=>k.includes(M.type.name));t.ensureMarks(x)}return!0},Dk=jt(),Vf=(r,e)=>{let t=ko(s=>s.type===e)(r.selection);if(!t)return!0;let n=r.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(n===void 0)return!0;let i=r.doc.nodeAt(n);return t.node.type===i?.type&&(0,Dk.canJoin)(r.doc,t.pos)&&r.join(t.pos),!0},$f=(r,e)=>{let t=ko(s=>s.type===e)(r.selection);if(!t)return!0;let n=r.doc.resolve(t.start).after(t.depth);if(n===void 0)return!0;let i=r.doc.nodeAt(n);return t.node.type===i?.type&&(0,Dk.canJoin)(r.doc,n)&&r.join(n),!0},VD=(r,e,t,n={})=>({editor:i,tr:o,state:s,dispatch:a,chain:l,commands:u,can:c})=>{let{extensions:f,splittableMarks:h}=i.extensionManager,d=Ze(r,s.schema),m=Ze(e,s.schema),{selection:g,storedMarks:b}=s,{$from:p,$to:S}=g,k=p.blockRange(S),w=b||g.$to.parentOffset&&g.$from.marks();if(!k)return!1;let x=ko(M=>Xf(M.type.name,f))(g);if(k.depth>=1&&x&&k.depth-x.depth<=1){if(x.node.type===d)return u.liftListItem(m);if(Xf(x.node.type.name,f)&&d.validContent(x.node.content)&&a)return l().command(()=>(o.setNodeMarkup(x.pos,d),!0)).command(()=>Vf(o,d)).command(()=>$f(o,d)).run()}return!t||!w||!a?l().command(()=>c().wrapInList(d,n)?!0:u.clearNodes()).wrapInList(d,n).command(()=>Vf(o,d)).command(()=>$f(o,d)).run():l().command(()=>{let M=c().wrapInList(d,n),I=w.filter(F=>h.includes(F.type.name));return o.ensureMarks(I),M?!0:u.clearNodes()}).wrapInList(d,n).command(()=>Vf(o,d)).command(()=>$f(o,d)).run()},$D=(r,e={},t={})=>({state:n,commands:i})=>{let{extendEmptyMarkRange:o=!1}=t,s=or(r,n.schema);return ha(n,s,e)?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},KD=(r,e,t={})=>({state:n,commands:i})=>{let o=Ze(r,n.schema),s=Ze(e,n.schema),a=fi(n,o,t),l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),a?i.setNode(s,l):i.setNode(o,{...l,...t})},GD=(r,e={})=>({state:t,commands:n})=>{let i=Ze(r,t.schema);return fi(t,i,e)?n.lift(i):n.wrapIn(i,e)},JD=()=>({state:r,dispatch:e})=>{let t=r.plugins;for(let n=0;n<t.length;n+=1){let i=t[n],o;if(i.spec.isInputRules&&(o=i.getState(r))){if(e){let s=r.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(o.text){let l=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,r.schema.text(o.text,l))}else s.delete(o.from,o.to)}return!0}}return!1},XD=()=>({tr:r,dispatch:e})=>{let{selection:t}=r,{empty:n,ranges:i}=t;return n||e&&i.forEach(o=>{r.removeMark(o.$from.pos,o.$to.pos)}),!0},YD=(r,e={})=>({tr:t,state:n,dispatch:i})=>{var o;let{extendEmptyMarkRange:s=!1}=e,{selection:a}=t,l=or(r,n.schema),{$from:u,empty:c,ranges:f}=a;if(!i)return!0;if(c&&s){let{from:h,to:d}=a,m=(o=u.marks().find(b=>b.type===l))==null?void 0:o.attrs,g=ma(u,l,m);g&&(h=g.from,d=g.to),t.removeMark(h,d,l)}else f.forEach(h=>{t.removeMark(h.$from.pos,h.$to.pos,l)});return t.removeStoredMark(l),!0},ZD=r=>({tr:e,state:t,dispatch:n})=>{let{selection:i}=t,o,s;return typeof r=="number"?(o=r,s=r):r&&"from"in r&&"to"in r?(o=r.from,s=r.to):(o=i.from,s=i.to),n&&e.doc.nodesBetween(o,s,(a,l)=>{if(a.isText)return;let u={...a.attrs};delete u.dir,e.setNodeMarkup(l,void 0,u)}),!0},QD=(r,e={})=>({tr:t,state:n,dispatch:i})=>{let o=null,s=null,a=bo(typeof r=="string"?r:r.name,n.schema);if(!a)return!1;a==="node"&&(o=Ze(r,n.schema)),a==="mark"&&(s=or(r,n.schema));let l=!1;return t.selection.ranges.forEach(u=>{let c=u.$from.pos,f=u.$to.pos,h,d,m,g;t.selection.empty?n.doc.nodesBetween(c,f,(b,p)=>{o&&o===b.type&&(l=!0,m=Math.max(p,c),g=Math.min(p+b.nodeSize,f),h=p,d=b)}):n.doc.nodesBetween(c,f,(b,p)=>{p<c&&o&&o===b.type&&(l=!0,m=Math.max(p,c),g=Math.min(p+b.nodeSize,f),h=p,d=b),p>=c&&p<=f&&(o&&o===b.type&&(l=!0,i&&t.setNodeMarkup(p,void 0,{...b.attrs,...e})),s&&b.marks.length&&b.marks.forEach(S=>{if(s===S.type&&(l=!0,i)){let k=Math.max(p,c),w=Math.min(p+b.nodeSize,f);t.addMark(k,w,s.create({...S.attrs,...e}))}}))}),d&&(h!==void 0&&i&&t.setNodeMarkup(h,void 0,{...d.attrs,...e}),s&&d.marks.length&&d.marks.forEach(b=>{s===b.type&&i&&t.addMark(m,g,s.create({...b.attrs,...e}))}))}),l},eL=rt(),tL=(r,e={})=>({state:t,dispatch:n})=>{let i=Ze(r,t.schema);return(0,eL.wrapIn)(i,e)(t,n)},rL=Xs(),nL=(r,e={})=>({state:t,dispatch:n})=>{let i=Ze(r,t.schema);return(0,rL.wrapInList)(i,e)(t,n)},iL=Te(),oL=uo(),sL=class{constructor(){this.callbacks={}}on(r,e){return this.callbacks[r]||(this.callbacks[r]=[]),this.callbacks[r].push(e),this}emit(r,...e){let t=this.callbacks[r];return t&&t.forEach(n=>n.apply(this,e)),this}off(r,e){let t=this.callbacks[r];return t&&(e?this.callbacks[r]=t.filter(n=>n!==e):delete this.callbacks[r]),this}once(r,e){let t=(...n)=>{this.off(r,t),e.apply(this,n)};return this.on(r,t)}removeAllListeners(){this.callbacks={}}},aL=Q1(),lL=qt(),uL=Te(),di=class{constructor(r){var e;this.find=r.find,this.handler=r.handler,this.undoable=(e=r.undoable)!=null?e:!0}},cL=(r,e)=>{if(pa(e))return e.exec(r);let t=e(r);if(!t)return null;let n=[t.text];return n.index=t.index,n.input=r,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(t.replaceWith)),n};function la(r){var e;let{editor:t,from:n,to:i,text:o,rules:s,plugin:a}=r,{view:l}=t;if(l.composing)return!1;let u=l.state.doc.resolve(n);if(u.parent.type.spec.code||(e=u.nodeBefore||u.nodeAfter)!=null&&e.marks.find(h=>h.type.spec.code))return!1;let c=!1,f=Mk(u)+o;return s.forEach(h=>{if(c)return;let d=cL(f,h.find);if(!d)return;let m=l.state.tr,g=yo({state:l.state,transaction:m}),b={from:n-(d[0].length-o.length),to:i},{commands:p,chain:S,can:k}=new wo({editor:t,state:g});h.handler({state:g,range:b,match:d,commands:p,chain:S,can:k})===null||!m.steps.length||(h.undoable&&m.setMeta(a,{transform:m,from:n,to:i,text:o}),l.dispatch(m),c=!0)}),c}function Lk(r){let{editor:e,rules:t}=r,n=new uL.Plugin({state:{init(){return null},apply(i,o,s){let a=i.getMeta(n);if(a)return a;let l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:c}=l;typeof c=="string"?c=c:c=So(lL.Fragment.from(c),s.schema);let{from:f}=l,h=f+c.length;la({editor:e,from:f,to:h,text:c,rules:t,plugin:n})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,s,a){return la({editor:e,from:o,to:s,text:a,rules:t,plugin:n})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{let{$cursor:o}=i.state.selection;o&&la({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:n})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;let{$cursor:s}=i.state.selection;return s?la({editor:e,from:s.pos,to:s.pos,text:`
`,rules:t,plugin:n}):!1}},isInputRules:!0});return n}function fL(r){return Object.prototype.toString.call(r).slice(8,-1)}function po(r){return fL(r)!=="Object"?!1:r.constructor===Object&&Object.getPrototypeOf(r)===Object.prototype}function uh(r,e){let t={...r};return po(r)&&po(e)&&Object.keys(e).forEach(n=>{po(e[n])&&po(r[n])?t[n]=uh(r[n],e[n]):t[n]=e[n]}),t}var Ea=class{constructor(r={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...r},this.name=this.config.name}get options(){return{...Oe(ye(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Oe(ye(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(r={}){let e=this.extend({...this.config,addOptions:()=>uh(this.options,r)});return e.name=this.name,e.parent=this.parent,e}extend(r={}){let e=new this.constructor({...this.config,...r});return e.parent=this,this.child=e,e.name="name"in r?r.name:e.parent.name,e}},Fk=class Bk extends Ea{constructor(){super(...arguments),this.type="mark"}static create(e={}){let t=typeof e=="function"?e():e;return new Bk(t)}static handleExit({editor:e,mark:t}){let{tr:n}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){let s=i.marks();if(!!!s.find(u=>u?.type.name===t.name))return!1;let l=s.find(u=>u?.type.name===t.name);return l&&n.removeStoredMark(l),n.insertText(" ",i.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){let t=typeof e=="function"?e():e;return super.extend(t)}},hL=qt(),dL=Te();function zk(r){return typeof r=="number"}var _a=class{constructor(r){this.find=r.find,this.handler=r.handler}},pL=(r,e,t)=>{if(pa(e))return[...r.matchAll(e)];let n=e(r,t);return n?n.map(i=>{let o=[i.text];return o.index=i.index,o.input=r,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function mL(r){let{editor:e,state:t,from:n,to:i,rule:o,pasteEvent:s,dropEvent:a}=r,{commands:l,chain:u,can:c}=new wo({editor:e,state:t}),f=[];return t.doc.nodesBetween(n,i,(d,m)=>{var g,b,p,S,k;if((b=(g=d.type)==null?void 0:g.spec)!=null&&b.code||!(d.isText||d.isTextblock||d.isInline))return;let w=(k=(S=(p=d.content)==null?void 0:p.size)!=null?S:d.nodeSize)!=null?k:0,x=Math.max(n,m),M=Math.min(i,m+w);if(x>=M)return;let I=d.isText?d.text||"":d.textBetween(x-m,M-m,void 0,"\uFFFC");pL(I,o.find,s).forEach(N=>{if(N.index===void 0)return;let K=x+N.index+1,ae=K+N[0].length,R={from:t.tr.mapping.map(K),to:t.tr.mapping.map(ae)},H=o.handler({state:t,range:R,match:N,commands:l,chain:u,can:c,pasteEvent:s,dropEvent:a});f.push(H)})}),f.every(d=>d!==null)}var ua=null,gL=r=>{var e;let t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)==null||e.setData("text/html",r),t};function Hk(r){let{editor:e,rules:t}=r,n=null,i=!1,o=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}let l=({state:c,from:f,to:h,rule:d,pasteEvt:m})=>{let g=c.tr,b=yo({state:c,transaction:g});if(!(!mL({editor:e,state:b,from:Math.max(f-1,0),to:h.b-1,rule:d,pasteEvent:m,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return t.map(c=>new dL.Plugin({view(f){let h=m=>{var g;n=(g=f.dom.parentElement)!=null&&g.contains(m.target)?f.dom.parentElement:null,n&&(ua=e)},d=()=>{ua&&(ua=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",d),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",d)}}},props:{handleDOMEvents:{drop:(f,h)=>{if(o=n===f.dom.parentElement,a=h,!o){let d=ua;d?.isEditable&&setTimeout(()=>{let m=d.state.selection;m&&d.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(f,h)=>{var d;let m=(d=h.clipboardData)==null?void 0:d.getData("text/html");return s=h,i=!!m?.includes("data-pm-slice"),!1}}},appendTransaction:(f,h,d)=>{let m=f[0],g=m.getMeta("uiEvent")==="paste"&&!i,b=m.getMeta("uiEvent")==="drop"&&!o,p=m.getMeta("applyPasteRules"),S=!!p;if(!g&&!b&&!S)return;if(S){let{text:x}=p;typeof x=="string"?x=x:x=So(hL.Fragment.from(x),d.schema);let{from:M}=p,I=M+x.length,F=gL(x);return l({rule:c,state:d,from:M,to:{b:I},pasteEvt:F})}let k=h.doc.content.findDiffStart(d.doc.content),w=h.doc.content.findDiffEnd(d.doc.content);if(!(!zk(k)||!w||k===w.b))return l({rule:c,state:d,from:k,to:w,pasteEvt:s})}}))}var Ta=class{constructor(r,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=r,this.extensions=ba(r),this.schema=oh(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((r,e)=>{let t={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:ca(e.name,this.schema)},n=ye(e,"addCommands",t);return n?{...r,...n()}:r},{})}get plugins(){let{editor:r}=this;return wa([...this.extensions].reverse()).flatMap(n=>{let i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:r,type:ca(n.name,this.schema)},o=[],s=ye(n,"addKeyboardShortcuts",i),a={};if(n.type==="mark"&&ye(n,"exitable",i)&&(a.ArrowRight=()=>Fk.handleExit({editor:r,mark:n})),s){let h=Object.fromEntries(Object.entries(s()).map(([d,m])=>[d,()=>m({editor:r})]));a={...a,...h}}let l=(0,aL.keymap)(a);o.push(l);let u=ye(n,"addInputRules",i);if(Jf(n,r.options.enableInputRules)&&u){let h=u();if(h&&h.length){let d=Lk({editor:r,rules:h}),m=Array.isArray(d)?d:[d];o.push(...m)}}let c=ye(n,"addPasteRules",i);if(Jf(n,r.options.enablePasteRules)&&c){let h=c();if(h&&h.length){let d=Hk({editor:r,rules:h});o.push(...d)}}let f=ye(n,"addProseMirrorPlugins",i);if(f){let h=f();o.push(...h)}return o})}get attributes(){return ih(this.extensions)}get nodeViews(){let{editor:r}=this,{nodeExtensions:e}=Cn(this.extensions);return Object.fromEntries(e.filter(t=>!!ye(t,"addNodeView")).map(t=>{let n=this.attributes.filter(l=>l.type===t.name),i={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:r,type:Ze(t.name,this.schema)},o=ye(t,"addNodeView",i);if(!o)return[];let s=o();if(!s)return[];let a=(l,u,c,f,h)=>{let d=vo(l,n);return s({node:l,view:u,getPos:c,decorations:f,innerDecorations:h,editor:r,extension:t,HTMLAttributes:d})};return[t.name,a]}))}get markViews(){let{editor:r}=this,{markExtensions:e}=Cn(this.extensions);return Object.fromEntries(e.filter(t=>!!ye(t,"addMarkView")).map(t=>{let n=this.attributes.filter(a=>a.type===t.name),i={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:r,type:or(t.name,this.schema)},o=ye(t,"addMarkView",i);if(!o)return[];let s=(a,l,u)=>{let c=vo(a,n);return o()({mark:a,view:l,inline:u,editor:r,extension:t,HTMLAttributes:c,updateAttributes:f=>{ch(a,r,f)}})};return[t.name,s]}))}setupExtensions(){let r=this.extensions;this.editor.extensionStorage=Object.fromEntries(r.map(e=>[e.name,e.storage])),r.forEach(e=>{var t;let n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:ca(e.name,this.schema)};e.type==="mark"&&((t=Oe(ye(e,"keepOnSplit",n)))==null||t)&&this.splittableMarks.push(e.name);let i=ye(e,"onBeforeCreate",n),o=ye(e,"onCreate",n),s=ye(e,"onUpdate",n),a=ye(e,"onSelectionUpdate",n),l=ye(e,"onTransaction",n),u=ye(e,"onFocus",n),c=ye(e,"onBlur",n),f=ye(e,"onDestroy",n);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),u&&this.editor.on("focus",u),c&&this.editor.on("blur",c),f&&this.editor.on("destroy",f)})}};Ta.resolve=ba;Ta.sort=wa;Ta.flatten=ya;var jk={};da(jk,{ClipboardTextSerializer:()=>qk,Commands:()=>Wk,Delete:()=>Vk,Drop:()=>$k,Editable:()=>Kk,FocusEvents:()=>Xk,Keymap:()=>Yk,Paste:()=>Zk,Tabindex:()=>Qk,TextDirection:()=>eS,focusEventsPluginKey:()=>Jk});var ak=Te(),$t=class Uk extends Ea{constructor(){super(...arguments),this.type="extension"}static create(e={}){let t=typeof e=="function"?e():e;return new Uk(t)}configure(e){return super.configure(e)}extend(e){let t=typeof e=="function"?e():e;return super.extend(t)}},qk=$t.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new ak.Plugin({key:new ak.PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:r}=this,{state:e,schema:t}=r,{doc:n,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map(c=>c.$from.pos)),a=Math.max(...o.map(c=>c.$to.pos)),l=Sa(t);return sh(n,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),Wk=$t.create({name:"commands",addCommands(){return{...Zf}}}),vL=jt(),Vk=$t.create({name:"delete",onUpdate({transaction:r,appendedTransactions:e}){var t,n,i;let o=()=>{var s,a,l,u;if((u=(l=(a=(s=this.editor.options.coreExtensionOptions)==null?void 0:s.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,r))!=null?u:r.getMeta("y-sync$"))return;let c=bk(r.before,[r,...e]);Nk(c).forEach(d=>{c.mapping.mapResult(d.oldRange.from).deletedAfter&&c.mapping.mapResult(d.oldRange.to).deletedBefore&&c.before.nodesBetween(d.oldRange.from,d.oldRange.to,(m,g)=>{let b=g+m.nodeSize-2,p=d.oldRange.from<=g&&b<=d.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:b,newFrom:c.mapping.map(g),newTo:c.mapping.map(b),deletedRange:d.oldRange,newRange:d.newRange,partial:!p,editor:this.editor,transaction:r,combinedTransform:c})})});let h=c.mapping;c.steps.forEach((d,m)=>{var g,b;if(d instanceof vL.RemoveMarkStep){let p=h.slice(m).map(d.from,-1),S=h.slice(m).map(d.to),k=h.invert().map(p,-1),w=h.invert().map(S),x=(g=c.doc.nodeAt(p-1))==null?void 0:g.marks.some(I=>I.eq(d.mark)),M=(b=c.doc.nodeAt(S))==null?void 0:b.marks.some(I=>I.eq(d.mark));this.editor.emit("delete",{type:"mark",mark:d.mark,from:d.from,to:d.to,deletedRange:{from:k,to:w},newRange:{from:p,to:S},partial:!!(M||x),editor:this.editor,transaction:r,combinedTransform:c})}})};(i=(n=(t=this.editor.options.coreExtensionOptions)==null?void 0:t.delete)==null?void 0:n.async)==null||i?setTimeout(o,0):o()}}),lk=Te(),$k=$t.create({name:"drop",addProseMirrorPlugins(){return[new lk.Plugin({key:new lk.PluginKey("tiptapDrop"),props:{handleDrop:(r,e,t,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:n})}}})]}}),uk=Te(),Kk=$t.create({name:"editable",addProseMirrorPlugins(){return[new uk.Plugin({key:new uk.PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Gk=Te(),Jk=new Gk.PluginKey("focusEvents"),Xk=$t.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:r}=this;return[new Gk.Plugin({key:Jk,props:{handleDOMEvents:{focus:(e,t)=>{r.isFocused=!0;let n=r.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,t)=>{r.isFocused=!1;let n=r.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),ho=Te(),Yk=$t.create({name:"keymap",addKeyboardShortcuts(){let r=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{let{selection:l,doc:u}=a,{empty:c,$anchor:f}=l,{pos:h,parent:d}=f,m=f.parent.isTextblock&&h>0?a.doc.resolve(h-1):f,g=m.parent.type.spec.isolating,b=f.pos-f.parentOffset,p=g&&m.parent.childCount===1?b===f.pos:ho.Selection.atStart(u).from===h;return!c||!d.type.isTextblock||d.textContent.length||!p||p&&f.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:r,"Mod-Backspace":r,"Shift-Backspace":r,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},o={...n,"Ctrl-h":r,"Alt-Backspace":r,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return hi()||th()?o:i},addProseMirrorPlugins(){return[new ho.Plugin({key:new ho.PluginKey("clearDocument"),appendTransaction:(r,e,t)=>{if(r.some(g=>g.getMeta("composition")))return;let n=r.some(g=>g.docChanged)&&!e.doc.eq(t.doc),i=r.some(g=>g.getMeta("preventClearDocument"));if(!n||i)return;let{empty:o,from:s,to:a}=e.selection,l=ho.Selection.atStart(e.doc).from,u=ho.Selection.atEnd(e.doc).to;if(o||!(s===l&&a===u)||!xa(t.doc))return;let h=t.tr,d=yo({state:t,transaction:h}),{commands:m}=new wo({editor:this.editor,state:d});if(m.clearNodes(),!!h.steps.length)return h}})]}}),ck=Te(),Zk=$t.create({name:"paste",addProseMirrorPlugins(){return[new ck.Plugin({key:new ck.PluginKey("tiptapPaste"),props:{handlePaste:(r,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),fk=Te(),Qk=$t.create({name:"tabindex",addProseMirrorPlugins(){return[new fk.Plugin({key:new fk.PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),hk=Te(),eS=$t.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];let{nodeExtensions:r}=Cn(this.extensions);return[{types:r.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{let t=e.getAttribute("dir");return t&&(t==="ltr"||t==="rtl"||t==="auto")?t:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new hk.Plugin({key:new hk.PluginKey("textDirection"),props:{attributes:()=>{let r=this.options.direction;return r?{dir:r}:{}}}})]}}),tS=class li{constructor(e,t,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=t,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can\u2019t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;let e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new li(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new li(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new li(e,this.editor)}get children(){let e=[];return this.node.content.forEach((t,n)=>{let i=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,s=this.pos+n+(o?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;let a=this.resolvedPos.doc.resolve(s);if(!i&&a.depth<=this.depth)return;let l=new li(a,this.editor,i,i?t:null);i&&(l.actualDepth=this.depth+1),e.push(new li(a,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){let e=this.children;return e[e.length-1]||null}closest(e,t={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===e)if(Object.keys(t).length>0){let o=i.node.attrs,s=Object.keys(t);for(let a=0;a<s.length;a+=1){let l=s[a];if(o[l]!==t[l])break}}else n=i;i=i.parent}return n}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},n=!1){let i=[];if(!this.children||this.children.length===0)return i;let o=Object.keys(t);return this.children.forEach(s=>{n&&i.length>0||(s.node.type.name===e&&o.every(l=>t[l]===s.node.attrs[l])&&i.push(s),!(n&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,t,n))))}),i}setAttribute(e){let{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}},yL=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function rS(r,e,t){let n=document.querySelector(`style[data-tiptap-style${t?`-${t}`:""}]`);if(n!==null)return n;let i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${t?`-${t}`:""}`,""),i.innerHTML=r,document.getElementsByTagName("head")[0].appendChild(i),i}var wL=class extends sL{constructor(r={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(r),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:i,moved:o})=>this.options.onDrop(n,i,o)),this.on("paste",({event:n,slice:i})=>this.options.onPaste(n,i)),this.on("delete",this.options.onDelete);let e=this.createDoc(),t=eh(e,this.options.autofocus);this.editorState=iL.EditorState.create({doc:e,schema:this.schema,selection:t||void 0}),this.options.element&&this.mount(this.options.element)}mount(r){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(r),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){let r=this.editorView.dom;r?.editor&&delete r.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(r){console.warn("Failed to remove CSS element:",r)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=rS(yL,this.options.injectNonce))}setOptions(r={}){this.options={...this.options,...r},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(r,e=!0){this.setOptions({editable:r}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:r=>{this.editorState=r},dispatch:r=>{this.dispatchTransaction(r)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(r,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in r)return Reflect.get(r,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(r,e){let t=nh(e)?e(r,[...this.state.plugins]):[...this.state.plugins,r],n=this.state.reconfigure({plugins:t});return this.view.updateState(n),n}unregisterPlugin(r){if(this.isDestroyed)return;let e=this.state.plugins,t=e;if([].concat(r).forEach(i=>{let o=typeof i=="string"?`${i}$`:i.key;t=t.filter(s=>!s.key.startsWith(o))}),e.length===t.length)return;let n=this.state.reconfigure({plugins:t});return this.view.updateState(n),n}createExtensionManager(){var r,e;let n=[...this.options.enableCoreExtensions?[Kk,qk.configure({blockSeparator:(e=(r=this.options.coreExtensionOptions)==null?void 0:r.clipboardTextSerializer)==null?void 0:e.blockSeparator}),Wk,Xk,Yk,Qk,$k,Zk,Vk,eS.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new Ta(n,this)}createCommandManager(){this.commandManager=new wo({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let r;try{r=fa(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(t=>t.name!=="collaboration"),this.createExtensionManager()}}),r=fa(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return r}createView(r){var e;this.editorView=new oL.EditorView(r,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});let t=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(t),this.prependClass(),this.injectCSS();let n=this.view.dom;n.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(r){this.isCapturingTransaction=!0,r(),this.isCapturingTransaction=!1;let e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(r){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=r;return}r.steps.forEach(u=>{var c;return(c=this.capturedTransaction)==null?void 0:c.step(u)});return}let{state:e,transactions:t}=this.state.applyTransaction(r),n=!this.state.selection.eq(e.selection),i=t.includes(r),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:r,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:r,appendedTransactions:t.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:r});let s=t.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),a=s?.getMeta("focus"),l=s?.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:s}),l&&this.emit("blur",{editor:this,event:l.event,transaction:s}),!(r.getMeta("preventUpdate")||!t.some(u=>u.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:r,appendedTransactions:t.slice(1)})}getAttributes(r){return Ok(this.state,r)}isActive(r,e){let t=typeof r=="string"?r:null,n=typeof r=="string"?e:r;return Ik(this.state,t,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return So(this.state.doc.content,this.schema)}getText(r){let{blockSeparator:e=`

`,textSerializers:t={}}=r||{};return ah(this.state.doc,{blockSeparator:e,textSerializers:{...Sa(this.schema),...t}})}get isEmpty(){return xa(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var r,e;return(e=(r=this.editorView)==null?void 0:r.isDestroyed)!=null?e:!0}$node(r,e){var t;return((t=this.$doc)==null?void 0:t.querySelector(r,e))||null}$nodes(r,e){var t;return((t=this.$doc)==null?void 0:t.querySelectorAll(r,e))||null}$pos(r){let e=this.state.doc.resolve(r);return new tS(e,this)}get $doc(){return this.$pos(0)}};function bL(r){return new di({find:r.find,handler:({state:e,range:t,match:n})=>{let i=Oe(r.getAttributes,void 0,n);if(i===!1||i===null)return null;let{tr:o}=e,s=n[n.length-1],a=n[0];if(s){let l=a.search(/\S/),u=t.from+a.indexOf(s),c=u+s.length;if(lh(t.from,t.to,e.doc).filter(d=>d.mark.type.excluded.find(g=>g===r.type&&g!==d.mark.type)).filter(d=>d.to>u).length)return null;c<t.to&&o.delete(c,t.to),u>t.from&&o.delete(t.from+l,u);let h=t.from+l+s.length;o.addMark(t.from+l,h,r.type.create(i||{})),o.removeStoredMark(r.type)}},undoable:r.undoable})}function kL(r){return new di({find:r.find,handler:({state:e,range:t,match:n})=>{let i=Oe(r.getAttributes,void 0,n)||{},{tr:o}=e,s=t.from,a=t.to,l=r.type.create(i);if(n[1]){let u=n[0].lastIndexOf(n[1]),c=s+u;c>a?c=a:a=c+n[1].length;let f=n[0][n[0].length-1];o.insertText(f,s+n[0].length-1),o.replaceWith(c,a,l)}else if(n[0]){let u=r.type.isInline?s:s-1;o.insert(u,r.type.create(i)).delete(o.mapping.map(s),o.mapping.map(a))}o.scrollIntoView()},undoable:r.undoable})}function SL(r){return new di({find:r.find,handler:({state:e,range:t,match:n})=>{let i=e.doc.resolve(t.from),o=Oe(r.getAttributes,void 0,n)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),r.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,r.type,o)},undoable:r.undoable})}function xL(r){return new di({find:r.find,handler:({state:e,range:t,match:n})=>{let i=r.replace,o=t.from,s=t.to;if(n[1]){let a=n[0].lastIndexOf(n[1]);i+=n[0].slice(a+n[1].length),o+=a;let l=o-s;l>0&&(i=n[0].slice(a-l,a)+i,o=s)}e.tr.insertText(i,o,s)},undoable:r.undoable})}var dk=jt();function EL(r){return new di({find:r.find,handler:({state:e,range:t,match:n,chain:i})=>{let o=Oe(r.getAttributes,void 0,n)||{},s=e.tr.delete(t.from,t.to),l=s.doc.resolve(t.from).blockRange(),u=l&&(0,dk.findWrapping)(l,r.type,o);if(!u)return null;if(s.wrap(l,u),r.keepMarks&&r.editor){let{selection:f,storedMarks:h}=e,{splittableMarks:d}=r.editor.extensionManager,m=h||f.$to.parentOffset&&f.$from.marks();if(m){let g=m.filter(b=>d.includes(b.type.name));s.ensureMarks(g)}}if(r.keepAttributes){let f=r.type.name==="bulletList"||r.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,o).run()}let c=s.doc.resolve(t.from-1).nodeBefore;c&&c.type===r.type&&(0,dk.canJoin)(s.doc,t.from-1)&&(!r.joinPredicate||r.joinPredicate(n,c))&&s.join(t.from-1)},undoable:r.undoable})}function _L(r){return r.children}var pk=(r,e)=>{if(r==="slot")return 0;if(r instanceof Function)return r(e);let{children:t,...n}=e??{};if(r==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[r,n,t]},TL=r=>"touches"in r,nS=class{constructor(r){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.handleMouseMove=s=>{if(!this.isResizing||!this.activeHandle)return;let a=s.clientX-this.startX,l=s.clientY-this.startY;this.handleResize(a,l)},this.handleTouchMove=s=>{if(!this.isResizing||!this.activeHandle)return;let a=s.touches[0];if(!a)return;let l=a.clientX-this.startX,u=a.clientY-this.startY;this.handleResize(l,u)},this.handleMouseUp=()=>{if(!this.isResizing)return;let s=this.element.offsetWidth,a=this.element.offsetHeight;this.onCommit(s,a),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=s=>{s.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=s=>{s.key==="Shift"&&(this.isShiftKeyPressed=!1)};var e,t,n,i,o;this.node=r.node,this.element=r.element,this.contentElement=r.contentElement,this.getPos=r.getPos,this.onResize=r.onResize,this.onCommit=r.onCommit,this.onUpdate=r.onUpdate,(e=r.options)!=null&&e.min&&(this.minSize={...this.minSize,...r.options.min}),(t=r.options)!=null&&t.max&&(this.maxSize=r.options.max),(n=r?.options)!=null&&n.directions&&(this.directions=r.options.directions),(i=r.options)!=null&&i.preserveAspectRatio&&(this.preserveAspectRatio=r.options.preserveAspectRatio),(o=r.options)!=null&&o.className&&(this.classNames={container:r.options.className.container||"",wrapper:r.options.className.wrapper||"",handle:r.options.className.handle||"",resizing:r.options.className.resizing||""}),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles()}get dom(){return this.container}get contentDOM(){return this.contentElement}update(r,e,t){return r.type!==this.node.type?!1:(this.node=r,this.onUpdate?this.onUpdate(r,e,t):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.container.remove()}createContainer(){let r=document.createElement("div");return r.dataset.resizeContainer="",r.dataset.node=this.node.type.name,r.style.display="flex",r.style.justifyContent="flex-start",r.style.alignItems="flex-start",this.classNames.container&&(r.className=this.classNames.container),r.appendChild(this.wrapper),r}createWrapper(){let r=document.createElement("div");return r.style.position="relative",r.style.display="block",r.dataset.resizeWrapper="",this.classNames.wrapper&&(r.className=this.classNames.wrapper),r.appendChild(this.element),r}createHandle(r){let e=document.createElement("div");return e.dataset.resizeHandle=r,e.style.position="absolute",this.classNames.handle&&(e.className=this.classNames.handle),e}positionHandle(r,e){let t=e.includes("top"),n=e.includes("bottom"),i=e.includes("left"),o=e.includes("right");t&&(r.style.top="0"),n&&(r.style.bottom="0"),i&&(r.style.left="0"),o&&(r.style.right="0"),(e==="top"||e==="bottom")&&(r.style.left="0",r.style.right="0"),(e==="left"||e==="right")&&(r.style.top="0",r.style.bottom="0")}attachHandles(){this.directions.forEach(r=>{let e=this.createHandle(r);this.positionHandle(e,r),e.addEventListener("mousedown",t=>this.handleResizeStart(t,r)),e.addEventListener("touchstart",t=>this.handleResizeStart(t,r)),this.wrapper.appendChild(e)})}applyInitialSize(){let r=this.node.attrs.width,e=this.node.attrs.height;r?(this.element.style.width=`${r}px`,this.initialWidth=r):this.initialWidth=this.element.offsetWidth,e?(this.element.style.height=`${e}px`,this.initialHeight=e):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(r,e){r.preventDefault(),r.stopPropagation(),this.isResizing=!0,this.activeHandle=e,TL(r)?(this.startX=r.touches[0].clientX,this.startY=r.touches[0].clientY):(this.startX=r.clientX,this.startY=r.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight);let t=this.getPos();this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(r,e){if(!this.activeHandle)return;let t=this.preserveAspectRatio||this.isShiftKeyPressed,{width:n,height:i}=this.calculateNewDimensions(this.activeHandle,r,e),o=this.applyConstraints(n,i,t);this.element.style.width=`${o.width}px`,this.element.style.height=`${o.height}px`,this.onResize&&this.onResize(o.width,o.height)}calculateNewDimensions(r,e,t){let n=this.startWidth,i=this.startHeight,o=r.includes("right"),s=r.includes("left"),a=r.includes("bottom"),l=r.includes("top");return o?n=this.startWidth+e:s&&(n=this.startWidth-e),a?i=this.startHeight+t:l&&(i=this.startHeight-t),(r==="right"||r==="left")&&(n=this.startWidth+(o?e:-e)),(r==="top"||r==="bottom")&&(i=this.startHeight+(a?t:-t)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(n,i,r):{width:n,height:i}}applyConstraints(r,e,t){var n,i,o,s;if(!t){let u=Math.max(this.minSize.width,r),c=Math.max(this.minSize.height,e);return(n=this.maxSize)!=null&&n.width&&(u=Math.min(this.maxSize.width,u)),(i=this.maxSize)!=null&&i.height&&(c=Math.min(this.maxSize.height,c)),{width:u,height:c}}let a=r,l=e;return a<this.minSize.width&&(a=this.minSize.width,l=a/this.aspectRatio),l<this.minSize.height&&(l=this.minSize.height,a=l*this.aspectRatio),(o=this.maxSize)!=null&&o.width&&a>this.maxSize.width&&(a=this.maxSize.width,l=a/this.aspectRatio),(s=this.maxSize)!=null&&s.height&&l>this.maxSize.height&&(l=this.maxSize.height,a=l*this.aspectRatio),{width:a,height:l}}applyAspectRatio(r,e,t){let n=t==="left"||t==="right",i=t==="top"||t==="bottom";return n?{width:r,height:r/this.aspectRatio}:i?{width:e*this.aspectRatio,height:e}:{width:r,height:r/this.aspectRatio}}},AL=nS,OL=Te();function CL(r,e){let{selection:t}=r,{$from:n}=t;if(t instanceof OL.NodeSelection){let o=n.index();return n.parent.canReplaceWith(o,o+1,e)}let i=n.depth;for(;i>=0;){let o=n.index(i);if(n.node(i).contentMatchAt(o).matchType(e))return!0;i-=1}return!1}function NL(r){return r.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function RL(r){return typeof r=="string"}var iS={};da(iS,{createAtomBlockMarkdownSpec:()=>oS,createBlockMarkdownSpec:()=>sS,createInlineMarkdownSpec:()=>aS,parseAttributes:()=>Aa,parseIndentedBlocks:()=>lS,renderNestedMarkdownContent:()=>uS,serializeAttributes:()=>Oa});function Aa(r){if(!r?.trim())return{};let e={},t=[],n=r.replace(/["']([^"']*)["']/g,u=>(t.push(u),`__QUOTED_${t.length-1}__`)),i=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){let u=i.map(c=>c.trim().slice(1));e.class=u.join(" ")}let o=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(e.id=o[1]);let s=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(s)).forEach(([,u,c])=>{var f;let h=parseInt(((f=c.match(/__QUOTED_(\d+)__/))==null?void 0:f[1])||"0",10),d=t[h];d&&(e[u]=d.slice(1,-1))});let l=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(c=>{c.match(/^[a-zA-Z][\w-]*$/)&&(e[c]=!0)}),e}function Oa(r){if(!r||Object.keys(r).length===0)return"";let e=[];return r.class&&String(r.class).split(/\s+/).filter(Boolean).forEach(n=>e.push(`.${n}`)),r.id&&e.push(`#${r.id}`),Object.entries(r).forEach(([t,n])=>{t==="class"||t==="id"||(n===!0?e.push(t):n!==!1&&n!=null&&e.push(`${t}="${String(n)}"`))}),e.join(" ")}function oS(r){let{nodeName:e,name:t,parseAttributes:n=Aa,serializeAttributes:i=Oa,defaultAttributes:o={},requiredAttributes:s=[],allowedAttributes:a}=r,l=t||e,u=c=>{if(!a)return c;let f={};return a.forEach(h=>{h in c&&(f[h]=c[h])}),f};return{parseMarkdown:(c,f)=>{let h={...o,...c.attributes};return f.createNode(e,h,[])},markdownTokenizer:{name:e,level:"block",start(c){var f;let h=new RegExp(`^:::${l}(?:\\s|$)`,"m"),d=(f=c.match(h))==null?void 0:f.index;return d!==void 0?d:-1},tokenize(c,f,h){let d=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=c.match(d);if(!m)return;let g=m[1]||"",b=n(g);if(!s.find(S=>!(S in b)))return{type:e,raw:m[0],attributes:b}}},renderMarkdown:c=>{let f=u(c.attrs||{}),h=i(f),d=h?` {${h}}`:"";return`:::${l}${d} :::`}}}function sS(r){let{nodeName:e,name:t,getContent:n,parseAttributes:i=Aa,serializeAttributes:o=Oa,defaultAttributes:s={},content:a="block",allowedAttributes:l}=r,u=t||e,c=f=>{if(!l)return f;let h={};return l.forEach(d=>{d in f&&(h[d]=f[d])}),h};return{parseMarkdown:(f,h)=>{let d;if(n){let g=n(f);d=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?d=h.parseChildren(f.tokens||[]):d=h.parseInline(f.tokens||[]);let m={...s,...f.attributes};return h.createNode(e,m,d)},markdownTokenizer:{name:e,level:"block",start(f){var h;let d=new RegExp(`^:::${u}`,"m"),m=(h=f.match(d))==null?void 0:h.index;return m!==void 0?m:-1},tokenize(f,h,d){var m;let g=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),b=f.match(g);if(!b)return;let[p,S=""]=b,k=i(S),w=1,x=p.length,M="",I=/^:::([\w-]*)(\s.*)?/gm,F=f.slice(x);for(I.lastIndex=0;;){let N=I.exec(F);if(N===null)break;let K=N.index,ae=N[1];if(!((m=N[2])!=null&&m.endsWith(":::"))){if(ae)w+=1;else if(w-=1,w===0){let R=F.slice(0,K);M=R.trim();let H=f.slice(0,x+K+N[0].length),T=[];if(M)if(a==="block")for(T=d.blockTokens(R),T.forEach(V=>{V.text&&(!V.tokens||V.tokens.length===0)&&(V.tokens=d.inlineTokens(V.text))});T.length>0;){let V=T[T.length-1];if(V.type==="paragraph"&&(!V.text||V.text.trim()===""))T.pop();else break}else T=d.inlineTokens(M);return{type:e,raw:H,attributes:k,content:M,tokens:T}}}}}},renderMarkdown:(f,h)=>{let d=c(f.attrs||{}),m=o(d),g=m?` {${m}}`:"",b=h.renderChildren(f.content||[],`

`);return`:::${u}${g}

${b}

:::`}}}function ML(r){if(!r.trim())return{};let e={},t=/(\w+)=(?:"([^"]*)"|'([^']*)')/g,n=t.exec(r);for(;n!==null;){let[,i,o,s]=n;e[i]=o||s,n=t.exec(r)}return e}function IL(r){return Object.entries(r).filter(([,e])=>e!=null).map(([e,t])=>`${e}="${t}"`).join(" ")}function aS(r){let{nodeName:e,name:t,getContent:n,parseAttributes:i=ML,serializeAttributes:o=IL,defaultAttributes:s={},selfClosing:a=!1,allowedAttributes:l}=r,u=t||e,c=h=>{if(!l)return h;let d={};return l.forEach(m=>{m in h&&(d[m]=h[m])}),d},f=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(h,d)=>{let m={...s,...h.attributes};if(a)return d.createNode(e,m);let g=n?n(h):h.content||"";return g?d.createNode(e,m,[d.createTextNode(g)]):d.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(h){let d=a?new RegExp(`\\[${f}\\s*[^\\]]*\\]`):new RegExp(`\\[${f}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${f}\\]`),m=h.match(d),g=m?.index;return g!==void 0?g:-1},tokenize(h,d,m){let g=a?new RegExp(`^\\[${f}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${f}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${f}\\]`),b=h.match(g);if(!b)return;let p="",S="";if(a){let[,w]=b;S=w}else{let[,w,x]=b;S=w,p=x||""}let k=i(S.trim());return{type:e,raw:b[0],content:p.trim(),attributes:k}}},renderMarkdown:h=>{let d="";n?d=n(h):h.content&&h.content.length>0&&(d=h.content.filter(p=>p.type==="text").map(p=>p.text).join(""));let m=c(h.attrs||{}),g=o(m),b=g?` ${g}`:"";return a?`[${u}${b}]`:`[${u}${b}]${d}[/${u}]`}}}function lS(r,e,t){var n,i,o,s;let a=r.split(`
`),l=[],u="",c=0,f=e.baseIndentSize||2;for(;c<a.length;){let h=a[c],d=h.match(e.itemPattern);if(!d){if(l.length>0)break;if(h.trim()===""){c+=1,u=`${u}${h}
`;continue}else return}let m=e.extractItemData(d),{indentLevel:g,mainContent:b}=m;u=`${u}${h}
`;let p=[b];for(c+=1;c<a.length;){let x=a[c];if(x.trim()===""){let I=a.slice(c+1).findIndex(K=>K.trim()!=="");if(I===-1)break;if((((i=(n=a[c+1+I].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:i.length)||0)>g){p.push(x),u=`${u}${x}
`,c+=1;continue}else break}if((((s=(o=x.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:s.length)||0)>g)p.push(x),u=`${u}${x}
`,c+=1;else break}let S,k=p.slice(1);if(k.length>0){let x=k.map(M=>M.slice(g+f)).join(`
`);x.trim()&&(e.customNestedParser?S=e.customNestedParser(x):S=t.blockTokens(x))}let w=e.createToken(m,S);l.push(w)}if(l.length!==0)return{items:l,raw:u}}function uS(r,e,t,n){if(!r||!Array.isArray(r.content))return"";let i=typeof t=="function"?t(n):t,[o,...s]=r.content,a=e.renderChildren([o]),l=[`${i}${a}`];return s&&s.length>0&&s.forEach(u=>{let c=e.renderChildren([u]);if(c){let f=c.split(`
`).map(h=>h?e.indent(h):"").join(`
`);l.push(f)}}),l.join(`
`)}function ch(r,e,t={}){let{state:n}=e,{doc:i,tr:o}=n,s=r;i.descendants((a,l)=>{let u=o.mapping.map(l),c=o.mapping.map(l)+a.nodeSize,f=null;if(a.marks.forEach(d=>{if(d!==s)return!1;f=d}),!f)return;let h=!1;if(Object.keys(t).forEach(d=>{t[d]!==f.attrs[d]&&(h=!0)}),h){let d=r.type.create({...r.attrs,...t});o.removeMark(u,c,r.type),o.addMark(u,c,d)}}),o.docChanged&&e.view.dispatch(o)}var PL=class{constructor(r,e,t){this.component=r,this.editor=e.editor,this.options={...t},this.mark=e.mark,this.HTMLAttributes=e.HTMLAttributes}get dom(){return this.editor.view.dom}get contentDOM(){return null}updateAttributes(r,e){ch(e||this.mark,this.editor,r)}ignoreMutation(r){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:r}):r.type==="selection"||this.dom.contains(r.target)&&r.type==="childList"&&(hi()||ga())&&this.editor.isFocused&&[...Array.from(r.addedNodes),...Array.from(r.removedNodes)].every(t=>t.isContentEditable)?!1:this.contentDOM===r.target&&r.type==="attributes"?!0:!this.contentDOM.contains(r.target)}},DL=class cS extends Ea{constructor(){super(...arguments),this.type="node"}static create(e={}){let t=typeof e=="function"?e():e;return new cS(t)}configure(e){return super.configure(e)}extend(e){let t=typeof e=="function"?e():e;return super.extend(t)}},mk=Te(),LL=class{constructor(r,e,t){this.isDragging=!1,this.component=r,this.editor=e.editor,this.options={stopEvent:null,ignoreMutation:null,...t},this.extension=e.extension,this.node=e.node,this.decorations=e.decorations,this.innerDecorations=e.innerDecorations,this.view=e.view,this.HTMLAttributes=e.HTMLAttributes,this.getPos=e.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(r){var e,t,n,i,o,s,a;let{view:l}=this.editor,u=r.target,c=u.nodeType===3?(e=u.parentElement)==null?void 0:e.closest("[data-drag-handle]"):u.closest("[data-drag-handle]");if(!this.dom||(t=this.contentDOM)!=null&&t.contains(u)||!c)return;let f=0,h=0;if(this.dom!==c){let S=this.dom.getBoundingClientRect(),k=c.getBoundingClientRect(),w=(i=r.offsetX)!=null?i:(n=r.nativeEvent)==null?void 0:n.offsetX,x=(s=r.offsetY)!=null?s:(o=r.nativeEvent)==null?void 0:o.offsetY;f=k.x-S.x+w,h=k.y-S.y+x}let d=this.dom.cloneNode(!0);try{let S=this.dom.getBoundingClientRect();d.style.width=`${Math.round(S.width)}px`,d.style.height=`${Math.round(S.height)}px`,d.style.boxSizing="border-box",d.style.pointerEvents="none"}catch{}let m=null;try{m=document.createElement("div"),m.style.position="absolute",m.style.top="-9999px",m.style.left="-9999px",m.style.pointerEvents="none",m.appendChild(d),document.body.appendChild(m),(a=r.dataTransfer)==null||a.setDragImage(d,f,h)}finally{m&&setTimeout(()=>{try{m?.remove()}catch{}},0)}let g=this.getPos();if(typeof g!="number")return;let b=mk.NodeSelection.create(l.state.doc,g),p=l.state.tr.setSelection(b);l.dispatch(p)}stopEvent(r){var e;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:r});let t=r.target;if(!(this.dom.contains(t)&&!((e=this.contentDOM)!=null&&e.contains(t))))return!1;let i=r.type.startsWith("drag"),o=r.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(t.tagName)||t.isContentEditable)&&!o&&!i)return!0;let{isEditable:a}=this.editor,{isDragging:l}=this,u=!!this.node.type.spec.draggable,c=mk.NodeSelection.isSelectable(this.node),f=r.type==="copy",h=r.type==="paste",d=r.type==="cut",m=r.type==="mousedown";if(!u&&c&&i&&r.target===this.dom&&r.preventDefault(),u&&i&&!l&&r.target===this.dom)return r.preventDefault(),!1;if(u&&a&&!l&&m){let g=t.closest("[data-drag-handle]");g&&(this.dom===g||this.dom.contains(g))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(l||o||f||h||d||m&&c)}ignoreMutation(r){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:r}):this.node.isLeaf||this.node.isAtom?!0:r.type==="selection"||this.dom.contains(r.target)&&r.type==="childList"&&(hi()||ga())&&this.editor.isFocused&&[...Array.from(r.addedNodes),...Array.from(r.removedNodes)].every(t=>t.isContentEditable)?!1:this.contentDOM===r.target&&r.type==="attributes"?!0:!this.contentDOM.contains(r.target)}updateAttributes(r){this.editor.commands.command(({tr:e})=>{let t=this.getPos();return typeof t!="number"?!1:(e.setNodeMarkup(t,void 0,{...this.node.attrs,...r}),!0)})}deleteNode(){let r=this.getPos();if(typeof r!="number")return;let e=r+this.node.nodeSize;this.editor.commands.deleteRange({from:r,to:e})}};function FL(r){return new _a({find:r.find,handler:({state:e,range:t,match:n,pasteEvent:i})=>{let o=Oe(r.getAttributes,void 0,n,i);if(o===!1||o===null)return null;let{tr:s}=e,a=n[n.length-1],l=n[0],u=t.to;if(a){let c=l.search(/\S/),f=t.from+l.indexOf(a),h=f+a.length;if(lh(t.from,t.to,e.doc).filter(m=>m.mark.type.excluded.find(b=>b===r.type&&b!==m.mark.type)).filter(m=>m.to>f).length)return null;h<t.to&&s.delete(h,t.to),f>t.from&&s.delete(t.from+c,f),u=t.from+c+a.length,s.addMark(t.from+c,u,r.type.create(o||{})),s.removeStoredMark(r.type)}}})}function BL(r){return new _a({find:r.find,handler({match:e,chain:t,range:n,pasteEvent:i}){let o=Oe(r.getAttributes,void 0,e,i),s=Oe(r.getContent,void 0,o);if(o===!1||o===null)return null;let a={type:r.type.name,attrs:o};s&&(a.content=s),e.input&&t().deleteRange(n).insertContentAt(n.from,a)}})}function zL(r){return new _a({find:r.find,handler:({state:e,range:t,match:n})=>{let i=r.replace,o=t.from,s=t.to;if(n[1]){let a=n[0].lastIndexOf(n[1]);i+=n[0].slice(a+n[1].length),o+=a;let l=o-s;l>0&&(i=n[0].slice(a-l,a)+i,o=s)}e.tr.insertText(i,o,s)}})}var HL=class{constructor(r){this.transaction=r,this.currentStep=this.transaction.steps.length}map(r){let e=!1;return{position:this.transaction.steps.slice(this.currentStep).reduce((n,i)=>{let o=i.getMap().mapResult(n);return o.deleted&&(e=!0),o.pos},r),deleted:e}}}});var pS=me((vj,dS)=>{"use strict";var fh=Object.defineProperty,jL=Object.getOwnPropertyDescriptor,UL=Object.getOwnPropertyNames,qL=Object.prototype.hasOwnProperty,WL=(r,e)=>{for(var t in e)fh(r,t,{get:e[t],enumerable:!0})},VL=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of UL(e))!qL.call(r,i)&&i!==t&&fh(r,i,{get:()=>e[i],enumerable:!(n=jL(e,i))||n.enumerable});return r},$L=r=>VL(fh({},"__esModule",{value:!0}),r),hS={};WL(hS,{Fragment:()=>KL,createElement:()=>xo,h:()=>xo,jsx:()=>xo,jsxDEV:()=>xo,jsxs:()=>xo});dS.exports=$L(hS);function KL(r){return r.children}var xo=(r,e)=>{if(r==="slot")return 0;if(r instanceof Function)return r(e);let{children:t,...n}=e??{};if(r==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[r,n,t]}});var hh=me((yj,mS)=>{mS.exports=pS()});var kS=me((wj,bS)=>{"use strict";var ph=Object.defineProperty,GL=Object.getOwnPropertyDescriptor,JL=Object.getOwnPropertyNames,XL=Object.prototype.hasOwnProperty,YL=(r,e)=>{for(var t in e)ph(r,t,{get:e[t],enumerable:!0})},ZL=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of JL(e))!XL.call(r,i)&&i!==t&&ph(r,i,{get:()=>e[i],enumerable:!(n=GL(e,i))||n.enumerable});return r},QL=r=>ZL(ph({},"__esModule",{value:!0}),r),vS={};YL(vS,{Blockquote:()=>wS,default:()=>e2,inputRegex:()=>yS});bS.exports=QL(vS);var dh=we(),gS=hh(),yS=/^\s*>\s$/,wS=dh.Node.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:r}){return(0,gS.jsx)("blockquote",{...(0,dh.mergeAttributes)(this.options.HTMLAttributes,r),children:(0,gS.jsx)("slot",{})})},parseMarkdown:(r,e)=>e.createNode("blockquote",void 0,e.parseChildren(r.tokens||[])),renderMarkdown:(r,e)=>{if(!r.content)return"";let t=">",n=[];return r.content.forEach(i=>{let a=e.renderChildren([i]).split(`
`).map(l=>l.trim()===""?t:`${t} ${l}`);n.push(a.join(`
`))}),n.join(`
${t}
`)},addCommands(){return{setBlockquote:()=>({commands:r})=>r.wrapIn(this.name),toggleBlockquote:()=>({commands:r})=>r.toggleWrap(this.name),unsetBlockquote:()=>({commands:r})=>r.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,dh.wrappingInputRule)({find:yS,type:this.type})]}}),e2=wS});var NS=me((bj,CS)=>{"use strict";var mh=Object.defineProperty,t2=Object.getOwnPropertyDescriptor,r2=Object.getOwnPropertyNames,n2=Object.prototype.hasOwnProperty,i2=(r,e)=>{for(var t in e)mh(r,t,{get:e[t],enumerable:!0})},o2=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of r2(e))!n2.call(r,i)&&i!==t&&mh(r,i,{get:()=>e[i],enumerable:!(n=t2(e,i))||n.enumerable});return r},s2=r=>o2(mh({},"__esModule",{value:!0}),r),xS={};i2(xS,{Bold:()=>OS,default:()=>a2,starInputRegex:()=>ES,starPasteRegex:()=>_S,underscoreInputRegex:()=>TS,underscorePasteRegex:()=>AS});CS.exports=s2(xS);var pi=we(),SS=hh(),ES=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,_S=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,TS=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,AS=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,OS=pi.Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:r=>r.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:r=>r.type.name===this.name},{style:"font-weight",getAttrs:r=>/^(bold(er)?|[5-9]\d{2,})$/.test(r)&&null}]},renderHTML({HTMLAttributes:r}){return(0,SS.jsx)("strong",{...(0,pi.mergeAttributes)(this.options.HTMLAttributes,r),children:(0,SS.jsx)("slot",{})})},markdownTokenName:"strong",parseMarkdown:(r,e)=>e.applyMark("bold",e.parseInline(r.tokens||[])),renderMarkdown:(r,e)=>`**${e.renderChildren(r)}**`,addCommands(){return{setBold:()=>({commands:r})=>r.setMark(this.name),toggleBold:()=>({commands:r})=>r.toggleMark(this.name),unsetBold:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,pi.markInputRule)({find:ES,type:this.type}),(0,pi.markInputRule)({find:TS,type:this.type})]},addPasteRules(){return[(0,pi.markPasteRule)({find:_S,type:this.type}),(0,pi.markPasteRule)({find:AS,type:this.type})]}}),a2=OS});var LS=me((kj,DS)=>{"use strict";var gh=Object.defineProperty,l2=Object.getOwnPropertyDescriptor,u2=Object.getOwnPropertyNames,c2=Object.prototype.hasOwnProperty,f2=(r,e)=>{for(var t in e)gh(r,t,{get:e[t],enumerable:!0})},h2=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of u2(e))!c2.call(r,i)&&i!==t&&gh(r,i,{get:()=>e[i],enumerable:!(n=l2(e,i))||n.enumerable});return r},d2=r=>h2(gh({},"__esModule",{value:!0}),r),RS={};f2(RS,{Code:()=>PS,default:()=>p2,inputRegex:()=>MS,pasteRegex:()=>IS});DS.exports=d2(RS);var Ca=we(),MS=/(^|[^`])`([^`]+)`(?!`)$/,IS=/(^|[^`])`([^`]+)`(?!`)/g,PS=Ca.Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:r}){return["code",(0,Ca.mergeAttributes)(this.options.HTMLAttributes,r),0]},markdownTokenName:"codespan",parseMarkdown:(r,e)=>e.applyMark("code",[{type:"text",text:r.text||""}]),renderMarkdown:(r,e)=>r.content?`\`${e.renderChildren(r.content)}\``:"",addCommands(){return{setCode:()=>({commands:r})=>r.setMark(this.name),toggleCode:()=>({commands:r})=>r.toggleMark(this.name),unsetCode:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,Ca.markInputRule)({find:MS,type:this.type})]},addPasteRules(){return[(0,Ca.markPasteRule)({find:IS,type:this.type})]}}),p2=PS});var US=me((Sj,jS)=>{"use strict";var yh=Object.defineProperty,m2=Object.getOwnPropertyDescriptor,g2=Object.getOwnPropertyNames,v2=Object.prototype.hasOwnProperty,y2=(r,e)=>{for(var t in e)yh(r,t,{get:e[t],enumerable:!0})},w2=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of g2(e))!v2.call(r,i)&&i!==t&&yh(r,i,{get:()=>e[i],enumerable:!(n=m2(e,i))||n.enumerable});return r},b2=r=>w2(yh({},"__esModule",{value:!0}),r),FS={};y2(FS,{CodeBlock:()=>HS,backtickInputRegex:()=>BS,default:()=>k2,tildeInputRegex:()=>zS});jS.exports=b2(FS);var Na=we(),Eo=Te(),vh=4,BS=/^```([a-z]+)?[\s\n]$/,zS=/^~~~([a-z]+)?[\s\n]$/,HS=Na.Node.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:vh,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:r=>{var e;let{languageClassPrefix:t}=this.options;if(!t)return null;let o=[...((e=r.firstElementChild)==null?void 0:e.classList)||[]].filter(s=>s.startsWith(t)).map(s=>s.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:r,HTMLAttributes:e}){return["pre",(0,Na.mergeAttributes)(this.options.HTMLAttributes,e),["code",{class:r.attrs.language?this.options.languageClassPrefix+r.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(r,e)=>{var t;return((t=r.raw)==null?void 0:t.startsWith("```"))===!1&&r.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:r.lang||null},r.text?[e.createTextNode(r.text)]:[])},renderMarkdown:(r,e)=>{var t;let n="",i=((t=r.attrs)==null?void 0:t.language)||"";return r.content?n=[`\`\`\`${i}`,e.renderChildren(r.content),"```"].join(`
`):n=`\`\`\`${i}

\`\`\``,n},addCommands(){return{setCodeBlock:r=>({commands:e})=>e.setNode(this.name,r),toggleCodeBlock:r=>({commands:e})=>e.toggleNode(this.name,"paragraph",r)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:r,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!r||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:r})=>{var e;if(!this.options.enableTabIndentation)return!1;let t=(e=this.options.tabSize)!=null?e:vh,{state:n}=r,{selection:i}=n,{$from:o,empty:s}=i;if(o.parent.type!==this.type)return!1;let a=" ".repeat(t);return s?r.commands.insertContent(a):r.commands.command(({tr:l})=>{let{from:u,to:c}=i,d=n.doc.textBetween(u,c,`
`,`
`).split(`
`).map(m=>a+m).join(`
`);return l.replaceWith(u,c,n.schema.text(d)),!0})},"Shift-Tab":({editor:r})=>{var e;if(!this.options.enableTabIndentation)return!1;let t=(e=this.options.tabSize)!=null?e:vh,{state:n}=r,{selection:i}=n,{$from:o,empty:s}=i;return o.parent.type!==this.type?!1:s?r.commands.command(({tr:a})=>{var l;let{pos:u}=o,c=o.start(),f=o.end(),d=n.doc.textBetween(c,f,`
`,`
`).split(`
`),m=0,g=0,b=u-c;for(let M=0;M<d.length;M+=1){if(g+d[M].length>=b){m=M;break}g+=d[M].length+1}let S=((l=d[m].match(/^ */))==null?void 0:l[0])||"",k=Math.min(S.length,t);if(k===0)return!0;let w=c;for(let M=0;M<m;M+=1)w+=d[M].length+1;return a.delete(w,w+k),u-w<=k&&a.setSelection(Eo.TextSelection.create(a.doc,w)),!0}):r.commands.command(({tr:a})=>{let{from:l,to:u}=i,h=n.doc.textBetween(l,u,`
`,`
`).split(`
`).map(d=>{var m;let g=((m=d.match(/^ */))==null?void 0:m[0])||"",b=Math.min(g.length,t);return d.slice(b)}).join(`
`);return a.replaceWith(l,u,n.schema.text(h)),!0})},Enter:({editor:r})=>{if(!this.options.exitOnTripleEnter)return!1;let{state:e}=r,{selection:t}=e,{$from:n,empty:i}=t;if(!i||n.parent.type!==this.type)return!1;let o=n.parentOffset===n.parent.nodeSize-2,s=n.parent.textContent.endsWith(`

`);return!o||!s?!1:r.chain().command(({tr:a})=>(a.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:r})=>{if(!this.options.exitOnArrowDown)return!1;let{state:e}=r,{selection:t,doc:n}=e,{$from:i,empty:o}=t;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;let a=i.after();return a===void 0?!1:n.nodeAt(a)?r.commands.command(({tr:u})=>(u.setSelection(Eo.Selection.near(n.resolve(a))),!0)):r.commands.exitCode()}}},addInputRules(){return[(0,Na.textblockTypeInputRule)({find:BS,type:this.type,getAttributes:r=>({language:r[1]})}),(0,Na.textblockTypeInputRule)({find:zS,type:this.type,getAttributes:r=>({language:r[1]})})]},addProseMirrorPlugins(){return[new Eo.Plugin({key:new Eo.PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(r,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;let t=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),i=n?JSON.parse(n):void 0,o=i?.mode;if(!t||!o)return!1;let{tr:s,schema:a}=r.state,l=a.text(t.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:o},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(Eo.TextSelection.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),r.dispatch(s),!0}}})]}}),k2=HS});var $S=me((xj,VS)=>{"use strict";var wh=Object.defineProperty,S2=Object.getOwnPropertyDescriptor,x2=Object.getOwnPropertyNames,E2=Object.prototype.hasOwnProperty,_2=(r,e)=>{for(var t in e)wh(r,t,{get:e[t],enumerable:!0})},T2=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of x2(e))!E2.call(r,i)&&i!==t&&wh(r,i,{get:()=>e[i],enumerable:!(n=S2(e,i))||n.enumerable});return r},A2=r=>T2(wh({},"__esModule",{value:!0}),r),qS={};_2(qS,{Document:()=>WS,default:()=>C2});VS.exports=A2(qS);var O2=we(),WS=O2.Node.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(r,e)=>r.content?e.renderChildren(r.content,`

`):""}),C2=WS});var YS=me((Ej,XS)=>{"use strict";var bh=Object.defineProperty,N2=Object.getOwnPropertyDescriptor,R2=Object.getOwnPropertyNames,M2=Object.prototype.hasOwnProperty,I2=(r,e)=>{for(var t in e)bh(r,t,{get:e[t],enumerable:!0})},P2=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of R2(e))!M2.call(r,i)&&i!==t&&bh(r,i,{get:()=>e[i],enumerable:!(n=N2(e,i))||n.enumerable});return r},D2=r=>P2(bh({},"__esModule",{value:!0}),r),GS={};I2(GS,{HardBreak:()=>JS,default:()=>L2});XS.exports=D2(GS);var KS=we(),JS=KS.Node.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:r}){return["br",(0,KS.mergeAttributes)(this.options.HTMLAttributes,r)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:r,chain:e,state:t,editor:n})=>r.first([()=>r.exitCode(),()=>r.command(()=>{let{selection:i,storedMarks:o}=t;if(i.$from.parent.type.spec.isolating)return!1;let{keepMarks:s}=this.options,{splittableMarks:a}=n.extensionManager,l=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&l&&s){let f=l.filter(h=>a.includes(h.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),L2=JS});var xh=me((_j,ex)=>{"use strict";var Sh=Object.defineProperty,F2=Object.getOwnPropertyDescriptor,B2=Object.getOwnPropertyNames,z2=Object.prototype.hasOwnProperty,H2=(r,e)=>{for(var t in e)Sh(r,t,{get:e[t],enumerable:!0})},j2=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of B2(e))!z2.call(r,i)&&i!==t&&Sh(r,i,{get:()=>e[i],enumerable:!(n=F2(e,i))||n.enumerable});return r},U2=r=>j2(Sh({},"__esModule",{value:!0}),r),ZS={};H2(ZS,{Heading:()=>QS,default:()=>q2});ex.exports=U2(ZS);var kh=we(),QS=kh.Node.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(r=>({tag:`h${r}`,attrs:{level:r}}))},renderHTML({node:r,HTMLAttributes:e}){return[`h${this.options.levels.includes(r.attrs.level)?r.attrs.level:this.options.levels[0]}`,(0,kh.mergeAttributes)(this.options.HTMLAttributes,e),0]},parseMarkdown:(r,e)=>e.createNode("heading",{level:r.depth||1},e.parseInline(r.tokens||[])),renderMarkdown:(r,e)=>{var t;let n=(t=r.attrs)!=null&&t.level?parseInt(r.attrs.level,10):1,i="#".repeat(n);return r.content?`${i} ${e.renderChildren(r.content)}`:""},addCommands(){return{setHeading:r=>({commands:e})=>this.options.levels.includes(r.level)?e.setNode(this.name,r):!1,toggleHeading:r=>({commands:e})=>this.options.levels.includes(r.level)?e.toggleNode(this.name,"paragraph",r):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((r,e)=>({...r,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(r=>(0,kh.textblockTypeInputRule)({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${r}})\\s$`),type:this.type,getAttributes:{level:r}}))}}),q2=QS});var ix=me((Tj,nx)=>{"use strict";var Eh=Object.defineProperty,W2=Object.getOwnPropertyDescriptor,V2=Object.getOwnPropertyNames,$2=Object.prototype.hasOwnProperty,K2=(r,e)=>{for(var t in e)Eh(r,t,{get:e[t],enumerable:!0})},G2=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of V2(e))!$2.call(r,i)&&i!==t&&Eh(r,i,{get:()=>e[i],enumerable:!(n=W2(e,i))||n.enumerable});return r},J2=r=>G2(Eh({},"__esModule",{value:!0}),r),tx={};K2(tx,{HorizontalRule:()=>rx,default:()=>X2});nx.exports=J2(tx);var _o=we(),Ra=Te(),rx=_o.Node.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:r}){return["hr",(0,_o.mergeAttributes)(this.options.HTMLAttributes,r)]},markdownTokenName:"hr",parseMarkdown:(r,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:r,state:e})=>{if(!(0,_o.canInsertNode)(e,e.schema.nodes[this.name]))return!1;let{selection:t}=e,{$to:n}=t,i=r();return(0,_o.isNodeSelection)(t)?i.insertContentAt(n.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:o,tr:s,dispatch:a})=>{if(a){let{$to:l}=s.selection,u=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?s.setSelection(Ra.TextSelection.create(s.doc,l.pos+1)):l.nodeAfter.isBlock?s.setSelection(Ra.NodeSelection.create(s.doc,l.pos)):s.setSelection(Ra.TextSelection.create(s.doc,l.pos));else{let c=o.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,f=c?.create();f&&(s.insert(u,f),s.setSelection(Ra.TextSelection.create(s.doc,u+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[(0,_o.nodeInputRule)({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),X2=rx});var hx=me((Aj,fx)=>{"use strict";var _h=Object.defineProperty,Y2=Object.getOwnPropertyDescriptor,Z2=Object.getOwnPropertyNames,Q2=Object.prototype.hasOwnProperty,eF=(r,e)=>{for(var t in e)_h(r,t,{get:e[t],enumerable:!0})},tF=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Z2(e))!Q2.call(r,i)&&i!==t&&_h(r,i,{get:()=>e[i],enumerable:!(n=Y2(e,i))||n.enumerable});return r},rF=r=>tF(_h({},"__esModule",{value:!0}),r),ox={};eF(ox,{Italic:()=>cx,default:()=>nF,starInputRegex:()=>sx,starPasteRegex:()=>ax,underscoreInputRegex:()=>lx,underscorePasteRegex:()=>ux});fx.exports=rF(ox);var mi=we(),sx=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,ax=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,lx=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,ux=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,cx=mi.Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:r=>r.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:r=>r.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:r}){return["em",(0,mi.mergeAttributes)(this.options.HTMLAttributes,r),0]},addCommands(){return{setItalic:()=>({commands:r})=>r.setMark(this.name),toggleItalic:()=>({commands:r})=>r.toggleMark(this.name),unsetItalic:()=>({commands:r})=>r.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(r,e)=>e.applyMark("italic",e.parseInline(r.tokens||[])),renderMarkdown:(r,e)=>`*${e.renderChildren(r)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,mi.markInputRule)({find:sx,type:this.type}),(0,mi.markInputRule)({find:lx,type:this.type})]},addPasteRules(){return[(0,mi.markPasteRule)({find:ax,type:this.type}),(0,mi.markPasteRule)({find:ux,type:this.type})]}}),nF=cx});var fl=me(Qe=>{"use strict";var iF="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5m\xF6gensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",oF="\u03B5\u03BB1\u03C52\u0431\u04331\u0435\u043B3\u0434\u0435\u0442\u04384\u0435\u044E2\u043A\u0430\u0442\u043E\u043B\u0438\u043A6\u043E\u043C3\u043C\u043A\u04342\u043E\u043D1\u0441\u043A\u0432\u04306\u043E\u043D\u043B\u0430\u0439\u043D5\u0440\u04333\u0440\u0443\u04412\u04442\u0441\u0430\u0439\u04423\u0440\u04313\u0443\u043A\u04403\u049B\u0430\u04373\u0570\u0561\u05753\u05D9\u05E9\u05E8\u05D0\u05DC5\u05E7\u05D5\u05DD3\u0627\u0628\u0648\u0638\u0628\u064A5\u0631\u0627\u0645\u0643\u06485\u0644\u0627\u0631\u062F\u06464\u0628\u062D\u0631\u064A\u06465\u062C\u0632\u0627\u0626\u06315\u0633\u0639\u0648\u062F\u064A\u06296\u0639\u0644\u064A\u0627\u06465\u0645\u063A\u0631\u06285\u0645\u0627\u0631\u0627\u062A5\u06CC\u0631\u0627\u06465\u0628\u0627\u0631\u062A2\u0632\u0627\u06314\u064A\u062A\u06433\u06BE\u0627\u0631\u062A5\u062A\u0648\u0646\u06334\u0633\u0648\u062F\u0627\u06463\u0631\u064A\u06295\u0634\u0628\u0643\u06294\u0639\u0631\u0627\u06422\u06282\u0645\u0627\u06464\u0641\u0644\u0633\u0637\u064A\u06466\u0642\u0637\u06313\u0643\u0627\u062B\u0648\u0644\u064A\u06436\u0648\u06453\u0645\u0635\u06312\u0644\u064A\u0633\u064A\u06275\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u06277\u0642\u06394\u0647\u0645\u0631\u0627\u06475\u067E\u0627\u06A9\u0633\u062A\u0627\u06467\u0680\u0627\u0631\u062A4\u0915\u0949\u092E3\u0928\u0947\u091F3\u092D\u093E\u0930\u09240\u092E\u094D3\u094B\u09245\u0938\u0902\u0917\u0920\u09285\u09AC\u09BE\u0982\u09B2\u09BE5\u09AD\u09BE\u09B0\u09A42\u09F0\u09A44\u0A2D\u0A3E\u0A30\u0A244\u0AAD\u0ABE\u0AB0\u0AA44\u0B2D\u0B3E\u0B30\u0B244\u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE6\u0BB2\u0B99\u0BCD\u0B95\u0BC86\u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD11\u0C2D\u0C3E\u0C30\u0C24\u0C4D5\u0CAD\u0CBE\u0CB0\u0CA44\u0D2D\u0D3E\u0D30\u0D24\u0D025\u0DBD\u0D82\u0D9A\u0DCF4\u0E04\u0E2D\u0E213\u0E44\u0E17\u0E223\u0EA5\u0EB2\u0EA73\u10D2\u10D42\u307F\u3093\u306A3\u30A2\u30DE\u30BE\u30F34\u30AF\u30E9\u30A6\u30C94\u30B0\u30FC\u30B0\u30EB4\u30B3\u30E02\u30B9\u30C8\u30A23\u30BB\u30FC\u30EB3\u30D5\u30A1\u30C3\u30B7\u30E7\u30F36\u30DD\u30A4\u30F3\u30C84\u4E16\u754C2\u4E2D\u4FE11\u56FD1\u570B1\u6587\u7F513\u4E9A\u9A6C\u900A3\u4F01\u4E1A2\u4F5B\u5C712\u4FE1\u606F2\u5065\u5EB72\u516B\u53662\u516C\u53F81\u76CA2\u53F0\u6E7E1\u70632\u5546\u57CE1\u5E971\u68072\u5609\u91CC0\u5927\u9152\u5E975\u5728\u7EBF2\u5927\u62FF2\u5929\u4E3B\u65593\u5A31\u4E502\u5BB6\u96FB2\u5E7F\u4E1C2\u5FAE\u535A2\u6148\u55842\u6211\u7231\u4F603\u624B\u673A2\u62DB\u80582\u653F\u52A11\u5E9C2\u65B0\u52A0\u57612\u95FB2\u65F6\u5C1A2\u66F8\u7C4D2\u673A\u67842\u6DE1\u9A6C\u95213\u6E38\u620F2\u6FB3\u95802\u70B9\u770B2\u79FB\u52A82\u7EC4\u7EC7\u673A\u67844\u7F51\u57401\u5E971\u7AD91\u7EDC2\u8054\u901A2\u8C37\u6B4C2\u8D2D\u72692\u901A\u8CA92\u96C6\u56E22\u96FB\u8A0A\u76C8\u79D14\u98DE\u5229\u6D663\u98DF\u54C12\u9910\u53852\u9999\u683C\u91CC\u62C93\u6E2F2\uB2F7\uB1371\uCEF42\uC0BC\uC1312\uD55C\uAD6D2",Nh="numeric",Rh="ascii",Mh="alpha",Oo="asciinumeric",To="alphanumeric",Ih="domain",vx="emoji",sF="scheme",aF="slashscheme",Th="whitespace";function lF(r,e){return r in e||(e[r]=[]),e[r]}function Nn(r,e,t){e[Nh]&&(e[Oo]=!0,e[To]=!0),e[Rh]&&(e[Oo]=!0,e[Mh]=!0),e[Oo]&&(e[To]=!0),e[Mh]&&(e[To]=!0),e[To]&&(e[Ih]=!0),e[vx]&&(e[Ih]=!0);for(let n in e){let i=lF(n,t);i.indexOf(r)<0&&i.push(r)}}function uF(r,e){let t={};for(let n in e)e[n].indexOf(r)>=0&&(t[n]=!0);return t}function wt(r=null){this.j={},this.jr=[],this.jd=null,this.t=r}wt.groups={};wt.prototype={accepts(){return!!this.t},go(r){let e=this,t=e.j[r];if(t)return t;for(let n=0;n<e.jr.length;n++){let i=e.jr[n][0],o=e.jr[n][1];if(o&&i.test(r))return o}return e.jd},has(r,e=!1){return e?r in this.j:!!this.go(r)},ta(r,e,t,n){for(let i=0;i<r.length;i++)this.tt(r[i],e,t,n)},tr(r,e,t,n){n=n||wt.groups;let i;return e&&e.j?i=e:(i=new wt(e),t&&n&&Nn(e,t,n)),this.jr.push([r,i]),i},ts(r,e,t,n){let i=this,o=r.length;if(!o)return i;for(let s=0;s<o-1;s++)i=i.tt(r[s]);return i.tt(r[o-1],e,t,n)},tt(r,e,t,n){n=n||wt.groups;let i=this;if(e&&e.j)return i.j[r]=e,e;let o=e,s,a=i.go(r);if(a?(s=new wt,Object.assign(s.j,a.j),s.jr.push.apply(s.jr,a.jr),s.jd=a.jd,s.t=a.t):s=new wt,o){if(n)if(s.t&&typeof s.t=="string"){let l=Object.assign(uF(s.t,n),t);Nn(o,l,n)}else t&&Nn(o,t,n);s.t=o}return i.j[r]=s,s}};var Ee=(r,e,t,n,i)=>r.ta(e,t,n,i),He=(r,e,t,n,i)=>r.tr(e,t,n,i),dx=(r,e,t,n,i)=>r.ts(e,t,n,i),he=(r,e,t,n,i)=>r.tt(e,t,n,i),Dr="WORD",Ph="UWORD",yx="ASCIINUMERICAL",wx="ALPHANUMERICAL",Po="LOCALHOST",Dh="TLD",Lh="UTLD",Pa="SCHEME",gi="SLASH_SCHEME",Hh="NUM",Fh="WS",jh="NL",Co="OPENBRACE",No="CLOSEBRACE",Fa="OPENBRACKET",Ba="CLOSEBRACKET",za="OPENPAREN",Ha="CLOSEPAREN",ja="OPENANGLEBRACKET",Ua="CLOSEANGLEBRACKET",qa="FULLWIDTHLEFTPAREN",Wa="FULLWIDTHRIGHTPAREN",Va="LEFTCORNERBRACKET",$a="RIGHTCORNERBRACKET",Ka="LEFTWHITECORNERBRACKET",Ga="RIGHTWHITECORNERBRACKET",Ja="FULLWIDTHLESSTHAN",Xa="FULLWIDTHGREATERTHAN",Ya="AMPERSAND",Za="APOSTROPHE",Qa="ASTERISK",Zr="AT",el="BACKSLASH",tl="BACKTICK",rl="CARET",Qr="COLON",Uh="COMMA",nl="DOLLAR",lr="DOT",il="EQUALS",qh="EXCLAMATION",Dt="HYPHEN",Ro="PERCENT",ol="PIPE",sl="PLUS",al="POUND",Mo="QUERY",Wh="QUOTE",bx="FULLWIDTHMIDDLEDOT",Vh="SEMI",ur="SLASH",Io="TILDE",ll="UNDERSCORE",kx="EMOJI",ul="SYM",Sx=Object.freeze({__proto__:null,ALPHANUMERICAL:wx,AMPERSAND:Ya,APOSTROPHE:Za,ASCIINUMERICAL:yx,ASTERISK:Qa,AT:Zr,BACKSLASH:el,BACKTICK:tl,CARET:rl,CLOSEANGLEBRACKET:Ua,CLOSEBRACE:No,CLOSEBRACKET:Ba,CLOSEPAREN:Ha,COLON:Qr,COMMA:Uh,DOLLAR:nl,DOT:lr,EMOJI:kx,EQUALS:il,EXCLAMATION:qh,FULLWIDTHGREATERTHAN:Xa,FULLWIDTHLEFTPAREN:qa,FULLWIDTHLESSTHAN:Ja,FULLWIDTHMIDDLEDOT:bx,FULLWIDTHRIGHTPAREN:Wa,HYPHEN:Dt,LEFTCORNERBRACKET:Va,LEFTWHITECORNERBRACKET:Ka,LOCALHOST:Po,NL:jh,NUM:Hh,OPENANGLEBRACKET:ja,OPENBRACE:Co,OPENBRACKET:Fa,OPENPAREN:za,PERCENT:Ro,PIPE:ol,PLUS:sl,POUND:al,QUERY:Mo,QUOTE:Wh,RIGHTCORNERBRACKET:$a,RIGHTWHITECORNERBRACKET:Ga,SCHEME:Pa,SEMI:Vh,SLASH:ur,SLASH_SCHEME:gi,SYM:ul,TILDE:Io,TLD:Dh,UNDERSCORE:ll,UTLD:Lh,UWORD:Ph,WORD:Dr,WS:Fh}),sr=/[a-z]/,vi=/\p{L}/u,Da=/\p{Emoji}/u,cF=/\ufe0f/,ar=/\d/,La=/\s/,fF=Object.freeze({__proto__:null,ASCII_LETTER:sr,DIGIT:ar,EMOJI:Da,EMOJI_VARIATION:cF,LETTER:vi,SPACE:La}),px="\r",Ah=`
`,hF="\uFE0F",dF="\u200D",Oh="\uFFFC",Ma=null,Ia=null;function pF(r=[]){let e={};wt.groups=e;let t=new wt;Ma==null&&(Ma=mx(iF)),Ia==null&&(Ia=mx(oF)),he(t,"'",Za),he(t,"{",Co),he(t,"}",No),he(t,"[",Fa),he(t,"]",Ba),he(t,"(",za),he(t,")",Ha),he(t,"<",ja),he(t,">",Ua),he(t,"\uFF08",qa),he(t,"\uFF09",Wa),he(t,"\u300C",Va),he(t,"\u300D",$a),he(t,"\u300E",Ka),he(t,"\u300F",Ga),he(t,"\uFF1C",Ja),he(t,"\uFF1E",Xa),he(t,"&",Ya),he(t,"*",Qa),he(t,"@",Zr),he(t,"`",tl),he(t,"^",rl),he(t,":",Qr),he(t,",",Uh),he(t,"$",nl),he(t,".",lr),he(t,"=",il),he(t,"!",qh),he(t,"-",Dt),he(t,"%",Ro),he(t,"|",ol),he(t,"+",sl),he(t,"#",al),he(t,"?",Mo),he(t,'"',Wh),he(t,"/",ur),he(t,";",Vh),he(t,"~",Io),he(t,"_",ll),he(t,"\\",el),he(t,"\u30FB",bx);let n=He(t,ar,Hh,{[Nh]:!0});He(n,ar,n);let i=He(n,sr,yx,{[Oo]:!0}),o=He(n,vi,wx,{[To]:!0}),s=He(t,sr,Dr,{[Rh]:!0});He(s,ar,i),He(s,sr,s),He(i,ar,i),He(i,sr,i);let a=He(t,vi,Ph,{[Mh]:!0});He(a,sr),He(a,ar,o),He(a,vi,a),He(o,ar,o),He(o,sr),He(o,vi,o);let l=he(t,Ah,jh,{[Th]:!0}),u=he(t,px,Fh,{[Th]:!0}),c=He(t,La,Fh,{[Th]:!0});he(t,Oh,c),he(u,Ah,l),he(u,Oh,c),He(u,La,c),he(c,px),he(c,Ah),He(c,La,c),he(c,Oh,c);let f=He(t,Da,kx,{[vx]:!0});he(f,"#"),He(f,Da,f),he(f,hF,f);let h=he(f,dF);he(h,"#"),He(h,Da,f);let d=[[sr,s],[ar,i]],m=[[sr,null],[vi,a],[ar,o]];for(let g=0;g<Ma.length;g++)Yr(t,Ma[g],Dh,Dr,d);for(let g=0;g<Ia.length;g++)Yr(t,Ia[g],Lh,Ph,m);Nn(Dh,{tld:!0,ascii:!0},e),Nn(Lh,{utld:!0,alpha:!0},e),Yr(t,"file",Pa,Dr,d),Yr(t,"mailto",Pa,Dr,d),Yr(t,"http",gi,Dr,d),Yr(t,"https",gi,Dr,d),Yr(t,"ftp",gi,Dr,d),Yr(t,"ftps",gi,Dr,d),Nn(Pa,{scheme:!0,ascii:!0},e),Nn(gi,{slashscheme:!0,ascii:!0},e),r=r.sort((g,b)=>g[0]>b[0]?1:-1);for(let g=0;g<r.length;g++){let b=r[g][0],S=r[g][1]?{[sF]:!0}:{[aF]:!0};b.indexOf("-")>=0?S[Ih]=!0:sr.test(b)?ar.test(b)?S[Oo]=!0:S[Rh]=!0:S[Nh]=!0,dx(t,b,b,S)}return dx(t,"localhost",Po,{ascii:!0}),t.jd=new wt(ul),{start:t,tokens:Object.assign({groups:e},Sx)}}function xx(r,e){let t=Ex(e.replace(/[A-Z]/g,a=>a.toLowerCase())),n=t.length,i=[],o=0,s=0;for(;s<n;){let a=r,l=null,u=0,c=null,f=-1,h=-1;for(;s<n&&(l=a.go(t[s]));)a=l,a.accepts()?(f=0,h=0,c=a):f>=0&&(f+=t[s].length,h++),u+=t[s].length,o+=t[s].length,s++;o-=f,s-=h,u-=f,i.push({t:c.t,v:e.slice(o-u,o),s:o-u,e:o})}return i}function Ex(r){let e=[],t=r.length,n=0;for(;n<t;){let i=r.charCodeAt(n),o,s=i<55296||i>56319||n+1===t||(o=r.charCodeAt(n+1))<56320||o>57343?r[n]:r.slice(n,n+2);e.push(s),n+=s.length}return e}function Yr(r,e,t,n,i){let o,s=e.length;for(let a=0;a<s-1;a++){let l=e[a];r.j[l]?o=r.j[l]:(o=new wt(n),o.jr=i.slice(),r.j[l]=o),r=o}return o=new wt(t),o.jr=i.slice(),r.j[e[s-1]]=o,o}function mx(r){let e=[],t=[],n=0,i="0123456789";for(;n<r.length;){let o=0;for(;i.indexOf(r[n+o])>=0;)o++;if(o>0){e.push(t.join(""));for(let s=parseInt(r.substring(n,n+o),10);s>0;s--)t.pop();n+=o}else t.push(r[n]),n++}return e}var yi={defaultProtocol:"http",events:null,format:gx,formatHref:gx,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Fo(r,e=null){let t=Object.assign({},yi);r&&(t=Object.assign(t,r instanceof Fo?r.o:r));let n=t.ignoreTags,i=[];for(let o=0;o<n.length;o++)i.push(n[o].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=i}Fo.prototype={o:yi,ignoreTags:[],defaultRender(r){return r},check(r){return this.get("validate",r.toString(),r)},get(r,e,t){let n=e!=null,i=this.o[r];return i&&(typeof i=="object"?(i=t.t in i?i[t.t]:yi[r],typeof i=="function"&&n&&(i=i(e,t))):typeof i=="function"&&n&&(i=i(e,t.t,t)),i)},getObj(r,e,t){let n=this.o[r];return typeof n=="function"&&e!=null&&(n=n(e,t.t,t)),n},render(r){let e=r.render(this);return(this.get("render",null,r)||this.defaultRender)(e,r.t,r)}};function gx(r){return r}var mF=Object.freeze({__proto__:null,Options:Fo,defaults:yi});function Do(r,e){this.t="token",this.v=r,this.tk=e}Do.prototype={isLink:!1,toString(){return this.v},toHref(r){return this.toString()},toFormattedString(r){let e=this.toString(),t=r.get("truncate",e,this),n=r.get("format",e,this);return t&&n.length>t?n.substring(0,t)+"\u2026":n},toFormattedHref(r){return r.get("formatHref",this.toHref(r.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(r=yi.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(r),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(r){return{type:this.t,value:this.toFormattedString(r),isLink:this.isLink,href:this.toFormattedHref(r),start:this.startIndex(),end:this.endIndex()}},validate(r){return r.get("validate",this.toString(),this)},render(r){let e=this,t=this.toHref(r.get("defaultProtocol")),n=r.get("formatHref",t,this),i=r.get("tagName",t,e),o=this.toFormattedString(r),s={},a=r.get("className",t,e),l=r.get("target",t,e),u=r.get("rel",t,e),c=r.getObj("attributes",t,e),f=r.getObj("events",t,e);return s.href=n,a&&(s.class=a),l&&(s.target=l),u&&(s.rel=u),c&&Object.assign(s,c),{tagName:i,attributes:s,content:o,eventListeners:f}}};function wi(r,e){class t extends Do{constructor(i,o){super(i,o),this.t=r}}for(let n in e)t.prototype[n]=e[n];return t.t=r,t}var Bh=wi("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),zh=wi("text"),_x=wi("nl"),Ao=wi("url",{isLink:!0,toHref(r=yi.defaultProtocol){return this.hasProtocol()?this.v:`${r}://${this.v}`},hasProtocol(){let r=this.tk;return r.length>=2&&r[0].t!==Po&&r[1].t===Qr}}),Tx=Object.freeze({__proto__:null,Base:Do,Email:Bh,MultiToken:Do,Nl:_x,Text:zh,Url:Ao,createTokenClass:wi}),Pt=r=>new wt(r);function gF({groups:r}){let e=r.domain.concat([Ya,Qa,Zr,el,tl,rl,nl,il,Dt,Hh,Ro,ol,sl,al,ur,ul,Io,ll]),t=[Za,Qr,Uh,lr,qh,Ro,Mo,Wh,Vh,ja,Ua,Co,No,Ba,Fa,za,Ha,qa,Wa,Va,$a,Ka,Ga,Ja,Xa],n=[Ya,Za,Qa,el,tl,rl,nl,il,Dt,Co,No,Ro,ol,sl,al,Mo,ur,ul,Io,ll],i=Pt(),o=he(i,Io);Ee(o,n,o),Ee(o,r.domain,o);let s=Pt(),a=Pt(),l=Pt();Ee(i,r.domain,s),Ee(i,r.scheme,a),Ee(i,r.slashscheme,l),Ee(s,n,o),Ee(s,r.domain,s);let u=he(s,Zr);he(o,Zr,u),he(a,Zr,u),he(l,Zr,u);let c=he(o,lr);Ee(c,n,o),Ee(c,r.domain,o);let f=Pt();Ee(u,r.domain,f),Ee(f,r.domain,f);let h=he(f,lr);Ee(h,r.domain,f);let d=Pt(Bh);Ee(h,r.tld,d),Ee(h,r.utld,d),he(u,Po,d);let m=he(f,Dt);he(m,Dt,m),Ee(m,r.domain,f),Ee(d,r.domain,f),he(d,lr,h),he(d,Dt,m);let g=he(d,Qr);Ee(g,r.numeric,Bh);let b=he(s,Dt),p=he(s,lr);he(b,Dt,b),Ee(b,r.domain,s),Ee(p,n,o),Ee(p,r.domain,s);let S=Pt(Ao);Ee(p,r.tld,S),Ee(p,r.utld,S),Ee(S,r.domain,s),Ee(S,n,o),he(S,lr,p),he(S,Dt,b),he(S,Zr,u);let k=he(S,Qr),w=Pt(Ao);Ee(k,r.numeric,w);let x=Pt(Ao),M=Pt();Ee(x,e,x),Ee(x,t,M),Ee(M,e,x),Ee(M,t,M),he(S,ur,x),he(w,ur,x);let I=he(a,Qr),F=he(l,Qr),N=he(F,ur),K=he(N,ur);Ee(a,r.domain,s),he(a,lr,p),he(a,Dt,b),Ee(l,r.domain,s),he(l,lr,p),he(l,Dt,b),Ee(I,r.domain,x),he(I,ur,x),he(I,Mo,x),Ee(K,r.domain,x),Ee(K,e,x),he(K,ur,x);let ae=[[Co,No],[Fa,Ba],[za,Ha],[ja,Ua],[qa,Wa],[Va,$a],[Ka,Ga],[Ja,Xa]];for(let R=0;R<ae.length;R++){let[H,T]=ae[R],V=he(x,H);he(M,H,V),he(V,T,x);let Q=Pt(Ao);Ee(V,e,Q);let U=Pt();Ee(V,t),Ee(Q,e,Q),Ee(Q,t,U),Ee(U,e,Q),Ee(U,t,U),he(Q,T,x),he(U,T,x)}return he(i,Po,S),he(i,jh,_x),{start:i,tokens:Sx}}function vF(r,e,t){let n=t.length,i=0,o=[],s=[];for(;i<n;){let a=r,l=null,u=null,c=0,f=null,h=-1;for(;i<n&&!(l=a.go(t[i].t));)s.push(t[i++]);for(;i<n&&(u=l||a.go(t[i].t));)l=null,a=u,a.accepts()?(h=0,f=a):h>=0&&h++,i++,c++;if(h<0)i-=c,i<n&&(s.push(t[i]),i++);else{s.length>0&&(o.push(Ch(zh,e,s)),s=[]),i-=h,c-=h;let d=f.t,m=t.slice(i-c,i);o.push(Ch(d,e,m))}}return s.length>0&&o.push(Ch(zh,e,s)),o}function Ch(r,e,t){let n=t[0].s,i=t[t.length-1].e,o=e.slice(n,i);return new r(o,t)}var Lo=typeof console<"u"&&console&&console.warn||(()=>{}),$h="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ae={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function yF(){return wt.groups={},Ae.scanner=null,Ae.parser=null,Ae.tokenQueue=[],Ae.pluginQueue=[],Ae.customSchemes=[],Ae.initialized=!1,Ae}function wF(r,e){if(typeof e!="function")throw new Error(`linkifyjs: Invalid token plugin ${e} (expects function)`);for(let t=0;t<Ae.tokenQueue.length;t++)if(r===Ae.tokenQueue[t][0]){Lo(`linkifyjs: token plugin "${r}" already registered - will be overwritten`),Ae.tokenQueue[t]=[r,e];return}Ae.tokenQueue.push([r,e]),Ae.initialized&&Lo(`linkifyjs: already initialized - will not register token plugin "${r}" ${$h}`)}function bF(r,e){if(typeof e!="function")throw new Error(`linkifyjs: Invalid plugin ${e} (expects function)`);for(let t=0;t<Ae.pluginQueue.length;t++)if(r===Ae.pluginQueue[t][0]){Lo(`linkifyjs: plugin "${r}" already registered - will be overwritten`),Ae.pluginQueue[t]=[r,e];return}Ae.pluginQueue.push([r,e]),Ae.initialized&&Lo(`linkifyjs: already initialized - will not register plugin "${r}" ${$h}`)}function kF(r,e=!1){if(Ae.initialized&&Lo(`linkifyjs: already initialized - will not register custom scheme "${r}" ${$h}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(r))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Ae.customSchemes.push([r,e])}function Ax(){Ae.scanner=pF(Ae.customSchemes);for(let r=0;r<Ae.tokenQueue.length;r++)Ae.tokenQueue[r][1]({scanner:Ae.scanner});Ae.parser=gF(Ae.scanner.tokens);for(let r=0;r<Ae.pluginQueue.length;r++)Ae.pluginQueue[r][1]({scanner:Ae.scanner,parser:Ae.parser});return Ae.initialized=!0,Ae}function cl(r){return Ae.initialized||Ax(),vF(Ae.parser.start,r,xx(Ae.scanner.start,r))}cl.scan=xx;function SF(r,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}let n=new Fo(t),i=cl(r),o=[];for(let s=0;s<i.length;s++){let a=i[s];a.isLink&&(!e||a.t===e)&&n.check(a)&&o.push(a.toFormattedObject(n))}return o}function xF(r,e=null){let t=cl(r);return t.length===1&&t[0].isLink&&(!e||t[0].t===e)}Qe.MultiToken=Do;Qe.Options=Fo;Qe.State=wt;Qe.createTokenClass=wi;Qe.find=SF;Qe.init=Ax;Qe.multi=Tx;Qe.options=mF;Qe.regexp=fF;Qe.registerCustomProtocol=kF;Qe.registerPlugin=bF;Qe.registerTokenPlugin=wF;Qe.reset=yF;Qe.stringToArray=Ex;Qe.test=xF;Qe.text=Tx;Qe.tokenize=cl});var Px=me((Cj,Ix)=>{"use strict";var Kh=Object.defineProperty,EF=Object.getOwnPropertyDescriptor,_F=Object.getOwnPropertyNames,TF=Object.prototype.hasOwnProperty,AF=(r,e)=>{for(var t in e)Kh(r,t,{get:e[t],enumerable:!0})},OF=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of _F(e))!TF.call(r,i)&&i!==t&&Kh(r,i,{get:()=>e[i],enumerable:!(n=EF(e,i))||n.enumerable});return r},CF=r=>OF(Kh({},"__esModule",{value:!0}),r),Rx={};AF(Rx,{Link:()=>Mx,default:()=>jF,isAllowedUri:()=>en,pasteRegex:()=>HF});Ix.exports=CF(Rx);var hl=we(),dl=fl(),pl=we(),Ox=Te(),NF=fl(),Gh="[\0- \xA0\u1680\u180E\u2000-\u2029\u205F\u3000]",RF=new RegExp(Gh),MF=new RegExp(`${Gh}$`),IF=new RegExp(Gh,"g");function PF(r){return r.length===1?r[0].isLink:r.length===3&&r[1].isLink?["()","[]"].includes(r[0].value+r[2].value):!1}function DF(r){return new Ox.Plugin({key:new Ox.PluginKey("autolink"),appendTransaction:(e,t,n)=>{let i=e.some(u=>u.docChanged)&&!t.doc.eq(n.doc),o=e.some(u=>u.getMeta("preventAutolink"));if(!i||o)return;let{tr:s}=n,a=(0,pl.combineTransactionSteps)(t.doc,[...e]);if((0,pl.getChangedRanges)(a).forEach(({newRange:u})=>{let c=(0,pl.findChildrenInRange)(n.doc,u,d=>d.isTextblock),f,h;if(c.length>1)f=c[0],h=n.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(c.length){let d=n.doc.textBetween(u.from,u.to," "," ");if(!MF.test(d))return;f=c[0],h=n.doc.textBetween(f.pos,u.to,void 0," ")}if(f&&h){let d=h.split(RF).filter(Boolean);if(d.length<=0)return!1;let m=d[d.length-1],g=f.pos+h.lastIndexOf(m);if(!m)return!1;let b=(0,NF.tokenize)(m).map(p=>p.toObject(r.defaultProtocol));if(!PF(b))return!1;b.filter(p=>p.isLink).map(p=>({...p,from:g+p.start+1,to:g+p.end+1})).filter(p=>n.schema.marks.code?!n.doc.rangeHasMark(p.from,p.to,n.schema.marks.code):!0).filter(p=>r.validate(p.value)).filter(p=>r.shouldAutoLink(p.value)).forEach(p=>{(0,pl.getMarksBetween)(p.from,p.to,n.doc).some(S=>S.mark.type===r.type)||s.addMark(p.from,p.to,r.type.create({href:p.href}))})}}),!!s.steps.length)return s}})}var LF=we(),Cx=Te();function FF(r){return new Cx.Plugin({key:new Cx.PluginKey("handleClickLink"),props:{handleClick:(e,t,n)=>{var i,o;if(n.button!==0||!e.editable)return!1;let s=null;if(n.target instanceof HTMLAnchorElement)s=n.target;else{let c=n.target,f=[];for(;c.nodeName!=="DIV";)f.push(c),c=c.parentNode;s=f.find(h=>h.nodeName==="A")}if(!s)return!1;let a=(0,LF.getAttributes)(e.state,r.type.name),l=(i=s?.href)!=null?i:a.href,u=(o=s?.target)!=null?o:a.target;return r.enableClickSelection&&r.editor.commands.extendMarkRange(r.type.name),s&&l?(window.open(l,u),!0):!1}}})}var Nx=Te(),BF=fl();function zF(r){return new Nx.Plugin({key:new Nx.PluginKey("handlePasteLink"),props:{handlePaste:(e,t,n)=>{let{shouldAutoLink:i}=r,{state:o}=e,{selection:s}=o,{empty:a}=s;if(a)return!1;let l="";n.content.forEach(c=>{l+=c.textContent});let u=(0,BF.find)(l,{defaultProtocol:r.defaultProtocol}).find(c=>c.isLink&&c.value===l);return!l||!u||i!==void 0&&!i(u.href)?!1:r.editor.commands.setMark(r.type,{href:u.href})}}})}var HF=/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)/gi;function en(r,e){let t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{let i=typeof n=="string"?n:n.scheme;i&&t.push(i)}),!r||r.replace(IF,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Mx=hl.Mark.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(r=>{if(typeof r=="string"){(0,dl.registerCustomProtocol)(r);return}(0,dl.registerCustomProtocol)(r.scheme,r.optionalSlashes)})},onDestroy(){(0,dl.reset)()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(r,e)=>!!en(r,e.protocols),validate:r=>!!r,shouldAutoLink:r=>!!r}},addAttributes(){return{href:{default:null,parseHTML(r){return r.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:r=>{let e=r.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!en(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:r}){return this.options.isAllowedUri(r.href,{defaultValidate:e=>!!en(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",(0,hl.mergeAttributes)(this.options.HTMLAttributes,r),0]:["a",(0,hl.mergeAttributes)(this.options.HTMLAttributes,{...r,href:""}),0]},markdownTokenName:"link",parseMarkdown:(r,e)=>e.applyMark("link",e.parseInline(r.tokens||[]),{href:r.href,title:r.title||null}),renderMarkdown:(r,e)=>{var t;let n=((t=r.attrs)==null?void 0:t.href)||"";return`[${e.renderChildren(r)}](${n})`},addCommands(){return{setLink:r=>({chain:e})=>{let{href:t}=r;return this.options.isAllowedUri(t,{defaultValidate:n=>!!en(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,r).setMeta("preventAutolink",!0).run():!1},toggleLink:r=>({chain:e})=>{let{href:t}=r||{};return t&&!this.options.isAllowedUri(t,{defaultValidate:n=>!!en(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,r,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:r})=>r().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[(0,hl.markPasteRule)({find:r=>{let e=[];if(r){let{protocols:t,defaultProtocol:n}=this.options,i=(0,dl.find)(r).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:s=>!!en(s,t),protocols:t,defaultProtocol:n}));i.length&&i.forEach(o=>{this.options.shouldAutoLink(o.value)&&e.push({text:o.value,data:{href:o.href},index:o.start})})}return e},type:this.type,getAttributes:r=>{var e;return{href:(e=r.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){let r=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&r.push(DF({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:i=>!!en(i,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&r.push(FF({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&r.push(zF({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),r}}),jF=Mx});var tn=me((Nj,tE)=>{"use strict";var td=Object.defineProperty,UF=Object.getOwnPropertyDescriptor,qF=Object.getOwnPropertyNames,WF=Object.prototype.hasOwnProperty,zx=(r,e)=>{for(var t in e)td(r,t,{get:e[t],enumerable:!0})},VF=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of qF(e))!WF.call(r,i)&&i!==t&&td(r,i,{get:()=>e[i],enumerable:!(n=UF(e,i))||n.enumerable});return r},$F=r=>VF(td({},"__esModule",{value:!0}),r),Hx={};zx(Hx,{BulletList:()=>jx,ListItem:()=>Ux,ListKeymap:()=>Jx,ListKit:()=>i5,OrderedList:()=>Yx,TaskItem:()=>Qx,TaskList:()=>eE,bulletListInputRegex:()=>Yh,inputRegex:()=>Zx,listHelpers:()=>qx,orderedListInputRegex:()=>ed});tE.exports=$F(Hx);var ml=we(),KF="listItem",Dx="textStyle",Yh=/^\s*([-+*])\s$/,jx=ml.Node.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:r}){return["ul",(0,ml.mergeAttributes)(this.options.HTMLAttributes,r),0]},markdownTokenName:"list",parseMarkdown:(r,e)=>r.type!=="list"||r.ordered?[]:{type:"bulletList",content:r.items?e.parseChildren(r.items):[]},renderMarkdown:(r,e)=>r.content?e.renderChildren(r.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:r,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(KF,this.editor.getAttributes(Dx)).run():r.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let r=(0,ml.wrappingInputRule)({find:Yh,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(r=(0,ml.wrappingInputRule)({find:Yh,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Dx),editor:this.editor})),[r]}}),Jh=we(),Ux=Jh.Node.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:r}){return["li",(0,Jh.mergeAttributes)(this.options.HTMLAttributes,r),0]},markdownTokenName:"list_item",parseMarkdown:(r,e)=>{if(r.type!=="list_item")return[];let t=[];if(r.tokens&&r.tokens.length>0)if(r.tokens.some(i=>i.type==="paragraph"))t=e.parseChildren(r.tokens);else{let i=r.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(t=[{type:"paragraph",content:e.parseInline(i.tokens)}],r.tokens.length>1){let s=r.tokens.slice(1),a=e.parseChildren(s);t.push(...a)}}else t=e.parseChildren(r.tokens)}return t.length===0&&(t=[{type:"paragraph",content:[]}]),{type:"listItem",content:t}},renderMarkdown:(r,e,t)=>(0,Jh.renderNestedMarkdownContent)(r,e,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",t),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),GF=we(),qx={};zx(qx,{findListItemPos:()=>zo,getNextListDepth:()=>rd,handleBackspace:()=>Zh,handleDelete:()=>Qh,hasListBefore:()=>Wx,hasListItemAfter:()=>ZF,hasListItemBefore:()=>Vx,listItemHasSubList:()=>$x,nextListIsDeeper:()=>Kx,nextListIsHigher:()=>Gx});var JF=we(),zo=(r,e)=>{let{$from:t}=e.selection,n=(0,JF.getNodeType)(r,e.schema),i=null,o=t.depth,s=t.pos,a=null;for(;o>0&&a===null;)i=t.node(o),i.type===n?a=o:(o-=1,s-=1);return a===null?null:{$pos:e.doc.resolve(s),depth:a}},XF=we(),rd=(r,e)=>{let t=zo(r,e);if(!t)return!1;let[,n]=(0,XF.getNodeAtPosition)(e,r,t.$pos.pos+4);return n},Xh=we(),Wx=(r,e,t)=>{let{$anchor:n}=r.selection,i=Math.max(0,n.pos-2),o=r.doc.resolve(i).node();return!(!o||!t.includes(o.type.name))},Vx=(r,e)=>{var t;let{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-2);return!(i.index()===0||((t=i.nodeBefore)==null?void 0:t.type.name)!==r)},YF=we(),$x=(r,e,t)=>{if(!t)return!1;let n=(0,YF.getNodeType)(r,e.schema),i=!1;return t.descendants(o=>{o.type===n&&(i=!0)}),i},Zh=(r,e,t)=>{if(r.commands.undoInputRule())return!0;if(r.state.selection.from!==r.state.selection.to)return!1;if(!(0,Xh.isNodeActive)(r.state,e)&&Wx(r.state,e,t)){let{$anchor:a}=r.state.selection,l=r.state.doc.resolve(a.before()-1),u=[];l.node().descendants((h,d)=>{h.type.name===e&&u.push({node:h,pos:d})});let c=u.at(-1);if(!c)return!1;let f=r.state.doc.resolve(l.start()+c.pos+1);return r.chain().cut({from:a.start()-1,to:a.end()+1},f.end()).joinForward().run()}if(!(0,Xh.isNodeActive)(r.state,e)||!(0,Xh.isAtStartOfNode)(r.state))return!1;let n=zo(e,r.state);if(!n)return!1;let o=r.state.doc.resolve(n.$pos.pos-2).node(n.depth),s=$x(e,r.state,o);return Vx(e,r.state)&&!s?r.commands.joinItemBackward():r.chain().liftListItem(e).run()},Lx=we(),Kx=(r,e)=>{let t=rd(r,e),n=zo(r,e);return!n||!t?!1:t>n.depth},Gx=(r,e)=>{let t=rd(r,e),n=zo(r,e);return!n||!t?!1:t<n.depth},Qh=(r,e)=>{if(!(0,Lx.isNodeActive)(r.state,e)||!(0,Lx.isAtEndOfNode)(r.state,e))return!1;let{selection:t}=r.state,{$from:n,$to:i}=t;return!t.empty&&n.sameParent(i)?!1:Kx(e,r.state)?r.chain().focus(r.state.selection.from+4).lift(e).joinBackward().run():Gx(e,r.state)?r.chain().joinForward().joinBackward().run():r.commands.joinItemForward()},ZF=(r,e)=>{var t;let{$anchor:n}=e.selection,i=e.doc.resolve(n.pos-n.parentOffset-2);return!(i.index()===i.parent.childCount-1||((t=i.nodeAfter)==null?void 0:t.type.name)!==r)},Jx=GF.Extension.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:r})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{r.state.schema.nodes[t]!==void 0&&Qh(r,t)&&(e=!0)}),e},"Mod-Delete":({editor:r})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{r.state.schema.nodes[t]!==void 0&&Qh(r,t)&&(e=!0)}),e},Backspace:({editor:r})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:n})=>{r.state.schema.nodes[t]!==void 0&&Zh(r,t,n)&&(e=!0)}),e},"Mod-Backspace":({editor:r})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:n})=>{r.state.schema.nodes[t]!==void 0&&Zh(r,t,n)&&(e=!0)}),e}}}}),QF=we(),Bo=we(),Fx=/^(\s*)(\d+)\.\s+(.*)$/,e5=/^\s/;function t5(r){let e=[],t=0,n=0;for(;t<r.length;){let i=r[t],o=i.match(Fx);if(!o)break;let[,s,a,l]=o,u=s.length,c=l,f=t+1,h=[i];for(;f<r.length;){let d=r[f];if(d.match(Fx))break;if(d.trim()==="")h.push(d),c+=`
`,f+=1;else if(d.match(e5))h.push(d),c+=`
${d.slice(u+2)}`,f+=1;else break}e.push({indent:u,number:parseInt(a,10),content:c.trim(),raw:h.join(`
`)}),n=f,t=f}return[e,n]}function Xx(r,e,t){var n;let i=[],o=0;for(;o<r.length;){let s=r[o];if(s.indent===e){let a=s.content.split(`
`),l=((n=a[0])==null?void 0:n.trim())||"",u=[];l&&u.push({type:"paragraph",raw:l,tokens:t.inlineTokens(l)});let c=a.slice(1).join(`
`).trim();if(c){let d=t.blockTokens(c);u.push(...d)}let f=o+1,h=[];for(;f<r.length&&r[f].indent>e;)h.push(r[f]),f+=1;if(h.length>0){let d=Math.min(...h.map(g=>g.indent)),m=Xx(h,d,t);u.push({type:"list",ordered:!0,start:h[0].number,items:m,raw:h.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:s.raw,tokens:u}),o=f}else o+=1}return i}function r5(r,e){return r.map(t=>{if(t.type!=="list_item")return e.parseChildren([t])[0];let n=[];return t.tokens&&t.tokens.length>0&&t.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")n.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){let o=e.parseChildren([i]);n.push({type:"paragraph",content:o})}else{let o=e.parseChildren([i]);o.length>0&&n.push(...o)}}),{type:"listItem",content:n}})}var n5="listItem",Bx="textStyle",ed=/^(\d+)\.\s$/,Yx=Bo.Node.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:r=>r.hasAttribute("start")?parseInt(r.getAttribute("start")||"",10):1},type:{default:null,parseHTML:r=>r.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:r}){let{start:e,...t}=r;return e===1?["ol",(0,Bo.mergeAttributes)(this.options.HTMLAttributes,t),0]:["ol",(0,Bo.mergeAttributes)(this.options.HTMLAttributes,r),0]},markdownTokenName:"list",parseMarkdown:(r,e)=>{if(r.type!=="list"||!r.ordered)return[];let t=r.start||1,n=r.items?r5(r.items,e):[];return t!==1?{type:"orderedList",attrs:{start:t},content:n}:{type:"orderedList",content:n}},renderMarkdown:(r,e)=>r.content?e.renderChildren(r.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:r=>{let e=r.match(/^(\s*)(\d+)\.\s+/),t=e?.index;return t!==void 0?t:-1},tokenize:(r,e,t)=>{var n;let i=r.split(`
`),[o,s]=t5(i);if(o.length===0)return;let a=Xx(o,0,t);return a.length===0?void 0:{type:"list",ordered:!0,start:((n=o[0])==null?void 0:n.number)||1,items:a,raw:i.slice(0,s).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:r,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(n5,this.editor.getAttributes(Bx)).run():r.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let r=(0,Bo.wrappingInputRule)({find:ed,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(r=(0,Bo.wrappingInputRule)({find:ed,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Bx)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[r]}}),gl=we(),Zx=/^\s*(\[([( |x])?\])\s$/,Qx=gl.Node.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:r=>{let e=r.getAttribute("data-checked");return e===""||e==="true"},renderHTML:r=>({"data-checked":r.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:r,HTMLAttributes:e}){return["li",(0,gl.mergeAttributes)(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:r.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(r,e)=>{let t=[];if(r.tokens&&r.tokens.length>0?t.push(e.createNode("paragraph",{},e.parseInline(r.tokens))):r.text?t.push(e.createNode("paragraph",{},[e.createNode("text",{text:r.text})])):t.push(e.createNode("paragraph",{},[])),r.nestedTokens&&r.nestedTokens.length>0){let n=e.parseChildren(r.nestedTokens);t.push(...n)}return e.createNode("taskItem",{checked:r.checked||!1},t)},renderMarkdown:(r,e)=>{var t;let i=`- [${(t=r.attrs)!=null&&t.checked?"x":" "}] `;return(0,gl.renderNestedMarkdownContent)(r,e,i)},addKeyboardShortcuts(){let r={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...r,Tab:()=>this.editor.commands.sinkListItem(this.name)}:r},addNodeView(){return({node:r,HTMLAttributes:e,getPos:t,editor:n})=>{let i=document.createElement("li"),o=document.createElement("label"),s=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),u=c=>{var f,h;a.ariaLabel=((h=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:h.call(f,c,a.checked))||`Task item checkbox for ${c.textContent||"empty task item"}`};return u(r),o.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",c=>c.preventDefault()),a.addEventListener("change",c=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}let{checked:f}=c.target;n.isEditable&&typeof t=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:h})=>{let d=t();if(typeof d!="number")return!1;let m=h.doc.nodeAt(d);return h.setNodeMarkup(d,void 0,{...m?.attrs,checked:f}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(r,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([c,f])=>{i.setAttribute(c,f)}),i.dataset.checked=r.attrs.checked,a.checked=r.attrs.checked,o.append(a,s),i.append(o,l),Object.entries(e).forEach(([c,f])=>{i.setAttribute(c,f)}),{dom:i,contentDOM:l,update:c=>c.type!==this.type?!1:(i.dataset.checked=c.attrs.checked,a.checked=c.attrs.checked,u(c),!0)}}},addInputRules(){return[(0,gl.wrappingInputRule)({find:Zx,type:this.type,getAttributes:r=>({checked:r[r.length-1]==="x"})})]}}),vl=we(),eE=vl.Node.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:r}){return["ul",(0,vl.mergeAttributes)(this.options.HTMLAttributes,r,{"data-type":this.name}),0]},parseMarkdown:(r,e)=>e.createNode("taskList",{},e.parseChildren(r.items||[])),renderMarkdown:(r,e)=>r.content?e.renderChildren(r.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(r){var e;let t=(e=r.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return t!==void 0?t:-1},tokenize(r,e,t){let n=o=>{let s=(0,vl.parseIndentedBlocks)(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:t.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:n},t);return s?[{type:"taskList",raw:s.raw,items:s.items}]:t.blockTokens(o)},i=(0,vl.parseIndentedBlocks)(r,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,s)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:t.inlineTokens(o.mainContent),nestedTokens:s}),customNestedParser:n},t);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:r})=>r.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}}),i5=QF.Extension.create({name:"listKit",addExtensions(){let r=[];return this.options.bulletList!==!1&&r.push(jx.configure(this.options.bulletList)),this.options.listItem!==!1&&r.push(Ux.configure(this.options.listItem)),this.options.listKeymap!==!1&&r.push(Jx.configure(this.options.listKeymap)),this.options.orderedList!==!1&&r.push(Yx.configure(this.options.orderedList)),this.options.taskItem!==!1&&r.push(Qx.configure(this.options.taskItem)),this.options.taskList!==!1&&r.push(eE.configure(this.options.taskList)),r}})});var id=me((Rj,oE)=>{"use strict";var nd=Object.defineProperty,o5=Object.getOwnPropertyDescriptor,s5=Object.getOwnPropertyNames,a5=Object.prototype.hasOwnProperty,l5=(r,e)=>{for(var t in e)nd(r,t,{get:e[t],enumerable:!0})},u5=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of s5(e))!a5.call(r,i)&&i!==t&&nd(r,i,{get:()=>e[i],enumerable:!(n=o5(e,i))||n.enumerable});return r},c5=r=>u5(nd({},"__esModule",{value:!0}),r),nE={};l5(nE,{Paragraph:()=>iE,default:()=>f5});oE.exports=c5(nE);var rE=we(),iE=rE.Node.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:r}){return["p",(0,rE.mergeAttributes)(this.options.HTMLAttributes,r),0]},parseMarkdown:(r,e)=>{let t=r.tokens||[];return t.length===1&&t[0].type==="image"?e.parseChildren([t[0]]):e.createNode("paragraph",void 0,e.parseInline(t))},renderMarkdown:(r,e)=>!r||!Array.isArray(r.content)?"":e.renderChildren(r.content),addCommands(){return{setParagraph:()=>({commands:r})=>r.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),f5=iE});var fE=me((Mj,cE)=>{"use strict";var od=Object.defineProperty,h5=Object.getOwnPropertyDescriptor,d5=Object.getOwnPropertyNames,p5=Object.prototype.hasOwnProperty,m5=(r,e)=>{for(var t in e)od(r,t,{get:e[t],enumerable:!0})},g5=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of d5(e))!p5.call(r,i)&&i!==t&&od(r,i,{get:()=>e[i],enumerable:!(n=h5(e,i))||n.enumerable});return r},v5=r=>g5(od({},"__esModule",{value:!0}),r),sE={};m5(sE,{Strike:()=>uE,default:()=>y5,inputRegex:()=>aE,pasteRegex:()=>lE});cE.exports=v5(sE);var yl=we(),aE=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,lE=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,uE=yl.Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:r=>r.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["s",(0,yl.mergeAttributes)(this.options.HTMLAttributes,r),0]},markdownTokenName:"del",parseMarkdown:(r,e)=>e.applyMark("strike",e.parseInline(r.tokens||[])),renderMarkdown:(r,e)=>`~~${e.renderChildren(r)}~~`,addCommands(){return{setStrike:()=>({commands:r})=>r.setMark(this.name),toggleStrike:()=>({commands:r})=>r.toggleMark(this.name),unsetStrike:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,yl.markInputRule)({find:aE,type:this.type})]},addPasteRules(){return[(0,yl.markPasteRule)({find:lE,type:this.type})]}}),y5=uE});var mE=me((Ij,pE)=>{"use strict";var sd=Object.defineProperty,w5=Object.getOwnPropertyDescriptor,b5=Object.getOwnPropertyNames,k5=Object.prototype.hasOwnProperty,S5=(r,e)=>{for(var t in e)sd(r,t,{get:e[t],enumerable:!0})},x5=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of b5(e))!k5.call(r,i)&&i!==t&&sd(r,i,{get:()=>e[i],enumerable:!(n=w5(e,i))||n.enumerable});return r},E5=r=>x5(sd({},"__esModule",{value:!0}),r),hE={};S5(hE,{Text:()=>dE,default:()=>T5});pE.exports=E5(hE);var _5=we(),dE=_5.Node.create({name:"text",group:"inline",parseMarkdown:r=>({type:"text",text:r.text||""}),renderMarkdown:r=>r.text||""}),T5=dE});var wl=me((Pj,wE)=>{"use strict";var ad=Object.defineProperty,A5=Object.getOwnPropertyDescriptor,O5=Object.getOwnPropertyNames,C5=Object.prototype.hasOwnProperty,N5=(r,e)=>{for(var t in e)ad(r,t,{get:e[t],enumerable:!0})},R5=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of O5(e))!C5.call(r,i)&&i!==t&&ad(r,i,{get:()=>e[i],enumerable:!(n=A5(e,i))||n.enumerable});return r},M5=r=>R5(ad({},"__esModule",{value:!0}),r),vE={};N5(vE,{Underline:()=>yE,default:()=>I5});wE.exports=M5(vE);var gE=we(),yE=gE.Mark.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:r=>r.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["u",(0,gE.mergeAttributes)(this.options.HTMLAttributes,r),0]},parseMarkdown(r,e){return e.applyMark(this.name||"underline",e.parseInline(r.tokens||[]))},renderMarkdown(r,e){return`++${e.renderChildren(r)}++`},markdownTokenizer:{name:"underline",level:"inline",start(r){return r.indexOf("++")},tokenize(r,e,t){let i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(r);if(!i)return;let o=i[2].trim();return{type:"underline",raw:i[0],text:o,tokens:t.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:r})=>r.setMark(this.name),toggleUnderline:()=>({commands:r})=>r.toggleMark(this.name),unsetUnderline:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),I5=yE});var SE=me(kE=>{"use strict";function Ho(r){"@babel/helpers - typeof";return Ho=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ho(r)}function P5(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function bE(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,L5(n.key),n)}}function D5(r,e,t){return e&&bE(r.prototype,e),t&&bE(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function L5(r){var e=F5(r,"string");return Ho(e)==="symbol"?e:String(e)}function F5(r,e){if(Ho(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(Ho(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var B5=Cr(),z5=qr();function H5(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new B5.Plugin({view:function(t){return new j5(t,r)}})}var j5=(function(){function r(e,t){var n=this;P5(this,r);var i;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(i=t.width)!==null&&i!==void 0?i:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(function(o){var s=function(l){n[o](l)};return e.dom.addEventListener(o,s),{name:o,handler:s}})}return D5(r,[{key:"destroy",value:function(){var t=this;this.handlers.forEach(function(n){var i=n.name,o=n.handler;return t.editorView.dom.removeEventListener(i,o)})}},{key:"update",value:function(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}},{key:"setCursor",value:function(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}},{key:"updateOverlay",value:function(){var t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,i,o=this.editorView.dom,s=o.getBoundingClientRect(),a=s.width/o.offsetWidth,l=s.height/o.offsetHeight;if(n){var u=t.nodeBefore,c=t.nodeAfter;if(u||c){var f=this.editorView.nodeDOM(this.cursorPos-(u?u.nodeSize:0));if(f){var h=f.getBoundingClientRect(),d=u?h.bottom:h.top;u&&c&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);var m=this.width/2*l;i={left:h.left,right:h.right,top:d-m,bottom:d+m}}}}if(!i){var g=this.editorView.coordsAtPos(this.cursorPos),b=this.width/2*a;i={left:g.left-b,right:g.left+b,top:g.top,bottom:g.bottom}}var p=this.editorView.dom.offsetParent;this.element||(this.element=p.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);var S,k;if(!p||p==document.body&&getComputedStyle(p).position=="static")S=-pageXOffset,k=-pageYOffset;else{var w=p.getBoundingClientRect(),x=w.width/p.offsetWidth,M=w.height/p.offsetHeight;S=w.left-p.scrollLeft*x,k=w.top-p.scrollTop*M}this.element.style.left=(i.left-S)/a+"px",this.element.style.top=(i.top-k)/l+"px",this.element.style.width=(i.right-i.left)/a+"px",this.element.style.height=(i.bottom-i.top)/l+"px"}},{key:"scheduleRemoval",value:function(t){var n=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){return n.setCursor(null)},t)}},{key:"dragover",value:function(t){if(this.editorView.editable){var n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),i=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=i&&i.type.spec.disableDropCursor,s=typeof o=="function"?o(this.editorView,n,t):o;if(n&&!s){var a=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){var l=z5.dropPoint(this.editorView.state.doc,a,this.editorView.dragging.slice);l!=null&&(a=l)}this.setCursor(a),this.scheduleRemoval(5e3)}}}},{key:"dragend",value:function(){this.scheduleRemoval(20)}},{key:"drop",value:function(){this.scheduleRemoval(20)}},{key:"dragleave",value:function(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}]),r})();kE.dropCursor=H5});var xE=me(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});function U5(r){Object.keys(r).filter(e=>e!=="default"&&e!=="__esModule").forEach(e=>{bl.hasOwnProperty(e)||Object.defineProperty(bl,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})}var q5=SE();U5(q5)});var CE=me(ud=>{"use strict";function bi(r){"@babel/helpers - typeof";return bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bi(r)}function TE(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function EE(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,W5(n.key),n)}}function AE(r,e,t){return e&&EE(r.prototype,e),t&&EE(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function W5(r){var e=V5(r,"string");return bi(e)==="symbol"?e:String(e)}function V5(r,e){if(bi(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(bi(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function $5(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&ld(r,e)}function ld(r,e){return ld=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ld(r,e)}function K5(r){var e=X5();return function(){var n=xl(r),i;if(e){var o=xl(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return G5(this,i)}}function G5(r,e){if(e&&(bi(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J5(r)}function J5(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function X5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xl(r){return xl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xl(r)}var Y5=Uf(),Lr=Cr(),Sl=jr(),_E=zf(),bt=(function(r){$5(t,r);var e=K5(t);function t(n){return TE(this,t),e.call(this,n,n)}return AE(t,[{key:"map",value:function(i,o){var s=i.resolve(o.map(this.head));return t.valid(s)?new t(s):Lr.Selection.near(s)}},{key:"content",value:function(){return Sl.Slice.empty}},{key:"eq",value:function(i){return i instanceof t&&i.head==this.head}},{key:"toJSON",value:function(){return{type:"gapcursor",pos:this.head}}},{key:"getBookmark",value:function(){return new Z5(this.anchor)}}],[{key:"fromJSON",value:function(i,o){if(typeof o.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(i.resolve(o.pos))}},{key:"valid",value:function(i){var o=i.parent;if(o.isTextblock||!Q5(i)||!e3(i))return!1;var s=o.type.spec.allowGapCursor;if(s!=null)return s;var a=o.contentMatchAt(i.index()).defaultType;return a&&a.isTextblock}},{key:"findGapCursorFrom",value:function(i,o){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e:for(;;){if(!s&&t.valid(i))return i;for(var a=i.pos,l=null,u=i.depth;;u--){var c=i.node(u);if(o>0?i.indexAfter(u)<c.childCount:i.index(u)>0){l=c.child(o>0?i.indexAfter(u):i.index(u)-1);break}else if(u==0)return null;a+=o;var f=i.doc.resolve(a);if(t.valid(f))return f}for(;;){var h=o>0?l.firstChild:l.lastChild;if(!h){if(l.isAtom&&!l.isText&&!Lr.NodeSelection.isSelectable(l)){i=i.doc.resolve(a+l.nodeSize*o),s=!1;continue e}break}l=h,a+=o;var d=i.doc.resolve(a);if(t.valid(d))return d}return null}}}]),t})(Lr.Selection);bt.prototype.visible=!1;bt.findFrom=bt.findGapCursorFrom;Lr.Selection.jsonID("gapcursor",bt);var Z5=(function(){function r(e){TE(this,r),this.pos=e}return AE(r,[{key:"map",value:function(t){return new r(t.map(this.pos))}},{key:"resolve",value:function(t){var n=t.resolve(this.pos);return bt.valid(n)?new bt(n):Lr.Selection.near(n)}}]),r})();function OE(r){return r.isAtom||r.spec.isolating||r.spec.createGapCursor}function Q5(r){for(var e=r.depth;e>=0;e--){var t=r.index(e),n=r.node(e);if(t==0){if(n.type.spec.isolating)return!0;continue}for(var i=n.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||OE(i.type))return!0;if(i.inlineContent)return!1}}return!0}function e3(r){for(var e=r.depth;e>=0;e--){var t=r.indexAfter(e),n=r.node(e);if(t==n.childCount){if(n.type.spec.isolating)return!0;continue}for(var i=n.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||OE(i.type))return!0;if(i.inlineContent)return!1}}return!0}function t3(){return new Lr.Plugin({props:{decorations:o3,createSelectionBetween:function(e,t,n){return t.pos==n.pos&&bt.valid(n)?new bt(n):null},handleClick:n3,handleKeyDown:r3,handleDOMEvents:{beforeinput:i3}}})}var r3=Y5.keydownHandler({ArrowLeft:kl("horiz",-1),ArrowRight:kl("horiz",1),ArrowUp:kl("vert",-1),ArrowDown:kl("vert",1)});function kl(r,e){var t=r=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,i,o){var s=n.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof Lr.TextSelection){if(!o.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=n.doc.resolve(e>0?a.after():a.before())}var u=bt.findGapCursorFrom(a,e,l);return u?(i&&i(n.tr.setSelection(new bt(u))),!0):!1}}function n3(r,e,t){if(!r||!r.editable)return!1;var n=r.state.doc.resolve(e);if(!bt.valid(n))return!1;var i=r.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&Lr.NodeSelection.isSelectable(r.state.doc.nodeAt(i.inside))?!1:(r.dispatch(r.state.tr.setSelection(new bt(n))),!0)}function i3(r,e){if(e.inputType!="insertCompositionText"||!(r.state.selection instanceof bt))return!1;var t=r.state.selection.$from,n=t.parent.contentMatchAt(t.index()).findWrapping(r.state.schema.nodes.text);if(!n)return!1;for(var i=Sl.Fragment.empty,o=n.length-1;o>=0;o--)i=Sl.Fragment.from(n[o].createAndFill(null,i));var s=r.state.tr.replace(t.pos,t.pos,new Sl.Slice(i,0,0));return s.setSelection(Lr.TextSelection.near(s.doc.resolve(t.pos+1))),r.dispatch(s),!1}function o3(r){if(!(r.selection instanceof bt))return null;var e=document.createElement("div");return e.className="ProseMirror-gapcursor",_E.DecorationSet.create(r.doc,[_E.Decoration.widget(r.selection.head,e,{key:"gapcursor"})])}ud.GapCursor=bt;ud.gapCursor=t3});var NE=me(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});function s3(r){Object.keys(r).filter(e=>e!=="default"&&e!=="__esModule").forEach(e=>{El.hasOwnProperty(e)||Object.defineProperty(El,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})}var a3=CE();s3(a3)});var IE=me((zj,ME)=>{"use strict";var _l=200,ot=function(){};ot.prototype.append=function(e){return e.length?(e=ot.from(e),!this.length&&e||e.length<_l&&this.leafAppend(e)||this.length<_l&&e.leafPrepend(this)||this.appendInner(e)):this};ot.prototype.prepend=function(e){return e.length?ot.from(e).append(this):this};ot.prototype.appendInner=function(e){return new l3(this,e)};ot.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?ot.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};ot.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ot.prototype.forEach=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)};ot.prototype.map=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},t,n),i};ot.from=function(e){return e instanceof ot?e:e&&e.length?new RE(e):ot.empty};var RE=(function(r){function e(n){r.call(this),this.values=n}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,a){for(var l=o;l<s;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,a){for(var l=o-1;l>=s;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=_l)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=_l)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e})(ot);ot.empty=new RE([]);var l3=(function(r){function e(t,n){r.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,i,o,s){var a=this.left.length;if(i<a&&this.left.forEachInner(n,i,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(n,Math.max(i-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(n,i,o,s){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(n,i-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(n,Math.min(i,a),o,s)===!1)return!1},e.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(n,i):n>=o?this.right.slice(n-o,i-o):this.left.slice(n,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new e(i,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e})(ot);ME.exports=ot});var jE=me(fr=>{"use strict";function jo(r){"@babel/helpers - typeof";return jo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jo(r)}function hd(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function PE(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,u3(n.key),n)}}function dd(r,e,t){return e&&PE(r.prototype,e),t&&PE(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function u3(r){var e=c3(r,"string");return jo(e)==="symbol"?e:String(e)}function c3(r,e){if(jo(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(jo(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var FE=IE(),f3=qr(),pd=Cr(),h3=500,Uo=(function(){function r(e,t){hd(this,r),this.items=e,this.eventCount=t}return dd(r,[{key:"popEvent",value:function(t,n){var i=this;if(this.eventCount==0)return null;for(var o=this.items.length;;o--){var s=this.items.get(o-1);if(s.selection){--o;break}}var a,l;n&&(a=this.remapping(o,this.items.length),l=a.maps.length);var u=t.tr,c,f,h=[],d=[];return this.items.forEach(function(m,g){if(!m.step){a||(a=i.remapping(o,g+1),l=a.maps.length),l--,d.push(m);return}if(a){d.push(new rn(m.map));var b=m.step.map(a.slice(l)),p;b&&u.maybeStep(b).doc&&(p=u.mapping.maps[u.mapping.maps.length-1],h.push(new rn(p,void 0,void 0,h.length+d.length))),l--,p&&a.appendMap(p,l)}else u.maybeStep(m.step);if(m.selection)return c=a?m.selection.map(a.slice(l)):m.selection,f=new r(i.items.slice(0,o).append(d.reverse().concat(h)),i.eventCount-1),!1},this.items.length,0),{remaining:f,transform:u,selection:c}}},{key:"addTransform",value:function(t,n,i,o){for(var s=[],a=this.eventCount,l=this.items,u=!o&&l.length?l.get(l.length-1):null,c=0;c<t.steps.length;c++){var f=t.steps[c].invert(t.docs[c]),h=new rn(t.mapping.maps[c],f,n),d=void 0;(d=u&&u.merge(h))&&(h=d,c?s.pop():l=l.slice(0,l.length-1)),s.push(h),n&&(a++,n=void 0),o||(u=h)}var m=a-i.depth;return m>p3&&(l=d3(l,m),a-=m),new r(l.append(s),a)}},{key:"remapping",value:function(t,n){var i=new f3.Mapping;return this.items.forEach(function(o,s){var a=o.mirrorOffset!=null&&s-o.mirrorOffset>=t?i.maps.length-o.mirrorOffset:void 0;i.appendMap(o.map,a)},t,n),i}},{key:"addMaps",value:function(t){return this.eventCount==0?this:new r(this.items.append(t.map(function(n){return new rn(n)})),this.eventCount)}},{key:"rebased",value:function(t,n){if(!this.eventCount)return this;var i=[],o=Math.max(0,this.items.length-n),s=t.mapping,a=t.steps.length,l=this.eventCount;this.items.forEach(function(m){m.selection&&l--},o);var u=n;this.items.forEach(function(m){var g=s.getMirror(--u);if(g!=null){a=Math.min(a,g);var b=s.maps[g];if(m.step){var p=t.steps[g].invert(t.docs[g]),S=m.selection&&m.selection.map(s.slice(u+1,g));S&&l++,i.push(new rn(b,p,S))}else i.push(new rn(b))}},o);for(var c=[],f=n;f<a;f++)c.push(new rn(s.maps[f]));var h=this.items.slice(0,o).append(c).append(i),d=new r(h,l);return d.emptyItemCount()>h3&&(d=d.compress(this.items.length-i.length)),d}},{key:"emptyItemCount",value:function(){var t=0;return this.items.forEach(function(n){n.step||t++}),t}},{key:"compress",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.items.length,n=this.remapping(0,t),i=n.maps.length,o=[],s=0;return this.items.forEach(function(a,l){if(l>=t)o.push(a),a.selection&&s++;else if(a.step){var u=a.step.map(n.slice(i)),c=u&&u.getMap();if(i--,c&&n.appendMap(c,i),u){var f=a.selection&&a.selection.map(n.slice(i));f&&s++;var h=new rn(c.invert(),u,f),d,m=o.length-1;(d=o.length&&o[m].merge(h))?o[m]=d:o.push(h)}}else a.map&&i--},this.items.length,0),new r(FE.from(o.reverse()),s)}}]),r})();Uo.empty=new Uo(FE.empty,0);function d3(r,e){var t;return r.forEach(function(n,i){if(n.selection&&e--==0)return t=i,!1}),r.slice(t)}var rn=(function(){function r(e,t,n,i){hd(this,r),this.map=e,this.step=t,this.selection=n,this.mirrorOffset=i}return dd(r,[{key:"merge",value:function(t){if(this.step&&t.step&&!t.selection){var n=t.step.merge(this.step);if(n)return new r(n.getMap().invert(),n,this.selection)}}}]),r})(),nn=dd(function r(e,t,n,i,o){hd(this,r),this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=i,this.prevComposition=o}),p3=20;function m3(r,e,t,n){var i=t.getMeta(cr),o;if(i)return i.historyState;t.getMeta(BE)&&(r=new nn(r.done,r.undone,null,0,-1));var s=t.getMeta("appendedTransaction");if(t.steps.length==0)return r;if(s&&s.getMeta(cr))return s.getMeta(cr).redo?new nn(r.done.addTransform(t,void 0,n,Tl(e)),r.undone,DE(t.mapping.maps),r.prevTime,r.prevComposition):new nn(r.done,r.undone.addTransform(t,void 0,n,Tl(e)),null,r.prevTime,r.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){var a=t.getMeta("composition"),l=r.prevTime==0||!s&&r.prevComposition!=a&&(r.prevTime<(t.time||0)-n.newGroupDelay||!g3(t,r.prevRanges)),u=s?cd(r.prevRanges,t.mapping):DE(t.mapping.maps);return new nn(r.done.addTransform(t,l?e.selection.getBookmark():void 0,n,Tl(e)),Uo.empty,u,t.time,a??r.prevComposition)}else return(o=t.getMeta("rebased"))?new nn(r.done.rebased(t,o),r.undone.rebased(t,o),cd(r.prevRanges,t.mapping),r.prevTime,r.prevComposition):new nn(r.done.addMaps(t.mapping.maps),r.undone.addMaps(t.mapping.maps),cd(r.prevRanges,t.mapping),r.prevTime,r.prevComposition)}function g3(r,e){if(!e)return!1;if(!r.docChanged)return!0;var t=!1;return r.mapping.maps[0].forEach(function(n,i){for(var o=0;o<e.length;o+=2)n<=e[o+1]&&i>=e[o]&&(t=!0)}),t}function DE(r){for(var e=[],t=r.length-1;t>=0&&e.length==0;t--)r[t].forEach(function(n,i,o,s){return e.push(o,s)});return e}function cd(r,e){if(!r)return null;for(var t=[],n=0;n<r.length;n+=2){var i=e.map(r[n],1),o=e.map(r[n+1],-1);i<=o&&t.push(i,o)}return t}function v3(r,e,t){var n=Tl(e),i=cr.get(e).spec.config,o=(t?r.undone:r.done).popEvent(e,n);if(!o)return null;var s=o.selection.resolve(o.transform.doc),a=(t?r.done:r.undone).addTransform(o.transform,e.selection.getBookmark(),i,n),l=new nn(t?a:o.remaining,t?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(cr,{redo:t,historyState:l})}var fd=!1,LE=null;function Tl(r){var e=r.plugins;if(LE!=e){fd=!1,LE=e;for(var t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){fd=!0;break}}return fd}function y3(r){return r.setMeta(BE,!0)}var cr=new pd.PluginKey("history"),BE=new pd.PluginKey("closeHistory");function w3(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return r={depth:r.depth||100,newGroupDelay:r.newGroupDelay||500},new pd.Plugin({key:cr,state:{init:function(){return new nn(Uo.empty,Uo.empty,null,0,-1)},apply:function(t,n,i){return m3(n,i,t,r)}},config:r,props:{handleDOMEvents:{beforeinput:function(t,n){var i=n.inputType,o=i=="historyUndo"?zE:i=="historyRedo"?HE:null;return!o||!t.editable?!1:(n.preventDefault(),o(t.state,t.dispatch))}}}})}function Al(r,e){return function(t,n){var i=cr.getState(t);if(!i||(r?i.undone:i.done).eventCount==0)return!1;if(n){var o=v3(i,t,r);o&&n(e?o.scrollIntoView():o)}return!0}}var zE=Al(!1,!0),HE=Al(!0,!0),b3=Al(!1,!1),k3=Al(!0,!1);function S3(r){var e=cr.getState(r);return e?e.done.eventCount:0}function x3(r){var e=cr.getState(r);return e?e.undone.eventCount:0}function E3(r){return r.getMeta(cr)!=null}fr.closeHistory=y3;fr.history=w3;fr.isHistoryTransaction=E3;fr.redo=HE;fr.redoDepth=x3;fr.redoNoScroll=k3;fr.undo=zE;fr.undoDepth=S3;fr.undoNoScroll=b3});var UE=me(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});function _3(r){Object.keys(r).filter(e=>e!=="default"&&e!=="__esModule").forEach(e=>{Ol.hasOwnProperty(e)||Object.defineProperty(Ol,e,{enumerable:!0,configurable:!0,get:()=>r[e]})})}var T3=jE();_3(T3)});var t_=me((Uj,e_)=>{"use strict";var yd=Object.defineProperty,A3=Object.getOwnPropertyDescriptor,O3=Object.getOwnPropertyNames,C3=Object.prototype.hasOwnProperty,N3=(r,e)=>{for(var t in e)yd(r,t,{get:e[t],enumerable:!0})},R3=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of O3(e))!C3.call(r,i)&&i!==t&&yd(r,i,{get:()=>e[i],enumerable:!(n=A3(e,i))||n.enumerable});return r},M3=r=>R3(yd({},"__esModule",{value:!0}),r),QE={};N3(QE,{CharacterCount:()=>P3,Dropcursor:()=>F3,Focus:()=>z3,Gapcursor:()=>j3,Placeholder:()=>U3,Selection:()=>q3,TrailingNode:()=>V3,UndoRedo:()=>K3});e_.exports=M3(QE);var I3=we(),qE=Te(),P3=I3.Extension.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:r=>r.length,wordCounter:r=>r.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=r=>{let e=r?.node||this.editor.state.doc;if((r?.mode||this.options.mode)==="textSize"){let n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=r=>{let e=r?.node||this.editor.state.doc,t=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let r=!1;return[new qE.Plugin({key:new qE.PluginKey("characterCount"),appendTransaction:(e,t,n)=>{if(r)return;let i=this.options.limit;if(i==null||i===0){r=!0;return}let o=this.storage.characters({node:n.doc});if(o>i){let s=o-i,a=0,l=s;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);let u=n.tr.deleteRange(a,l);return r=!0,u}r=!0},filterTransaction:(e,t)=>{let n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;let i=this.storage.characters({node:t.doc}),o=this.storage.characters({node:e.doc});if(o<=n||i>n&&o>n&&o<=i)return!0;if(i>n&&o>n&&o>i||!e.getMeta("paste"))return!1;let a=e.selection.$head.pos,l=o-n,u=a-l,c=a;return e.deleteRange(u,c),!(this.storage.characters({node:e.doc})>n)}})]}}),D3=we(),L3=xE(),F3=D3.Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[(0,L3.dropCursor)(this.options)]}}),B3=we(),WE=Te(),md=uo(),z3=B3.Extension.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new WE.Plugin({key:new WE.PluginKey("focus"),props:{decorations:({doc:r,selection:e})=>{let{isEditable:t,isFocused:n}=this.editor,{anchor:i}=e,o=[];if(!t||!n)return md.DecorationSet.create(r,[]);let s=0;this.options.mode==="deepest"&&r.descendants((l,u)=>{if(l.isText)return;if(!(i>=u&&i<=u+l.nodeSize-1))return!1;s+=1});let a=0;return r.descendants((l,u)=>{if(l.isText||!(i>=u&&i<=u+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&s-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";o.push(md.Decoration.node(u,u+l.nodeSize,{class:this.options.className}))}),md.DecorationSet.create(r,o)}}})]}}),gd=we(),H3=NE(),j3=gd.Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[(0,H3.gapCursor)()]},extendNodeSchema(r){var e;let t={name:r.name,options:r.options,storage:r.storage};return{allowGapCursor:(e=(0,gd.callOrReturn)((0,gd.getExtensionField)(r,"allowGapCursor",t)))!=null?e:null}}}),VE=we(),$E=Te(),KE=uo(),U3=VE.Extension.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something \u2026",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new $E.Plugin({key:new $E.PluginKey("placeholder"),props:{decorations:({doc:r,selection:e})=>{let t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,i=[];if(!t)return null;let o=this.editor.isEmpty;return r.descendants((s,a)=>{let l=n>=a&&n<=a+s.nodeSize,u=!s.isLeaf&&(0,VE.isNodeEmpty)(s);if((l||!this.options.showOnlyCurrent)&&u){let c=[this.options.emptyNodeClass];o&&c.push(this.options.emptyEditorClass);let f=KE.Decoration.node(a,a+s.nodeSize,{class:c.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:s,pos:a,hasAnchor:l}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),KE.DecorationSet.create(r,i)}}})]}}),GE=we(),JE=Te(),XE=uo(),q3=GE.Extension.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){let{editor:r,options:e}=this;return[new JE.Plugin({key:new JE.PluginKey("selection"),props:{decorations(t){return t.selection.empty||r.isFocused||!r.isEditable||(0,GE.isNodeSelection)(t.selection)||r.view.dragging?null:XE.DecorationSet.create(t.doc,[XE.Decoration.inline(t.selection.from,t.selection.to,{class:e.className})])}}})]}}),W3=we(),YE=Te();function ZE({types:r,node:e}){return e&&Array.isArray(r)&&r.includes(e.type)||e?.type===r}var V3=W3.Extension.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var r;let e=new YE.PluginKey(this.name),t=((r=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:r.name)||this.options.node||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(t).includes(i.name));return[new YE.Plugin({key:e,appendTransaction:(i,o,s)=>{let{doc:a,tr:l,schema:u}=s,c=e.getState(s),f=a.content.size,h=u.nodes[t];if(c)return l.insert(f,h.create())},state:{init:(i,o)=>{let s=o.tr.doc.lastChild;return!ZE({node:s,types:n})},apply:(i,o)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return o;let s=i.doc.lastChild;return!ZE({node:s,types:n})}}})]}}),$3=we(),vd=UE(),K3=$3.Extension.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:r,dispatch:e})=>(0,vd.undo)(r,e),redo:()=>({state:r,dispatch:e})=>(0,vd.redo)(r,e)}},addProseMirrorPlugins(){return[(0,vd.history)(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-\u044F":()=>this.editor.commands.undo(),"Shift-Mod-\u044F":()=>this.editor.commands.redo()}}})});var bd=me((qj,i_)=>{"use strict";var wd=Object.defineProperty,G3=Object.getOwnPropertyDescriptor,J3=Object.getOwnPropertyNames,X3=Object.prototype.hasOwnProperty,Y3=(r,e)=>{for(var t in e)wd(r,t,{get:e[t],enumerable:!0})},Z3=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of J3(e))!X3.call(r,i)&&i!==t&&wd(r,i,{get:()=>e[i],enumerable:!(n=G3(e,i))||n.enumerable});return r},Q3=r=>Z3(wd({},"__esModule",{value:!0}),r),r_={};Y3(r_,{StarterKit:()=>n_,default:()=>m6});i_.exports=Q3(r_);var e6=we(),t6=kS(),r6=NS(),n6=LS(),i6=US(),o6=$S(),s6=YS(),a6=xh(),l6=ix(),u6=hx(),c6=Px(),Cl=tn(),f6=id(),h6=fE(),d6=mE(),p6=wl(),Nl=t_(),n_=e6.Extension.create({name:"starterKit",addExtensions(){var r,e,t,n;let i=[];return this.options.bold!==!1&&i.push(r6.Bold.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(t6.Blockquote.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(Cl.BulletList.configure(this.options.bulletList)),this.options.code!==!1&&i.push(n6.Code.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(i6.CodeBlock.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(o6.Document.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(Nl.Dropcursor.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(Nl.Gapcursor.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(s6.HardBreak.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(a6.Heading.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(Nl.UndoRedo.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(l6.HorizontalRule.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(u6.Italic.configure(this.options.italic)),this.options.listItem!==!1&&i.push(Cl.ListItem.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(Cl.ListKeymap.configure((r=this.options)==null?void 0:r.listKeymap)),this.options.link!==!1&&i.push(c6.Link.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(Cl.OrderedList.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(f6.Paragraph.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(h6.Strike.configure(this.options.strike)),this.options.text!==!1&&i.push(d6.Text.configure(this.options.text)),this.options.underline!==!1&&i.push(p6.Underline.configure((t=this.options)==null?void 0:t.underline)),this.options.trailingNode!==!1&&i.push(Nl.TrailingNode.configure((n=this.options)==null?void 0:n.trailingNode)),i}}),m6=n_});var a_=me((Wj,s_)=>{"use strict";var kd=Object.defineProperty,g6=Object.getOwnPropertyDescriptor,v6=Object.getOwnPropertyNames,y6=Object.prototype.hasOwnProperty,w6=(r,e)=>{for(var t in e)kd(r,t,{get:e[t],enumerable:!0})},b6=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of v6(e))!y6.call(r,i)&&i!==t&&kd(r,i,{get:()=>e[i],enumerable:!(n=g6(e,i))||n.enumerable});return r},k6=r=>b6(kd({},"__esModule",{value:!0}),r),o_={};w6(o_,{BulletList:()=>x6.BulletList,default:()=>E6});s_.exports=k6(o_);var S6=tn(),x6=tn(),E6=S6.BulletList});var c_=me((Vj,u_)=>{"use strict";var Sd=Object.defineProperty,_6=Object.getOwnPropertyDescriptor,T6=Object.getOwnPropertyNames,A6=Object.prototype.hasOwnProperty,O6=(r,e)=>{for(var t in e)Sd(r,t,{get:e[t],enumerable:!0})},C6=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of T6(e))!A6.call(r,i)&&i!==t&&Sd(r,i,{get:()=>e[i],enumerable:!(n=_6(e,i))||n.enumerable});return r},N6=r=>C6(Sd({},"__esModule",{value:!0}),r),l_={};O6(l_,{OrderedList:()=>M6.OrderedList,default:()=>I6});u_.exports=N6(l_);var R6=tn(),M6=tn(),I6=R6.OrderedList});var d_=me(($j,h_)=>{"use strict";var xd=Object.defineProperty,P6=Object.getOwnPropertyDescriptor,D6=Object.getOwnPropertyNames,L6=Object.prototype.hasOwnProperty,F6=(r,e)=>{for(var t in e)xd(r,t,{get:e[t],enumerable:!0})},B6=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of D6(e))!L6.call(r,i)&&i!==t&&xd(r,i,{get:()=>e[i],enumerable:!(n=P6(e,i))||n.enumerable});return r},z6=r=>B6(xd({},"__esModule",{value:!0}),r),f_={};F6(f_,{ListItem:()=>j6.ListItem,default:()=>U6});h_.exports=z6(f_);var H6=tn(),j6=tn(),U6=H6.ListItem});var _d=me((Kj,v_)=>{"use strict";var Ed=Object.defineProperty,q6=Object.getOwnPropertyDescriptor,W6=Object.getOwnPropertyNames,V6=Object.prototype.hasOwnProperty,$6=(r,e)=>{for(var t in e)Ed(r,t,{get:e[t],enumerable:!0})},K6=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of W6(e))!V6.call(r,i)&&i!==t&&Ed(r,i,{get:()=>e[i],enumerable:!(n=q6(e,i))||n.enumerable});return r},G6=r=>K6(Ed({},"__esModule",{value:!0}),r),m_={};$6(m_,{Subscript:()=>g_,default:()=>J6});v_.exports=G6(m_);var p_=we(),g_=p_.Mark.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(r){return r!=="sub"?!1:null}}]},renderHTML({HTMLAttributes:r}){return["sub",(0,p_.mergeAttributes)(this.options.HTMLAttributes,r),0]},addCommands(){return{setSubscript:()=>({commands:r})=>r.setMark(this.name),toggleSubscript:()=>({commands:r})=>r.toggleMark(this.name),unsetSubscript:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}}),J6=g_});var Ad=me((Gj,k_)=>{"use strict";var Td=Object.defineProperty,X6=Object.getOwnPropertyDescriptor,Y6=Object.getOwnPropertyNames,Z6=Object.prototype.hasOwnProperty,Q6=(r,e)=>{for(var t in e)Td(r,t,{get:e[t],enumerable:!0})},eB=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Y6(e))!Z6.call(r,i)&&i!==t&&Td(r,i,{get:()=>e[i],enumerable:!(n=X6(e,i))||n.enumerable});return r},tB=r=>eB(Td({},"__esModule",{value:!0}),r),w_={};Q6(w_,{Superscript:()=>b_,default:()=>rB});k_.exports=tB(w_);var y_=we(),b_=y_.Mark.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(r){return r!=="super"?!1:null}}]},renderHTML({HTMLAttributes:r}){return["sup",(0,y_.mergeAttributes)(this.options.HTMLAttributes,r),0]},addCommands(){return{setSuperscript:()=>({commands:r})=>r.setMark(this.name),toggleSuperscript:()=>({commands:r})=>r.toggleMark(this.name),unsetSuperscript:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}}),rB=b_});var Cd=me((Jj,R_)=>{"use strict";var Od=Object.defineProperty,nB=Object.getOwnPropertyDescriptor,iB=Object.getOwnPropertyNames,oB=Object.prototype.hasOwnProperty,sB=(r,e)=>{for(var t in e)Od(r,t,{get:e[t],enumerable:!0})},aB=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of iB(e))!oB.call(r,i)&&i!==t&&Od(r,i,{get:()=>e[i],enumerable:!(n=nB(e,i))||n.enumerable});return r},lB=r=>aB(Od({},"__esModule",{value:!0}),r),x_={};sB(x_,{BackgroundColor:()=>T_,Color:()=>A_,FontFamily:()=>O_,FontSize:()=>C_,LineHeight:()=>N_,TextStyle:()=>__,TextStyleKit:()=>vB});R_.exports=lB(x_);var S_=we(),uB=20,E_=(r,e=0)=>{let t=[];return!r.children.length||e>uB||Array.from(r.children).forEach(n=>{n.tagName==="SPAN"?t.push(n):n.children.length&&t.push(...E_(n,e+1))}),t},cB=r=>{if(!r.children.length)return;let e=E_(r);e&&e.forEach(t=>{var n,i;let o=t.getAttribute("style"),s=(i=(n=t.parentElement)==null?void 0:n.closest("span"))==null?void 0:i.getAttribute("style");t.setAttribute("style",`${s};${o}`)})},__=S_.Mark.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:r=>r.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&cB(r),{}):!1}]},renderHTML({HTMLAttributes:r}){return["span",(0,S_.mergeAttributes)(this.options.HTMLAttributes,r),0]},addCommands(){return{toggleTextStyle:r=>({commands:e})=>e.toggleMark(this.name,r),removeEmptyTextStyle:()=>({tr:r})=>{let{selection:e}=r;return r.doc.nodesBetween(e.from,e.to,(t,n)=>{if(t.isTextblock)return!0;t.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(o=>!!o))||r.removeMark(n,n+t.nodeSize,this.type)}),!0}}}}),fB=we(),T_=fB.Extension.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:r=>{var e;let t=r.getAttribute("style");if(t){let n=t.split(";").map(i=>i.trim()).filter(Boolean);for(let i=n.length-1;i>=0;i-=1){let o=n[i].split(":");if(o.length>=2){let s=o[0].trim().toLowerCase(),a=o.slice(1).join(":").trim();if(s==="background-color")return a.replace(/['"]+/g,"")}}}return(e=r.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:r=>r.backgroundColor?{style:`background-color: ${r.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:r=>({chain:e})=>e().setMark("textStyle",{backgroundColor:r}).run(),unsetBackgroundColor:()=>({chain:r})=>r().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),hB=we(),A_=hB.Extension.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:r=>{var e;let t=r.getAttribute("style");if(t){let n=t.split(";").map(i=>i.trim()).filter(Boolean);for(let i=n.length-1;i>=0;i-=1){let o=n[i].split(":");if(o.length>=2){let s=o[0].trim().toLowerCase(),a=o.slice(1).join(":").trim();if(s==="color")return a.replace(/['"]+/g,"")}}}return(e=r.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:r=>r.color?{style:`color: ${r.color}`}:{}}}}]},addCommands(){return{setColor:r=>({chain:e})=>e().setMark("textStyle",{color:r}).run(),unsetColor:()=>({chain:r})=>r().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),dB=we(),O_=dB.Extension.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:r=>r.style.fontFamily,renderHTML:r=>r.fontFamily?{style:`font-family: ${r.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:r=>({chain:e})=>e().setMark("textStyle",{fontFamily:r}).run(),unsetFontFamily:()=>({chain:r})=>r().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),pB=we(),C_=pB.Extension.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:r=>r.style.fontSize,renderHTML:r=>r.fontSize?{style:`font-size: ${r.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:r=>({chain:e})=>e().setMark("textStyle",{fontSize:r}).run(),unsetFontSize:()=>({chain:r})=>r().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),mB=we(),N_=mB.Extension.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:r=>r.style.lineHeight,renderHTML:r=>r.lineHeight?{style:`line-height: ${r.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:r=>({chain:e})=>e().setMark("textStyle",{lineHeight:r}).run(),unsetLineHeight:()=>({chain:r})=>r().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}}),gB=we(),vB=gB.Extension.create({name:"textStyleKit",addExtensions(){let r=[];return this.options.backgroundColor!==!1&&r.push(T_.configure(this.options.backgroundColor)),this.options.color!==!1&&r.push(A_.configure(this.options.color)),this.options.fontFamily!==!1&&r.push(O_.configure(this.options.fontFamily)),this.options.fontSize!==!1&&r.push(C_.configure(this.options.fontSize)),this.options.lineHeight!==!1&&r.push(N_.configure(this.options.lineHeight)),this.options.textStyle!==!1&&r.push(__.configure(this.options.textStyle)),r}})});var I_=me((Xj,M_)=>{var{Node:yB,mergeAttributes:wB}=we(),bB=yB.create({name:"footnote",group:"inline",inline:!0,atom:!0,addAttributes(){return{id:{default:null,parseHTML:r=>r.getAttribute("data-id"),renderHTML:r=>({"data-id":r.id})},number:{default:null}}},parseHTML(){return[{tag:'span[data-type="footnote"]'}]},renderHTML({HTMLAttributes:r}){return["span",wB(r,{"data-type":"footnote",class:"colophon-footnote"}),["sup",{class:"footnote-symbol"},r.number||"#"]]},addCommands(){return{addFootnote:()=>({commands:r})=>{let e=`fn-${Date.now()}`;return r.insertContent({type:this.name,attrs:{id:e,number:"#"}})}}}});M_.exports=bB});var Nd=me((Yj,P_)=>{var{Extension:kB,InputRule:ki}=we(),SB=kB.create({name:"substitutions",addOptions(){return{smartQuotes:!0,smartDashes:!0,doubleQuoteStyle:"\u201C|\u201D",singleQuoteStyle:"\u2018|\u2019"}},addInputRules(){let r=[];if(this.options.smartDashes&&(r.push(new ki({find:/---\s$/,handler:({state:e,range:t})=>e.tr.insertText("\u2014 ",t.from,t.to)})),r.push(new ki({find:/--\s$/,handler:({state:e,range:t})=>e.tr.insertText("\u2013 ",t.from,t.to)}))),this.options.smartQuotes){let[e,t]=this.options.doubleQuoteStyle.split("|"),[n,i]=this.options.singleQuoteStyle.split("|");r.push(new ki({find:/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,handler:({state:o,range:s,match:a})=>{let l=a[0],u=l.substring(0,l.length-1);return o.tr.insertText(u+e,s.from,s.to)}})),r.push(new ki({find:/"$/,handler:({state:o,range:s})=>o.tr.insertText(t,s.from,s.to)})),r.push(new ki({find:/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,handler:({state:o,range:s,match:a})=>{let l=a[0],u=l.substring(0,l.length-1);return o.tr.insertText(u+n,s.from,s.to)}})),r.push(new ki({find:/'$/,handler:({state:o,range:s})=>o.tr.insertText(i,s.from,s.to)}))}return r}});P_.exports=SB});var L_=me((Qj,D_)=>{var{SuggestModal:xB}=require("obsidian"),{TextSelection:Zj}=Te(),Rd=class extends xB{constructor(e,t,n){super(e),this.app=e,this.editor=t,this.range=n,this.updateListener=()=>this.updateAndFilterSuggestions()}onOpen(){super.onOpen(),this.editor.on("update",this.updateListener),this.updateAndFilterSuggestions()}onClose(){super.onClose(),this.editor.off("update",this.updateListener)}updateAndFilterSuggestions(){let e=this.getEditorQuery();if(e===null){this.close();return}this.inputEl.value=e,this.onInput()}getEditorQuery(){try{let e=this.editor.state,t=e.selection.from;return t<this.range.from+2||e.doc.textBetween(this.range.from,this.range.from+2)!=="[["?null:e.doc.textBetween(this.range.from+2,t)}catch{return null}}getSuggestions(e){let t=this.app.vault.getMarkdownFiles();if(!e)return t;let n=e.toLowerCase();return t.filter(i=>i.path.toLowerCase().includes(n)||i.basename.toLowerCase().includes(n))}renderSuggestion(e,t){t.createEl("div",{text:e.basename}),t.createEl("small",{text:e.path})}onChooseSuggestion(e,t){let n=e.basename;if(this.editor&&!this.editor.isDestroyed){let{schema:i,tr:o}=this.editor.state,s=this.range.from,a=this.editor.state.selection.from;o.replaceWith(s,a,i.text(n,[i.marks.internallink.create({href:n})])),this.editor.view.dispatch(o)}}};D_.exports=Rd});var Md=me((eU,B_)=>{var{Mark:EB,InputRule:_B,mergeAttributes:TB}=we(),{Plugin:F_,PluginKey:AB}=Te(),OB=L_(),CB=EB.create({name:"internallink",inclusive:!1,addOptions(){return{app:null,HTMLAttributes:{class:"internal-link"}}},parseHTML(){return[{tag:"a.internal-link"}]},addAttributes(){return{href:{default:null},text:{default:null}}},renderHTML({HTMLAttributes:r}){return["a",TB(this.options.HTMLAttributes,r),0]},addInputRules(){return[new _B({find:/\[\[([^|\]]+)(?:\|([^\]]+))?\]\]$/,handler:({state:r,range:e,match:t})=>{let{tr:n}=r,i=e.from,o=e.to,s=t[1],a=t[2],l=a||s;return n.replaceWith(i,o,r.schema.text(l,[r.schema.marks.internallink.create({href:s,text:a})])),n}})]},addProseMirrorPlugins(){let r=this,e=r.editor,t=(o,s)=>{let a=o.marks().find(f=>f.type===s);if(!a)return null;let l=o.pos,u=o.pos,c=o.index();for(let f=c;f>=0;f--){let h=o.parent.child(f);if(a.isInSet(h.marks))l=o.start()+h.content.findIndex(h).offset;else break}for(let f=c;f<o.parent.childCount;f++){let h=o.parent.child(f);if(a.isInSet(h.marks))u=o.start()+h.content.findIndex(h).offset+h.nodeSize;else break}return{from:l,to:u,mark:a}},n=new F_({key:new AB("internallink-live-preview"),state:{init(){return{activeLink:null}},apply(o,s,a,l){let{selection:u}=o,c=s.activeLink,f=null;if(c){let{from:h,to:d}=c,m=o.mapping.map(h),g=o.mapping.map(d);u.from>=m&&u.to<=g&&(f={from:m,to:g,text:l.doc.textBetween(m,g)})}if(u.empty){let h=t(u.$from,l.schema.marks.internallink);if(h){let{from:d,to:m,mark:g}=h,b=g.attrs.text,p=b?`[[${g.attrs.href}|${b}]]`:`[[${g.attrs.href}]]`;f={from:d,to:m,text:p,mark:g}}}return JSON.stringify(f)===JSON.stringify(c)?s:{activeLink:f}}},view(o){return{update:(s,a)=>{let l=this.key.getState(s.state),u=this.key.getState(a);if(l.activeLink&&!u.activeLink){let{from:c,to:f,text:h}=l.activeLink;s.dispatch(s.state.tr.removeMark(c,f).replaceWith(c,f,s.state.schema.text(h)).setMeta("addToHistory",!1))}else if(!l.activeLink&&u.activeLink){let{from:c,to:f}=u.activeLink,d=a.doc.textBetween(c,f).match(/\[\[([^|\]]+)(?:\|([^\]]+))?\]\]/),m=s.state.tr;if(d){let g=d[1],b=d[2],p=b||g;m.replaceWith(c,f,s.state.schema.text(p,[s.state.schema.marks.internallink.create({href:g,text:b})]))}m.docChanged&&s.dispatch(m)}}}}});return[new F_({props:{handleDOMEvents:{click(o,s){let a=s.target.closest(".internal-link");if(!a)return!1;let l=a.getAttribute("href");if(l&&r.options.app){s.preventDefault(),s.stopPropagation();let u=r.options.getFilePath?r.options.getFilePath():"",c=navigator.platform.toUpperCase().indexOf("MAC")>=0?s.metaKey:s.ctrlKey,f=s.altKey;return c&&f?r.options.app.workspace.openLinkText(l,u,"split"):c?r.options.app.workspace.openLinkText(l,u,"tab"):r.options.app.workspace.openLinkText(l,u,!1),!0}return!1}},handleTextInput(o,s,a,l){return l==="["&&r.options.app&&o.state.doc.textBetween(s-1,s)==="["&&setTimeout(()=>{new OB(r.options.app,r.editor,{from:s-1,to:s+1}).open()},0),!1}}}),n]}});B_.exports=CB});var H_=me((tU,z_)=>{var{Mark:NB,InputRule:RB,mergeAttributes:MB}=we(),{Plugin:IB}=Te(),PB=NB.create({name:"standardLink",inclusive:!1,addOptions(){return{app:null,HTMLAttributes:{class:"standard-link"}}},addAttributes(){return{href:{default:null}}},parseHTML(){return[{tag:"a[href]:not(.internal-link)"}]},renderHTML({HTMLAttributes:r}){return["a",MB(this.options.HTMLAttributes,r),0]},addInputRules(){return[new RB({find:/\[([^\]]+)\]\(([^)]+)\)$/,handler:({state:r,range:e,match:t})=>{let{tr:n}=r,i=e.from,o=e.to,s=t[1],a=t[2];return n.replaceWith(i,o,r.schema.text(s,[r.schema.marks.standardLink.create({href:a})])),n}})]},addProseMirrorPlugins(){let r=this;return[new IB({props:{handleDOMEvents:{click(e,t){let n=t.target.closest("a.standard-link");if(!n)return!1;let i=n.getAttribute("href");if(i&&r.options.app){if(t.preventDefault(),t.stopPropagation(),/^(http|https|mailto|tel):/.test(i))return window.open(i,"_blank"),!0;let s=r.options.getFilePath?r.options.getFilePath():"",a=navigator.platform.toUpperCase().indexOf("MAC")>=0?t.metaKey:t.ctrlKey,l=t.altKey;return a&&l?r.options.app.workspace.openLinkText(i,s,"split"):a?r.options.app.workspace.openLinkText(i,s,"tab"):r.options.app.workspace.openLinkText(i,s,!1),!0}return!1}}}})]}});z_.exports=PB});var U_=me((rU,j_)=>{var Id=class{constructor(){this.styles={}}generateCSS(e){this.styles=e;let t="",n=1;if(e.scale){let i=String(e.scale);i.endsWith("%")?n=parseFloat(i)/100:n=parseFloat(i),isNaN(n)&&(n=1)}for(let[i,o]of Object.entries(e))if(i!=="scale")if(o.type==="list"){let s=this.generateListCSS(i,o,n);s&&(t+=s)}else if(o.type==="footnote"){let s=this.generateFootnoteCSS(i,o,n);s&&(t+=s)}else{let s=this.getSelector(i),a=this.mapStyleToCSS(o,n);a&&(t+=`${s} {
${a}
}
`)}return t}getSelector(e){let t=".colophon-workspace .ProseMirror";if(e&&e.startsWith("heading-")){let n=e.split("-")[1];return`${t} h${n}.${e}`}else return e==="title"?`${t} h1.title`:e==="supertitle"?`${t} p.supertitle`:e==="footnote"?".colophon-footnote-view .colophon-footnote-editor-content p":e==="footnote-number"?"span.colophon-footnote-number":`${t} p.${e}`}mapStyleToCSS(e,t=1){let n=[];if(e["font-family"]&&n.push(`    font-family: ${this.formatFontFamily(e["font-family"])};`),e["font-size"]&&n.push(`    font-size: ${this.convertValue(e["font-size"],"font-size",t)};`),e["text-align"]&&n.push(`    text-align: ${e["text-align"]};`),e["line-spacing"]&&n.push(`    line-height: ${this.convertValue(e["line-spacing"],"line-spacing",t)};`),e["before-paragraph"]&&n.push(`    margin-top: ${this.convertValue(e["before-paragraph"],"spacing",t)};`),e["after-paragraph"]&&n.push(`    margin-bottom: ${this.convertValue(e["after-paragraph"],"spacing",t)};`),e["first-indent"]&&n.push(`    text-indent: ${this.convertValue(e["first-indent"],"indent",t)};`),e["left-indent"]&&n.push(`    margin-left: ${this.convertValue(e["left-indent"],"indent",t)};`),e["right-indent"]&&n.push(`    margin-right: ${this.convertValue(e["right-indent"],"indent",t)};`),e["font-variant"]){let i=e["font-variant"].toLowerCase();i==="italic"?n.push("    font-style: italic;"):i==="bold"?n.push("    font-weight: bold;"):i==="small-caps"?n.push("    font-variant: small-caps;"):(n.push("    font-style: normal;"),n.push("    font-weight: normal;"),n.push("    font-variant: normal;"))}return e.capitalization&&(e.capitalization==="small-caps"?n.push("    font-variant: small-caps;"):n.push(`    text-transform: ${e.capitalization};`)),e["character-spacing"]&&n.push(`    letter-spacing: ${e["character-spacing"]};`),e["keep-with-next"]&&(n.push("    page-break-after: avoid;"),n.push("    break-after: avoid;")),e.color&&n.push(`    color: ${e.color};`),e["font-weight"]&&n.push(`    font-weight: ${e["font-weight"]};`),n.join(`
`)}generateListCSS(e,t,n=1){let i="",o=t.defaults||{},s=t.levels||{};for(let a=1;a<=9;a++){let l={...o,...s[a]||{}},u=`.colophon-workspace .ProseMirror :is(ul, ol).${e}`;if(a>1){let p=a-1;for(let S=0;S<p;S++)u+=" > li > :is(ul, ol)"}let c=`    list-style-type: none;
    padding-left: 0;
    margin-left: 0;
    margin-top: 0;
    margin-bottom: 0;
`;(l["list-type"]==="ordered"||l.type==="ordered")&&(c+=`    counter-reset: colophon-list-item;
`),i+=`${u} {
${c}}
`;let f=`${u} > li`,h=this.convertValue(l["text-indent"],"indent",n),d=this.convertValue(l["marker-indent"],"indent",n),m=`    position: relative;
`;m+=`    padding-left: ${h};
`,m+=`    margin-left: 0;
`,i+=`${f} {
${m}}
`,i+=`${f} > p {
    position: relative;
    text-indent: 0;
    margin: 0;
}
`;let g=`    position: absolute;
`;if(g+=`    left: calc(${d} - ${h});
`,g+=`    top: 0;
`,l.align){let p=this.convertValue(l.align,"indent",n);g+=`    transform: translateY(calc(-1 * ${p}));
`}if(l.color&&l.color!=="inherit"&&(g+=`    color: ${l.color};
`),l.size&&(g+=`    font-size: ${l.size};
`),l["font-weight"]&&(g+=`    font-weight: ${l["font-weight"]};
`),l["list-type"]==="ordered"||l.type==="ordered"){let p=l.marker||"decimal",S=l.suffix||".";g+=`    counter-increment: colophon-list-item;
`,g+=`    content: counter(colophon-list-item, ${p}) "${S}";
`}else{let S=(l.marker||"\u2022").replace(/"/g,'\\"');g+=`    content: "${S}";
`}i+=`${f} > p:first-child::before {
${g}}
`}return i}generateFootnoteCSS(e,t,n=1){let i=".colophon-workspace .ProseMirror .footnote-symbol",o=[];if(t["font-family"]&&o.push(`    font-family: ${t["font-family"]};`),t["font-size"]){let s=this.convertValue(t["font-size"],"font-size",n);o.push(`    font-size: ${s};`)}if(t.color&&o.push(`    color: ${t.color};`),t["font-weight"]&&o.push(`    font-weight: ${t["font-weight"]};`),o.push("    line-height: 0;"),t.align){let s=this.convertValue(t.align,"indent",n);o.push("    position: relative;"),o.push(`    top: calc(-1 * ${s});`),o.push("    vertical-align: baseline;")}return`${i} {
${o.join(`
`)}
}
`}convertValue(e,t,n=1){if(typeof e!="string"&&typeof e!="number")return e;let i=String(e),o=parseFloat(i);if(isNaN(o))return e;let s=o*n;if(i.endsWith("in"))return`${(s*6).toFixed(3)}rem`;if(t==="font-size"){if(i.endsWith("pt"))return`${(s/12).toFixed(3)}rem`}else if(t!=="indent"){if(t==="line-spacing"){if(i.endsWith("pt"))return`${(s/12).toFixed(3)}rem`;if(!i.match(/[a-z%]/i))return i}else if(t==="spacing"&&i.endsWith("pt"))return`${(s/12).toFixed(3)}rem`}return e}formatFontFamily(e){let t=String(e).trim();return t.includes("var(")||t.includes(",")||t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'")?t:t.includes(" ")?`"${t}"`:t}getStyleOptions(e){let t=[],n=[];n.push({label:"None",value:"none",type:"list"});for(let[i,o]of Object.entries(e)){if(i==="scale"||i==="footnote"||i==="footnote-number")continue;let s=o.type||"paragraph",a={label:o.name||i,value:i,type:s,listType:o.defaults?.["list-type"]||"unordered"};s==="list"?n.push(a):(s==="paragraph"||!s)&&t.push(a)}return{paragraphOptions:t,listOptions:n}}};j_.exports=Id});var W_=me((nU,q_)=>{var DB={scale:"100%",supertitle:{name:"Supertitle",type:"paragraph","font-size":"11.5pt","text-align":"center","line-spacing":"14pt","before-paragraph":"0pt","after-paragraph":"18pt","font-family":"var(--font-text-theme), var(--font-text-override)","font-variant":"Regular"},title:{name:"Title",type:"paragraph","font-size":"18pt","text-align":"center","line-spacing":"18pt","before-paragraph":"0pt","after-paragraph":"4pt","font-family":"var(--font-text-theme), var(--font-text-override)","font-variant":"Regular"},subtitle:{name:"Subtitle",type:"paragraph","font-family":"var(--font-text-theme), var(--font-text-override)","font-variant":"Regular","font-size":"14pt","line-spacing":"18pt","after-paragraph":"28pt","text-align":"center"},epigraph:{name:"Epigraph",type:"paragraph","font-family":"var(--font-text-theme), var(--font-text-override)","font-variant":"Regular","font-size":"11.5pt","line-spacing":"16pt","left-indent":"1in","right-indent":"1in","before-paragraph":"48pt","after-paragraph":"56pt"},"body-first":{name:"Body First",type:"paragraph","font-size":"11.5pt","text-align":"left","first-indent":"0in","left-indent":"0in","right-indent":"0in","line-spacing":"16pt","before-paragraph":"0pt","after-paragraph":"0pt","font-family":"var(--font-text-theme), var(--font-text-override)","font-variant":"Regular","following-style":"body"},body:{name:"Body",type:"paragraph","font-size":"11.5pt","text-align":"left","first-indent":"0.3in","left-indent":"0in","right-indent":"0in","line-spacing":"16pt","before-paragraph":"0pt","after-paragraph":"0pt","font-family":"var(--font-text-theme), var(--font-text-override)","font-variant":"Regular"},footnote:{name:"Footnote",type:"paragraph","font-size":"7pt","text-align":"left","first-indent":"0in","left-indent":"0in","right-indent":"0in","line-spacing":"9pt","before-paragraph":"0pt","after-paragraph":"0pt","font-family":"var(--font-text-theme), var(--font-text-override)","font-variant":"Regular","space-between-notes":"10pt",format:"1, 2, 3, \u2026",numbering:"continuous"},"footnote-number":{name:"Footnote Number",type:"pararaph","font-weight":"bold","font-family":"var(--font-text-theme), var(--font-text-override)","font-size":"7pt","line-spacing":"9pt"},"heading-1":{name:"Heading 1",type:"paragraph","font-size":"11.5pt","text-align":"left","first-indent":"0in","left-indent":"0in","right-indent":"0in","line-spacing":"28pt","before-paragraph":"28pt","after-paragraph":"14pt","font-family":"var(--font-text-theme), var(--font-text-override)","font-variant":"Italic","keep-with-next":!0,"following-style":"body-first"},"heading-2":{name:"Heading 2",type:"paragraph","font-size":"11.5pt","text-align":"left","first-indent":"0in","left-indent":"0in","right-indent":"0in","line-spacing":"28pt","before-paragraph":"28pt","after-paragraph":"14pt","font-family":"var(--font-text-theme), var(--font-text-override)","font-variant":"Regular",capitalization:"small-caps","character-spacing":"2%","keep-with-next":!0,"following-style":"body-first"},"heading-3":{name:"Heading 3",type:"paragraph","font-size":"11.5pt","text-align":"center","first-indent":"0in","left-indent":"0in","right-indent":"0in","line-spacing":"28pt","before-paragraph":"28pt","after-paragraph":"14pt","font-family":"var(--font-text-theme), var(--font-text-override)","font-variant":"Regular","keep-with-next":!0,"following-style":"body-first"},bullet:{name:"Bullet",type:"list",defaults:{"list-type":"unordered",marker:"\u2022",color:"inherit",size:"100%",align:"0pt","marker-indent":"0in","text-indent":"0.25in"}},numbered:{name:"Numbered",type:"list",defaults:{"list-type":"ordered",marker:"decimal",suffix:".",color:"inherit",size:"100%",align:"0pt","marker-indent":"0in","text-indent":"0.25in"}},"footnote-symbol":{name:"Footnote Symbol",type:"footnote",format:"integer",align:"4pt","font-size":"7pt","line-height":"0","font-family":"var(--font-text-theme), var(--font-text-override)",color:"var(--text-normal)"}};q_.exports=DB});var $_=me((oU,V_)=>{var{Editor:LB,Mark:FB,Extension:BB,mergeAttributes:zB}=we(),{StarterKit:HB}=bd(),{Paragraph:jB}=id(),{Heading:UB}=xh(),{BulletList:qB}=a_(),{OrderedList:WB}=c_(),{ListItem:VB}=d_(),$B=wl(),{Subscript:KB}=_d(),{Superscript:GB}=Ad(),JB=Cd(),{InputRule:iU}=we(),XB=I_(),YB=Nd(),ZB=Md(),QB=H_(),e4=U_(),t4=W_(),{parseYaml:r4}=require("obsidian"),n4=BB.create({name:"enterKeyHandler",addKeyboardShortcuts(){return{Enter:()=>{let{state:r}=this.editor,{$from:e}=r.selection;return e.parent.attrs.class!=="body"?this.editor.chain().focus().splitBlock().setNode("paragraph",{class:"body"}).run():this.editor.commands.splitBlock()}}}}),i4=jB.extend({addAttributes(){return{class:{default:"body",parseHTML:r=>r.getAttribute("class"),renderHTML:r=>r.class?{class:r.class}:{}}}}}),o4=UB.extend({addAttributes(){return{...this.parent?.(),level:{default:1,keepOnSplit:!1},class:{default:"heading-1",parseHTML:r=>r.getAttribute("class"),renderHTML:r=>r.class?{class:r.class}:{}}}}}),s4=qB.extend({addAttributes(){return{class:{default:"bullet",parseHTML:r=>r.getAttribute("class"),renderHTML:r=>({class:r.class})}}}}),a4=WB.extend({addAttributes(){return{class:{default:"ordered",parseHTML:r=>r.getAttribute("class"),renderHTML:r=>({class:r.class})}}}}),l4=VB.extend({}),u4=FB.create({name:"smallCaps",parseHTML(){return[{style:"font-variant",getAttrs:r=>r==="small-caps"?{}:!1}]},renderHTML({HTMLAttributes:r}){return["span",zB(r,{style:"font-variant: small-caps"}),0]},addCommands(){return{toggleSmallCaps:()=>({commands:r})=>r.toggleMark(this.name)}}}),Pd=class{constructor(e,t,n,i,o,s){this.app=e,this.containerEl=t,this.toolbar=n,this.isSpellcheckEnabled=i,this.settings=o,this.onUpdate=s,this.editor=null,this.isLoaded=!1,this.footnotes=[],this.listeners=[],this.styleManager=new e4,this.paragraphOptions=[],this.listOptions=[]}normalizeDoc(e){return!e||!e.content||e.content.forEach(t=>{if(t.type==="paragraph")(!t.attrs||t.attrs.class===null||t.attrs.class===void 0)&&(t.attrs={...t.attrs,class:"body"});else if(t.type==="heading"&&(!t.attrs||t.attrs.class===null||t.attrs.class===void 0)){let n=t.attrs?.level||1;t.attrs={...t.attrs,class:`heading-${n}`}}}),e}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}updateSettings(e){this.settings=e,this.loadStyles(),this.editor&&this.handleScroll()}load(e,t,n){this.filePath=n,this.editor&&this.editor.destroy();let i=null;t&&(t.doc?(i=t.doc,this.footnotes=t.footnotes||[]):(i=t,this.footnotes=[])),i||(i={type:"doc",content:e.split(`

`).map(o=>({type:"paragraph",content:o.trim()?[{type:"text",text:o.trim()}]:[]}))},this.footnotes=[]),i=this.normalizeDoc(i),this.initEditor(i),this.isLoaded=!0}initEditor(e){let t=this.containerEl.createDiv("colophon-editor-host");this.loadStyles().then(()=>{}),this.editor=new LB({element:t,extensions:[HB.configure({paragraph:!1,heading:!1,bulletList:!1,orderedList:!1,listItem:!1}),n4,i4,o4,s4,a4,l4,$B,KB,GB,JB,u4,XB,YB.configure({smartQuotes:this.settings.smartQuotes,smartDashes:this.settings.smartDashes,doubleQuoteStyle:this.settings.doubleQuoteStyle,singleQuoteStyle:this.settings.singleQuoteStyle}),ZB.configure({app:this.app,getFilePath:()=>this.filePath}),QB.configure({app:this.app,getFilePath:()=>this.filePath})],editorProps:{attributes:{spellcheck:this.isSpellcheckEnabled?"true":"false"}},content:e,onUpdate:({editor:n})=>{this.triggerUpdate()},onSelectionUpdate:({editor:n})=>{this.handleScroll(),this.toolbar&&this.toolbar.update()},onFocus:({editor:n})=>{this.toolbar&&this.toolbar.setActiveEditor(n)}}),this.toolbar&&(this.toolbar.setActiveEditor(this.editor),this.toolbar.updateStyleOptions(this.paragraphOptions||[],this.listOptions||[]))}async loadStyles(){try{let e={...t4},t=this.settings.stylesFolder||"snippets",n=`${this.app.vault.configDir}/${t}`;if(await this.app.vault.adapter.exists(n))for(let a of this.settings.enabledStyles||[]){let l=`${n}/${a}`;if(await this.app.vault.adapter.exists(l))try{let u=await this.app.vault.adapter.read(l),c=r4(u);for(let[f,h]of Object.entries(c))e[f]&&typeof e[f]=="object"&&!Array.isArray(e[f])&&h&&typeof h=="object"&&!Array.isArray(h)?e[f]={...e[f],...h}:e[f]=h}catch(u){console.error(`Colophon: Failed to load style file ${a}`,u)}}let i=this.styleManager.generateCSS(e);this.injectStyles(i);let{paragraphOptions:o,listOptions:s}=this.styleManager.getStyleOptions(e);this.paragraphOptions=o,this.listOptions=s,this.toolbar&&this.toolbar.updateStyleOptions(this.paragraphOptions,this.listOptions),this.triggerUpdate()}catch(e){console.error("Colophon: Failed to load styles",e)}}injectStyles(e){let t="colophon-dynamic-styles",n=document.getElementById(t);n||(n=document.createElement("style"),n.id=t,document.head.appendChild(n)),n.textContent=e}handleScroll(){if(!this.editor||!this.editor.view.hasFocus())return;let{state:e}=this.editor;if(!e.selection.empty)return;let t=this.editor.view,n=e.selection.from,i=t.coordsAtPos(n),o=this.containerEl.getBoundingClientRect();if(this.settings.fixedFeedPosition){let a=1-(this.settings.feedPadding||0)/100,l=o.height*a,u=o.top+l,f=i.bottom-u;Math.abs(f)>2&&this.containerEl.scrollBy({top:f,behavior:"smooth"})}else if(i.top<o.top+20){let a=i.top-(o.top+20);this.containerEl.scrollBy({top:a,behavior:"auto"})}else if(i.bottom>o.bottom-20){let a=i.bottom-(o.bottom-20);this.containerEl.scrollBy({top:a,behavior:"auto"})}}triggerUpdate(){if(!this.editor)return;let e=[],t=1,n=!1;this.editor.state.doc.descendants((o,s)=>{if(o.type.name==="footnote"){let a=this.getFootnoteSymbol(t++);e.push({id:o.attrs.id,number:a,pos:s}),o.attrs.number!==a&&(n=!0)}});let i=e.map(o=>{let s=this.footnotes.find(a=>a.id===o.id);return{id:o.id,number:o.number,content:s?s.content:""}});this.footnotes=i,n&&Promise.resolve().then(()=>{if(!this.editor||this.editor.isDestroyed)return;let o=this.editor.state.tr,s=!1;this.editor.state.doc.descendants((a,l)=>{if(a.type.name==="footnote"){let u=e.find(c=>c.id===a.attrs.id)?.number;u&&a.attrs.number!==u&&(o.setNodeMarkup(l,null,{...a.attrs,number:u}),s=!0)}}),s&&this.editor.view.dispatch(o)}),this.onUpdate&&this.onUpdate({doc:this.editor.getJSON(),footnotes:this.footnotes}),this.listeners.forEach(o=>o())}addFootnote(){if(this.editor){let e=`fn-${Date.now()}`;return this.editor.chain().focus().insertContent({type:"footnote",attrs:{id:e,number:"#"}}).run(),e}}updateFootnote(e,t){let n=this.footnotes.find(i=>i.id===e);n&&(n.content=t,this.onUpdate&&this.onUpdate({doc:this.editor.getJSON(),footnotes:this.footnotes}))}getFootnotes(){return this.footnotes}destroy(){this.editor&&(this.editor.destroy(),this.editor=null)}focus(){this.editor&&this.editor.commands.focus()}getFootnoteSymbol(e){let t=this.styleManager.styles["footnote-symbol"],n=t?t.format:"integer";if(Array.isArray(n))return n.length===0?String(e):n[(e-1)%n.length];switch(n){case"lower-roman":return this.toRoman(e).toLowerCase();case"upper-roman":return this.toRoman(e);case"lower-alpha":return this.toAlpha(e).toLowerCase();case"upper-alpha":return this.toAlpha(e);case"integer":default:return String(e)}}toRoman(e){let t={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},n="";for(let i in t)for(;e>=t[i];)n+=i,e-=t[i];return n}toAlpha(e){let t="";for(;e>0;){let n=(e-1)%26;t=String.fromCharCode(65+n)+t,e=(e-n)/26|0}return t}getWordCounts(){if(!this.editor)return{main:0,footnotes:0};let e=this.countWordsInDoc(this.editor.state.doc),t=0;return this.footnotes.forEach(n=>{typeof n.content=="string"?t+=this.countWordsInText(n.content):typeof n.content=="object"&&(t+=this.countWordsInDocNode(n.content))}),{main:e,footnotes:t}}countWordsInDoc(e){let t=0;return e.descendants(n=>{n.isText&&(t+=this.countWordsInText(n.text))}),t}countWordsInDocNode(e){let t=0;return e.type==="text"&&e.text&&(t+=this.countWordsInText(e.text)),e.content&&Array.isArray(e.content)&&e.content.forEach(n=>{t+=this.countWordsInDocNode(n)}),t}countWordsInText(e){if(!e)return 0;let t=e.match(/\S+/g);return t?t.length:0}};V_.exports=Pd});var G_=me((sU,K_)=>{function c4(r){let e=r,t="",n=null,i=/^---\n[\s\S]*?\n---\n/,o=r.match(i);o&&(t=o[0],e=e.substring(t.length));let s=/%% colophon:data\s*(\{[\s\S]*?\})\s*%%$/,a=e.match(s);if(a)try{n=JSON.parse(a[1]),e=e.replace(s,"").trimEnd()}catch(l){console.error("Colophon: Failed to parse sidecar data",l)}return{markdown:e,data:n,frontmatter:t}}function f4(r,e,t=""){let n=t+r;if(e){let i=JSON.stringify(e,null,2);n=`${n.trimEnd()}

%% colophon:data ${i} %%`}return n}K_.exports={parseFile:c4,serializeFile:f4}});var Q_=me((uU,Z_)=>{var{FileView:h4,WorkspaceLeaf:aU,Notice:lU,debounce:J_}=require("obsidian"),X_=Vw(),d4=$_(),{parseFile:p4,serializeFile:m4}=G_(),Y_="colophon-view",Dd=class extends h4{constructor(e,t,n){super(e),this.plugin=n,this.settings=t||{textColumnWidth:1080},this.adapter=null,this.toolbar=null,this.data=null,this.markdownBody="",this.frontmatter="",this.themeToggleBtn=null,this.loaderEl=null,this.scrollEl=null,this.isForcedLight=!1,this.wordCountEl=null,this.save=J_(this.save.bind(this),1e3,!0),this.updateWordCount=J_(this.updateWordCount.bind(this),500,!1)}getViewType(){return Y_}getDisplayText(){return this.file?this.file.basename:"No File"}getIcon(){return"feather"}async onOpen(){this.contentEl.empty(),this.contentEl.addClass("colophon-workspace"),this.applySettings();let e=this.containerEl.querySelector(".view-header");if(e){let n=e.querySelector(".view-header-center");if(!n){n=createDiv({cls:"view-header-center"});let i=e.querySelector(".view-actions");i?e.insertBefore(n,i):e.appendChild(n)}this.toolbar=new X_(n),this.toolbar.create()}else this.toolbar=new X_(this.contentEl),this.toolbar.create();this.scrollEl=this.contentEl.createDiv("colophon-scroll-container"),this.themeToggleBtn=this.addAction("sun-moon","Enable white canvas mode for this note",()=>{this.toggleTheme()}),this.showLoader();let t=this.app.vault.getConfig("spellcheck");this.adapter=new d4(this.app,this.scrollEl,this.toolbar,t,this.settings,n=>{this.data=n,this.save(),this.updateWordCount(),this.plugin.activateFootnoteView()}),this.plugin.settings.showWordCount&&this.toggleWordCount(!0),this.registerEvent(this.app.workspace.on("css-change",()=>{this.isForcedLight&&this.updateCanvasTheme()}))}onPaneMenu(e,t){super.onPaneMenu(e,t),e.addItem(n=>{n.setTitle("Export to DOCX").setIcon("document").onClick(async()=>{this.plugin.exportToDocx(this)})}),e.addItem(n=>{n.setTitle("Show word count").setIcon("calculator").setChecked(this.plugin.settings.showWordCount).onClick(async()=>{this.plugin.settings.showWordCount=!this.plugin.settings.showWordCount,await this.plugin.saveSettings(),this.toggleWordCount(this.plugin.settings.showWordCount)})})}showLoader(){this.loaderEl||(this.loaderEl=this.contentEl.createDiv("colophon-loader"),this.loaderEl.createDiv("colophon-loader-spinner"),this.loaderEl.createSpan({text:"Loading Manuscript..."}))}hideLoader(){this.loaderEl&&(this.loaderEl.remove(),this.loaderEl=null)}toggleTheme(){this.isForcedLight=!this.isForcedLight,this.themeToggleBtn&&(this.themeToggleBtn.classList.toggle("is-active",this.isForcedLight),this.isForcedLight?this.themeToggleBtn.setAttribute("aria-label","Disable white canvas mode for this note"):this.themeToggleBtn.setAttribute("aria-label","Enable white canvas mode for this note")),this.updateCanvasTheme()}updateCanvasTheme(){let e=["--background-primary","--text-normal","--text-muted","--text-accent","--text-selection","--background-modifier-border"];if(this.isForcedLight){let t=this.extractThemeVars("theme-light");for(let[n,i]of Object.entries(t))i&&this.contentEl.style.setProperty(n,i);this.contentEl.classList.add("colophon-forced-theme")}else{for(let t of e)this.contentEl.style.removeProperty(t);this.contentEl.classList.remove("colophon-forced-theme")}}toggleWordCount(e){e?this.wordCountEl||(this.wordCountEl=this.contentEl.createDiv("colophon-word-count-indicator"),this.updateWordCount()):this.wordCountEl&&(this.wordCountEl.remove(),this.wordCountEl=null)}updateWordCount(){if(!this.wordCountEl||!this.adapter)return;let e=this.adapter.getWordCounts(),t=e.main+e.footnotes;this.wordCountEl.setText(`${e.main} / ${t} (with footnotes)`)}extractThemeVars(e){let t=document.createElement("div");t.classList.add(e),t.style.display="none",document.body.appendChild(t);let n=window.getComputedStyle(t),i={"--background-primary":n.getPropertyValue("--background-primary").trim(),"--text-normal":n.getPropertyValue("--text-normal").trim(),"--text-muted":n.getPropertyValue("--text-muted").trim(),"--text-accent":n.getPropertyValue("--text-accent").trim(),"--text-selection":n.getPropertyValue("--text-selection").trim(),"--background-modifier-border":n.getPropertyValue("--background-modifier-border").trim()};return document.body.removeChild(t),i}updateSettings(e){this.settings=e,this.applySettings(),this.adapter&&this.adapter.updateSettings(this.settings)}applySettings(){this.contentEl&&this.contentEl.style.setProperty("--colophon-editor-width",`${this.settings.textColumnWidth}px`)}async onClose(){if(this.toolbar){this.toolbar.destroy();let e=this.containerEl.querySelector(".view-header");if(e){let t=e.querySelector(".view-header-center");t&&t.remove()}}this.adapter&&this.adapter.destroy()}async onLoadFile(e){!this.loaderEl&&!this.adapter?.isLoaded&&this.showLoader();let t=await this.app.vault.read(e),{markdown:n,data:i,frontmatter:o}=p4(t);this.markdownBody=n,this.data=i,this.frontmatter=o,this.adapter&&(this.adapter.load(n,i,this.file.path),this.hideLoader())}async onUnloadFile(e){this.adapter}async save(){if(!this.file||!this.data)return;let e=m4(this.markdownBody,this.data,this.frontmatter);await this.app.vault.modify(this.file,e)}async insertFootnote(){if(this.adapter){let e=this.adapter.addFootnote();if(e){await this.plugin.activateFootnoteView();let t=this.app.workspace.getLeavesOfType("colophon-footnote-view");if(t.length>0){let n=t[0].view;n&&(n.render(),setTimeout(()=>{n.focusFootnote(e)},50))}}}}};Z_.exports={ColophonView:Dd,VIEW_TYPE:Y_}});var rT=me((pU,tT)=>{var{ItemView:g4,WorkspaceLeaf:cU,Notice:fU,setIcon:hU}=require("obsidian"),{Editor:v4,mergeAttributes:dU}=we(),{StarterKit:y4}=bd(),w4=wl(),{Subscript:b4}=_d(),{Superscript:k4}=Ad(),S4=Cd(),x4=Nd(),E4=Md(),eT="colophon-footnote-view",Ld=class extends g4{constructor(e,t,n){super(e),this.settings=t||{smartQuotes:!0,smartDashes:!0,doubleQuoteStyle:"\u201C|\u201D",singleQuoteStyle:"\u2018|\u2019"},this.isSpellcheckEnabled=n,this.adapter=null,this.editors=new Map}getViewType(){return eT}getDisplayText(){return"Footnotes"}getIcon(){return"list-ordered"}async onOpen(){let e=this.contentEl;e.empty(),e.addClass("colophon-footnote-view"),this.render()}async onClose(){this.editors.forEach(e=>e.destroy()),this.editors.clear(),this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}updateSettings(e){this.settings=e,this.render(!0)}setAdapter(e){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),this.adapter=e,this.adapter&&(this.unsubscribe=this.adapter.subscribe(()=>{this.render()})),this.render()}render(e=!1){let t=this.contentEl;if(!this.adapter){t.empty(),this.editors.forEach(s=>s.destroy()),this.editors.clear(),t.createEl("div",{text:"No active manuscript.",cls:"colophon-footnote-empty"});return}let n=this.adapter.getFootnotes();if(!n||n.length===0){t.empty(),this.editors.forEach(s=>s.destroy()),this.editors.clear(),t.createEl("div",{text:"No footnotes yet.",cls:"colophon-footnote-empty"});return}let i=t.querySelector(".colophon-footnote-list");i||(t.empty(),i=t.createEl("div",{cls:"colophon-footnote-list"}));let o=new Set(n.map(s=>s.id));for(let[s,a]of this.editors)if(!o.has(s)||e){a.destroy(),this.editors.delete(s);let l=i.querySelector(`[data-footnote-id="${s}"]`);l&&l.remove()}n.forEach((s,a)=>{let l=i.querySelector(`[data-footnote-id="${s.id}"]`);if(l){let u=l.querySelector(".colophon-footnote-number");u&&(u.innerText=`${s.number||a+1}. `)}else{l=i.createEl("div",{cls:"colophon-footnote-item"}),l.dataset.footnoteId=s.id,l.createEl("div",{cls:"colophon-footnote-header"}).createSpan({text:`${s.number||a+1}. `,cls:"colophon-footnote-number"});let c=l.createEl("div",{cls:"colophon-footnote-editor-container"}),f=new v4({element:c,extensions:[y4,w4,b4,k4,S4,x4.configure({smartQuotes:this.settings.smartQuotes,smartDashes:this.settings.smartDashes,doubleQuoteStyle:this.settings.doubleQuoteStyle,singleQuoteStyle:this.settings.singleQuoteStyle}),E4.configure({app:this.app})],content:s.content,onUpdate:({editor:h})=>{this.adapter.updateFootnote(s.id,h.getJSON())},editorProps:{attributes:{class:"colophon-footnote-editor-content",spellcheck:this.isSpellcheckEnabled?"true":"false"}},onFocus:({editor:h})=>{this.adapter&&this.adapter.toolbar&&this.adapter.toolbar.setActiveEditor(h,!0)},onSelectionUpdate:({editor:h})=>{this.adapter&&this.adapter.toolbar&&this.adapter.toolbar.update()}});this.editors.set(s.id,f)}}),n.forEach(s=>{let a=i.querySelector(`[data-footnote-id="${s.id}"]`);a&&i.appendChild(a)})}focusFootnote(e){let t=this.editors.get(e);if(t){t.commands.focus();let n=this.contentEl.querySelector(`[data-footnote-id="${e}"]`);n&&n.scrollIntoView({behavior:"smooth",block:"center"})}}getFocusedEditor(){for(let e of this.editors.values())if(e.isFocused)return e;return null}};tT.exports={FootnoteView:Ld,FOOTNOTE_VIEW_TYPE:eT}});var iT=me((mU,nT)=>{var{Modal:_4,Setting:Rl}=require("obsidian"),Fd=class extends _4{constructor(e,t){super(e),this.onExport=t,this.settings={pageSize:"Letter",margins:{top:1,bottom:1,left:1,right:1},scale:100}}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:"Export to DOCX"}),new Rl(e).setName("Page size").setDesc("Select the page size for the exported document.").addDropdown(n=>n.addOption("Letter",'Letter (8.5" x 11")').addOption("A4","A4 (210mm x 297mm)").addOption("Legal",'Legal (8.5" x 14")').setValue(this.settings.pageSize).onChange(i=>this.settings.pageSize=i)),e.createEl("h3",{text:"Margins (inches)"});let t=e.createDiv({cls:"colophon-export-margins"});t.style.display="grid",t.style.gridTemplateColumns="1fr 1fr",t.style.gap="10px",t.style.marginBottom="20px",["top","bottom","left","right"].forEach(n=>{new Rl(t).setName(n.charAt(0).toUpperCase()+n.slice(1)).addText(i=>i.setValue(String(this.settings.margins[n])).onChange(o=>{let s=parseFloat(o);isNaN(s)||(this.settings.margins[n]=s)}))}),new Rl(e).setName("Scale (%)").setDesc("Adjust the font size scale for the exported document.").addSlider(n=>n.setLimits(50,200,5).setValue(this.settings.scale).setDynamicTooltip().onChange(i=>this.settings.scale=i)),new Rl(e).addButton(n=>n.setButtonText("Export").setCta().onClick(()=>{this.close(),this.onExport(this.settings)}))}onClose(){let{contentEl:e}=this;e.empty()}};nT.exports=Fd});var Dw=me(B=>{"use strict";var T4=Object.defineProperty,A4=Object.defineProperties,O4=Object.getOwnPropertyDescriptors,Hl=Object.getOwnPropertySymbols,iO=Object.prototype.hasOwnProperty,oO=Object.prototype.propertyIsEnumerable,xm=(r,e,t)=>e in r?T4(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ke=(r,e)=>{for(var t in e||(e={}))iO.call(e,t)&&xm(r,t,e[t]);if(Hl)for(var t of Hl(e))oO.call(e,t)&&xm(r,t,e[t]);return r},ht=(r,e)=>A4(r,O4(e)),C4=(r,e)=>{var t={};for(var n in r)iO.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&Hl)for(var n of Hl(r))e.indexOf(n)<0&&oO.call(r,n)&&(t[n]=r[n]);return t},ne=(r,e,t)=>xm(r,typeof e!="symbol"?e+"":e,t),vw=(r,e,t)=>new Promise((n,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(r,e)).next())});Object.defineProperty(B,Symbol.toStringTag,{value:"Module"});var Pn=class{constructor(e){ne(this,"rootKey"),this.rootKey=e}},sO=Object.seal({}),Y=class extends Pn{constructor(e){super(e),ne(this,"root"),this.root=new Array}prepForXml(e){var t;e.stack.push(this);let n=this.root.map(i=>i instanceof Pn?i.prepForXml(e):i).filter(i=>i!==void 0);return e.stack.pop(),{[this.rootKey]:n.length?n.length===1&&((t=n[0])!=null&&t._attr)?n[0]:n:sO}}addChildElement(e){return this.root.push(e),this}},zt=class extends Y{prepForXml(e){let t=super.prepForXml(e);if(t&&(typeof t[this.rootKey]!="object"||Object.keys(t[this.rootKey]).length))return t}},pe=class extends Pn{constructor(e){super("_attr"),ne(this,"xmlKeys"),this.root=e}prepForXml(e){let t={};return Object.entries(this.root).forEach(([n,i])=>{if(i!==void 0){let o=this.xmlKeys&&this.xmlKeys[n]||n;t[o]=i}}),{_attr:t}}},Tt=class extends Pn{constructor(e){super("_attr"),this.root=e}prepForXml(e){return{_attr:Object.values(this.root).filter(({value:n})=>n!==void 0).reduce((n,{key:i,value:o})=>ht(ke({},n),{[i]:o}),{})}}},Pe=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{val:"w:val",color:"w:color",fill:"w:fill",space:"w:space",sz:"w:sz",type:"w:type",rsidR:"w:rsidR",rsidRPr:"w:rsidRPr",rsidSect:"w:rsidSect",w:"w:w",h:"w:h",top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter",linePitch:"w:linePitch",pos:"w:pos"})}},vr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Bd={},Ml={exports:{}},oT;function ww(){if(oT)return Ml.exports;oT=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(x,M,I){return Function.prototype.apply.call(x,M,I)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(x){return Object.getOwnPropertyNames(x).concat(Object.getOwnPropertySymbols(x))}:t=function(x){return Object.getOwnPropertyNames(x)};function n(w){console&&console.warn&&console.warn(w)}var i=Number.isNaN||function(x){return x!==x};function o(){o.init.call(this)}Ml.exports=o,Ml.exports.once=p,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(w){if(typeof w!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof w)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(w){if(typeof w!="number"||w<0||i(w))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+w+".");s=w}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(x){if(typeof x!="number"||x<0||i(x))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+x+".");return this._maxListeners=x,this};function l(w){return w._maxListeners===void 0?o.defaultMaxListeners:w._maxListeners}o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(x){for(var M=[],I=1;I<arguments.length;I++)M.push(arguments[I]);var F=x==="error",N=this._events;if(N!==void 0)F=F&&N.error===void 0;else if(!F)return!1;if(F){var K;if(M.length>0&&(K=M[0]),K instanceof Error)throw K;var ae=new Error("Unhandled error."+(K?" ("+K.message+")":""));throw ae.context=K,ae}var R=N[x];if(R===void 0)return!1;if(typeof R=="function")e(R,this,M);else for(var H=R.length,T=m(R,H),I=0;I<H;++I)e(T[I],this,M);return!0};function u(w,x,M,I){var F,N,K;if(a(M),N=w._events,N===void 0?(N=w._events=Object.create(null),w._eventsCount=0):(N.newListener!==void 0&&(w.emit("newListener",x,M.listener?M.listener:M),N=w._events),K=N[x]),K===void 0)K=N[x]=M,++w._eventsCount;else if(typeof K=="function"?K=N[x]=I?[M,K]:[K,M]:I?K.unshift(M):K.push(M),F=l(w),F>0&&K.length>F&&!K.warned){K.warned=!0;var ae=new Error("Possible EventEmitter memory leak detected. "+K.length+" "+String(x)+" listeners added. Use emitter.setMaxListeners() to increase limit");ae.name="MaxListenersExceededWarning",ae.emitter=w,ae.type=x,ae.count=K.length,n(ae)}return w}o.prototype.addListener=function(x,M){return u(this,x,M,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(x,M){return u(this,x,M,!0)};function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(w,x,M){var I={fired:!1,wrapFn:void 0,target:w,type:x,listener:M},F=c.bind(I);return F.listener=M,I.wrapFn=F,F}o.prototype.once=function(x,M){return a(M),this.on(x,f(this,x,M)),this},o.prototype.prependOnceListener=function(x,M){return a(M),this.prependListener(x,f(this,x,M)),this},o.prototype.removeListener=function(x,M){var I,F,N,K,ae;if(a(M),F=this._events,F===void 0)return this;if(I=F[x],I===void 0)return this;if(I===M||I.listener===M)--this._eventsCount===0?this._events=Object.create(null):(delete F[x],F.removeListener&&this.emit("removeListener",x,I.listener||M));else if(typeof I!="function"){for(N=-1,K=I.length-1;K>=0;K--)if(I[K]===M||I[K].listener===M){ae=I[K].listener,N=K;break}if(N<0)return this;N===0?I.shift():g(I,N),I.length===1&&(F[x]=I[0]),F.removeListener!==void 0&&this.emit("removeListener",x,ae||M)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(x){var M,I,F;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[x]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[x]),this;if(arguments.length===0){var N=Object.keys(I),K;for(F=0;F<N.length;++F)K=N[F],K!=="removeListener"&&this.removeAllListeners(K);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(M=I[x],typeof M=="function")this.removeListener(x,M);else if(M!==void 0)for(F=M.length-1;F>=0;F--)this.removeListener(x,M[F]);return this};function h(w,x,M){var I=w._events;if(I===void 0)return[];var F=I[x];return F===void 0?[]:typeof F=="function"?M?[F.listener||F]:[F]:M?b(F):m(F,F.length)}o.prototype.listeners=function(x){return h(this,x,!0)},o.prototype.rawListeners=function(x){return h(this,x,!1)},o.listenerCount=function(w,x){return typeof w.listenerCount=="function"?w.listenerCount(x):d.call(w,x)},o.prototype.listenerCount=d;function d(w){var x=this._events;if(x!==void 0){var M=x[w];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function m(w,x){for(var M=new Array(x),I=0;I<x;++I)M[I]=w[I];return M}function g(w,x){for(;x+1<w.length;x++)w[x]=w[x+1];w.pop()}function b(w){for(var x=new Array(w.length),M=0;M<x.length;++M)x[M]=w[M].listener||w[M];return x}function p(w,x){return new Promise(function(M,I){function F(K){w.removeListener(x,N),I(K)}function N(){typeof w.removeListener=="function"&&w.removeListener("error",F),M([].slice.call(arguments))}k(w,x,N,{once:!0}),x!=="error"&&S(w,F,{once:!0})})}function S(w,x,M){typeof w.on=="function"&&k(w,"error",x,M)}function k(w,x,M,I){if(typeof w.on=="function")I.once?w.once(x,M):w.on(x,M);else if(typeof w.addEventListener=="function")w.addEventListener(x,function F(N){I.once&&w.removeEventListener(x,F),M(N)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof w)}return Ml.exports}var Il={exports:{}},sT;function un(){return sT||(sT=1,typeof Object.create=="function"?Il.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Il.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),Il.exports}function N4(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var aO={exports:{}},Ve=aO.exports={},pr,mr;function Em(){throw new Error("setTimeout has not been defined")}function _m(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?pr=setTimeout:pr=Em}catch{pr=Em}try{typeof clearTimeout=="function"?mr=clearTimeout:mr=_m}catch{mr=_m}})();function lO(r){if(pr===setTimeout)return setTimeout(r,0);if((pr===Em||!pr)&&setTimeout)return pr=setTimeout,setTimeout(r,0);try{return pr(r,0)}catch{try{return pr.call(null,r,0)}catch{return pr.call(this,r,0)}}}function R4(r){if(mr===clearTimeout)return clearTimeout(r);if((mr===_m||!mr)&&clearTimeout)return mr=clearTimeout,clearTimeout(r);try{return mr(r)}catch{try{return mr.call(null,r)}catch{return mr.call(this,r)}}}var Fr=[],Ai=!1,Mn,Bl=-1;function M4(){!Ai||!Mn||(Ai=!1,Mn.length?Fr=Mn.concat(Fr):Bl=-1,Fr.length&&uO())}function uO(){if(!Ai){var r=lO(M4);Ai=!0;for(var e=Fr.length;e;){for(Mn=Fr,Fr=[];++Bl<e;)Mn&&Mn[Bl].run();Bl=-1,e=Fr.length}Mn=null,Ai=!1,R4(r)}}Ve.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Fr.push(new cO(r,e)),Fr.length===1&&!Ai&&lO(uO)};function cO(r,e){this.fun=r,this.array=e}cO.prototype.run=function(){this.fun.apply(null,this.array)};Ve.title="browser";Ve.browser=!0;Ve.env={};Ve.argv=[];Ve.version="";Ve.versions={};function zr(){}Ve.on=zr;Ve.addListener=zr;Ve.once=zr;Ve.off=zr;Ve.removeListener=zr;Ve.removeAllListeners=zr;Ve.emit=zr;Ve.prependListener=zr;Ve.prependOnceListener=zr;Ve.listeners=function(r){return[]};Ve.binding=function(r){throw new Error("process.binding is not supported")};Ve.cwd=function(){return"/"};Ve.chdir=function(r){throw new Error("process.chdir is not supported")};Ve.umask=function(){return 0};var I4=aO.exports,_e=N4(I4),zd,aT;function fO(){return aT||(aT=1,zd=ww().EventEmitter),zd}var Hd={},qo={},lT;function P4(){if(lT)return qo;lT=1,qo.byteLength=a,qo.toByteArray=u,qo.fromByteArray=h;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)r[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function s(d){var m=d.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=d.indexOf("=");g===-1&&(g=m);var b=g===m?0:4-g%4;return[g,b]}function a(d){var m=s(d),g=m[0],b=m[1];return(g+b)*3/4-b}function l(d,m,g){return(m+g)*3/4-g}function u(d){var m,g=s(d),b=g[0],p=g[1],S=new t(l(d,b,p)),k=0,w=p>0?b-4:b,x;for(x=0;x<w;x+=4)m=e[d.charCodeAt(x)]<<18|e[d.charCodeAt(x+1)]<<12|e[d.charCodeAt(x+2)]<<6|e[d.charCodeAt(x+3)],S[k++]=m>>16&255,S[k++]=m>>8&255,S[k++]=m&255;return p===2&&(m=e[d.charCodeAt(x)]<<2|e[d.charCodeAt(x+1)]>>4,S[k++]=m&255),p===1&&(m=e[d.charCodeAt(x)]<<10|e[d.charCodeAt(x+1)]<<4|e[d.charCodeAt(x+2)]>>2,S[k++]=m>>8&255,S[k++]=m&255),S}function c(d){return r[d>>18&63]+r[d>>12&63]+r[d>>6&63]+r[d&63]}function f(d,m,g){for(var b,p=[],S=m;S<g;S+=3)b=(d[S]<<16&16711680)+(d[S+1]<<8&65280)+(d[S+2]&255),p.push(c(b));return p.join("")}function h(d){for(var m,g=d.length,b=g%3,p=[],S=16383,k=0,w=g-b;k<w;k+=S)p.push(f(d,k,k+S>w?w:k+S));return b===1?(m=d[g-1],p.push(r[m>>2]+r[m<<4&63]+"==")):b===2&&(m=(d[g-2]<<8)+d[g-1],p.push(r[m>>10]+r[m>>4&63]+r[m<<2&63]+"=")),p.join("")}return qo}var Pl={};var uT;function D4(){return uT||(uT=1,Pl.read=function(r,e,t,n,i){var o,s,a=i*8-n-1,l=(1<<a)-1,u=l>>1,c=-7,f=t?i-1:0,h=t?-1:1,d=r[e+f];for(f+=h,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=o*256+r[e+f],f+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=s*256+r[e+f],f+=h,c-=8);if(o===0)o=1-u;else{if(o===l)return s?NaN:(d?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-u}return(d?-1:1)*s*Math.pow(2,o-n)},Pl.write=function(r,e,t,n,i,o){var s,a,l,u=o*8-i-1,c=(1<<u)-1,f=c>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,m=n?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+f>=1?e+=h/l:e+=h*Math.pow(2,1-f),e*l>=2&&(s++,l/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(e*l-1)*Math.pow(2,i),s=s+f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;r[t+d]=a&255,d+=m,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;r[t+d]=s&255,d+=m,s/=256,u-=8);r[t+d-m]|=g*128}),Pl}var cT;function Sc(){return cT||(cT=1,(function(r){var e=P4(),t=D4(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=S,r.INSPECT_MAX_BYTES=50;var i=2147483647;r.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{var C=new Uint8Array(1),v={foo:function(){return 42}};return Object.setPrototypeOf(v,Uint8Array.prototype),Object.setPrototypeOf(C,v),C.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(C){if(C>i)throw new RangeError('The value "'+C+'" is invalid for option "size"');var v=new Uint8Array(C);return Object.setPrototypeOf(v,a.prototype),v}function a(C,v,y){if(typeof C=="number"){if(typeof v=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(C)}return l(C,v,y)}a.poolSize=8192;function l(C,v,y){if(typeof C=="string")return h(C,v);if(ArrayBuffer.isView(C))return m(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(re(C,ArrayBuffer)||C&&re(C.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(re(C,SharedArrayBuffer)||C&&re(C.buffer,SharedArrayBuffer)))return g(C,v,y);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var _=C.valueOf&&C.valueOf();if(_!=null&&_!==C)return a.from(_,v,y);var z=b(C);if(z)return z;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return a.from(C[Symbol.toPrimitive]("string"),v,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}a.from=function(C,v,y){return l(C,v,y)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function c(C,v,y){return u(C),C<=0?s(C):v!==void 0?typeof y=="string"?s(C).fill(v,y):s(C).fill(v):s(C)}a.alloc=function(C,v,y){return c(C,v,y)};function f(C){return u(C),s(C<0?0:p(C)|0)}a.allocUnsafe=function(C){return f(C)},a.allocUnsafeSlow=function(C){return f(C)};function h(C,v){if((typeof v!="string"||v==="")&&(v="utf8"),!a.isEncoding(v))throw new TypeError("Unknown encoding: "+v);var y=k(C,v)|0,_=s(y),z=_.write(C,v);return z!==y&&(_=_.slice(0,z)),_}function d(C){for(var v=C.length<0?0:p(C.length)|0,y=s(v),_=0;_<v;_+=1)y[_]=C[_]&255;return y}function m(C){if(re(C,Uint8Array)){var v=new Uint8Array(C);return g(v.buffer,v.byteOffset,v.byteLength)}return d(C)}function g(C,v,y){if(v<0||C.byteLength<v)throw new RangeError('"offset" is outside of buffer bounds');if(C.byteLength<v+(y||0))throw new RangeError('"length" is outside of buffer bounds');var _;return v===void 0&&y===void 0?_=new Uint8Array(C):y===void 0?_=new Uint8Array(C,v):_=new Uint8Array(C,v,y),Object.setPrototypeOf(_,a.prototype),_}function b(C){if(a.isBuffer(C)){var v=p(C.length)|0,y=s(v);return y.length===0||C.copy(y,0,0,v),y}if(C.length!==void 0)return typeof C.length!="number"||E(C.length)?s(0):d(C);if(C.type==="Buffer"&&Array.isArray(C.data))return d(C.data)}function p(C){if(C>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return C|0}function S(C){return+C!=C&&(C=0),a.alloc(+C)}a.isBuffer=function(v){return v!=null&&v._isBuffer===!0&&v!==a.prototype},a.compare=function(v,y){if(re(v,Uint8Array)&&(v=a.from(v,v.offset,v.byteLength)),re(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),!a.isBuffer(v)||!a.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(v===y)return 0;for(var _=v.length,z=y.length,$=0,q=Math.min(_,z);$<q;++$)if(v[$]!==y[$]){_=v[$],z=y[$];break}return _<z?-1:z<_?1:0},a.isEncoding=function(v){switch(String(v).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(v,y){if(!Array.isArray(v))throw new TypeError('"list" argument must be an Array of Buffers');if(v.length===0)return a.alloc(0);var _;if(y===void 0)for(y=0,_=0;_<v.length;++_)y+=v[_].length;var z=a.allocUnsafe(y),$=0;for(_=0;_<v.length;++_){var q=v[_];if(re(q,Uint8Array))$+q.length>z.length?a.from(q).copy(z,$):Uint8Array.prototype.set.call(z,q,$);else if(a.isBuffer(q))q.copy(z,$);else throw new TypeError('"list" argument must be an Array of Buffers');$+=q.length}return z};function k(C,v){if(a.isBuffer(C))return C.length;if(ArrayBuffer.isView(C)||re(C,ArrayBuffer))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);var y=C.length,_=arguments.length>2&&arguments[2]===!0;if(!_&&y===0)return 0;for(var z=!1;;)switch(v){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return A(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return P(C).length;default:if(z)return _?-1:A(C).length;v=(""+v).toLowerCase(),z=!0}}a.byteLength=k;function w(C,v,y){var _=!1;if((v===void 0||v<0)&&(v=0),v>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,v>>>=0,y<=v))return"";for(C||(C="utf8");;)switch(C){case"hex":return te(this,v,y);case"utf8":case"utf-8":return T(this,v,y);case"ascii":return U(this,v,y);case"latin1":case"binary":return oe(this,v,y);case"base64":return H(this,v,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,v,y);default:if(_)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),_=!0}}a.prototype._isBuffer=!0;function x(C,v,y){var _=C[v];C[v]=C[y],C[y]=_}a.prototype.swap16=function(){var v=this.length;if(v%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var y=0;y<v;y+=2)x(this,y,y+1);return this},a.prototype.swap32=function(){var v=this.length;if(v%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var y=0;y<v;y+=4)x(this,y,y+3),x(this,y+1,y+2);return this},a.prototype.swap64=function(){var v=this.length;if(v%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var y=0;y<v;y+=8)x(this,y,y+7),x(this,y+1,y+6),x(this,y+2,y+5),x(this,y+3,y+4);return this},a.prototype.toString=function(){var v=this.length;return v===0?"":arguments.length===0?T(this,0,v):w.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(v){if(!a.isBuffer(v))throw new TypeError("Argument must be a Buffer");return this===v?!0:a.compare(this,v)===0},a.prototype.inspect=function(){var v="",y=r.INSPECT_MAX_BYTES;return v=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(v+=" ... "),"<Buffer "+v+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(v,y,_,z,$){if(re(v,Uint8Array)&&(v=a.from(v,v.offset,v.byteLength)),!a.isBuffer(v))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof v);if(y===void 0&&(y=0),_===void 0&&(_=v?v.length:0),z===void 0&&(z=0),$===void 0&&($=this.length),y<0||_>v.length||z<0||$>this.length)throw new RangeError("out of range index");if(z>=$&&y>=_)return 0;if(z>=$)return-1;if(y>=_)return 1;if(y>>>=0,_>>>=0,z>>>=0,$>>>=0,this===v)return 0;for(var q=$-z,se=_-y,ue=Math.min(q,se),le=this.slice(z,$),de=v.slice(y,_),ve=0;ve<ue;++ve)if(le[ve]!==de[ve]){q=le[ve],se=de[ve];break}return q<se?-1:se<q?1:0};function M(C,v,y,_,z){if(C.length===0)return-1;if(typeof y=="string"?(_=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,E(y)&&(y=z?0:C.length-1),y<0&&(y=C.length+y),y>=C.length){if(z)return-1;y=C.length-1}else if(y<0)if(z)y=0;else return-1;if(typeof v=="string"&&(v=a.from(v,_)),a.isBuffer(v))return v.length===0?-1:I(C,v,y,_,z);if(typeof v=="number")return v=v&255,typeof Uint8Array.prototype.indexOf=="function"?z?Uint8Array.prototype.indexOf.call(C,v,y):Uint8Array.prototype.lastIndexOf.call(C,v,y):I(C,[v],y,_,z);throw new TypeError("val must be string, number or Buffer")}function I(C,v,y,_,z){var $=1,q=C.length,se=v.length;if(_!==void 0&&(_=String(_).toLowerCase(),_==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="utf-16le")){if(C.length<2||v.length<2)return-1;$=2,q/=2,se/=2,y/=2}function ue(pt,Hr){return $===1?pt[Hr]:pt.readUInt16BE(Hr*$)}var le;if(z){var de=-1;for(le=y;le<q;le++)if(ue(C,le)===ue(v,de===-1?0:le-de)){if(de===-1&&(de=le),le-de+1===se)return de*$}else de!==-1&&(le-=le-de),de=-1}else for(y+se>q&&(y=q-se),le=y;le>=0;le--){for(var ve=!0,Se=0;Se<se;Se++)if(ue(C,le+Se)!==ue(v,Se)){ve=!1;break}if(ve)return le}return-1}a.prototype.includes=function(v,y,_){return this.indexOf(v,y,_)!==-1},a.prototype.indexOf=function(v,y,_){return M(this,v,y,_,!0)},a.prototype.lastIndexOf=function(v,y,_){return M(this,v,y,_,!1)};function F(C,v,y,_){y=Number(y)||0;var z=C.length-y;_?(_=Number(_),_>z&&(_=z)):_=z;var $=v.length;_>$/2&&(_=$/2);for(var q=0;q<_;++q){var se=parseInt(v.substr(q*2,2),16);if(E(se))return q;C[y+q]=se}return q}function N(C,v,y,_){return L(A(v,C.length-y),C,y,_)}function K(C,v,y,_){return L(W(v),C,y,_)}function ae(C,v,y,_){return L(P(v),C,y,_)}function R(C,v,y,_){return L(j(v,C.length-y),C,y,_)}a.prototype.write=function(v,y,_,z){if(y===void 0)z="utf8",_=this.length,y=0;else if(_===void 0&&typeof y=="string")z=y,_=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(_)?(_=_>>>0,z===void 0&&(z="utf8")):(z=_,_=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var $=this.length-y;if((_===void 0||_>$)&&(_=$),v.length>0&&(_<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");z||(z="utf8");for(var q=!1;;)switch(z){case"hex":return F(this,v,y,_);case"utf8":case"utf-8":return N(this,v,y,_);case"ascii":case"latin1":case"binary":return K(this,v,y,_);case"base64":return ae(this,v,y,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,v,y,_);default:if(q)throw new TypeError("Unknown encoding: "+z);z=(""+z).toLowerCase(),q=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(C,v,y){return v===0&&y===C.length?e.fromByteArray(C):e.fromByteArray(C.slice(v,y))}function T(C,v,y){y=Math.min(C.length,y);for(var _=[],z=v;z<y;){var $=C[z],q=null,se=$>239?4:$>223?3:$>191?2:1;if(z+se<=y){var ue,le,de,ve;switch(se){case 1:$<128&&(q=$);break;case 2:ue=C[z+1],(ue&192)===128&&(ve=($&31)<<6|ue&63,ve>127&&(q=ve));break;case 3:ue=C[z+1],le=C[z+2],(ue&192)===128&&(le&192)===128&&(ve=($&15)<<12|(ue&63)<<6|le&63,ve>2047&&(ve<55296||ve>57343)&&(q=ve));break;case 4:ue=C[z+1],le=C[z+2],de=C[z+3],(ue&192)===128&&(le&192)===128&&(de&192)===128&&(ve=($&15)<<18|(ue&63)<<12|(le&63)<<6|de&63,ve>65535&&ve<1114112&&(q=ve))}}q===null?(q=65533,se=1):q>65535&&(q-=65536,_.push(q>>>10&1023|55296),q=56320|q&1023),_.push(q),z+=se}return Q(_)}var V=4096;function Q(C){var v=C.length;if(v<=V)return String.fromCharCode.apply(String,C);for(var y="",_=0;_<v;)y+=String.fromCharCode.apply(String,C.slice(_,_+=V));return y}function U(C,v,y){var _="";y=Math.min(C.length,y);for(var z=v;z<y;++z)_+=String.fromCharCode(C[z]&127);return _}function oe(C,v,y){var _="";y=Math.min(C.length,y);for(var z=v;z<y;++z)_+=String.fromCharCode(C[z]);return _}function te(C,v,y){var _=C.length;(!v||v<0)&&(v=0),(!y||y<0||y>_)&&(y=_);for(var z="",$=v;$<y;++$)z+=ee[C[$]];return z}function fe(C,v,y){for(var _=C.slice(v,y),z="",$=0;$<_.length-1;$+=2)z+=String.fromCharCode(_[$]+_[$+1]*256);return z}a.prototype.slice=function(v,y){var _=this.length;v=~~v,y=y===void 0?_:~~y,v<0?(v+=_,v<0&&(v=0)):v>_&&(v=_),y<0?(y+=_,y<0&&(y=0)):y>_&&(y=_),y<v&&(y=v);var z=this.subarray(v,y);return Object.setPrototypeOf(z,a.prototype),z};function J(C,v,y){if(C%1!==0||C<0)throw new RangeError("offset is not uint");if(C+v>y)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(v,y,_){v=v>>>0,y=y>>>0,_||J(v,y,this.length);for(var z=this[v],$=1,q=0;++q<y&&($*=256);)z+=this[v+q]*$;return z},a.prototype.readUintBE=a.prototype.readUIntBE=function(v,y,_){v=v>>>0,y=y>>>0,_||J(v,y,this.length);for(var z=this[v+--y],$=1;y>0&&($*=256);)z+=this[v+--y]*$;return z},a.prototype.readUint8=a.prototype.readUInt8=function(v,y){return v=v>>>0,y||J(v,1,this.length),this[v]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(v,y){return v=v>>>0,y||J(v,2,this.length),this[v]|this[v+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(v,y){return v=v>>>0,y||J(v,2,this.length),this[v]<<8|this[v+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(v,y){return v=v>>>0,y||J(v,4,this.length),(this[v]|this[v+1]<<8|this[v+2]<<16)+this[v+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(v,y){return v=v>>>0,y||J(v,4,this.length),this[v]*16777216+(this[v+1]<<16|this[v+2]<<8|this[v+3])},a.prototype.readIntLE=function(v,y,_){v=v>>>0,y=y>>>0,_||J(v,y,this.length);for(var z=this[v],$=1,q=0;++q<y&&($*=256);)z+=this[v+q]*$;return $*=128,z>=$&&(z-=Math.pow(2,8*y)),z},a.prototype.readIntBE=function(v,y,_){v=v>>>0,y=y>>>0,_||J(v,y,this.length);for(var z=y,$=1,q=this[v+--z];z>0&&($*=256);)q+=this[v+--z]*$;return $*=128,q>=$&&(q-=Math.pow(2,8*y)),q},a.prototype.readInt8=function(v,y){return v=v>>>0,y||J(v,1,this.length),this[v]&128?(255-this[v]+1)*-1:this[v]},a.prototype.readInt16LE=function(v,y){v=v>>>0,y||J(v,2,this.length);var _=this[v]|this[v+1]<<8;return _&32768?_|4294901760:_},a.prototype.readInt16BE=function(v,y){v=v>>>0,y||J(v,2,this.length);var _=this[v+1]|this[v]<<8;return _&32768?_|4294901760:_},a.prototype.readInt32LE=function(v,y){return v=v>>>0,y||J(v,4,this.length),this[v]|this[v+1]<<8|this[v+2]<<16|this[v+3]<<24},a.prototype.readInt32BE=function(v,y){return v=v>>>0,y||J(v,4,this.length),this[v]<<24|this[v+1]<<16|this[v+2]<<8|this[v+3]},a.prototype.readFloatLE=function(v,y){return v=v>>>0,y||J(v,4,this.length),t.read(this,v,!0,23,4)},a.prototype.readFloatBE=function(v,y){return v=v>>>0,y||J(v,4,this.length),t.read(this,v,!1,23,4)},a.prototype.readDoubleLE=function(v,y){return v=v>>>0,y||J(v,8,this.length),t.read(this,v,!0,52,8)},a.prototype.readDoubleBE=function(v,y){return v=v>>>0,y||J(v,8,this.length),t.read(this,v,!1,52,8)};function D(C,v,y,_,z,$){if(!a.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(v>z||v<$)throw new RangeError('"value" argument is out of bounds');if(y+_>C.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(v,y,_,z){if(v=+v,y=y>>>0,_=_>>>0,!z){var $=Math.pow(2,8*_)-1;D(this,v,y,_,$,0)}var q=1,se=0;for(this[y]=v&255;++se<_&&(q*=256);)this[y+se]=v/q&255;return y+_},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(v,y,_,z){if(v=+v,y=y>>>0,_=_>>>0,!z){var $=Math.pow(2,8*_)-1;D(this,v,y,_,$,0)}var q=_-1,se=1;for(this[y+q]=v&255;--q>=0&&(se*=256);)this[y+q]=v/se&255;return y+_},a.prototype.writeUint8=a.prototype.writeUInt8=function(v,y,_){return v=+v,y=y>>>0,_||D(this,v,y,1,255,0),this[y]=v&255,y+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(v,y,_){return v=+v,y=y>>>0,_||D(this,v,y,2,65535,0),this[y]=v&255,this[y+1]=v>>>8,y+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(v,y,_){return v=+v,y=y>>>0,_||D(this,v,y,2,65535,0),this[y]=v>>>8,this[y+1]=v&255,y+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(v,y,_){return v=+v,y=y>>>0,_||D(this,v,y,4,4294967295,0),this[y+3]=v>>>24,this[y+2]=v>>>16,this[y+1]=v>>>8,this[y]=v&255,y+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(v,y,_){return v=+v,y=y>>>0,_||D(this,v,y,4,4294967295,0),this[y]=v>>>24,this[y+1]=v>>>16,this[y+2]=v>>>8,this[y+3]=v&255,y+4},a.prototype.writeIntLE=function(v,y,_,z){if(v=+v,y=y>>>0,!z){var $=Math.pow(2,8*_-1);D(this,v,y,_,$-1,-$)}var q=0,se=1,ue=0;for(this[y]=v&255;++q<_&&(se*=256);)v<0&&ue===0&&this[y+q-1]!==0&&(ue=1),this[y+q]=(v/se>>0)-ue&255;return y+_},a.prototype.writeIntBE=function(v,y,_,z){if(v=+v,y=y>>>0,!z){var $=Math.pow(2,8*_-1);D(this,v,y,_,$-1,-$)}var q=_-1,se=1,ue=0;for(this[y+q]=v&255;--q>=0&&(se*=256);)v<0&&ue===0&&this[y+q+1]!==0&&(ue=1),this[y+q]=(v/se>>0)-ue&255;return y+_},a.prototype.writeInt8=function(v,y,_){return v=+v,y=y>>>0,_||D(this,v,y,1,127,-128),v<0&&(v=255+v+1),this[y]=v&255,y+1},a.prototype.writeInt16LE=function(v,y,_){return v=+v,y=y>>>0,_||D(this,v,y,2,32767,-32768),this[y]=v&255,this[y+1]=v>>>8,y+2},a.prototype.writeInt16BE=function(v,y,_){return v=+v,y=y>>>0,_||D(this,v,y,2,32767,-32768),this[y]=v>>>8,this[y+1]=v&255,y+2},a.prototype.writeInt32LE=function(v,y,_){return v=+v,y=y>>>0,_||D(this,v,y,4,2147483647,-2147483648),this[y]=v&255,this[y+1]=v>>>8,this[y+2]=v>>>16,this[y+3]=v>>>24,y+4},a.prototype.writeInt32BE=function(v,y,_){return v=+v,y=y>>>0,_||D(this,v,y,4,2147483647,-2147483648),v<0&&(v=4294967295+v+1),this[y]=v>>>24,this[y+1]=v>>>16,this[y+2]=v>>>8,this[y+3]=v&255,y+4};function X(C,v,y,_,z,$){if(y+_>C.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function Z(C,v,y,_,z){return v=+v,y=y>>>0,z||X(C,v,y,4),t.write(C,v,y,_,23,4),y+4}a.prototype.writeFloatLE=function(v,y,_){return Z(this,v,y,!0,_)},a.prototype.writeFloatBE=function(v,y,_){return Z(this,v,y,!1,_)};function ie(C,v,y,_,z){return v=+v,y=y>>>0,z||X(C,v,y,8),t.write(C,v,y,_,52,8),y+8}a.prototype.writeDoubleLE=function(v,y,_){return ie(this,v,y,!0,_)},a.prototype.writeDoubleBE=function(v,y,_){return ie(this,v,y,!1,_)},a.prototype.copy=function(v,y,_,z){if(!a.isBuffer(v))throw new TypeError("argument should be a Buffer");if(_||(_=0),!z&&z!==0&&(z=this.length),y>=v.length&&(y=v.length),y||(y=0),z>0&&z<_&&(z=_),z===_||v.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(_<0||_>=this.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("sourceEnd out of bounds");z>this.length&&(z=this.length),v.length-y<z-_&&(z=v.length-y+_);var $=z-_;return this===v&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,_,z):Uint8Array.prototype.set.call(v,this.subarray(_,z),y),$},a.prototype.fill=function(v,y,_,z){if(typeof v=="string"){if(typeof y=="string"?(z=y,y=0,_=this.length):typeof _=="string"&&(z=_,_=this.length),z!==void 0&&typeof z!="string")throw new TypeError("encoding must be a string");if(typeof z=="string"&&!a.isEncoding(z))throw new TypeError("Unknown encoding: "+z);if(v.length===1){var $=v.charCodeAt(0);(z==="utf8"&&$<128||z==="latin1")&&(v=$)}}else typeof v=="number"?v=v&255:typeof v=="boolean"&&(v=Number(v));if(y<0||this.length<y||this.length<_)throw new RangeError("Out of range index");if(_<=y)return this;y=y>>>0,_=_===void 0?this.length:_>>>0,v||(v=0);var q;if(typeof v=="number")for(q=y;q<_;++q)this[q]=v;else{var se=a.isBuffer(v)?v:a.from(v,z),ue=se.length;if(ue===0)throw new TypeError('The value "'+v+'" is invalid for argument "value"');for(q=0;q<_-y;++q)this[q+y]=se[q%ue]}return this};var G=/[^+/0-9A-Za-z-_]/g;function O(C){if(C=C.split("=")[0],C=C.trim().replace(G,""),C.length<2)return"";for(;C.length%4!==0;)C=C+"=";return C}function A(C,v){v=v||1/0;for(var y,_=C.length,z=null,$=[],q=0;q<_;++q){if(y=C.charCodeAt(q),y>55295&&y<57344){if(!z){if(y>56319){(v-=3)>-1&&$.push(239,191,189);continue}else if(q+1===_){(v-=3)>-1&&$.push(239,191,189);continue}z=y;continue}if(y<56320){(v-=3)>-1&&$.push(239,191,189),z=y;continue}y=(z-55296<<10|y-56320)+65536}else z&&(v-=3)>-1&&$.push(239,191,189);if(z=null,y<128){if((v-=1)<0)break;$.push(y)}else if(y<2048){if((v-=2)<0)break;$.push(y>>6|192,y&63|128)}else if(y<65536){if((v-=3)<0)break;$.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((v-=4)<0)break;$.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return $}function W(C){for(var v=[],y=0;y<C.length;++y)v.push(C.charCodeAt(y)&255);return v}function j(C,v){for(var y,_,z,$=[],q=0;q<C.length&&!((v-=2)<0);++q)y=C.charCodeAt(q),_=y>>8,z=y%256,$.push(z),$.push(_);return $}function P(C){return e.toByteArray(O(C))}function L(C,v,y,_){for(var z=0;z<_&&!(z+y>=v.length||z>=C.length);++z)v[z+y]=C[z];return z}function re(C,v){return C instanceof v||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===v.name}function E(C){return C!==C}var ee=(function(){for(var C="0123456789abcdef",v=new Array(256),y=0;y<16;++y)for(var _=y*16,z=0;z<16;++z)v[_+z]=C[y]+C[z];return v})()})(Hd)),Hd}var jd={},Ud={},qd,fT;function hO(){return fT||(fT=1,qd=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var o in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==i||a.enumerable!==!0)return!1}return!0}),qd}var Wd,hT;function bw(){if(hT)return Wd;hT=1;var r=hO();return Wd=function(){return r()&&!!Symbol.toStringTag},Wd}var Vd,dT;function dO(){return dT||(dT=1,Vd=Object),Vd}var $d,pT;function L4(){return pT||(pT=1,$d=Error),$d}var Kd,mT;function F4(){return mT||(mT=1,Kd=EvalError),Kd}var Gd,gT;function B4(){return gT||(gT=1,Gd=RangeError),Gd}var Jd,vT;function z4(){return vT||(vT=1,Jd=ReferenceError),Jd}var Xd,yT;function pO(){return yT||(yT=1,Xd=SyntaxError),Xd}var Yd,wT;function vs(){return wT||(wT=1,Yd=TypeError),Yd}var Zd,bT;function H4(){return bT||(bT=1,Zd=URIError),Zd}var Qd,kT;function j4(){return kT||(kT=1,Qd=Math.abs),Qd}var ep,ST;function U4(){return ST||(ST=1,ep=Math.floor),ep}var tp,xT;function q4(){return xT||(xT=1,tp=Math.max),tp}var rp,ET;function W4(){return ET||(ET=1,rp=Math.min),rp}var np,_T;function V4(){return _T||(_T=1,np=Math.pow),np}var ip,TT;function $4(){return TT||(TT=1,ip=Math.round),ip}var op,AT;function K4(){return AT||(AT=1,op=Number.isNaN||function(e){return e!==e}),op}var sp,OT;function G4(){if(OT)return sp;OT=1;var r=K4();return sp=function(t){return r(t)||t===0?t:t<0?-1:1},sp}var ap,CT;function J4(){return CT||(CT=1,ap=Object.getOwnPropertyDescriptor),ap}var lp,NT;function ys(){if(NT)return lp;NT=1;var r=J4();if(r)try{r([],"length")}catch{r=null}return lp=r,lp}var up,RT;function xc(){if(RT)return up;RT=1;var r=Object.defineProperty||!1;if(r)try{r({},"a",{value:1})}catch{r=!1}return up=r,up}var cp,MT;function X4(){if(MT)return cp;MT=1;var r=typeof Symbol<"u"&&Symbol,e=hO();return cp=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},cp}var fp,IT;function mO(){return IT||(IT=1,fp=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),fp}var hp,PT;function gO(){if(PT)return hp;PT=1;var r=dO();return hp=r.getPrototypeOf||null,hp}var dp,DT;function Y4(){if(DT)return dp;DT=1;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,n="[object Function]",i=function(l,u){for(var c=[],f=0;f<l.length;f+=1)c[f]=l[f];for(var h=0;h<u.length;h+=1)c[h+l.length]=u[h];return c},o=function(l,u){for(var c=[],f=u,h=0;f<l.length;f+=1,h+=1)c[h]=l[f];return c},s=function(a,l){for(var u="",c=0;c<a.length;c+=1)u+=a[c],c+1<a.length&&(u+=l);return u};return dp=function(l){var u=this;if(typeof u!="function"||e.apply(u)!==n)throw new TypeError(r+u);for(var c=o(arguments,1),f,h=function(){if(this instanceof f){var p=u.apply(this,i(c,arguments));return Object(p)===p?p:this}return u.apply(l,i(c,arguments))},d=t(0,u.length-c.length),m=[],g=0;g<d;g++)m[g]="$"+g;if(f=Function("binder","return function ("+s(m,",")+"){ return binder.apply(this,arguments); }")(h),u.prototype){var b=function(){};b.prototype=u.prototype,f.prototype=new b,b.prototype=null}return f},dp}var pp,LT;function ws(){if(LT)return pp;LT=1;var r=Y4();return pp=Function.prototype.bind||r,pp}var mp,FT;function kw(){return FT||(FT=1,mp=Function.prototype.call),mp}var gp,BT;function vO(){return BT||(BT=1,gp=Function.prototype.apply),gp}var vp,zT;function Z4(){return zT||(zT=1,vp=typeof Reflect<"u"&&Reflect&&Reflect.apply),vp}var yp,HT;function Q4(){if(HT)return yp;HT=1;var r=ws(),e=vO(),t=kw(),n=Z4();return yp=n||r.call(t,e),yp}var wp,jT;function e8(){if(jT)return wp;jT=1;var r=ws(),e=vs(),t=kw(),n=Q4();return wp=function(o){if(o.length<1||typeof o[0]!="function")throw new e("a function is required");return n(r,t,o)},wp}var bp,UT;function t8(){if(UT)return bp;UT=1;var r=e8(),e=ys(),t;try{t=[].__proto__===Array.prototype}catch(s){if(!s||typeof s!="object"||!("code"in s)||s.code!=="ERR_PROTO_ACCESS")throw s}var n=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,o=i.getPrototypeOf;return bp=n&&typeof n.get=="function"?r([n.get]):typeof o=="function"?(function(a){return o(a==null?a:i(a))}):!1,bp}var kp,qT;function r8(){if(qT)return kp;qT=1;var r=mO(),e=gO(),t=t8();return kp=r?function(i){return r(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,kp}var Sp,WT;function n8(){if(WT)return Sp;WT=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=ws();return Sp=t.call(r,e),Sp}var xp,VT;function Sw(){if(VT)return xp;VT=1;var r,e=dO(),t=L4(),n=F4(),i=B4(),o=z4(),s=pO(),a=vs(),l=H4(),u=j4(),c=U4(),f=q4(),h=W4(),d=V4(),m=$4(),g=G4(),b=Function,p=function(W){try{return b('"use strict"; return ('+W+").constructor;")()}catch{}},S=ys(),k=xc(),w=function(){throw new a},x=S?(function(){try{return arguments.callee,w}catch{try{return S(arguments,"callee").get}catch{return w}}})():w,M=X4()(),I=r8(),F=gO(),N=mO(),K=vO(),ae=kw(),R={},H=typeof Uint8Array>"u"||!I?r:I(Uint8Array),T={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":M&&I?I([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":R,"%AsyncGenerator%":R,"%AsyncGeneratorFunction%":R,"%AsyncIteratorPrototype%":R,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?r:Float16Array,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":b,"%GeneratorFunction%":R,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":M&&I?I(I([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!M||!I?r:I(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":S,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":i,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!M||!I?r:I(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":M&&I?I(""[Symbol.iterator]()):r,"%Symbol%":M?Symbol:r,"%SyntaxError%":s,"%ThrowTypeError%":x,"%TypedArray%":H,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":l,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet,"%Function.prototype.call%":ae,"%Function.prototype.apply%":K,"%Object.defineProperty%":k,"%Object.getPrototypeOf%":F,"%Math.abs%":u,"%Math.floor%":c,"%Math.max%":f,"%Math.min%":h,"%Math.pow%":d,"%Math.round%":m,"%Math.sign%":g,"%Reflect.getPrototypeOf%":N};if(I)try{null.error}catch(W){var V=I(I(W));T["%Error.prototype%"]=V}var Q=function W(j){var P;if(j==="%AsyncFunction%")P=p("async function () {}");else if(j==="%GeneratorFunction%")P=p("function* () {}");else if(j==="%AsyncGeneratorFunction%")P=p("async function* () {}");else if(j==="%AsyncGenerator%"){var L=W("%AsyncGeneratorFunction%");L&&(P=L.prototype)}else if(j==="%AsyncIteratorPrototype%"){var re=W("%AsyncGenerator%");re&&I&&(P=I(re.prototype))}return T[j]=P,P},U={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},oe=ws(),te=n8(),fe=oe.call(ae,Array.prototype.concat),J=oe.call(K,Array.prototype.splice),D=oe.call(ae,String.prototype.replace),X=oe.call(ae,String.prototype.slice),Z=oe.call(ae,RegExp.prototype.exec),ie=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,G=/\\(\\)?/g,O=function(j){var P=X(j,0,1),L=X(j,-1);if(P==="%"&&L!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(L==="%"&&P!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var re=[];return D(j,ie,function(E,ee,C,v){re[re.length]=C?D(v,G,"$1"):ee||E}),re},A=function(j,P){var L=j,re;if(te(U,L)&&(re=U[L],L="%"+re[0]+"%"),te(T,L)){var E=T[L];if(E===R&&(E=Q(L)),typeof E>"u"&&!P)throw new a("intrinsic "+j+" exists, but is not available. Please file an issue!");return{alias:re,name:L,value:E}}throw new s("intrinsic "+j+" does not exist!")};return xp=function(j,P){if(typeof j!="string"||j.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof P!="boolean")throw new a('"allowMissing" argument must be a boolean');if(Z(/^%?[^%]*%?$/,j)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var L=O(j),re=L.length>0?L[0]:"",E=A("%"+re+"%",P),ee=E.name,C=E.value,v=!1,y=E.alias;y&&(re=y[0],J(L,fe([0,1],y)));for(var _=1,z=!0;_<L.length;_+=1){var $=L[_],q=X($,0,1),se=X($,-1);if((q==='"'||q==="'"||q==="`"||se==='"'||se==="'"||se==="`")&&q!==se)throw new s("property names with quotes must have matching quotes");if(($==="constructor"||!z)&&(v=!0),re+="."+$,ee="%"+re+"%",te(T,ee))C=T[ee];else if(C!=null){if(!($ in C)){if(!P)throw new a("base intrinsic for "+j+" exists, but the property is not available.");return}if(S&&_+1>=L.length){var ue=S(C,$);z=!!ue,z&&"get"in ue&&!("originalValue"in ue.get)?C=ue.get:C=C[$]}else z=te(C,$),C=C[$];z&&!v&&(T[ee]=C)}}return C},xp}var Ep={exports:{}},_p,$T;function i8(){if($T)return _p;$T=1;var r=xc(),e=pO(),t=vs(),n=ys();return _p=function(o,s,a){if(!o||typeof o!="object"&&typeof o!="function")throw new t("`obj` must be an object or a function`");if(typeof s!="string"&&typeof s!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var l=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,f=arguments.length>6?arguments[6]:!1,h=!!n&&n(o,s);if(r)r(o,s,{configurable:c===null&&h?h.configurable:!c,enumerable:l===null&&h?h.enumerable:!l,value:a,writable:u===null&&h?h.writable:!u});else if(f||!l&&!u&&!c)o[s]=a;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},_p}var Tp,KT;function o8(){if(KT)return Tp;KT=1;var r=xc(),e=function(){return!!r};return e.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},Tp=e,Tp}var Ap,GT;function s8(){if(GT)return Ap;GT=1;var r=Sw(),e=i8(),t=o8()(),n=ys(),i=vs(),o=r("%Math.floor%");return Ap=function(a,l){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof l!="number"||l<0||l>4294967295||o(l)!==l)throw new i("`length` must be a positive 32-bit integer");var u=arguments.length>2&&!!arguments[2],c=!0,f=!0;if("length"in a&&n){var h=n(a,"length");h&&!h.configurable&&(c=!1),h&&!h.writable&&(f=!1)}return(c||f||!u)&&(t?e(a,"length",l,!0,!0):e(a,"length",l)),a},Ap}var JT;function yO(){return JT||(JT=1,(function(r){var e=ws(),t=Sw(),n=s8(),i=vs(),o=t("%Function.prototype.apply%"),s=t("%Function.prototype.call%"),a=t("%Reflect.apply%",!0)||e.call(s,o),l=xc(),u=t("%Math.max%");r.exports=function(h){if(typeof h!="function")throw new i("a function is required");var d=a(e,s,arguments);return n(d,1+u(0,h.length-(arguments.length-1)),!0)};var c=function(){return a(e,o,arguments)};l?l(r.exports,"apply",{value:c}):r.exports.apply=c})(Ep)),Ep.exports}var Op,XT;function wO(){if(XT)return Op;XT=1;var r=Sw(),e=yO(),t=e(r("String.prototype.indexOf"));return Op=function(i,o){var s=r(i,!!o);return typeof s=="function"&&t(i,".prototype.")>-1?e(s):s},Op}var Cp,YT;function a8(){if(YT)return Cp;YT=1;var r=bw()(),e=wO(),t=e("Object.prototype.toString"),n=function(a){return r&&a&&typeof a=="object"&&Symbol.toStringTag in a?!1:t(a)==="[object Arguments]"},i=function(a){return n(a)?!0:a!==null&&typeof a=="object"&&typeof a.length=="number"&&a.length>=0&&t(a)!=="[object Array]"&&t(a.callee)==="[object Function]"},o=(function(){return n(arguments)})();return n.isLegacyArguments=i,Cp=o?n:i,Cp}var Np,ZT;function l8(){if(ZT)return Np;ZT=1;var r=Object.prototype.toString,e=Function.prototype.toString,t=/^\s*(?:function)?\*/,n=bw()(),i=Object.getPrototypeOf,o=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch{}},s;return Np=function(l){if(typeof l!="function")return!1;if(t.test(e.call(l)))return!0;if(!n){var u=r.call(l);return u==="[object GeneratorFunction]"}if(!i)return!1;if(typeof s>"u"){var c=o();s=c?i(c):!1}return i(l)===s},Np}var Rp,QT;function u8(){if(QT)return Rp;QT=1;var r=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t,n;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},e(function(){throw 42},null,t)}catch(S){S!==n&&(e=null)}else e=null;var i=/^\s*class\b/,o=function(k){try{var w=r.call(k);return i.test(w)}catch{return!1}},s=function(k){try{return o(k)?!1:(r.call(k),!0)}catch{return!1}},a=Object.prototype.toString,l="[object Object]",u="[object Function]",c="[object GeneratorFunction]",f="[object HTMLAllCollection]",h="[object HTML document.all class]",d="[object HTMLCollection]",m=typeof Symbol=="function"&&!!Symbol.toStringTag,g=!(0 in[,]),b=function(){return!1};if(typeof document=="object"){var p=document.all;a.call(p)===a.call(document.all)&&(b=function(k){if((g||!k)&&(typeof k>"u"||typeof k=="object"))try{var w=a.call(k);return(w===f||w===h||w===d||w===l)&&k("")==null}catch{}return!1})}return Rp=e?function(k){if(b(k))return!0;if(!k||typeof k!="function"&&typeof k!="object")return!1;try{e(k,null,t)}catch(w){if(w!==n)return!1}return!o(k)&&s(k)}:function(k){if(b(k))return!0;if(!k||typeof k!="function"&&typeof k!="object")return!1;if(m)return s(k);if(o(k))return!1;var w=a.call(k);return w!==u&&w!==c&&!/^\[object HTML/.test(w)?!1:s(k)},Rp}var Mp,eA;function c8(){if(eA)return Mp;eA=1;var r=u8(),e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,n=function(l,u,c){for(var f=0,h=l.length;f<h;f++)t.call(l,f)&&(c==null?u(l[f],f,l):u.call(c,l[f],f,l))},i=function(l,u,c){for(var f=0,h=l.length;f<h;f++)c==null?u(l.charAt(f),f,l):u.call(c,l.charAt(f),f,l)},o=function(l,u,c){for(var f in l)t.call(l,f)&&(c==null?u(l[f],f,l):u.call(c,l[f],f,l))},s=function(l,u,c){if(!r(u))throw new TypeError("iterator must be a function");var f;arguments.length>=3&&(f=c),e.call(l)==="[object Array]"?n(l,u,f):typeof l=="string"?i(l,u,f):o(l,u,f)};return Mp=s,Mp}var Ip,tA;function f8(){return tA||(tA=1,Ip=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),Ip}var Pp,rA;function h8(){if(rA)return Pp;rA=1;var r=f8(),e=typeof globalThis>"u"?vr:globalThis;return Pp=function(){for(var n=[],i=0;i<r.length;i++)typeof e[r[i]]=="function"&&(n[n.length]=r[i]);return n},Pp}var Dp,nA;function bO(){if(nA)return Dp;nA=1;var r=c8(),e=h8(),t=yO(),n=wO(),i=ys(),o=n("Object.prototype.toString"),s=bw()(),a=typeof globalThis>"u"?vr:globalThis,l=e(),u=n("String.prototype.slice"),c=Object.getPrototypeOf,f=n("Array.prototype.indexOf",!0)||function(b,p){for(var S=0;S<b.length;S+=1)if(b[S]===p)return S;return-1},h={__proto__:null};s&&i&&c?r(l,function(g){var b=new a[g];if(Symbol.toStringTag in b){var p=c(b),S=i(p,Symbol.toStringTag);if(!S){var k=c(p);S=i(k,Symbol.toStringTag)}h["$"+g]=t(S.get)}}):r(l,function(g){var b=new a[g],p=b.slice||b.set;p&&(h["$"+g]=t(p))});var d=function(b){var p=!1;return r(h,function(S,k){if(!p)try{"$"+S(b)===k&&(p=u(k,1))}catch{}}),p},m=function(b){var p=!1;return r(h,function(S,k){if(!p)try{S(b),p=u(k,1)}catch{}}),p};return Dp=function(b){if(!b||typeof b!="object")return!1;if(!s){var p=u(o(b),8,-1);return f(l,p)>-1?p:p!=="Object"?!1:m(b)}return i?d(b):null},Dp}var Lp,iA;function d8(){if(iA)return Lp;iA=1;var r=bO();return Lp=function(t){return!!r(t)},Lp}var oA;function p8(){return oA||(oA=1,(function(r){var e=a8(),t=l8(),n=bO(),i=d8();function o(_){return _.call.bind(_)}var s=typeof BigInt<"u",a=typeof Symbol<"u",l=o(Object.prototype.toString),u=o(Number.prototype.valueOf),c=o(String.prototype.valueOf),f=o(Boolean.prototype.valueOf);if(s)var h=o(BigInt.prototype.valueOf);if(a)var d=o(Symbol.prototype.valueOf);function m(_,z){if(typeof _!="object")return!1;try{return z(_),!0}catch{return!1}}r.isArgumentsObject=e,r.isGeneratorFunction=t,r.isTypedArray=i;function g(_){return typeof Promise<"u"&&_ instanceof Promise||_!==null&&typeof _=="object"&&typeof _.then=="function"&&typeof _.catch=="function"}r.isPromise=g;function b(_){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(_):i(_)||X(_)}r.isArrayBufferView=b;function p(_){return n(_)==="Uint8Array"}r.isUint8Array=p;function S(_){return n(_)==="Uint8ClampedArray"}r.isUint8ClampedArray=S;function k(_){return n(_)==="Uint16Array"}r.isUint16Array=k;function w(_){return n(_)==="Uint32Array"}r.isUint32Array=w;function x(_){return n(_)==="Int8Array"}r.isInt8Array=x;function M(_){return n(_)==="Int16Array"}r.isInt16Array=M;function I(_){return n(_)==="Int32Array"}r.isInt32Array=I;function F(_){return n(_)==="Float32Array"}r.isFloat32Array=F;function N(_){return n(_)==="Float64Array"}r.isFloat64Array=N;function K(_){return n(_)==="BigInt64Array"}r.isBigInt64Array=K;function ae(_){return n(_)==="BigUint64Array"}r.isBigUint64Array=ae;function R(_){return l(_)==="[object Map]"}R.working=typeof Map<"u"&&R(new Map);function H(_){return typeof Map>"u"?!1:R.working?R(_):_ instanceof Map}r.isMap=H;function T(_){return l(_)==="[object Set]"}T.working=typeof Set<"u"&&T(new Set);function V(_){return typeof Set>"u"?!1:T.working?T(_):_ instanceof Set}r.isSet=V;function Q(_){return l(_)==="[object WeakMap]"}Q.working=typeof WeakMap<"u"&&Q(new WeakMap);function U(_){return typeof WeakMap>"u"?!1:Q.working?Q(_):_ instanceof WeakMap}r.isWeakMap=U;function oe(_){return l(_)==="[object WeakSet]"}oe.working=typeof WeakSet<"u"&&oe(new WeakSet);function te(_){return oe(_)}r.isWeakSet=te;function fe(_){return l(_)==="[object ArrayBuffer]"}fe.working=typeof ArrayBuffer<"u"&&fe(new ArrayBuffer);function J(_){return typeof ArrayBuffer>"u"?!1:fe.working?fe(_):_ instanceof ArrayBuffer}r.isArrayBuffer=J;function D(_){return l(_)==="[object DataView]"}D.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&D(new DataView(new ArrayBuffer(1),0,1));function X(_){return typeof DataView>"u"?!1:D.working?D(_):_ instanceof DataView}r.isDataView=X;var Z=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function ie(_){return l(_)==="[object SharedArrayBuffer]"}function G(_){return typeof Z>"u"?!1:(typeof ie.working>"u"&&(ie.working=ie(new Z)),ie.working?ie(_):_ instanceof Z)}r.isSharedArrayBuffer=G;function O(_){return l(_)==="[object AsyncFunction]"}r.isAsyncFunction=O;function A(_){return l(_)==="[object Map Iterator]"}r.isMapIterator=A;function W(_){return l(_)==="[object Set Iterator]"}r.isSetIterator=W;function j(_){return l(_)==="[object Generator]"}r.isGeneratorObject=j;function P(_){return l(_)==="[object WebAssembly.Module]"}r.isWebAssemblyCompiledModule=P;function L(_){return m(_,u)}r.isNumberObject=L;function re(_){return m(_,c)}r.isStringObject=re;function E(_){return m(_,f)}r.isBooleanObject=E;function ee(_){return s&&m(_,h)}r.isBigIntObject=ee;function C(_){return a&&m(_,d)}r.isSymbolObject=C;function v(_){return L(_)||re(_)||E(_)||ee(_)||C(_)}r.isBoxedPrimitive=v;function y(_){return typeof Uint8Array<"u"&&(J(_)||G(_))}r.isAnyArrayBuffer=y,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(_){Object.defineProperty(r,_,{enumerable:!1,value:function(){throw new Error(_+" is not supported in userland")}})})})(Ud)),Ud}var Fp,sA;function m8(){return sA||(sA=1,Fp=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),Fp}var aA;function kO(){return aA||(aA=1,(function(r){var e=Object.getOwnPropertyDescriptors||function(X){for(var Z=Object.keys(X),ie={},G=0;G<Z.length;G++)ie[Z[G]]=Object.getOwnPropertyDescriptor(X,Z[G]);return ie},t=/%[sdj%]/g;r.format=function(D){if(!x(D)){for(var X=[],Z=0;Z<arguments.length;Z++)X.push(s(arguments[Z]));return X.join(" ")}for(var Z=1,ie=arguments,G=ie.length,O=String(D).replace(t,function(W){if(W==="%%")return"%";if(Z>=G)return W;switch(W){case"%s":return String(ie[Z++]);case"%d":return Number(ie[Z++]);case"%j":try{return JSON.stringify(ie[Z++])}catch{return"[Circular]"}default:return W}}),A=ie[Z];Z<G;A=ie[++Z])S(A)||!N(A)?O+=" "+A:O+=" "+s(A);return O},r.deprecate=function(D,X){if(typeof _e<"u"&&_e.noDeprecation===!0)return D;if(typeof _e>"u")return function(){return r.deprecate(D,X).apply(this,arguments)};var Z=!1;function ie(){if(!Z){if(_e.throwDeprecation)throw new Error(X);_e.traceDeprecation?console.trace(X):console.error(X),Z=!0}return D.apply(this,arguments)}return ie};var n={},i=/^$/;if(_e.env.NODE_DEBUG){var o=_e.env.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+o+"$","i")}r.debuglog=function(D){if(D=D.toUpperCase(),!n[D])if(i.test(D)){var X=_e.pid;n[D]=function(){var Z=r.format.apply(r,arguments);console.error("%s %d: %s",D,X,Z)}}else n[D]=function(){};return n[D]};function s(D,X){var Z={seen:[],stylize:l};return arguments.length>=3&&(Z.depth=arguments[2]),arguments.length>=4&&(Z.colors=arguments[3]),p(X)?Z.showHidden=X:X&&r._extend(Z,X),I(Z.showHidden)&&(Z.showHidden=!1),I(Z.depth)&&(Z.depth=2),I(Z.colors)&&(Z.colors=!1),I(Z.customInspect)&&(Z.customInspect=!0),Z.colors&&(Z.stylize=a),c(Z,D,Z.depth)}r.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(D,X){var Z=s.styles[X];return Z?"\x1B["+s.colors[Z][0]+"m"+D+"\x1B["+s.colors[Z][1]+"m":D}function l(D,X){return D}function u(D){var X={};return D.forEach(function(Z,ie){X[Z]=!0}),X}function c(D,X,Z){if(D.customInspect&&X&&R(X.inspect)&&X.inspect!==r.inspect&&!(X.constructor&&X.constructor.prototype===X)){var ie=X.inspect(Z,D);return x(ie)||(ie=c(D,ie,Z)),ie}var G=f(D,X);if(G)return G;var O=Object.keys(X),A=u(O);if(D.showHidden&&(O=Object.getOwnPropertyNames(X)),ae(X)&&(O.indexOf("message")>=0||O.indexOf("description")>=0))return h(X);if(O.length===0){if(R(X)){var W=X.name?": "+X.name:"";return D.stylize("[Function"+W+"]","special")}if(F(X))return D.stylize(RegExp.prototype.toString.call(X),"regexp");if(K(X))return D.stylize(Date.prototype.toString.call(X),"date");if(ae(X))return h(X)}var j="",P=!1,L=["{","}"];if(b(X)&&(P=!0,L=["[","]"]),R(X)){var re=X.name?": "+X.name:"";j=" [Function"+re+"]"}if(F(X)&&(j=" "+RegExp.prototype.toString.call(X)),K(X)&&(j=" "+Date.prototype.toUTCString.call(X)),ae(X)&&(j=" "+h(X)),O.length===0&&(!P||X.length==0))return L[0]+j+L[1];if(Z<0)return F(X)?D.stylize(RegExp.prototype.toString.call(X),"regexp"):D.stylize("[Object]","special");D.seen.push(X);var E;return P?E=d(D,X,Z,A,O):E=O.map(function(ee){return m(D,X,Z,A,ee,P)}),D.seen.pop(),g(E,j,L)}function f(D,X){if(I(X))return D.stylize("undefined","undefined");if(x(X)){var Z="'"+JSON.stringify(X).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return D.stylize(Z,"string")}if(w(X))return D.stylize(""+X,"number");if(p(X))return D.stylize(""+X,"boolean");if(S(X))return D.stylize("null","null")}function h(D){return"["+Error.prototype.toString.call(D)+"]"}function d(D,X,Z,ie,G){for(var O=[],A=0,W=X.length;A<W;++A)oe(X,String(A))?O.push(m(D,X,Z,ie,String(A),!0)):O.push("");return G.forEach(function(j){j.match(/^\d+$/)||O.push(m(D,X,Z,ie,j,!0))}),O}function m(D,X,Z,ie,G,O){var A,W,j;if(j=Object.getOwnPropertyDescriptor(X,G)||{value:X[G]},j.get?j.set?W=D.stylize("[Getter/Setter]","special"):W=D.stylize("[Getter]","special"):j.set&&(W=D.stylize("[Setter]","special")),oe(ie,G)||(A="["+G+"]"),W||(D.seen.indexOf(j.value)<0?(S(Z)?W=c(D,j.value,null):W=c(D,j.value,Z-1),W.indexOf(`
`)>-1&&(O?W=W.split(`
`).map(function(P){return"  "+P}).join(`
`).slice(2):W=`
`+W.split(`
`).map(function(P){return"   "+P}).join(`
`))):W=D.stylize("[Circular]","special")),I(A)){if(O&&G.match(/^\d+$/))return W;A=JSON.stringify(""+G),A.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(A=A.slice(1,-1),A=D.stylize(A,"name")):(A=A.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),A=D.stylize(A,"string"))}return A+": "+W}function g(D,X,Z){var ie=D.reduce(function(G,O){return O.indexOf(`
`)>=0,G+O.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ie>60?Z[0]+(X===""?"":X+`
 `)+" "+D.join(`,
  `)+" "+Z[1]:Z[0]+X+" "+D.join(", ")+" "+Z[1]}r.types=p8();function b(D){return Array.isArray(D)}r.isArray=b;function p(D){return typeof D=="boolean"}r.isBoolean=p;function S(D){return D===null}r.isNull=S;function k(D){return D==null}r.isNullOrUndefined=k;function w(D){return typeof D=="number"}r.isNumber=w;function x(D){return typeof D=="string"}r.isString=x;function M(D){return typeof D=="symbol"}r.isSymbol=M;function I(D){return D===void 0}r.isUndefined=I;function F(D){return N(D)&&T(D)==="[object RegExp]"}r.isRegExp=F,r.types.isRegExp=F;function N(D){return typeof D=="object"&&D!==null}r.isObject=N;function K(D){return N(D)&&T(D)==="[object Date]"}r.isDate=K,r.types.isDate=K;function ae(D){return N(D)&&(T(D)==="[object Error]"||D instanceof Error)}r.isError=ae,r.types.isNativeError=ae;function R(D){return typeof D=="function"}r.isFunction=R;function H(D){return D===null||typeof D=="boolean"||typeof D=="number"||typeof D=="string"||typeof D=="symbol"||typeof D>"u"}r.isPrimitive=H,r.isBuffer=m8();function T(D){return Object.prototype.toString.call(D)}function V(D){return D<10?"0"+D.toString(10):D.toString(10)}var Q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function U(){var D=new Date,X=[V(D.getHours()),V(D.getMinutes()),V(D.getSeconds())].join(":");return[D.getDate(),Q[D.getMonth()],X].join(" ")}r.log=function(){console.log("%s - %s",U(),r.format.apply(r,arguments))},r.inherits=un(),r._extend=function(D,X){if(!X||!N(X))return D;for(var Z=Object.keys(X),ie=Z.length;ie--;)D[Z[ie]]=X[Z[ie]];return D};function oe(D,X){return Object.prototype.hasOwnProperty.call(D,X)}var te=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;r.promisify=function(X){if(typeof X!="function")throw new TypeError('The "original" argument must be of type Function');if(te&&X[te]){var Z=X[te];if(typeof Z!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Z,te,{value:Z,enumerable:!1,writable:!1,configurable:!0}),Z}function Z(){for(var ie,G,O=new Promise(function(j,P){ie=j,G=P}),A=[],W=0;W<arguments.length;W++)A.push(arguments[W]);A.push(function(j,P){j?G(j):ie(P)});try{X.apply(this,A)}catch(j){G(j)}return O}return Object.setPrototypeOf(Z,Object.getPrototypeOf(X)),te&&Object.defineProperty(Z,te,{value:Z,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Z,e(X))},r.promisify.custom=te;function fe(D,X){if(!D){var Z=new Error("Promise was rejected with a falsy value");Z.reason=D,D=Z}return X(D)}function J(D){if(typeof D!="function")throw new TypeError('The "original" argument must be of type Function');function X(){for(var Z=[],ie=0;ie<arguments.length;ie++)Z.push(arguments[ie]);var G=Z.pop();if(typeof G!="function")throw new TypeError("The last argument must be of type Function");var O=this,A=function(){return G.apply(O,arguments)};D.apply(this,Z).then(function(W){_e.nextTick(A.bind(null,null,W))},function(W){_e.nextTick(fe.bind(null,W,A))})}return Object.setPrototypeOf(X,Object.getPrototypeOf(D)),Object.defineProperties(X,e(D)),X}r.callbackify=J})(jd)),jd}var Bp,lA;function g8(){if(lA)return Bp;lA=1;function r(h,d){var m=Object.keys(h);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(h);d&&(g=g.filter(function(b){return Object.getOwnPropertyDescriptor(h,b).enumerable})),m.push.apply(m,g)}return m}function e(h){for(var d=1;d<arguments.length;d++){var m=arguments[d]!=null?arguments[d]:{};d%2?r(Object(m),!0).forEach(function(g){t(h,g,m[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(m)):r(Object(m)).forEach(function(g){Object.defineProperty(h,g,Object.getOwnPropertyDescriptor(m,g))})}return h}function t(h,d,m){return d in h?Object.defineProperty(h,d,{value:m,enumerable:!0,configurable:!0,writable:!0}):h[d]=m,h}function n(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}function i(h,d){for(var m=0;m<d.length;m++){var g=d[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,g.key,g)}}function o(h,d,m){return d&&i(h.prototype,d),h}var s=Sc(),a=s.Buffer,l=kO(),u=l.inspect,c=u&&u.custom||"inspect";function f(h,d,m){a.prototype.copy.call(h,d,m)}return Bp=(function(){function h(){n(this,h),this.head=null,this.tail=null,this.length=0}return o(h,[{key:"push",value:function(m){var g={data:m,next:null};this.length>0?this.tail.next=g:this.head=g,this.tail=g,++this.length}},{key:"unshift",value:function(m){var g={data:m,next:this.head};this.length===0&&(this.tail=g),this.head=g,++this.length}},{key:"shift",value:function(){if(this.length!==0){var m=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,m}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(m){if(this.length===0)return"";for(var g=this.head,b=""+g.data;g=g.next;)b+=m+g.data;return b}},{key:"concat",value:function(m){if(this.length===0)return a.alloc(0);for(var g=a.allocUnsafe(m>>>0),b=this.head,p=0;b;)f(b.data,g,p),p+=b.data.length,b=b.next;return g}},{key:"consume",value:function(m,g){var b;return m<this.head.data.length?(b=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):m===this.head.data.length?b=this.shift():b=g?this._getString(m):this._getBuffer(m),b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var g=this.head,b=1,p=g.data;for(m-=p.length;g=g.next;){var S=g.data,k=m>S.length?S.length:m;if(k===S.length?p+=S:p+=S.slice(0,m),m-=k,m===0){k===S.length?(++b,g.next?this.head=g.next:this.head=this.tail=null):(this.head=g,g.data=S.slice(k));break}++b}return this.length-=b,p}},{key:"_getBuffer",value:function(m){var g=a.allocUnsafe(m),b=this.head,p=1;for(b.data.copy(g),m-=b.data.length;b=b.next;){var S=b.data,k=m>S.length?S.length:m;if(S.copy(g,g.length-m,0,k),m-=k,m===0){k===S.length?(++p,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=S.slice(k));break}++p}return this.length-=p,g}},{key:c,value:function(m,g){return u(this,e({},g,{depth:0,customInspect:!1}))}}]),h})(),Bp}var zp,uA;function SO(){if(uA)return zp;uA=1;function r(s,a){var l=this,u=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return u||c?(a?a(s):s&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,_e.nextTick(i,this,s)):_e.nextTick(i,this,s)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(s||null,function(f){!a&&f?l._writableState?l._writableState.errorEmitted?_e.nextTick(t,l):(l._writableState.errorEmitted=!0,_e.nextTick(e,l,f)):_e.nextTick(e,l,f):a?(_e.nextTick(t,l),a(f)):_e.nextTick(t,l)}),this)}function e(s,a){i(s,a),t(s)}function t(s){s._writableState&&!s._writableState.emitClose||s._readableState&&!s._readableState.emitClose||s.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(s,a){s.emit("error",a)}function o(s,a){var l=s._readableState,u=s._writableState;l&&l.autoDestroy||u&&u.autoDestroy?s.destroy(a):s.emit("error",a)}return zp={destroy:r,undestroy:n,errorOrDestroy:o},zp}var Hp={},cA;function Li(){if(cA)return Hp;cA=1;function r(a,l){a.prototype=Object.create(l.prototype),a.prototype.constructor=a,a.__proto__=l}var e={};function t(a,l,u){u||(u=Error);function c(h,d,m){return typeof l=="string"?l:l(h,d,m)}var f=(function(h){r(d,h);function d(m,g,b){return h.call(this,c(m,g,b))||this}return d})(u);f.prototype.name=u.name,f.prototype.code=a,e[a]=f}function n(a,l){if(Array.isArray(a)){var u=a.length;return a=a.map(function(c){return String(c)}),u>2?"one of ".concat(l," ").concat(a.slice(0,u-1).join(", "),", or ")+a[u-1]:u===2?"one of ".concat(l," ").concat(a[0]," or ").concat(a[1]):"of ".concat(l," ").concat(a[0])}else return"of ".concat(l," ").concat(String(a))}function i(a,l,u){return a.substr(0,l.length)===l}function o(a,l,u){return(u===void 0||u>a.length)&&(u=a.length),a.substring(u-l.length,u)===l}function s(a,l,u){return typeof u!="number"&&(u=0),u+l.length>a.length?!1:a.indexOf(l,u)!==-1}return t("ERR_INVALID_OPT_VALUE",function(a,l){return'The value "'+l+'" is invalid for option "'+a+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(a,l,u){var c;typeof l=="string"&&i(l,"not ")?(c="must not be",l=l.replace(/^not /,"")):c="must be";var f;if(o(a," argument"))f="The ".concat(a," ").concat(c," ").concat(n(l,"type"));else{var h=s(a,".")?"property":"argument";f='The "'.concat(a,'" ').concat(h," ").concat(c," ").concat(n(l,"type"))}return f+=". Received type ".concat(typeof u),f},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Hp.codes=e,Hp}var jp,fA;function xO(){if(fA)return jp;fA=1;var r=Li().codes.ERR_INVALID_OPT_VALUE;function e(n,i,o){return n.highWaterMark!=null?n.highWaterMark:i?n[o]:null}function t(n,i,o,s){var a=e(i,s,o);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var l=s?o:"highWaterMark";throw new r(l,a)}return Math.floor(a)}return n.objectMode?16:16*1024}return jp={getHighWaterMark:t},jp}var Up,hA;function v8(){if(hA)return Up;hA=1,Up=r;function r(t,n){if(e("noDeprecation"))return t;var i=!1;function o(){if(!i){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return t.apply(this,arguments)}return o}function e(t){try{if(!vr.localStorage)return!1}catch{return!1}var n=vr.localStorage[t];return n==null?!1:String(n).toLowerCase()==="true"}return Up}var qp,dA;function EO(){if(dA)return qp;dA=1,qp=F;function r(G){var O=this;this.next=null,this.entry=null,this.finish=function(){ie(O,G)}}var e;F.WritableState=M;var t={deprecate:v8()},n=fO(),i=Sc().Buffer,o=vr.Uint8Array||function(){};function s(G){return i.from(G)}function a(G){return i.isBuffer(G)||G instanceof o}var l=SO(),u=xO(),c=u.getHighWaterMark,f=Li().codes,h=f.ERR_INVALID_ARG_TYPE,d=f.ERR_METHOD_NOT_IMPLEMENTED,m=f.ERR_MULTIPLE_CALLBACK,g=f.ERR_STREAM_CANNOT_PIPE,b=f.ERR_STREAM_DESTROYED,p=f.ERR_STREAM_NULL_VALUES,S=f.ERR_STREAM_WRITE_AFTER_END,k=f.ERR_UNKNOWN_ENCODING,w=l.errorOrDestroy;un()(F,n);function x(){}function M(G,O,A){e=e||Pi(),G=G||{},typeof A!="boolean"&&(A=O instanceof e),this.objectMode=!!G.objectMode,A&&(this.objectMode=this.objectMode||!!G.writableObjectMode),this.highWaterMark=c(this,G,"writableHighWaterMark",A),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var W=G.decodeStrings===!1;this.decodeStrings=!W,this.defaultEncoding=G.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(j){Q(O,j)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=G.emitClose!==!1,this.autoDestroy=!!G.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}M.prototype.getBuffer=function(){for(var O=this.bufferedRequest,A=[];O;)A.push(O),O=O.next;return A},(function(){try{Object.defineProperty(M.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var I;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(I=Function.prototype[Symbol.hasInstance],Object.defineProperty(F,Symbol.hasInstance,{value:function(O){return I.call(this,O)?!0:this!==F?!1:O&&O._writableState instanceof M}})):I=function(O){return O instanceof this};function F(G){e=e||Pi();var O=this instanceof e;if(!O&&!I.call(F,this))return new F(G);this._writableState=new M(G,this,O),this.writable=!0,G&&(typeof G.write=="function"&&(this._write=G.write),typeof G.writev=="function"&&(this._writev=G.writev),typeof G.destroy=="function"&&(this._destroy=G.destroy),typeof G.final=="function"&&(this._final=G.final)),n.call(this)}F.prototype.pipe=function(){w(this,new g)};function N(G,O){var A=new S;w(G,A),_e.nextTick(O,A)}function K(G,O,A,W){var j;return A===null?j=new p:typeof A!="string"&&!O.objectMode&&(j=new h("chunk",["string","Buffer"],A)),j?(w(G,j),_e.nextTick(W,j),!1):!0}F.prototype.write=function(G,O,A){var W=this._writableState,j=!1,P=!W.objectMode&&a(G);return P&&!i.isBuffer(G)&&(G=s(G)),typeof O=="function"&&(A=O,O=null),P?O="buffer":O||(O=W.defaultEncoding),typeof A!="function"&&(A=x),W.ending?N(this,A):(P||K(this,W,G,A))&&(W.pendingcb++,j=R(this,W,P,G,O,A)),j},F.prototype.cork=function(){this._writableState.corked++},F.prototype.uncork=function(){var G=this._writableState;G.corked&&(G.corked--,!G.writing&&!G.corked&&!G.bufferProcessing&&G.bufferedRequest&&te(this,G))},F.prototype.setDefaultEncoding=function(O){if(typeof O=="string"&&(O=O.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((O+"").toLowerCase())>-1))throw new k(O);return this._writableState.defaultEncoding=O,this},Object.defineProperty(F.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ae(G,O,A){return!G.objectMode&&G.decodeStrings!==!1&&typeof O=="string"&&(O=i.from(O,A)),O}Object.defineProperty(F.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function R(G,O,A,W,j,P){if(!A){var L=ae(O,W,j);W!==L&&(A=!0,j="buffer",W=L)}var re=O.objectMode?1:W.length;O.length+=re;var E=O.length<O.highWaterMark;if(E||(O.needDrain=!0),O.writing||O.corked){var ee=O.lastBufferedRequest;O.lastBufferedRequest={chunk:W,encoding:j,isBuf:A,callback:P,next:null},ee?ee.next=O.lastBufferedRequest:O.bufferedRequest=O.lastBufferedRequest,O.bufferedRequestCount+=1}else H(G,O,!1,re,W,j,P);return E}function H(G,O,A,W,j,P,L){O.writelen=W,O.writecb=L,O.writing=!0,O.sync=!0,O.destroyed?O.onwrite(new b("write")):A?G._writev(j,O.onwrite):G._write(j,P,O.onwrite),O.sync=!1}function T(G,O,A,W,j){--O.pendingcb,A?(_e.nextTick(j,W),_e.nextTick(X,G,O),G._writableState.errorEmitted=!0,w(G,W)):(j(W),G._writableState.errorEmitted=!0,w(G,W),X(G,O))}function V(G){G.writing=!1,G.writecb=null,G.length-=G.writelen,G.writelen=0}function Q(G,O){var A=G._writableState,W=A.sync,j=A.writecb;if(typeof j!="function")throw new m;if(V(A),O)T(G,A,W,O,j);else{var P=fe(A)||G.destroyed;!P&&!A.corked&&!A.bufferProcessing&&A.bufferedRequest&&te(G,A),W?_e.nextTick(U,G,A,P,j):U(G,A,P,j)}}function U(G,O,A,W){A||oe(G,O),O.pendingcb--,W(),X(G,O)}function oe(G,O){O.length===0&&O.needDrain&&(O.needDrain=!1,G.emit("drain"))}function te(G,O){O.bufferProcessing=!0;var A=O.bufferedRequest;if(G._writev&&A&&A.next){var W=O.bufferedRequestCount,j=new Array(W),P=O.corkedRequestsFree;P.entry=A;for(var L=0,re=!0;A;)j[L]=A,A.isBuf||(re=!1),A=A.next,L+=1;j.allBuffers=re,H(G,O,!0,O.length,j,"",P.finish),O.pendingcb++,O.lastBufferedRequest=null,P.next?(O.corkedRequestsFree=P.next,P.next=null):O.corkedRequestsFree=new r(O),O.bufferedRequestCount=0}else{for(;A;){var E=A.chunk,ee=A.encoding,C=A.callback,v=O.objectMode?1:E.length;if(H(G,O,!1,v,E,ee,C),A=A.next,O.bufferedRequestCount--,O.writing)break}A===null&&(O.lastBufferedRequest=null)}O.bufferedRequest=A,O.bufferProcessing=!1}F.prototype._write=function(G,O,A){A(new d("_write()"))},F.prototype._writev=null,F.prototype.end=function(G,O,A){var W=this._writableState;return typeof G=="function"?(A=G,G=null,O=null):typeof O=="function"&&(A=O,O=null),G!=null&&this.write(G,O),W.corked&&(W.corked=1,this.uncork()),W.ending||Z(this,W,A),this},Object.defineProperty(F.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function fe(G){return G.ending&&G.length===0&&G.bufferedRequest===null&&!G.finished&&!G.writing}function J(G,O){G._final(function(A){O.pendingcb--,A&&w(G,A),O.prefinished=!0,G.emit("prefinish"),X(G,O)})}function D(G,O){!O.prefinished&&!O.finalCalled&&(typeof G._final=="function"&&!O.destroyed?(O.pendingcb++,O.finalCalled=!0,_e.nextTick(J,G,O)):(O.prefinished=!0,G.emit("prefinish")))}function X(G,O){var A=fe(O);if(A&&(D(G,O),O.pendingcb===0&&(O.finished=!0,G.emit("finish"),O.autoDestroy))){var W=G._readableState;(!W||W.autoDestroy&&W.endEmitted)&&G.destroy()}return A}function Z(G,O,A){O.ending=!0,X(G,O),A&&(O.finished?_e.nextTick(A):G.once("finish",A)),O.ended=!0,G.writable=!1}function ie(G,O,A){var W=G.entry;for(G.entry=null;W;){var j=W.callback;O.pendingcb--,j(A),W=W.next}O.corkedRequestsFree.next=G}return Object.defineProperty(F.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(O){this._writableState&&(this._writableState.destroyed=O)}}),F.prototype.destroy=l.destroy,F.prototype._undestroy=l.undestroy,F.prototype._destroy=function(G,O){O(G)},qp}var Wp,pA;function Pi(){if(pA)return Wp;pA=1;var r=Object.keys||function(u){var c=[];for(var f in u)c.push(f);return c};Wp=s;var e=_O(),t=EO();un()(s,e);for(var n=r(t.prototype),i=0;i<n.length;i++){var o=n[i];s.prototype[o]||(s.prototype[o]=t.prototype[o])}function s(u){if(!(this instanceof s))return new s(u);e.call(this,u),t.call(this,u),this.allowHalfOpen=!0,u&&(u.readable===!1&&(this.readable=!1),u.writable===!1&&(this.writable=!1),u.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||_e.nextTick(l,this)}function l(u){u.end()}return Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(c){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=c,this._writableState.destroyed=c)}}),Wp}var Vp={},Dl={exports:{}},mA;function y8(){return mA||(mA=1,(function(r,e){var t=Sc(),n=t.Buffer;function i(s,a){for(var l in s)a[l]=s[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(i(t,e),e.Buffer=o);function o(s,a,l){return n(s,a,l)}i(n,o),o.from=function(s,a,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return n(s,a,l)},o.alloc=function(s,a,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var u=n(s);return a!==void 0?typeof l=="string"?u.fill(a,l):u.fill(a):u.fill(0),u},o.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n(s)},o.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(s)}})(Dl,Dl.exports)),Dl.exports}var gA;function Tm(){if(gA)return Vp;gA=1;var r=y8().Buffer,e=r.isEncoding||function(p){switch(p=""+p,p&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(p){if(!p)return"utf8";for(var S;;)switch(p){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return p;default:if(S)return;p=(""+p).toLowerCase(),S=!0}}function n(p){var S=t(p);if(typeof S!="string"&&(r.isEncoding===e||!e(p)))throw new Error("Unknown encoding: "+p);return S||p}Vp.StringDecoder=i;function i(p){this.encoding=n(p);var S;switch(this.encoding){case"utf16le":this.text=f,this.end=h,S=4;break;case"utf8":this.fillLast=l,S=4;break;case"base64":this.text=d,this.end=m,S=3;break;default:this.write=g,this.end=b;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(S)}i.prototype.write=function(p){if(p.length===0)return"";var S,k;if(this.lastNeed){if(S=this.fillLast(p),S===void 0)return"";k=this.lastNeed,this.lastNeed=0}else k=0;return k<p.length?S?S+this.text(p,k):this.text(p,k):S||""},i.prototype.end=c,i.prototype.text=u,i.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length};function o(p){return p<=127?0:p>>5===6?2:p>>4===14?3:p>>3===30?4:p>>6===2?-1:-2}function s(p,S,k){var w=S.length-1;if(w<k)return 0;var x=o(S[w]);return x>=0?(x>0&&(p.lastNeed=x-1),x):--w<k||x===-2?0:(x=o(S[w]),x>=0?(x>0&&(p.lastNeed=x-2),x):--w<k||x===-2?0:(x=o(S[w]),x>=0?(x>0&&(x===2?x=0:p.lastNeed=x-3),x):0))}function a(p,S,k){if((S[0]&192)!==128)return p.lastNeed=0,"\uFFFD";if(p.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return p.lastNeed=1,"\uFFFD";if(p.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return p.lastNeed=2,"\uFFFD"}}function l(p){var S=this.lastTotal-this.lastNeed,k=a(this,p);if(k!==void 0)return k;if(this.lastNeed<=p.length)return p.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,S,0,p.length),this.lastNeed-=p.length}function u(p,S){var k=s(this,p,S);if(!this.lastNeed)return p.toString("utf8",S);this.lastTotal=k;var w=p.length-(k-this.lastNeed);return p.copy(this.lastChar,0,w),p.toString("utf8",S,w)}function c(p){var S=p&&p.length?this.write(p):"";return this.lastNeed?S+"\uFFFD":S}function f(p,S){if((p.length-S)%2===0){var k=p.toString("utf16le",S);if(k){var w=k.charCodeAt(k.length-1);if(w>=55296&&w<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],k.slice(0,-1)}return k}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",S,p.length-1)}function h(p){var S=p&&p.length?this.write(p):"";if(this.lastNeed){var k=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,k)}return S}function d(p,S){var k=(p.length-S)%3;return k===0?p.toString("base64",S):(this.lastNeed=3-k,this.lastTotal=3,k===1?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",S,p.length-k))}function m(p){var S=p&&p.length?this.write(p):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function g(p){return p.toString(this.encoding)}function b(p){return p&&p.length?this.write(p):""}return Vp}var $p,vA;function xw(){if(vA)return $p;vA=1;var r=Li().codes.ERR_STREAM_PREMATURE_CLOSE;function e(o){var s=!1;return function(){if(!s){s=!0;for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];o.apply(this,l)}}}function t(){}function n(o){return o.setHeader&&typeof o.abort=="function"}function i(o,s,a){if(typeof s=="function")return i(o,null,s);s||(s={}),a=e(a||t);var l=s.readable||s.readable!==!1&&o.readable,u=s.writable||s.writable!==!1&&o.writable,c=function(){o.writable||h()},f=o._writableState&&o._writableState.finished,h=function(){u=!1,f=!0,l||a.call(o)},d=o._readableState&&o._readableState.endEmitted,m=function(){l=!1,d=!0,u||a.call(o)},g=function(k){a.call(o,k)},b=function(){var k;if(l&&!d)return(!o._readableState||!o._readableState.ended)&&(k=new r),a.call(o,k);if(u&&!f)return(!o._writableState||!o._writableState.ended)&&(k=new r),a.call(o,k)},p=function(){o.req.on("finish",h)};return n(o)?(o.on("complete",h),o.on("abort",b),o.req?p():o.on("request",p)):u&&!o._writableState&&(o.on("end",c),o.on("close",c)),o.on("end",m),o.on("finish",h),s.error!==!1&&o.on("error",g),o.on("close",b),function(){o.removeListener("complete",h),o.removeListener("abort",b),o.removeListener("request",p),o.req&&o.req.removeListener("finish",h),o.removeListener("end",c),o.removeListener("close",c),o.removeListener("finish",h),o.removeListener("end",m),o.removeListener("error",g),o.removeListener("close",b)}}return $p=i,$p}var Kp,yA;function w8(){if(yA)return Kp;yA=1;var r;function e(p,S,k){return S in p?Object.defineProperty(p,S,{value:k,enumerable:!0,configurable:!0,writable:!0}):p[S]=k,p}var t=xw(),n=Symbol("lastResolve"),i=Symbol("lastReject"),o=Symbol("error"),s=Symbol("ended"),a=Symbol("lastPromise"),l=Symbol("handlePromise"),u=Symbol("stream");function c(p,S){return{value:p,done:S}}function f(p){var S=p[n];if(S!==null){var k=p[u].read();k!==null&&(p[a]=null,p[n]=null,p[i]=null,S(c(k,!1)))}}function h(p){_e.nextTick(f,p)}function d(p,S){return function(k,w){p.then(function(){if(S[s]){k(c(void 0,!0));return}S[l](k,w)},w)}}var m=Object.getPrototypeOf(function(){}),g=Object.setPrototypeOf((r={get stream(){return this[u]},next:function(){var S=this,k=this[o];if(k!==null)return Promise.reject(k);if(this[s])return Promise.resolve(c(void 0,!0));if(this[u].destroyed)return new Promise(function(I,F){_e.nextTick(function(){S[o]?F(S[o]):I(c(void 0,!0))})});var w=this[a],x;if(w)x=new Promise(d(w,this));else{var M=this[u].read();if(M!==null)return Promise.resolve(c(M,!1));x=new Promise(this[l])}return this[a]=x,x}},e(r,Symbol.asyncIterator,function(){return this}),e(r,"return",function(){var S=this;return new Promise(function(k,w){S[u].destroy(null,function(x){if(x){w(x);return}k(c(void 0,!0))})})}),r),m),b=function(S){var k,w=Object.create(g,(k={},e(k,u,{value:S,writable:!0}),e(k,n,{value:null,writable:!0}),e(k,i,{value:null,writable:!0}),e(k,o,{value:null,writable:!0}),e(k,s,{value:S._readableState.endEmitted,writable:!0}),e(k,l,{value:function(M,I){var F=w[u].read();F?(w[a]=null,w[n]=null,w[i]=null,M(c(F,!1))):(w[n]=M,w[i]=I)},writable:!0}),k));return w[a]=null,t(S,function(x){if(x&&x.code!=="ERR_STREAM_PREMATURE_CLOSE"){var M=w[i];M!==null&&(w[a]=null,w[n]=null,w[i]=null,M(x)),w[o]=x;return}var I=w[n];I!==null&&(w[a]=null,w[n]=null,w[i]=null,I(c(void 0,!0))),w[s]=!0}),S.on("readable",h.bind(null,w)),w};return Kp=b,Kp}var Gp,wA;function b8(){return wA||(wA=1,Gp=function(){throw new Error("Readable.from is not available in the browser")}),Gp}var Jp,bA;function _O(){if(bA)return Jp;bA=1,Jp=N;var r;N.ReadableState=F,ww().EventEmitter;var e=function(L,re){return L.listeners(re).length},t=fO(),n=Sc().Buffer,i=vr.Uint8Array||function(){};function o(P){return n.from(P)}function s(P){return n.isBuffer(P)||P instanceof i}var a=kO(),l;a&&a.debuglog?l=a.debuglog("stream"):l=function(){};var u=g8(),c=SO(),f=xO(),h=f.getHighWaterMark,d=Li().codes,m=d.ERR_INVALID_ARG_TYPE,g=d.ERR_STREAM_PUSH_AFTER_EOF,b=d.ERR_METHOD_NOT_IMPLEMENTED,p=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,S,k,w;un()(N,t);var x=c.errorOrDestroy,M=["error","close","destroy","pause","resume"];function I(P,L,re){if(typeof P.prependListener=="function")return P.prependListener(L,re);!P._events||!P._events[L]?P.on(L,re):Array.isArray(P._events[L])?P._events[L].unshift(re):P._events[L]=[re,P._events[L]]}function F(P,L,re){r=r||Pi(),P=P||{},typeof re!="boolean"&&(re=L instanceof r),this.objectMode=!!P.objectMode,re&&(this.objectMode=this.objectMode||!!P.readableObjectMode),this.highWaterMark=h(this,P,"readableHighWaterMark",re),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.destroyed=!1,this.defaultEncoding=P.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,P.encoding&&(S||(S=Tm().StringDecoder),this.decoder=new S(P.encoding),this.encoding=P.encoding)}function N(P){if(r=r||Pi(),!(this instanceof N))return new N(P);var L=this instanceof r;this._readableState=new F(P,this,L),this.readable=!0,P&&(typeof P.read=="function"&&(this._read=P.read),typeof P.destroy=="function"&&(this._destroy=P.destroy)),t.call(this)}Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(L){this._readableState&&(this._readableState.destroyed=L)}}),N.prototype.destroy=c.destroy,N.prototype._undestroy=c.undestroy,N.prototype._destroy=function(P,L){L(P)},N.prototype.push=function(P,L){var re=this._readableState,E;return re.objectMode?E=!0:typeof P=="string"&&(L=L||re.defaultEncoding,L!==re.encoding&&(P=n.from(P,L),L=""),E=!0),K(this,P,L,!1,E)},N.prototype.unshift=function(P){return K(this,P,null,!0,!1)};function K(P,L,re,E,ee){l("readableAddChunk",L);var C=P._readableState;if(L===null)C.reading=!1,Q(P,C);else{var v;if(ee||(v=R(C,L)),v)x(P,v);else if(C.objectMode||L&&L.length>0)if(typeof L!="string"&&!C.objectMode&&Object.getPrototypeOf(L)!==n.prototype&&(L=o(L)),E)C.endEmitted?x(P,new p):ae(P,C,L,!0);else if(C.ended)x(P,new g);else{if(C.destroyed)return!1;C.reading=!1,C.decoder&&!re?(L=C.decoder.write(L),C.objectMode||L.length!==0?ae(P,C,L,!1):te(P,C)):ae(P,C,L,!1)}else E||(C.reading=!1,te(P,C))}return!C.ended&&(C.length<C.highWaterMark||C.length===0)}function ae(P,L,re,E){L.flowing&&L.length===0&&!L.sync?(L.awaitDrain=0,P.emit("data",re)):(L.length+=L.objectMode?1:re.length,E?L.buffer.unshift(re):L.buffer.push(re),L.needReadable&&U(P)),te(P,L)}function R(P,L){var re;return!s(L)&&typeof L!="string"&&L!==void 0&&!P.objectMode&&(re=new m("chunk",["string","Buffer","Uint8Array"],L)),re}N.prototype.isPaused=function(){return this._readableState.flowing===!1},N.prototype.setEncoding=function(P){S||(S=Tm().StringDecoder);var L=new S(P);this._readableState.decoder=L,this._readableState.encoding=this._readableState.decoder.encoding;for(var re=this._readableState.buffer.head,E="";re!==null;)E+=L.write(re.data),re=re.next;return this._readableState.buffer.clear(),E!==""&&this._readableState.buffer.push(E),this._readableState.length=E.length,this};var H=1073741824;function T(P){return P>=H?P=H:(P--,P|=P>>>1,P|=P>>>2,P|=P>>>4,P|=P>>>8,P|=P>>>16,P++),P}function V(P,L){return P<=0||L.length===0&&L.ended?0:L.objectMode?1:P!==P?L.flowing&&L.length?L.buffer.head.data.length:L.length:(P>L.highWaterMark&&(L.highWaterMark=T(P)),P<=L.length?P:L.ended?L.length:(L.needReadable=!0,0))}N.prototype.read=function(P){l("read",P),P=parseInt(P,10);var L=this._readableState,re=P;if(P!==0&&(L.emittedReadable=!1),P===0&&L.needReadable&&((L.highWaterMark!==0?L.length>=L.highWaterMark:L.length>0)||L.ended))return l("read: emitReadable",L.length,L.ended),L.length===0&&L.ended?A(this):U(this),null;if(P=V(P,L),P===0&&L.ended)return L.length===0&&A(this),null;var E=L.needReadable;l("need readable",E),(L.length===0||L.length-P<L.highWaterMark)&&(E=!0,l("length less than watermark",E)),L.ended||L.reading?(E=!1,l("reading or ended",E)):E&&(l("do read"),L.reading=!0,L.sync=!0,L.length===0&&(L.needReadable=!0),this._read(L.highWaterMark),L.sync=!1,L.reading||(P=V(re,L)));var ee;return P>0?ee=O(P,L):ee=null,ee===null?(L.needReadable=L.length<=L.highWaterMark,P=0):(L.length-=P,L.awaitDrain=0),L.length===0&&(L.ended||(L.needReadable=!0),re!==P&&L.ended&&A(this)),ee!==null&&this.emit("data",ee),ee};function Q(P,L){if(l("onEofChunk"),!L.ended){if(L.decoder){var re=L.decoder.end();re&&re.length&&(L.buffer.push(re),L.length+=L.objectMode?1:re.length)}L.ended=!0,L.sync?U(P):(L.needReadable=!1,L.emittedReadable||(L.emittedReadable=!0,oe(P)))}}function U(P){var L=P._readableState;l("emitReadable",L.needReadable,L.emittedReadable),L.needReadable=!1,L.emittedReadable||(l("emitReadable",L.flowing),L.emittedReadable=!0,_e.nextTick(oe,P))}function oe(P){var L=P._readableState;l("emitReadable_",L.destroyed,L.length,L.ended),!L.destroyed&&(L.length||L.ended)&&(P.emit("readable"),L.emittedReadable=!1),L.needReadable=!L.flowing&&!L.ended&&L.length<=L.highWaterMark,G(P)}function te(P,L){L.readingMore||(L.readingMore=!0,_e.nextTick(fe,P,L))}function fe(P,L){for(;!L.reading&&!L.ended&&(L.length<L.highWaterMark||L.flowing&&L.length===0);){var re=L.length;if(l("maybeReadMore read 0"),P.read(0),re===L.length)break}L.readingMore=!1}N.prototype._read=function(P){x(this,new b("_read()"))},N.prototype.pipe=function(P,L){var re=this,E=this._readableState;switch(E.pipesCount){case 0:E.pipes=P;break;case 1:E.pipes=[E.pipes,P];break;default:E.pipes.push(P);break}E.pipesCount+=1,l("pipe count=%d opts=%j",E.pipesCount,L);var ee=(!L||L.end!==!1)&&P!==_e.stdout&&P!==_e.stderr,C=ee?y:de;E.endEmitted?_e.nextTick(C):re.once("end",C),P.on("unpipe",v);function v(ve,Se){l("onunpipe"),ve===re&&Se&&Se.hasUnpiped===!1&&(Se.hasUnpiped=!0,$())}function y(){l("onend"),P.end()}var _=J(re);P.on("drain",_);var z=!1;function $(){l("cleanup"),P.removeListener("close",ue),P.removeListener("finish",le),P.removeListener("drain",_),P.removeListener("error",se),P.removeListener("unpipe",v),re.removeListener("end",y),re.removeListener("end",de),re.removeListener("data",q),z=!0,E.awaitDrain&&(!P._writableState||P._writableState.needDrain)&&_()}re.on("data",q);function q(ve){l("ondata");var Se=P.write(ve);l("dest.write",Se),Se===!1&&((E.pipesCount===1&&E.pipes===P||E.pipesCount>1&&j(E.pipes,P)!==-1)&&!z&&(l("false write response, pause",E.awaitDrain),E.awaitDrain++),re.pause())}function se(ve){l("onerror",ve),de(),P.removeListener("error",se),e(P,"error")===0&&x(P,ve)}I(P,"error",se);function ue(){P.removeListener("finish",le),de()}P.once("close",ue);function le(){l("onfinish"),P.removeListener("close",ue),de()}P.once("finish",le);function de(){l("unpipe"),re.unpipe(P)}return P.emit("pipe",re),E.flowing||(l("pipe resume"),re.resume()),P};function J(P){return function(){var re=P._readableState;l("pipeOnDrain",re.awaitDrain),re.awaitDrain&&re.awaitDrain--,re.awaitDrain===0&&e(P,"data")&&(re.flowing=!0,G(P))}}N.prototype.unpipe=function(P){var L=this._readableState,re={hasUnpiped:!1};if(L.pipesCount===0)return this;if(L.pipesCount===1)return P&&P!==L.pipes?this:(P||(P=L.pipes),L.pipes=null,L.pipesCount=0,L.flowing=!1,P&&P.emit("unpipe",this,re),this);if(!P){var E=L.pipes,ee=L.pipesCount;L.pipes=null,L.pipesCount=0,L.flowing=!1;for(var C=0;C<ee;C++)E[C].emit("unpipe",this,{hasUnpiped:!1});return this}var v=j(L.pipes,P);return v===-1?this:(L.pipes.splice(v,1),L.pipesCount-=1,L.pipesCount===1&&(L.pipes=L.pipes[0]),P.emit("unpipe",this,re),this)},N.prototype.on=function(P,L){var re=t.prototype.on.call(this,P,L),E=this._readableState;return P==="data"?(E.readableListening=this.listenerCount("readable")>0,E.flowing!==!1&&this.resume()):P==="readable"&&!E.endEmitted&&!E.readableListening&&(E.readableListening=E.needReadable=!0,E.flowing=!1,E.emittedReadable=!1,l("on readable",E.length,E.reading),E.length?U(this):E.reading||_e.nextTick(X,this)),re},N.prototype.addListener=N.prototype.on,N.prototype.removeListener=function(P,L){var re=t.prototype.removeListener.call(this,P,L);return P==="readable"&&_e.nextTick(D,this),re},N.prototype.removeAllListeners=function(P){var L=t.prototype.removeAllListeners.apply(this,arguments);return(P==="readable"||P===void 0)&&_e.nextTick(D,this),L};function D(P){var L=P._readableState;L.readableListening=P.listenerCount("readable")>0,L.resumeScheduled&&!L.paused?L.flowing=!0:P.listenerCount("data")>0&&P.resume()}function X(P){l("readable nexttick read 0"),P.read(0)}N.prototype.resume=function(){var P=this._readableState;return P.flowing||(l("resume"),P.flowing=!P.readableListening,Z(this,P)),P.paused=!1,this};function Z(P,L){L.resumeScheduled||(L.resumeScheduled=!0,_e.nextTick(ie,P,L))}function ie(P,L){l("resume",L.reading),L.reading||P.read(0),L.resumeScheduled=!1,P.emit("resume"),G(P),L.flowing&&!L.reading&&P.read(0)}N.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function G(P){var L=P._readableState;for(l("flow",L.flowing);L.flowing&&P.read()!==null;);}N.prototype.wrap=function(P){var L=this,re=this._readableState,E=!1;P.on("end",function(){if(l("wrapped end"),re.decoder&&!re.ended){var v=re.decoder.end();v&&v.length&&L.push(v)}L.push(null)}),P.on("data",function(v){if(l("wrapped data"),re.decoder&&(v=re.decoder.write(v)),!(re.objectMode&&v==null)&&!(!re.objectMode&&(!v||!v.length))){var y=L.push(v);y||(E=!0,P.pause())}});for(var ee in P)this[ee]===void 0&&typeof P[ee]=="function"&&(this[ee]=(function(y){return function(){return P[y].apply(P,arguments)}})(ee));for(var C=0;C<M.length;C++)P.on(M[C],this.emit.bind(this,M[C]));return this._read=function(v){l("wrapped _read",v),E&&(E=!1,P.resume())},this},typeof Symbol=="function"&&(N.prototype[Symbol.asyncIterator]=function(){return k===void 0&&(k=w8()),k(this)}),Object.defineProperty(N.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(N.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(N.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(L){this._readableState&&(this._readableState.flowing=L)}}),N._fromList=O,Object.defineProperty(N.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function O(P,L){if(L.length===0)return null;var re;return L.objectMode?re=L.buffer.shift():!P||P>=L.length?(L.decoder?re=L.buffer.join(""):L.buffer.length===1?re=L.buffer.first():re=L.buffer.concat(L.length),L.buffer.clear()):re=L.buffer.consume(P,L.decoder),re}function A(P){var L=P._readableState;l("endReadable",L.endEmitted),L.endEmitted||(L.ended=!0,_e.nextTick(W,L,P))}function W(P,L){if(l("endReadableNT",P.endEmitted,P.length),!P.endEmitted&&P.length===0&&(P.endEmitted=!0,L.readable=!1,L.emit("end"),P.autoDestroy)){var re=L._writableState;(!re||re.autoDestroy&&re.finished)&&L.destroy()}}typeof Symbol=="function"&&(N.from=function(P,L){return w===void 0&&(w=b8()),w(N,P,L)});function j(P,L){for(var re=0,E=P.length;re<E;re++)if(P[re]===L)return re;return-1}return Jp}var Xp,kA;function TO(){if(kA)return Xp;kA=1,Xp=a;var r=Li().codes,e=r.ERR_METHOD_NOT_IMPLEMENTED,t=r.ERR_MULTIPLE_CALLBACK,n=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=r.ERR_TRANSFORM_WITH_LENGTH_0,o=Pi();un()(a,o);function s(c,f){var h=this._transformState;h.transforming=!1;var d=h.writecb;if(d===null)return this.emit("error",new t);h.writechunk=null,h.writecb=null,f!=null&&this.push(f),d(c);var m=this._readableState;m.reading=!1,(m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}function a(c){if(!(this instanceof a))return new a(c);o.call(this,c),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",l)}function l(){var c=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(f,h){u(c,f,h)}):u(this,null,null)}a.prototype.push=function(c,f){return this._transformState.needTransform=!1,o.prototype.push.call(this,c,f)},a.prototype._transform=function(c,f,h){h(new e("_transform()"))},a.prototype._write=function(c,f,h){var d=this._transformState;if(d.writecb=h,d.writechunk=c,d.writeencoding=f,!d.transforming){var m=this._readableState;(d.needTransform||m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}},a.prototype._read=function(c){var f=this._transformState;f.writechunk!==null&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},a.prototype._destroy=function(c,f){o.prototype._destroy.call(this,c,function(h){f(h)})};function u(c,f,h){if(f)return c.emit("error",f);if(h!=null&&c.push(h),c._writableState.length)throw new i;if(c._transformState.transforming)throw new n;return c.push(null)}return Xp}var Yp,SA;function k8(){if(SA)return Yp;SA=1,Yp=e;var r=TO();un()(e,r);function e(t){if(!(this instanceof e))return new e(t);r.call(this,t)}return e.prototype._transform=function(t,n,i){i(null,t)},Yp}var Zp,xA;function S8(){if(xA)return Zp;xA=1;var r;function e(h){var d=!1;return function(){d||(d=!0,h.apply(void 0,arguments))}}var t=Li().codes,n=t.ERR_MISSING_ARGS,i=t.ERR_STREAM_DESTROYED;function o(h){if(h)throw h}function s(h){return h.setHeader&&typeof h.abort=="function"}function a(h,d,m,g){g=e(g);var b=!1;h.on("close",function(){b=!0}),r===void 0&&(r=xw()),r(h,{readable:d,writable:m},function(S){if(S)return g(S);b=!0,g()});var p=!1;return function(S){if(!b&&!p){if(p=!0,s(h))return h.abort();if(typeof h.destroy=="function")return h.destroy();g(S||new i("pipe"))}}}function l(h){h()}function u(h,d){return h.pipe(d)}function c(h){return!h.length||typeof h[h.length-1]!="function"?o:h.pop()}function f(){for(var h=arguments.length,d=new Array(h),m=0;m<h;m++)d[m]=arguments[m];var g=c(d);if(Array.isArray(d[0])&&(d=d[0]),d.length<2)throw new n("streams");var b,p=d.map(function(S,k){var w=k<d.length-1,x=k>0;return a(S,w,x,function(M){b||(b=M),M&&p.forEach(l),!w&&(p.forEach(l),g(b))})});return d.reduce(u)}return Zp=f,Zp}var Qp,EA;function Ew(){if(EA)return Qp;EA=1,Qp=t;var r=ww().EventEmitter,e=un();e(t,r),t.Readable=_O(),t.Writable=EO(),t.Duplex=Pi(),t.Transform=TO(),t.PassThrough=k8(),t.finished=xw(),t.pipeline=S8(),t.Stream=t;function t(){r.call(this)}return t.prototype.pipe=function(n,i){var o=this;function s(d){n.writable&&n.write(d)===!1&&o.pause&&o.pause()}o.on("data",s);function a(){o.readable&&o.resume&&o.resume()}n.on("drain",a),!n._isStdio&&(!i||i.end!==!1)&&(o.on("end",u),o.on("close",c));var l=!1;function u(){l||(l=!0,n.end())}function c(){l||(l=!0,typeof n.destroy=="function"&&n.destroy())}function f(d){if(h(),r.listenerCount(this,"error")===0)throw d}o.on("error",f),n.on("error",f);function h(){o.removeListener("data",s),n.removeListener("drain",a),o.removeListener("end",u),o.removeListener("close",c),o.removeListener("error",f),n.removeListener("error",f),o.removeListener("end",h),o.removeListener("close",h),n.removeListener("close",h)}return o.on("end",h),o.on("close",h),n.on("close",h),n.emit("pipe",o),n},Qp}var _A;function x8(){return _A||(_A=1,(function(r){(function(e){e.parser=function(O,A){return new n(O,A)},e.SAXParser=n,e.SAXStream=c,e.createStream=u,e.MAX_BUFFER_LENGTH=64*1024;var t=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(O,A){if(!(this instanceof n))return new n(O,A);var W=this;o(W),W.q=W.c="",W.bufferCheckPosition=e.MAX_BUFFER_LENGTH,W.opt=A||{},W.opt.lowercase=W.opt.lowercase||W.opt.lowercasetags,W.looseCase=W.opt.lowercase?"toLowerCase":"toUpperCase",W.tags=[],W.closed=W.closedRoot=W.sawRoot=!1,W.tag=W.error=null,W.strict=!!O,W.noscript=!!(O||W.opt.noscript),W.state=N.BEGIN,W.strictEntities=W.opt.strictEntities,W.ENTITIES=W.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),W.attribList=[],W.opt.xmlns&&(W.ns=Object.create(g)),W.trackPosition=W.opt.position!==!1,W.trackPosition&&(W.position=W.line=W.column=0),ae(W,"onready")}Object.create||(Object.create=function(O){function A(){}A.prototype=O;var W=new A;return W}),Object.keys||(Object.keys=function(O){var A=[];for(var W in O)O.hasOwnProperty(W)&&A.push(W);return A});function i(O){for(var A=Math.max(e.MAX_BUFFER_LENGTH,10),W=0,j=0,P=t.length;j<P;j++){var L=O[t[j]].length;if(L>A)switch(t[j]){case"textNode":H(O);break;case"cdata":R(O,"oncdata",O.cdata),O.cdata="";break;case"script":R(O,"onscript",O.script),O.script="";break;default:V(O,"Max buffer length exceeded: "+t[j])}W=Math.max(W,L)}var re=e.MAX_BUFFER_LENGTH-W;O.bufferCheckPosition=re+O.position}function o(O){for(var A=0,W=t.length;A<W;A++)O[t[A]]=""}function s(O){H(O),O.cdata!==""&&(R(O,"oncdata",O.cdata),O.cdata=""),O.script!==""&&(R(O,"onscript",O.script),O.script="")}n.prototype={end:function(){Q(this)},write:G,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){s(this)}};var a;try{a=Ew().Stream}catch{a=function(){}}var l=e.EVENTS.filter(function(O){return O!=="error"&&O!=="end"});function u(O,A){return new c(O,A)}function c(O,A){if(!(this instanceof c))return new c(O,A);a.apply(this),this._parser=new n(O,A),this.writable=!0,this.readable=!0;var W=this;this._parser.onend=function(){W.emit("end")},this._parser.onerror=function(j){W.emit("error",j),W._parser.error=null},this._decoder=null,l.forEach(function(j){Object.defineProperty(W,"on"+j,{get:function(){return W._parser["on"+j]},set:function(P){if(!P)return W.removeAllListeners(j),W._parser["on"+j]=P,P;W.on(j,P)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(a.prototype,{constructor:{value:c}}),c.prototype.write=function(O){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(O)){if(!this._decoder){var A=Tm().StringDecoder;this._decoder=new A("utf8")}O=this._decoder.write(O)}return this._parser.write(O.toString()),this.emit("data",O),!0},c.prototype.end=function(O){return O&&O.length&&this.write(O),this._parser.end(),!0},c.prototype.on=function(O,A){var W=this;return!W._parser["on"+O]&&l.indexOf(O)!==-1&&(W._parser["on"+O]=function(){var j=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);j.splice(0,0,O),W.emit.apply(W,j)}),a.prototype.on.call(W,O,A)};var f="[CDATA[",h="DOCTYPE",d="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",g={xml:d,xmlns:m},b=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,k=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function w(O){return O===" "||O===`
`||O==="\r"||O==="	"}function x(O){return O==='"'||O==="'"}function M(O){return O===">"||w(O)}function I(O,A){return O.test(A)}function F(O,A){return!I(O,A)}var N=0;e.STATE={BEGIN:N++,BEGIN_WHITESPACE:N++,TEXT:N++,TEXT_ENTITY:N++,OPEN_WAKA:N++,SGML_DECL:N++,SGML_DECL_QUOTED:N++,DOCTYPE:N++,DOCTYPE_QUOTED:N++,DOCTYPE_DTD:N++,DOCTYPE_DTD_QUOTED:N++,COMMENT_STARTING:N++,COMMENT:N++,COMMENT_ENDING:N++,COMMENT_ENDED:N++,CDATA:N++,CDATA_ENDING:N++,CDATA_ENDING_2:N++,PROC_INST:N++,PROC_INST_BODY:N++,PROC_INST_ENDING:N++,OPEN_TAG:N++,OPEN_TAG_SLASH:N++,ATTRIB:N++,ATTRIB_NAME:N++,ATTRIB_NAME_SAW_WHITE:N++,ATTRIB_VALUE:N++,ATTRIB_VALUE_QUOTED:N++,ATTRIB_VALUE_CLOSED:N++,ATTRIB_VALUE_UNQUOTED:N++,ATTRIB_VALUE_ENTITY_Q:N++,ATTRIB_VALUE_ENTITY_U:N++,CLOSE_TAG:N++,CLOSE_TAG_SAW_WHITE:N++,SCRIPT:N++,SCRIPT_ENDING:N++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(O){var A=e.ENTITIES[O],W=typeof A=="number"?String.fromCharCode(A):A;e.ENTITIES[O]=W});for(var K in e.STATE)e.STATE[e.STATE[K]]=K;N=e.STATE;function ae(O,A,W){O[A]&&O[A](W)}function R(O,A,W){O.textNode&&H(O),ae(O,A,W)}function H(O){O.textNode=T(O.opt,O.textNode),O.textNode&&ae(O,"ontext",O.textNode),O.textNode=""}function T(O,A){return O.trim&&(A=A.trim()),O.normalize&&(A=A.replace(/\s+/g," ")),A}function V(O,A){return H(O),O.trackPosition&&(A+=`
Line: `+O.line+`
Column: `+O.column+`
Char: `+O.c),A=new Error(A),O.error=A,ae(O,"onerror",A),O}function Q(O){return O.sawRoot&&!O.closedRoot&&U(O,"Unclosed root tag"),O.state!==N.BEGIN&&O.state!==N.BEGIN_WHITESPACE&&O.state!==N.TEXT&&V(O,"Unexpected end"),H(O),O.c="",O.closed=!0,ae(O,"onend"),n.call(O,O.strict,O.opt),O}function U(O,A){if(typeof O!="object"||!(O instanceof n))throw new Error("bad call to strictFail");O.strict&&V(O,A)}function oe(O){O.strict||(O.tagName=O.tagName[O.looseCase]());var A=O.tags[O.tags.length-1]||O,W=O.tag={name:O.tagName,attributes:{}};O.opt.xmlns&&(W.ns=A.ns),O.attribList.length=0,R(O,"onopentagstart",W)}function te(O,A){var W=O.indexOf(":"),j=W<0?["",O]:O.split(":"),P=j[0],L=j[1];return A&&O==="xmlns"&&(P="xmlns",L=""),{prefix:P,local:L}}function fe(O){if(O.strict||(O.attribName=O.attribName[O.looseCase]()),O.attribList.indexOf(O.attribName)!==-1||O.tag.attributes.hasOwnProperty(O.attribName)){O.attribName=O.attribValue="";return}if(O.opt.xmlns){var A=te(O.attribName,!0),W=A.prefix,j=A.local;if(W==="xmlns")if(j==="xml"&&O.attribValue!==d)U(O,"xml: prefix must be bound to "+d+`
Actual: `+O.attribValue);else if(j==="xmlns"&&O.attribValue!==m)U(O,"xmlns: prefix must be bound to "+m+`
Actual: `+O.attribValue);else{var P=O.tag,L=O.tags[O.tags.length-1]||O;P.ns===L.ns&&(P.ns=Object.create(L.ns)),P.ns[j]=O.attribValue}O.attribList.push([O.attribName,O.attribValue])}else O.tag.attributes[O.attribName]=O.attribValue,R(O,"onattribute",{name:O.attribName,value:O.attribValue});O.attribName=O.attribValue=""}function J(O,A){if(O.opt.xmlns){var W=O.tag,j=te(O.tagName);W.prefix=j.prefix,W.local=j.local,W.uri=W.ns[j.prefix]||"",W.prefix&&!W.uri&&(U(O,"Unbound namespace prefix: "+JSON.stringify(O.tagName)),W.uri=j.prefix);var P=O.tags[O.tags.length-1]||O;W.ns&&P.ns!==W.ns&&Object.keys(W.ns).forEach(function(q){R(O,"onopennamespace",{prefix:q,uri:W.ns[q]})});for(var L=0,re=O.attribList.length;L<re;L++){var E=O.attribList[L],ee=E[0],C=E[1],v=te(ee,!0),y=v.prefix,_=v.local,z=y===""?"":W.ns[y]||"",$={name:ee,value:C,prefix:y,local:_,uri:z};y&&y!=="xmlns"&&!z&&(U(O,"Unbound namespace prefix: "+JSON.stringify(y)),$.uri=y),O.tag.attributes[ee]=$,R(O,"onattribute",$)}O.attribList.length=0}O.tag.isSelfClosing=!!A,O.sawRoot=!0,O.tags.push(O.tag),R(O,"onopentag",O.tag),A||(!O.noscript&&O.tagName.toLowerCase()==="script"?O.state=N.SCRIPT:O.state=N.TEXT,O.tag=null,O.tagName=""),O.attribName=O.attribValue="",O.attribList.length=0}function D(O){if(!O.tagName){U(O,"Weird empty close tag."),O.textNode+="</>",O.state=N.TEXT;return}if(O.script){if(O.tagName!=="script"){O.script+="</"+O.tagName+">",O.tagName="",O.state=N.SCRIPT;return}R(O,"onscript",O.script),O.script=""}var A=O.tags.length,W=O.tagName;O.strict||(W=W[O.looseCase]());for(var j=W;A--;){var P=O.tags[A];if(P.name!==j)U(O,"Unexpected close tag");else break}if(A<0){U(O,"Unmatched closing tag: "+O.tagName),O.textNode+="</"+O.tagName+">",O.state=N.TEXT;return}O.tagName=W;for(var L=O.tags.length;L-- >A;){var re=O.tag=O.tags.pop();O.tagName=O.tag.name,R(O,"onclosetag",O.tagName);var E={};for(var ee in re.ns)E[ee]=re.ns[ee];var C=O.tags[O.tags.length-1]||O;O.opt.xmlns&&re.ns!==C.ns&&Object.keys(re.ns).forEach(function(v){var y=re.ns[v];R(O,"onclosenamespace",{prefix:v,uri:y})})}A===0&&(O.closedRoot=!0),O.tagName=O.attribValue=O.attribName="",O.attribList.length=0,O.state=N.TEXT}function X(O){var A=O.entity,W=A.toLowerCase(),j,P="";return O.ENTITIES[A]?O.ENTITIES[A]:O.ENTITIES[W]?O.ENTITIES[W]:(A=W,A.charAt(0)==="#"&&(A.charAt(1)==="x"?(A=A.slice(2),j=parseInt(A,16),P=j.toString(16)):(A=A.slice(1),j=parseInt(A,10),P=j.toString(10))),A=A.replace(/^0+/,""),isNaN(j)||P.toLowerCase()!==A?(U(O,"Invalid character entity"),"&"+O.entity+";"):String.fromCodePoint(j))}function Z(O,A){A==="<"?(O.state=N.OPEN_WAKA,O.startTagPosition=O.position):w(A)||(U(O,"Non-whitespace before first tag."),O.textNode=A,O.state=N.TEXT)}function ie(O,A){var W="";return A<O.length&&(W=O.charAt(A)),W}function G(O){var A=this;if(this.error)throw this.error;if(A.closed)return V(A,"Cannot write after close. Assign an onready handler.");if(O===null)return Q(A);typeof O=="object"&&(O=O.toString());for(var W=0,j="";j=ie(O,W++),A.c=j,!!j;)switch(A.trackPosition&&(A.position++,j===`
`?(A.line++,A.column=0):A.column++),A.state){case N.BEGIN:if(A.state=N.BEGIN_WHITESPACE,j==="\uFEFF")continue;Z(A,j);continue;case N.BEGIN_WHITESPACE:Z(A,j);continue;case N.TEXT:if(A.sawRoot&&!A.closedRoot){for(var P=W-1;j&&j!=="<"&&j!=="&";)j=ie(O,W++),j&&A.trackPosition&&(A.position++,j===`
`?(A.line++,A.column=0):A.column++);A.textNode+=O.substring(P,W-1)}j==="<"&&!(A.sawRoot&&A.closedRoot&&!A.strict)?(A.state=N.OPEN_WAKA,A.startTagPosition=A.position):(!w(j)&&(!A.sawRoot||A.closedRoot)&&U(A,"Text data outside of root node."),j==="&"?A.state=N.TEXT_ENTITY:A.textNode+=j);continue;case N.SCRIPT:j==="<"?A.state=N.SCRIPT_ENDING:A.script+=j;continue;case N.SCRIPT_ENDING:j==="/"?A.state=N.CLOSE_TAG:(A.script+="<"+j,A.state=N.SCRIPT);continue;case N.OPEN_WAKA:if(j==="!")A.state=N.SGML_DECL,A.sgmlDecl="";else if(!w(j))if(I(b,j))A.state=N.OPEN_TAG,A.tagName=j;else if(j==="/")A.state=N.CLOSE_TAG,A.tagName="";else if(j==="?")A.state=N.PROC_INST,A.procInstName=A.procInstBody="";else{if(U(A,"Unencoded <"),A.startTagPosition+1<A.position){var L=A.position-A.startTagPosition;j=new Array(L).join(" ")+j}A.textNode+="<"+j,A.state=N.TEXT}continue;case N.SGML_DECL:(A.sgmlDecl+j).toUpperCase()===f?(R(A,"onopencdata"),A.state=N.CDATA,A.sgmlDecl="",A.cdata=""):A.sgmlDecl+j==="--"?(A.state=N.COMMENT,A.comment="",A.sgmlDecl=""):(A.sgmlDecl+j).toUpperCase()===h?(A.state=N.DOCTYPE,(A.doctype||A.sawRoot)&&U(A,"Inappropriately located doctype declaration"),A.doctype="",A.sgmlDecl=""):j===">"?(R(A,"onsgmldeclaration",A.sgmlDecl),A.sgmlDecl="",A.state=N.TEXT):(x(j)&&(A.state=N.SGML_DECL_QUOTED),A.sgmlDecl+=j);continue;case N.SGML_DECL_QUOTED:j===A.q&&(A.state=N.SGML_DECL,A.q=""),A.sgmlDecl+=j;continue;case N.DOCTYPE:j===">"?(A.state=N.TEXT,R(A,"ondoctype",A.doctype),A.doctype=!0):(A.doctype+=j,j==="["?A.state=N.DOCTYPE_DTD:x(j)&&(A.state=N.DOCTYPE_QUOTED,A.q=j));continue;case N.DOCTYPE_QUOTED:A.doctype+=j,j===A.q&&(A.q="",A.state=N.DOCTYPE);continue;case N.DOCTYPE_DTD:A.doctype+=j,j==="]"?A.state=N.DOCTYPE:x(j)&&(A.state=N.DOCTYPE_DTD_QUOTED,A.q=j);continue;case N.DOCTYPE_DTD_QUOTED:A.doctype+=j,j===A.q&&(A.state=N.DOCTYPE_DTD,A.q="");continue;case N.COMMENT:j==="-"?A.state=N.COMMENT_ENDING:A.comment+=j;continue;case N.COMMENT_ENDING:j==="-"?(A.state=N.COMMENT_ENDED,A.comment=T(A.opt,A.comment),A.comment&&R(A,"oncomment",A.comment),A.comment=""):(A.comment+="-"+j,A.state=N.COMMENT);continue;case N.COMMENT_ENDED:j!==">"?(U(A,"Malformed comment"),A.comment+="--"+j,A.state=N.COMMENT):A.state=N.TEXT;continue;case N.CDATA:j==="]"?A.state=N.CDATA_ENDING:A.cdata+=j;continue;case N.CDATA_ENDING:j==="]"?A.state=N.CDATA_ENDING_2:(A.cdata+="]"+j,A.state=N.CDATA);continue;case N.CDATA_ENDING_2:j===">"?(A.cdata&&R(A,"oncdata",A.cdata),R(A,"onclosecdata"),A.cdata="",A.state=N.TEXT):j==="]"?A.cdata+="]":(A.cdata+="]]"+j,A.state=N.CDATA);continue;case N.PROC_INST:j==="?"?A.state=N.PROC_INST_ENDING:w(j)?A.state=N.PROC_INST_BODY:A.procInstName+=j;continue;case N.PROC_INST_BODY:if(!A.procInstBody&&w(j))continue;j==="?"?A.state=N.PROC_INST_ENDING:A.procInstBody+=j;continue;case N.PROC_INST_ENDING:j===">"?(R(A,"onprocessinginstruction",{name:A.procInstName,body:A.procInstBody}),A.procInstName=A.procInstBody="",A.state=N.TEXT):(A.procInstBody+="?"+j,A.state=N.PROC_INST_BODY);continue;case N.OPEN_TAG:I(p,j)?A.tagName+=j:(oe(A),j===">"?J(A):j==="/"?A.state=N.OPEN_TAG_SLASH:(w(j)||U(A,"Invalid character in tag name"),A.state=N.ATTRIB));continue;case N.OPEN_TAG_SLASH:j===">"?(J(A,!0),D(A)):(U(A,"Forward-slash in opening tag not followed by >"),A.state=N.ATTRIB);continue;case N.ATTRIB:if(w(j))continue;j===">"?J(A):j==="/"?A.state=N.OPEN_TAG_SLASH:I(b,j)?(A.attribName=j,A.attribValue="",A.state=N.ATTRIB_NAME):U(A,"Invalid attribute name");continue;case N.ATTRIB_NAME:j==="="?A.state=N.ATTRIB_VALUE:j===">"?(U(A,"Attribute without value"),A.attribValue=A.attribName,fe(A),J(A)):w(j)?A.state=N.ATTRIB_NAME_SAW_WHITE:I(p,j)?A.attribName+=j:U(A,"Invalid attribute name");continue;case N.ATTRIB_NAME_SAW_WHITE:if(j==="=")A.state=N.ATTRIB_VALUE;else{if(w(j))continue;U(A,"Attribute without value"),A.tag.attributes[A.attribName]="",A.attribValue="",R(A,"onattribute",{name:A.attribName,value:""}),A.attribName="",j===">"?J(A):I(b,j)?(A.attribName=j,A.state=N.ATTRIB_NAME):(U(A,"Invalid attribute name"),A.state=N.ATTRIB)}continue;case N.ATTRIB_VALUE:if(w(j))continue;x(j)?(A.q=j,A.state=N.ATTRIB_VALUE_QUOTED):(U(A,"Unquoted attribute value"),A.state=N.ATTRIB_VALUE_UNQUOTED,A.attribValue=j);continue;case N.ATTRIB_VALUE_QUOTED:if(j!==A.q){j==="&"?A.state=N.ATTRIB_VALUE_ENTITY_Q:A.attribValue+=j;continue}fe(A),A.q="",A.state=N.ATTRIB_VALUE_CLOSED;continue;case N.ATTRIB_VALUE_CLOSED:w(j)?A.state=N.ATTRIB:j===">"?J(A):j==="/"?A.state=N.OPEN_TAG_SLASH:I(b,j)?(U(A,"No whitespace between attributes"),A.attribName=j,A.attribValue="",A.state=N.ATTRIB_NAME):U(A,"Invalid attribute name");continue;case N.ATTRIB_VALUE_UNQUOTED:if(!M(j)){j==="&"?A.state=N.ATTRIB_VALUE_ENTITY_U:A.attribValue+=j;continue}fe(A),j===">"?J(A):A.state=N.ATTRIB;continue;case N.CLOSE_TAG:if(A.tagName)j===">"?D(A):I(p,j)?A.tagName+=j:A.script?(A.script+="</"+A.tagName,A.tagName="",A.state=N.SCRIPT):(w(j)||U(A,"Invalid tagname in closing tag"),A.state=N.CLOSE_TAG_SAW_WHITE);else{if(w(j))continue;F(b,j)?A.script?(A.script+="</"+j,A.state=N.SCRIPT):U(A,"Invalid tagname in closing tag."):A.tagName=j}continue;case N.CLOSE_TAG_SAW_WHITE:if(w(j))continue;j===">"?D(A):U(A,"Invalid characters in closing tag");continue;case N.TEXT_ENTITY:case N.ATTRIB_VALUE_ENTITY_Q:case N.ATTRIB_VALUE_ENTITY_U:var re,E;switch(A.state){case N.TEXT_ENTITY:re=N.TEXT,E="textNode";break;case N.ATTRIB_VALUE_ENTITY_Q:re=N.ATTRIB_VALUE_QUOTED,E="attribValue";break;case N.ATTRIB_VALUE_ENTITY_U:re=N.ATTRIB_VALUE_UNQUOTED,E="attribValue";break}j===";"?(A[E]+=X(A),A.entity="",A.state=re):I(A.entity.length?k:S,j)?A.entity+=j:(U(A,"Invalid character in entity name"),A[E]+="&"+A.entity+j,A.entity="",A.state=re);continue;default:throw new Error(A,"Unknown state: "+A.state)}return A.position>=A.bufferCheckPosition&&i(A),A}String.fromCodePoint||(function(){var O=String.fromCharCode,A=Math.floor,W=function(){var j=16384,P=[],L,re,E=-1,ee=arguments.length;if(!ee)return"";for(var C="";++E<ee;){var v=Number(arguments[E]);if(!isFinite(v)||v<0||v>1114111||A(v)!==v)throw RangeError("Invalid code point: "+v);v<=65535?P.push(v):(v-=65536,L=(v>>10)+55296,re=v%1024+56320,P.push(L,re)),(E+1===ee||P.length>j)&&(C+=O.apply(null,P),P.length=0)}return C};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:W,configurable:!0,writable:!0}):String.fromCodePoint=W})()})(r)})(Bd)),Bd}var em,TA;function _w(){return TA||(TA=1,em={isArray:function(r){return Array.isArray?Array.isArray(r):Object.prototype.toString.call(r)==="[object Array]"}}),em}var tm,AA;function Tw(){if(AA)return tm;AA=1;var r=_w().isArray;return tm={copyOptions:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},ensureFlagExists:function(e,t){(!(e in t)||typeof t[e]!="boolean")&&(t[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||typeof e.spaces!="number"&&typeof e.spaces!="string")&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){(!("alwaysArray"in e)||typeof e.alwaysArray!="boolean"&&!r(e.alwaysArray))&&(e.alwaysArray=!1)},ensureKeyExists:function(e,t){(!(e+"Key"in t)||typeof t[e+"Key"]!="string")&&(t[e+"Key"]=t.compact?"_"+e:e)},checkFnExists:function(e,t){return e+"Fn"in t}},tm}var rm,OA;function AO(){if(OA)return rm;OA=1;var r=x8(),e=Tw(),t=_w().isArray,n,i;function o(p){return n=e.copyOptions(p),e.ensureFlagExists("ignoreDeclaration",n),e.ensureFlagExists("ignoreInstruction",n),e.ensureFlagExists("ignoreAttributes",n),e.ensureFlagExists("ignoreText",n),e.ensureFlagExists("ignoreComment",n),e.ensureFlagExists("ignoreCdata",n),e.ensureFlagExists("ignoreDoctype",n),e.ensureFlagExists("compact",n),e.ensureFlagExists("alwaysChildren",n),e.ensureFlagExists("addParent",n),e.ensureFlagExists("trim",n),e.ensureFlagExists("nativeType",n),e.ensureFlagExists("nativeTypeAttributes",n),e.ensureFlagExists("sanitize",n),e.ensureFlagExists("instructionHasAttributes",n),e.ensureFlagExists("captureSpacesBetweenElements",n),e.ensureAlwaysArrayExists(n),e.ensureKeyExists("declaration",n),e.ensureKeyExists("instruction",n),e.ensureKeyExists("attributes",n),e.ensureKeyExists("text",n),e.ensureKeyExists("comment",n),e.ensureKeyExists("cdata",n),e.ensureKeyExists("doctype",n),e.ensureKeyExists("type",n),e.ensureKeyExists("name",n),e.ensureKeyExists("elements",n),e.ensureKeyExists("parent",n),e.checkFnExists("doctype",n),e.checkFnExists("instruction",n),e.checkFnExists("cdata",n),e.checkFnExists("comment",n),e.checkFnExists("text",n),e.checkFnExists("instructionName",n),e.checkFnExists("elementName",n),e.checkFnExists("attributeName",n),e.checkFnExists("attributeValue",n),e.checkFnExists("attributes",n),n}function s(p){var S=Number(p);if(!isNaN(S))return S;var k=p.toLowerCase();return k==="true"?!0:k==="false"?!1:p}function a(p,S){var k;if(n.compact){if(!i[n[p+"Key"]]&&(t(n.alwaysArray)?n.alwaysArray.indexOf(n[p+"Key"])!==-1:n.alwaysArray)&&(i[n[p+"Key"]]=[]),i[n[p+"Key"]]&&!t(i[n[p+"Key"]])&&(i[n[p+"Key"]]=[i[n[p+"Key"]]]),p+"Fn"in n&&typeof S=="string"&&(S=n[p+"Fn"](S,i)),p==="instruction"&&("instructionFn"in n||"instructionNameFn"in n)){for(k in S)if(S.hasOwnProperty(k))if("instructionFn"in n)S[k]=n.instructionFn(S[k],k,i);else{var w=S[k];delete S[k],S[n.instructionNameFn(k,w,i)]=w}}t(i[n[p+"Key"]])?i[n[p+"Key"]].push(S):i[n[p+"Key"]]=S}else{i[n.elementsKey]||(i[n.elementsKey]=[]);var x={};if(x[n.typeKey]=p,p==="instruction"){for(k in S)if(S.hasOwnProperty(k))break;x[n.nameKey]="instructionNameFn"in n?n.instructionNameFn(k,S,i):k,n.instructionHasAttributes?(x[n.attributesKey]=S[k][n.attributesKey],"instructionFn"in n&&(x[n.attributesKey]=n.instructionFn(x[n.attributesKey],k,i))):("instructionFn"in n&&(S[k]=n.instructionFn(S[k],k,i)),x[n.instructionKey]=S[k])}else p+"Fn"in n&&(S=n[p+"Fn"](S,i)),x[n[p+"Key"]]=S;n.addParent&&(x[n.parentKey]=i),i[n.elementsKey].push(x)}}function l(p){if("attributesFn"in n&&p&&(p=n.attributesFn(p,i)),(n.trim||"attributeValueFn"in n||"attributeNameFn"in n||n.nativeTypeAttributes)&&p){var S;for(S in p)if(p.hasOwnProperty(S)&&(n.trim&&(p[S]=p[S].trim()),n.nativeTypeAttributes&&(p[S]=s(p[S])),"attributeValueFn"in n&&(p[S]=n.attributeValueFn(p[S],S,i)),"attributeNameFn"in n)){var k=p[S];delete p[S],p[n.attributeNameFn(S,p[S],i)]=k}}return p}function u(p){var S={};if(p.body&&(p.name.toLowerCase()==="xml"||n.instructionHasAttributes)){for(var k=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,w;(w=k.exec(p.body))!==null;)S[w[1]]=w[2]||w[3]||w[4];S=l(S)}if(p.name.toLowerCase()==="xml"){if(n.ignoreDeclaration)return;i[n.declarationKey]={},Object.keys(S).length&&(i[n.declarationKey][n.attributesKey]=S),n.addParent&&(i[n.declarationKey][n.parentKey]=i)}else{if(n.ignoreInstruction)return;n.trim&&(p.body=p.body.trim());var x={};n.instructionHasAttributes&&Object.keys(S).length?(x[p.name]={},x[p.name][n.attributesKey]=S):x[p.name]=p.body,a("instruction",x)}}function c(p,S){var k;if(typeof p=="object"&&(S=p.attributes,p=p.name),S=l(S),"elementNameFn"in n&&(p=n.elementNameFn(p,i)),n.compact){if(k={},!n.ignoreAttributes&&S&&Object.keys(S).length){k[n.attributesKey]={};var w;for(w in S)S.hasOwnProperty(w)&&(k[n.attributesKey][w]=S[w])}!(p in i)&&(t(n.alwaysArray)?n.alwaysArray.indexOf(p)!==-1:n.alwaysArray)&&(i[p]=[]),i[p]&&!t(i[p])&&(i[p]=[i[p]]),t(i[p])?i[p].push(k):i[p]=k}else i[n.elementsKey]||(i[n.elementsKey]=[]),k={},k[n.typeKey]="element",k[n.nameKey]=p,!n.ignoreAttributes&&S&&Object.keys(S).length&&(k[n.attributesKey]=S),n.alwaysChildren&&(k[n.elementsKey]=[]),i[n.elementsKey].push(k);k[n.parentKey]=i,i=k}function f(p){n.ignoreText||!p.trim()&&!n.captureSpacesBetweenElements||(n.trim&&(p=p.trim()),n.nativeType&&(p=s(p)),n.sanitize&&(p=p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),a("text",p))}function h(p){n.ignoreComment||(n.trim&&(p=p.trim()),a("comment",p))}function d(p){var S=i[n.parentKey];n.addParent||delete i[n.parentKey],i=S}function m(p){n.ignoreCdata||(n.trim&&(p=p.trim()),a("cdata",p))}function g(p){n.ignoreDoctype||(p=p.replace(/^ /,""),n.trim&&(p=p.trim()),a("doctype",p))}function b(p){p.note=p}return rm=function(p,S){var k=r.parser(!0,{}),w={};if(i=w,n=o(S),k.opt={strictEntities:!0},k.onopentag=c,k.ontext=f,k.oncomment=h,k.onclosetag=d,k.onerror=b,k.oncdata=m,k.ondoctype=g,k.onprocessinginstruction=u,k.write(p).close(),w[n.elementsKey]){var x=w[n.elementsKey];delete w[n.elementsKey],w[n.elementsKey]=x,delete w.text}return w},rm}var nm,CA;function E8(){if(CA)return nm;CA=1;var r=Tw(),e=AO();function t(n){var i=r.copyOptions(n);return r.ensureSpacesExists(i),i}return nm=function(n,i){var o,s,a,l;return o=t(i),s=e(n,o),l="compact"in o&&o.compact?"_parent":"parent","addParent"in o&&o.addParent?a=JSON.stringify(s,function(u,c){return u===l?"_":c},o.spaces):a=JSON.stringify(s,null,o.spaces),a.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},nm}var im,NA;function OO(){if(NA)return im;NA=1;var r=Tw(),e=_w().isArray,t,n;function i(k){var w=r.copyOptions(k);return r.ensureFlagExists("ignoreDeclaration",w),r.ensureFlagExists("ignoreInstruction",w),r.ensureFlagExists("ignoreAttributes",w),r.ensureFlagExists("ignoreText",w),r.ensureFlagExists("ignoreComment",w),r.ensureFlagExists("ignoreCdata",w),r.ensureFlagExists("ignoreDoctype",w),r.ensureFlagExists("compact",w),r.ensureFlagExists("indentText",w),r.ensureFlagExists("indentCdata",w),r.ensureFlagExists("indentAttributes",w),r.ensureFlagExists("indentInstruction",w),r.ensureFlagExists("fullTagEmptyElement",w),r.ensureFlagExists("noQuotesForNativeAttributes",w),r.ensureSpacesExists(w),typeof w.spaces=="number"&&(w.spaces=Array(w.spaces+1).join(" ")),r.ensureKeyExists("declaration",w),r.ensureKeyExists("instruction",w),r.ensureKeyExists("attributes",w),r.ensureKeyExists("text",w),r.ensureKeyExists("comment",w),r.ensureKeyExists("cdata",w),r.ensureKeyExists("doctype",w),r.ensureKeyExists("type",w),r.ensureKeyExists("name",w),r.ensureKeyExists("elements",w),r.checkFnExists("doctype",w),r.checkFnExists("instruction",w),r.checkFnExists("cdata",w),r.checkFnExists("comment",w),r.checkFnExists("text",w),r.checkFnExists("instructionName",w),r.checkFnExists("elementName",w),r.checkFnExists("attributeName",w),r.checkFnExists("attributeValue",w),r.checkFnExists("attributes",w),r.checkFnExists("fullTagEmptyElement",w),w}function o(k,w,x){return(!x&&k.spaces?`
`:"")+Array(w+1).join(k.spaces)}function s(k,w,x){if(w.ignoreAttributes)return"";"attributesFn"in w&&(k=w.attributesFn(k,n,t));var M,I,F,N,K=[];for(M in k)k.hasOwnProperty(M)&&k[M]!==null&&k[M]!==void 0&&(N=w.noQuotesForNativeAttributes&&typeof k[M]!="string"?"":'"',I=""+k[M],I=I.replace(/"/g,"&quot;"),F="attributeNameFn"in w?w.attributeNameFn(M,I,n,t):M,K.push(w.spaces&&w.indentAttributes?o(w,x+1,!1):" "),K.push(F+"="+N+("attributeValueFn"in w?w.attributeValueFn(I,M,n,t):I)+N));return k&&Object.keys(k).length&&w.spaces&&w.indentAttributes&&K.push(o(w,x,!1)),K.join("")}function a(k,w,x){return t=k,n="xml",w.ignoreDeclaration?"":"<?xml"+s(k[w.attributesKey],w,x)+"?>"}function l(k,w,x){if(w.ignoreInstruction)return"";var M;for(M in k)if(k.hasOwnProperty(M))break;var I="instructionNameFn"in w?w.instructionNameFn(M,k[M],n,t):M;if(typeof k[M]=="object")return t=k,n=I,"<?"+I+s(k[M][w.attributesKey],w,x)+"?>";var F=k[M]?k[M]:"";return"instructionFn"in w&&(F=w.instructionFn(F,M,n,t)),"<?"+I+(F?" "+F:"")+"?>"}function u(k,w){return w.ignoreComment?"":"<!--"+("commentFn"in w?w.commentFn(k,n,t):k)+"-->"}function c(k,w){return w.ignoreCdata?"":"<![CDATA["+("cdataFn"in w?w.cdataFn(k,n,t):k.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function f(k,w){return w.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in w?w.doctypeFn(k,n,t):k)+">"}function h(k,w){return w.ignoreText?"":(k=""+k,k=k.replace(/&amp;/g,"&"),k=k.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in w?w.textFn(k,n,t):k)}function d(k,w){var x;if(k.elements&&k.elements.length)for(x=0;x<k.elements.length;++x)switch(k.elements[x][w.typeKey]){case"text":if(w.indentText)return!0;break;case"cdata":if(w.indentCdata)return!0;break;case"instruction":if(w.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function m(k,w,x){t=k,n=k.name;var M=[],I="elementNameFn"in w?w.elementNameFn(k.name,k):k.name;M.push("<"+I),k[w.attributesKey]&&M.push(s(k[w.attributesKey],w,x));var F=k[w.elementsKey]&&k[w.elementsKey].length||k[w.attributesKey]&&k[w.attributesKey]["xml:space"]==="preserve";return F||("fullTagEmptyElementFn"in w?F=w.fullTagEmptyElementFn(k.name,k):F=w.fullTagEmptyElement),F?(M.push(">"),k[w.elementsKey]&&k[w.elementsKey].length&&(M.push(g(k[w.elementsKey],w,x+1)),t=k,n=k.name),M.push(w.spaces&&d(k,w)?`
`+Array(x+1).join(w.spaces):""),M.push("</"+I+">")):M.push("/>"),M.join("")}function g(k,w,x,M){return k.reduce(function(I,F){var N=o(w,x,M&&!I);switch(F.type){case"element":return I+N+m(F,w,x);case"comment":return I+N+u(F[w.commentKey],w);case"doctype":return I+N+f(F[w.doctypeKey],w);case"cdata":return I+(w.indentCdata?N:"")+c(F[w.cdataKey],w);case"text":return I+(w.indentText?N:"")+h(F[w.textKey],w);case"instruction":var K={};return K[F[w.nameKey]]=F[w.attributesKey]?F:F[w.instructionKey],I+(w.indentInstruction?N:"")+l(K,w,x)}},"")}function b(k,w,x){var M;for(M in k)if(k.hasOwnProperty(M))switch(M){case w.parentKey:case w.attributesKey:break;case w.textKey:if(w.indentText||x)return!0;break;case w.cdataKey:if(w.indentCdata||x)return!0;break;case w.instructionKey:if(w.indentInstruction||x)return!0;break;case w.doctypeKey:case w.commentKey:return!0;default:return!0}return!1}function p(k,w,x,M,I){t=k,n=w;var F="elementNameFn"in x?x.elementNameFn(w,k):w;if(typeof k>"u"||k===null||k==="")return"fullTagEmptyElementFn"in x&&x.fullTagEmptyElementFn(w,k)||x.fullTagEmptyElement?"<"+F+"></"+F+">":"<"+F+"/>";var N=[];if(w){if(N.push("<"+F),typeof k!="object")return N.push(">"+h(k,x)+"</"+F+">"),N.join("");k[x.attributesKey]&&N.push(s(k[x.attributesKey],x,M));var K=b(k,x,!0)||k[x.attributesKey]&&k[x.attributesKey]["xml:space"]==="preserve";if(K||("fullTagEmptyElementFn"in x?K=x.fullTagEmptyElementFn(w,k):K=x.fullTagEmptyElement),K)N.push(">");else return N.push("/>"),N.join("")}return N.push(S(k,x,M+1,!1)),t=k,n=w,w&&N.push((I?o(x,M,!1):"")+"</"+F+">"),N.join("")}function S(k,w,x,M){var I,F,N,K=[];for(F in k)if(k.hasOwnProperty(F))for(N=e(k[F])?k[F]:[k[F]],I=0;I<N.length;++I){switch(F){case w.declarationKey:K.push(a(N[I],w,x));break;case w.instructionKey:K.push((w.indentInstruction?o(w,x,M):"")+l(N[I],w,x));break;case w.attributesKey:case w.parentKey:break;case w.textKey:K.push((w.indentText?o(w,x,M):"")+h(N[I],w));break;case w.cdataKey:K.push((w.indentCdata?o(w,x,M):"")+c(N[I],w));break;case w.doctypeKey:K.push(o(w,x,M)+f(N[I],w));break;case w.commentKey:K.push(o(w,x,M)+u(N[I],w));break;default:K.push(o(w,x,M)+p(N[I],F,w,x,b(N[I],w)))}M=M&&!K.length}return K.join("")}return im=function(k,w){w=i(w);var x=[];return t=k,n="_root_",w.compact?x.push(S(k,w,0,!0)):(k[w.declarationKey]&&x.push(a(k[w.declarationKey],w,0)),k[w.elementsKey]&&k[w.elementsKey].length&&x.push(g(k[w.elementsKey],w,0,!x.length))),x.join("")},im}var om,RA;function _8(){if(RA)return om;RA=1;var r=OO();return om=function(e,t){e instanceof Buffer&&(e=e.toString());var n=null;if(typeof e=="string")try{n=JSON.parse(e)}catch{throw new Error("The JSON structure is invalid")}else n=e;return r(n,t)},om}var sm,MA;function T8(){if(MA)return sm;MA=1;var r=AO(),e=E8(),t=OO(),n=_8();return sm={xml2js:r,xml2json:e,js2xml:t,json2xml:n},sm}var Ec=T8(),_c=r=>{switch(r.type){case void 0:case"element":let e=new jl(r.name,r.attributes),t=r.elements||[];for(let n of t){let i=_c(n);i!==void 0&&e.push(i)}return e;case"text":return r.text;default:return}},Am=class extends pe{},jl=class extends Y{static fromXmlString(e){let t=Ec.xml2js(e,{compact:!1});return _c(t)}constructor(e,t){super(e),t&&this.root.push(new Am(t))}push(e){this.root.push(e)}},Ul=class extends Y{constructor(e){super(""),this._attr=e}prepForXml(e){return{_attr:this._attr}}},A8="",Yo=class extends Y{constructor(e,t){super(e),t&&(this.root=t.root)}},et=r=>{if(isNaN(r))throw new Error(`Invalid value '${r}' specified. Must be an integer.`);return Math.floor(r)},bs=r=>{let e=et(r);if(e<0)throw new Error(`Invalid value '${r}' specified. Must be a positive integer.`);return e},Tc=(r,e)=>{let t=e*2;if(r.length!==t||isNaN(+`0x${r}`))throw new Error(`Invalid hex value '${r}'. Expected ${t} digit hex value`);return r},O8=r=>Tc(r,4),CO=r=>Tc(r,2),Om=r=>Tc(r,1),ks=r=>{let e=r.slice(-2),t=r.substring(0,r.length-2);return`${Number(t)}${e}`},Aw=r=>{let e=ks(r);if(parseFloat(e)<0)throw new Error(`Invalid value '${e}' specified. Expected a positive number.`);return e},Dn=r=>{if(r==="auto")return r;let e=r.charAt(0)==="#"?r.substring(1):r;return Tc(e,3)},yr=r=>typeof r=="string"?ks(r):et(r),NO=r=>typeof r=="string"?Aw(r):bs(r),C8=r=>typeof r=="string"?ks(r):et(r),Ke=r=>typeof r=="string"?Aw(r):bs(r),RO=r=>{let e=r.substring(0,r.length-1);return`${Number(e)}%`},Ow=r=>typeof r=="number"?et(r):r.slice(-1)==="%"?RO(r):ks(r),MO=bs,IO=bs,PO=r=>r.toISOString(),ce=class extends Y{constructor(e,t=!0){super(e),t!==!0&&this.root.push(new Pe({val:t}))}},Oi=class extends Y{constructor(e,t){super(e),this.root.push(new Pe({val:NO(t)}))}},Ge=class extends Y{},Xt=class extends Y{constructor(e,t){super(e),this.root.push(new Pe({val:t}))}},_i=(r,e)=>new be({name:r,attributes:{value:{key:"w:val",value:e}}}),an=class extends Y{constructor(e,t){super(e),this.root.push(new Pe({val:t}))}},ql=class extends Y{constructor(e,t){super(e),this.root.push(new Pe({val:t}))}},gr=class extends Y{constructor(e,t){super(e),this.root.push(t)}},be=class extends Y{constructor({name:e,attributes:t,children:n}){super(e),t&&this.root.push(new Tt(t)),n&&this.root.push(...n)}},Kt={START:"start",CENTER:"center",END:"end",BOTH:"both",MEDIUM_KASHIDA:"mediumKashida",DISTRIBUTE:"distribute",NUM_TAB:"numTab",HIGH_KASHIDA:"highKashida",LOW_KASHIDA:"lowKashida",THAI_DISTRIBUTE:"thaiDistribute",LEFT:"left",RIGHT:"right",JUSTIFIED:"both"},Wl=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{val:"w:val"})}},Zo=class extends Y{constructor(e){super("w:jc"),this.root.push(new Wl({val:e}))}},Ce=class extends Y{constructor(e,{color:t,size:n,space:i,style:o}){super(e),this.root.push(new Cm({style:o,color:t===void 0?void 0:Dn(t),size:n===void 0?void 0:MO(n),space:i===void 0?void 0:IO(i)}))}},Cm=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{style:"w:val",color:"w:color",size:"w:sz",space:"w:space"})}},Ac={SINGLE:"single",DASH_DOT_STROKED:"dashDotStroked",DASHED:"dashed",DASH_SMALL_GAP:"dashSmallGap",DOT_DASH:"dotDash",DOT_DOT_DASH:"dotDotDash",DOTTED:"dotted",DOUBLE:"double",DOUBLE_WAVE:"doubleWave",INSET:"inset",NIL:"nil",NONE:"none",OUTSET:"outset",THICK:"thick",THICK_THIN_LARGE_GAP:"thickThinLargeGap",THICK_THIN_MEDIUM_GAP:"thickThinMediumGap",THICK_THIN_SMALL_GAP:"thickThinSmallGap",THIN_THICK_LARGE_GAP:"thinThickLargeGap",THIN_THICK_MEDIUM_GAP:"thinThickMediumGap",THIN_THICK_SMALL_GAP:"thinThickSmallGap",THIN_THICK_THIN_LARGE_GAP:"thinThickThinLargeGap",THIN_THICK_THIN_MEDIUM_GAP:"thinThickThinMediumGap",THIN_THICK_THIN_SMALL_GAP:"thinThickThinSmallGap",THREE_D_EMBOSS:"threeDEmboss",THREE_D_ENGRAVE:"threeDEngrave",TRIPLE:"triple",WAVE:"wave"},Vl=class extends zt{constructor(e){super("w:pBdr"),e.top&&this.root.push(new Ce("w:top",e.top)),e.bottom&&this.root.push(new Ce("w:bottom",e.bottom)),e.left&&this.root.push(new Ce("w:left",e.left)),e.right&&this.root.push(new Ce("w:right",e.right))}},$l=class extends Y{constructor(){super("w:pBdr");let e=new Ce("w:bottom",{color:"auto",space:1,style:Ac.SINGLE,size:6});this.root.push(e)}},Kl=class extends Y{constructor({start:e,end:t,left:n,right:i,hanging:o,firstLine:s}){super("w:ind"),this.root.push(new Tt({start:{key:"w:start",value:e===void 0?void 0:yr(e)},end:{key:"w:end",value:t===void 0?void 0:yr(t)},left:{key:"w:left",value:n===void 0?void 0:yr(n)},right:{key:"w:right",value:i===void 0?void 0:yr(i)},hanging:{key:"w:hanging",value:o===void 0?void 0:Ke(o)},firstLine:{key:"w:firstLine",value:s===void 0?void 0:Ke(s)}}))}},DO=class extends Y{constructor(){super("w:br")}},Cw={BEGIN:"begin",END:"end",SEPARATE:"separate"},Qo=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{type:"w:fldCharType",dirty:"w:dirty"})}},Ft=class extends Y{constructor(e){super("w:fldChar"),this.root.push(new Qo({type:Cw.BEGIN,dirty:e}))}},Jt=class extends Y{constructor(e){super("w:fldChar"),this.root.push(new Qo({type:Cw.SEPARATE,dirty:e}))}},Bt=class extends Y{constructor(e){super("w:fldChar"),this.root.push(new Qo({type:Cw.END,dirty:e}))}},N8={CENTER:"center",INSIDE:"inside",LEFT:"left",OUTSIDE:"outside",RIGHT:"right"},R8={BOTTOM:"bottom",CENTER:"center",INSIDE:"inside",OUTSIDE:"outside",TOP:"top"},M8={DECIMAL:"decimal",UPPER_ROMAN:"upperRoman",LOWER_ROMAN:"lowerRoman",UPPER_LETTER:"upperLetter",LOWER_LETTER:"lowerLetter",ORDINAL:"ordinal",CARDINAL_TEXT:"cardinalText",ORDINAL_TEXT:"ordinalText",HEX:"hex",CHICAGO:"chicago",IDEOGRAPH_DIGITAL:"ideographDigital",JAPANESE_COUNTING:"japaneseCounting",AIUEO:"aiueo",IROHA:"iroha",DECIMAL_FULL_WIDTH:"decimalFullWidth",DECIMAL_HALF_WIDTH:"decimalHalfWidth",JAPANESE_LEGAL:"japaneseLegal",JAPANESE_DIGITAL_TEN_THOUSAND:"japaneseDigitalTenThousand",DECIMAL_ENCLOSED_CIRCLE:"decimalEnclosedCircle",DECIMAL_FULL_WIDTH_2:"decimalFullWidth2",AIUEO_FULL_WIDTH:"aiueoFullWidth",IROHA_FULL_WIDTH:"irohaFullWidth",DECIMAL_ZERO:"decimalZero",BULLET:"bullet",GANADA:"ganada",CHOSUNG:"chosung",DECIMAL_ENCLOSED_FULL_STOP:"decimalEnclosedFullstop",DECIMAL_ENCLOSED_PAREN:"decimalEnclosedParen",DECIMAL_ENCLOSED_CIRCLE_CHINESE:"decimalEnclosedCircleChinese",IDEOGRAPH_ENCLOSED_CIRCLE:"ideographEnclosedCircle",IDEOGRAPH_TRADITIONAL:"ideographTraditional",IDEOGRAPH_ZODIAC:"ideographZodiac",IDEOGRAPH_ZODIAC_TRADITIONAL:"ideographZodiacTraditional",TAIWANESE_COUNTING:"taiwaneseCounting",IDEOGRAPH_LEGAL_TRADITIONAL:"ideographLegalTraditional",TAIWANESE_COUNTING_THOUSAND:"taiwaneseCountingThousand",TAIWANESE_DIGITAL:"taiwaneseDigital",CHINESE_COUNTING:"chineseCounting",CHINESE_LEGAL_SIMPLIFIED:"chineseLegalSimplified",CHINESE_COUNTING_TEN_THOUSAND:"chineseCountingThousand",KOREAN_DIGITAL:"koreanDigital",KOREAN_COUNTING:"koreanCounting",KOREAN_LEGAL:"koreanLegal",KOREAN_DIGITAL_2:"koreanDigital2",VIETNAMESE_COUNTING:"vietnameseCounting",RUSSIAN_LOWER:"russianLower",RUSSIAN_UPPER:"russianUpper",NONE:"none",NUMBER_IN_DASH:"numberInDash",HEBREW_1:"hebrew1",HEBREW_2:"hebrew2",ARABIC_ALPHA:"arabicAlpha",ARABIC_ABJAD:"arabicAbjad",HINDI_VOWELS:"hindiVowels",HINDI_CONSONANTS:"hindiConsonants",HINDI_NUMBERS:"hindiNumbers",HINDI_COUNTING:"hindiCounting",THAI_LETTERS:"thaiLetters",THAI_NUMBERS:"thaiNumbers",THAI_COUNTING:"thaiCounting",BAHT_TEXT:"bahtText",DOLLAR_TEXT:"dollarText"},At={DEFAULT:"default",PRESERVE:"preserve"},kt=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{space:"xml:space"})}},Nm=class extends Y{constructor(){super("w:instrText"),this.root.push(new kt({space:At.PRESERVE})),this.root.push("PAGE")}},Rm=class extends Y{constructor(){super("w:instrText"),this.root.push(new kt({space:At.PRESERVE})),this.root.push("NUMPAGES")}},Mm=class extends Y{constructor(){super("w:instrText"),this.root.push(new kt({space:At.PRESERVE})),this.root.push("SECTIONPAGES")}},Im=class extends Y{constructor(){super("w:instrText"),this.root.push(new kt({space:At.PRESERVE})),this.root.push("SECTION")}},Pm=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{fill:"w:fill",color:"w:color",type:"w:val"})}},Ln=class extends Y{constructor({fill:e,color:t,type:n}){super("w:shd"),this.root.push(new Pm({fill:e===void 0?void 0:Dn(e),color:t===void 0?void 0:Dn(t),type:n}))}},I8={CLEAR:"clear",DIAGONAL_CROSS:"diagCross",DIAGONAL_STRIPE:"diagStripe",HORIZONTAL_CROSS:"horzCross",HORIZONTAL_STRIPE:"horzStripe",NIL:"nil",PERCENT_5:"pct5",PERCENT_10:"pct10",PERCENT_12:"pct12",PERCENT_15:"pct15",PERCENT_20:"pct20",PERCENT_25:"pct25",PERCENT_30:"pct30",PERCENT_35:"pct35",PERCENT_37:"pct37",PERCENT_40:"pct40",PERCENT_45:"pct45",PERCENT_50:"pct50",PERCENT_55:"pct55",PERCENT_60:"pct60",PERCENT_62:"pct62",PERCENT_65:"pct65",PERCENT_70:"pct70",PERCENT_75:"pct75",PERCENT_80:"pct80",PERCENT_85:"pct85",PERCENT_87:"pct87",PERCENT_90:"pct90",PERCENT_95:"pct95",REVERSE_DIAGONAL_STRIPE:"reverseDiagStripe",SOLID:"solid",THIN_DIAGONAL_CROSS:"thinDiagCross",THIN_DIAGONAL_STRIPE:"thinDiagStripe",THIN_HORIZONTAL_CROSS:"thinHorzCross",THIN_REVERSE_DIAGONAL_STRIPE:"thinReverseDiagStripe",THIN_VERTICAL_STRIPE:"thinVertStripe",VERTICAL_STRIPE:"vertStripe"},es=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{id:"w:id",author:"w:author",date:"w:date"})}},Nw={DOT:"dot"},ts=class extends Y{constructor(e){super("w:em"),this.root.push(new Pe({val:e}))}},Gl=class extends ts{constructor(e=Nw.DOT){super(e)}},Dm=class extends ts{constructor(){super(Nw.DOT)}},Lm=class extends Y{constructor(e){super("w:spacing"),this.root.push(new Pe({val:yr(e)}))}},Fm=class extends Y{constructor(e){super("w:color"),this.root.push(new Pe({val:Dn(e)}))}},Bm=class extends Y{constructor(e){super("w:highlight"),this.root.push(new Pe({val:e}))}},zm=class extends Y{constructor(e){super("w:highlightCs"),this.root.push(new Pe({val:e}))}},P8=r=>new be({name:"w:lang",attributes:{value:{key:"w:val",value:r.value},eastAsia:{key:"w:eastAsia",value:r.eastAsia},bidirectional:{key:"w:bidi",value:r.bidirectional}}}),Jl=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{ascii:"w:ascii",cs:"w:cs",eastAsia:"w:eastAsia",hAnsi:"w:hAnsi",hint:"w:hint"})}},Ci=class extends Y{constructor(e,t){if(super("w:rFonts"),typeof e=="string"){let n=e;this.root.push(new Jl({ascii:n,cs:n,eastAsia:n,hAnsi:n,hint:t}))}else{let n=e;this.root.push(new Jl(n))}}},LO=class extends Y{constructor(e){super("w:vertAlign"),this.root.push(new Pe({val:e}))}},Hm=class extends LO{constructor(){super("superscript")}},jm=class extends LO{constructor(){super("subscript")}},Rw={SINGLE:"single",WORDS:"words",DOUBLE:"double",THICK:"thick",DOTTED:"dotted",DOTTEDHEAVY:"dottedHeavy",DASH:"dash",DASHEDHEAVY:"dashedHeavy",DASHLONG:"dashLong",DASHLONGHEAVY:"dashLongHeavy",DOTDASH:"dotDash",DASHDOTHEAVY:"dashDotHeavy",DOTDOTDASH:"dotDotDash",DASHDOTDOTHEAVY:"dashDotDotHeavy",WAVE:"wave",WAVYHEAVY:"wavyHeavy",WAVYDOUBLE:"wavyDouble",NONE:"none"},Xl=class extends Y{constructor(e=Rw.SINGLE,t){super("w:u"),this.root.push(new Pe({val:e,color:t===void 0?void 0:Dn(t)}))}},D8={BLINK_BACKGROUND:"blinkBackground",LIGHTS:"lights",ANTS_BLACK:"antsBlack",ANTS_RED:"antsRed",SHIMMER:"shimmer",SPARKLE:"sparkle",NONE:"none"},L8={BLACK:"black",BLUE:"blue",CYAN:"cyan",DARK_BLUE:"darkBlue",DARK_CYAN:"darkCyan",DARK_GRAY:"darkGray",DARK_GREEN:"darkGreen",DARK_MAGENTA:"darkMagenta",DARK_RED:"darkRed",DARK_YELLOW:"darkYellow",GREEN:"green",LIGHT_GRAY:"lightGray",MAGENTA:"magenta",NONE:"none",RED:"red",WHITE:"white",YELLOW:"yellow"},Yt=class extends zt{constructor(e){var t,n;if(super("w:rPr"),!e)return;e.style&&this.push(new Xt("w:rStyle",e.style)),e.font&&(typeof e.font=="string"?this.push(new Ci(e.font)):"name"in e.font?this.push(new Ci(e.font.name,e.font.hint)):this.push(new Ci(e.font))),e.bold!==void 0&&this.push(new ce("w:b",e.bold)),(e.boldComplexScript===void 0&&e.bold!==void 0||e.boldComplexScript)&&this.push(new ce("w:bCs",(t=e.boldComplexScript)!=null?t:e.bold)),e.italics!==void 0&&this.push(new ce("w:i",e.italics)),(e.italicsComplexScript===void 0&&e.italics!==void 0||e.italicsComplexScript)&&this.push(new ce("w:iCs",(n=e.italicsComplexScript)!=null?n:e.italics)),e.smallCaps!==void 0?this.push(new ce("w:smallCaps",e.smallCaps)):e.allCaps!==void 0&&this.push(new ce("w:caps",e.allCaps)),e.strike!==void 0&&this.push(new ce("w:strike",e.strike)),e.doubleStrike!==void 0&&this.push(new ce("w:dstrike",e.doubleStrike)),e.emboss!==void 0&&this.push(new ce("w:emboss",e.emboss)),e.imprint!==void 0&&this.push(new ce("w:imprint",e.imprint)),e.noProof!==void 0&&this.push(new ce("w:noProof",e.noProof)),e.snapToGrid!==void 0&&this.push(new ce("w:snapToGrid",e.snapToGrid)),e.vanish&&this.push(new ce("w:vanish",e.vanish)),e.color&&this.push(new Fm(e.color)),e.characterSpacing&&this.push(new Lm(e.characterSpacing)),e.scale!==void 0&&this.push(new an("w:w",e.scale)),e.kern&&this.push(new Oi("w:kern",e.kern)),e.position&&this.push(new Xt("w:position",e.position)),e.size!==void 0&&this.push(new Oi("w:sz",e.size));let i=e.sizeComplexScript===void 0||e.sizeComplexScript===!0?e.size:e.sizeComplexScript;i&&this.push(new Oi("w:szCs",i)),e.highlight&&this.push(new Bm(e.highlight));let o=e.highlightComplexScript===void 0||e.highlightComplexScript===!0?e.highlight:e.highlightComplexScript;o&&this.push(new zm(o)),e.underline&&this.push(new Xl(e.underline.type,e.underline.color)),e.effect&&this.push(new Xt("w:effect",e.effect)),e.border&&this.push(new Ce("w:bdr",e.border)),e.shading&&this.push(new Ln(e.shading)),e.subScript&&this.push(new jm),e.superScript&&this.push(new Hm),e.rightToLeft!==void 0&&this.push(new ce("w:rtl",e.rightToLeft)),e.emphasisMark&&this.push(new Gl(e.emphasisMark.type)),e.language&&this.push(P8(e.language)),e.specVanish&&this.push(new ce("w:specVanish",e.vanish)),e.math&&this.push(new ce("w:oMath",e.math)),e.revision&&this.push(new Yl(e.revision))}push(e){this.root.push(e)}},Yl=class extends Y{constructor(e){super("w:rPrChange"),this.root.push(new es({id:e.id,author:e.author,date:e.date})),this.addChildElement(new Yt(e))}},rs=class extends Y{constructor(e){var t;super("w:t"),typeof e=="string"?(this.root.push(new kt({space:At.PRESERVE})),this.root.push(e)):(this.root.push(new kt({space:(t=e.space)!=null?t:At.DEFAULT})),this.root.push(e.text))}},sn={CURRENT:"CURRENT",TOTAL_PAGES:"TOTAL_PAGES",TOTAL_PAGES_IN_SECTION:"TOTAL_PAGES_IN_SECTION",CURRENT_SECTION:"SECTION"},dt=class extends Y{constructor(e){if(super("w:r"),ne(this,"properties"),this.properties=new Yt(e),this.root.push(this.properties),e.break)for(let t=0;t<e.break;t++)this.root.push(new DO);if(e.children)for(let t of e.children){if(typeof t=="string"){switch(t){case sn.CURRENT:this.root.push(new Ft),this.root.push(new Nm),this.root.push(new Jt),this.root.push(new Bt);break;case sn.TOTAL_PAGES:this.root.push(new Ft),this.root.push(new Rm),this.root.push(new Jt),this.root.push(new Bt);break;case sn.TOTAL_PAGES_IN_SECTION:this.root.push(new Ft),this.root.push(new Mm),this.root.push(new Jt),this.root.push(new Bt);break;case sn.CURRENT_SECTION:this.root.push(new Ft),this.root.push(new Im),this.root.push(new Jt),this.root.push(new Bt);break;default:this.root.push(new rs(t));break}continue}this.root.push(t)}else e.text!==void 0&&this.root.push(new rs(e.text))}},Fn=class extends dt{constructor(e){super(typeof e=="string"?{text:e}:e)}},Um=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{char:"w:char",symbolfont:"w:font"})}},IA=class extends Y{constructor(e="",t="Wingdings"){super("w:sym"),this.root.push(new Um({char:e,symbolfont:t}))}},Zl=class extends dt{constructor(e){if(typeof e=="string")return super({}),this.root.push(new IA(e)),this;super(e),this.root.push(new IA(e.char,e.symbolfont))}},am={},Me={},lm,PA;function Ss(){if(PA)return lm;PA=1,lm=r;function r(e,t){if(!e)throw new Error(t||"Assertion failed")}return r.equal=function(t,n,i){if(t!=n)throw new Error(i||"Assertion failed: "+t+" != "+n)},lm}var DA;function xr(){if(DA)return Me;DA=1;var r=Ss(),e=un();Me.inherits=e;function t(R,H){return(R.charCodeAt(H)&64512)!==55296||H<0||H+1>=R.length?!1:(R.charCodeAt(H+1)&64512)===56320}function n(R,H){if(Array.isArray(R))return R.slice();if(!R)return[];var T=[];if(typeof R=="string")if(H){if(H==="hex")for(R=R.replace(/[^a-z0-9]+/ig,""),R.length%2!==0&&(R="0"+R),Q=0;Q<R.length;Q+=2)T.push(parseInt(R[Q]+R[Q+1],16))}else for(var V=0,Q=0;Q<R.length;Q++){var U=R.charCodeAt(Q);U<128?T[V++]=U:U<2048?(T[V++]=U>>6|192,T[V++]=U&63|128):t(R,Q)?(U=65536+((U&1023)<<10)+(R.charCodeAt(++Q)&1023),T[V++]=U>>18|240,T[V++]=U>>12&63|128,T[V++]=U>>6&63|128,T[V++]=U&63|128):(T[V++]=U>>12|224,T[V++]=U>>6&63|128,T[V++]=U&63|128)}else for(Q=0;Q<R.length;Q++)T[Q]=R[Q]|0;return T}Me.toArray=n;function i(R){for(var H="",T=0;T<R.length;T++)H+=a(R[T].toString(16));return H}Me.toHex=i;function o(R){var H=R>>>24|R>>>8&65280|R<<8&16711680|(R&255)<<24;return H>>>0}Me.htonl=o;function s(R,H){for(var T="",V=0;V<R.length;V++){var Q=R[V];H==="little"&&(Q=o(Q)),T+=l(Q.toString(16))}return T}Me.toHex32=s;function a(R){return R.length===1?"0"+R:R}Me.zero2=a;function l(R){return R.length===7?"0"+R:R.length===6?"00"+R:R.length===5?"000"+R:R.length===4?"0000"+R:R.length===3?"00000"+R:R.length===2?"000000"+R:R.length===1?"0000000"+R:R}Me.zero8=l;function u(R,H,T,V){var Q=T-H;r(Q%4===0);for(var U=new Array(Q/4),oe=0,te=H;oe<U.length;oe++,te+=4){var fe;V==="big"?fe=R[te]<<24|R[te+1]<<16|R[te+2]<<8|R[te+3]:fe=R[te+3]<<24|R[te+2]<<16|R[te+1]<<8|R[te],U[oe]=fe>>>0}return U}Me.join32=u;function c(R,H){for(var T=new Array(R.length*4),V=0,Q=0;V<R.length;V++,Q+=4){var U=R[V];H==="big"?(T[Q]=U>>>24,T[Q+1]=U>>>16&255,T[Q+2]=U>>>8&255,T[Q+3]=U&255):(T[Q+3]=U>>>24,T[Q+2]=U>>>16&255,T[Q+1]=U>>>8&255,T[Q]=U&255)}return T}Me.split32=c;function f(R,H){return R>>>H|R<<32-H}Me.rotr32=f;function h(R,H){return R<<H|R>>>32-H}Me.rotl32=h;function d(R,H){return R+H>>>0}Me.sum32=d;function m(R,H,T){return R+H+T>>>0}Me.sum32_3=m;function g(R,H,T,V){return R+H+T+V>>>0}Me.sum32_4=g;function b(R,H,T,V,Q){return R+H+T+V+Q>>>0}Me.sum32_5=b;function p(R,H,T,V){var Q=R[H],U=R[H+1],oe=V+U>>>0,te=(oe<V?1:0)+T+Q;R[H]=te>>>0,R[H+1]=oe}Me.sum64=p;function S(R,H,T,V){var Q=H+V>>>0,U=(Q<H?1:0)+R+T;return U>>>0}Me.sum64_hi=S;function k(R,H,T,V){var Q=H+V;return Q>>>0}Me.sum64_lo=k;function w(R,H,T,V,Q,U,oe,te){var fe=0,J=H;J=J+V>>>0,fe+=J<H?1:0,J=J+U>>>0,fe+=J<U?1:0,J=J+te>>>0,fe+=J<te?1:0;var D=R+T+Q+oe+fe;return D>>>0}Me.sum64_4_hi=w;function x(R,H,T,V,Q,U,oe,te){var fe=H+V+U+te;return fe>>>0}Me.sum64_4_lo=x;function M(R,H,T,V,Q,U,oe,te,fe,J){var D=0,X=H;X=X+V>>>0,D+=X<H?1:0,X=X+U>>>0,D+=X<U?1:0,X=X+te>>>0,D+=X<te?1:0,X=X+J>>>0,D+=X<J?1:0;var Z=R+T+Q+oe+fe+D;return Z>>>0}Me.sum64_5_hi=M;function I(R,H,T,V,Q,U,oe,te,fe,J){var D=H+V+U+te+J;return D>>>0}Me.sum64_5_lo=I;function F(R,H,T){var V=H<<32-T|R>>>T;return V>>>0}Me.rotr64_hi=F;function N(R,H,T){var V=R<<32-T|H>>>T;return V>>>0}Me.rotr64_lo=N;function K(R,H,T){return R>>>T}Me.shr64_hi=K;function ae(R,H,T){var V=R<<32-T|H>>>T;return V>>>0}return Me.shr64_lo=ae,Me}var um={},LA;function xs(){if(LA)return um;LA=1;var r=xr(),e=Ss();function t(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return um.BlockHash=t,t.prototype.update=function(i,o){if(i=r.toArray(i,o),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){i=this.pending;var s=i.length%this._delta8;this.pending=i.slice(i.length-s,i.length),this.pending.length===0&&(this.pending=null),i=r.join32(i,0,i.length-s,this.endian);for(var a=0;a<i.length;a+=this._delta32)this._update(i,a,a+this._delta32)}return this},t.prototype.digest=function(i){return this.update(this._pad()),e(this.pending===null),this._digest(i)},t.prototype._pad=function(){var i=this.pendingTotal,o=this._delta8,s=o-(i+this.padLength)%o,a=new Array(s+this.padLength);a[0]=128;for(var l=1;l<s;l++)a[l]=0;if(i<<=3,this.endian==="big"){for(var u=8;u<this.padLength;u++)a[l++]=0;a[l++]=0,a[l++]=0,a[l++]=0,a[l++]=0,a[l++]=i>>>24&255,a[l++]=i>>>16&255,a[l++]=i>>>8&255,a[l++]=i&255}else for(a[l++]=i&255,a[l++]=i>>>8&255,a[l++]=i>>>16&255,a[l++]=i>>>24&255,a[l++]=0,a[l++]=0,a[l++]=0,a[l++]=0,u=8;u<this.padLength;u++)a[l++]=0;return a},um}var Rn={},hr={},FA;function FO(){if(FA)return hr;FA=1;var r=xr(),e=r.rotr32;function t(c,f,h,d){if(c===0)return n(f,h,d);if(c===1||c===3)return o(f,h,d);if(c===2)return i(f,h,d)}hr.ft_1=t;function n(c,f,h){return c&f^~c&h}hr.ch32=n;function i(c,f,h){return c&f^c&h^f&h}hr.maj32=i;function o(c,f,h){return c^f^h}hr.p32=o;function s(c){return e(c,2)^e(c,13)^e(c,22)}hr.s0_256=s;function a(c){return e(c,6)^e(c,11)^e(c,25)}hr.s1_256=a;function l(c){return e(c,7)^e(c,18)^c>>>3}hr.g0_256=l;function u(c){return e(c,17)^e(c,19)^c>>>10}return hr.g1_256=u,hr}var cm,BA;function F8(){if(BA)return cm;BA=1;var r=xr(),e=xs(),t=FO(),n=r.rotl32,i=r.sum32,o=r.sum32_5,s=t.ft_1,a=e.BlockHash,l=[1518500249,1859775393,2400959708,3395469782];function u(){if(!(this instanceof u))return new u;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return r.inherits(u,a),cm=u,u.blockSize=512,u.outSize=160,u.hmacStrength=80,u.padLength=64,u.prototype._update=function(f,h){for(var d=this.W,m=0;m<16;m++)d[m]=f[h+m];for(;m<d.length;m++)d[m]=n(d[m-3]^d[m-8]^d[m-14]^d[m-16],1);var g=this.h[0],b=this.h[1],p=this.h[2],S=this.h[3],k=this.h[4];for(m=0;m<d.length;m++){var w=~~(m/20),x=o(n(g,5),s(w,b,p,S),k,d[m],l[w]);k=S,S=p,p=n(b,30),b=g,g=x}this.h[0]=i(this.h[0],g),this.h[1]=i(this.h[1],b),this.h[2]=i(this.h[2],p),this.h[3]=i(this.h[3],S),this.h[4]=i(this.h[4],k)},u.prototype._digest=function(f){return f==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},cm}var fm,zA;function BO(){if(zA)return fm;zA=1;var r=xr(),e=xs(),t=FO(),n=Ss(),i=r.sum32,o=r.sum32_4,s=r.sum32_5,a=t.ch32,l=t.maj32,u=t.s0_256,c=t.s1_256,f=t.g0_256,h=t.g1_256,d=e.BlockHash,m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function g(){if(!(this instanceof g))return new g;d.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=m,this.W=new Array(64)}return r.inherits(g,d),fm=g,g.blockSize=512,g.outSize=256,g.hmacStrength=192,g.padLength=64,g.prototype._update=function(p,S){for(var k=this.W,w=0;w<16;w++)k[w]=p[S+w];for(;w<k.length;w++)k[w]=o(h(k[w-2]),k[w-7],f(k[w-15]),k[w-16]);var x=this.h[0],M=this.h[1],I=this.h[2],F=this.h[3],N=this.h[4],K=this.h[5],ae=this.h[6],R=this.h[7];for(n(this.k.length===k.length),w=0;w<k.length;w++){var H=s(R,c(N),a(N,K,ae),this.k[w],k[w]),T=i(u(x),l(x,M,I));R=ae,ae=K,K=N,N=i(F,H),F=I,I=M,M=x,x=i(H,T)}this.h[0]=i(this.h[0],x),this.h[1]=i(this.h[1],M),this.h[2]=i(this.h[2],I),this.h[3]=i(this.h[3],F),this.h[4]=i(this.h[4],N),this.h[5]=i(this.h[5],K),this.h[6]=i(this.h[6],ae),this.h[7]=i(this.h[7],R)},g.prototype._digest=function(p){return p==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},fm}var hm,HA;function B8(){if(HA)return hm;HA=1;var r=xr(),e=BO();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return r.inherits(t,e),hm=t,t.blockSize=512,t.outSize=224,t.hmacStrength=192,t.padLength=64,t.prototype._digest=function(i){return i==="hex"?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")},hm}var dm,jA;function zO(){if(jA)return dm;jA=1;var r=xr(),e=xs(),t=Ss(),n=r.rotr64_hi,i=r.rotr64_lo,o=r.shr64_hi,s=r.shr64_lo,a=r.sum64,l=r.sum64_hi,u=r.sum64_lo,c=r.sum64_4_hi,f=r.sum64_4_lo,h=r.sum64_5_hi,d=r.sum64_5_lo,m=e.BlockHash,g=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;m.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=g,this.W=new Array(160)}r.inherits(b,m),dm=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(T,V){for(var Q=this.W,U=0;U<32;U++)Q[U]=T[V+U];for(;U<Q.length;U+=2){var oe=ae(Q[U-4],Q[U-3]),te=R(Q[U-4],Q[U-3]),fe=Q[U-14],J=Q[U-13],D=N(Q[U-30],Q[U-29]),X=K(Q[U-30],Q[U-29]),Z=Q[U-32],ie=Q[U-31];Q[U]=c(oe,te,fe,J,D,X,Z,ie),Q[U+1]=f(oe,te,fe,J,D,X,Z,ie)}},b.prototype._update=function(T,V){this._prepareBlock(T,V);var Q=this.W,U=this.h[0],oe=this.h[1],te=this.h[2],fe=this.h[3],J=this.h[4],D=this.h[5],X=this.h[6],Z=this.h[7],ie=this.h[8],G=this.h[9],O=this.h[10],A=this.h[11],W=this.h[12],j=this.h[13],P=this.h[14],L=this.h[15];t(this.k.length===Q.length);for(var re=0;re<Q.length;re+=2){var E=P,ee=L,C=I(ie,G),v=F(ie,G),y=p(ie,G,O,A,W),_=S(ie,G,O,A,W,j),z=this.k[re],$=this.k[re+1],q=Q[re],se=Q[re+1],ue=h(E,ee,C,v,y,_,z,$,q,se),le=d(E,ee,C,v,y,_,z,$,q,se);E=x(U,oe),ee=M(U,oe),C=k(U,oe,te,fe,J),v=w(U,oe,te,fe,J,D);var de=l(E,ee,C,v),ve=u(E,ee,C,v);P=W,L=j,W=O,j=A,O=ie,A=G,ie=l(X,Z,ue,le),G=u(Z,Z,ue,le),X=J,Z=D,J=te,D=fe,te=U,fe=oe,U=l(ue,le,de,ve),oe=u(ue,le,de,ve)}a(this.h,0,U,oe),a(this.h,2,te,fe),a(this.h,4,J,D),a(this.h,6,X,Z),a(this.h,8,ie,G),a(this.h,10,O,A),a(this.h,12,W,j),a(this.h,14,P,L)},b.prototype._digest=function(T){return T==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")};function p(H,T,V,Q,U){var oe=H&V^~H&U;return oe<0&&(oe+=4294967296),oe}function S(H,T,V,Q,U,oe){var te=T&Q^~T&oe;return te<0&&(te+=4294967296),te}function k(H,T,V,Q,U){var oe=H&V^H&U^V&U;return oe<0&&(oe+=4294967296),oe}function w(H,T,V,Q,U,oe){var te=T&Q^T&oe^Q&oe;return te<0&&(te+=4294967296),te}function x(H,T){var V=n(H,T,28),Q=n(T,H,2),U=n(T,H,7),oe=V^Q^U;return oe<0&&(oe+=4294967296),oe}function M(H,T){var V=i(H,T,28),Q=i(T,H,2),U=i(T,H,7),oe=V^Q^U;return oe<0&&(oe+=4294967296),oe}function I(H,T){var V=n(H,T,14),Q=n(H,T,18),U=n(T,H,9),oe=V^Q^U;return oe<0&&(oe+=4294967296),oe}function F(H,T){var V=i(H,T,14),Q=i(H,T,18),U=i(T,H,9),oe=V^Q^U;return oe<0&&(oe+=4294967296),oe}function N(H,T){var V=n(H,T,1),Q=n(H,T,8),U=o(H,T,7),oe=V^Q^U;return oe<0&&(oe+=4294967296),oe}function K(H,T){var V=i(H,T,1),Q=i(H,T,8),U=s(H,T,7),oe=V^Q^U;return oe<0&&(oe+=4294967296),oe}function ae(H,T){var V=n(H,T,19),Q=n(T,H,29),U=o(H,T,6),oe=V^Q^U;return oe<0&&(oe+=4294967296),oe}function R(H,T){var V=i(H,T,19),Q=i(T,H,29),U=s(H,T,6),oe=V^Q^U;return oe<0&&(oe+=4294967296),oe}return dm}var pm,UA;function z8(){if(UA)return pm;UA=1;var r=xr(),e=zO();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return r.inherits(t,e),pm=t,t.blockSize=1024,t.outSize=384,t.hmacStrength=192,t.padLength=128,t.prototype._digest=function(i){return i==="hex"?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")},pm}var qA;function H8(){return qA||(qA=1,Rn.sha1=F8(),Rn.sha224=B8(),Rn.sha256=BO(),Rn.sha384=z8(),Rn.sha512=zO()),Rn}var mm={},WA;function j8(){if(WA)return mm;WA=1;var r=xr(),e=xs(),t=r.rotl32,n=r.sum32,i=r.sum32_3,o=r.sum32_4,s=e.BlockHash;function a(){if(!(this instanceof a))return new a;s.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}r.inherits(a,s),mm.ripemd160=a,a.blockSize=512,a.outSize=160,a.hmacStrength=192,a.padLength=64,a.prototype._update=function(b,p){for(var S=this.h[0],k=this.h[1],w=this.h[2],x=this.h[3],M=this.h[4],I=S,F=k,N=w,K=x,ae=M,R=0;R<80;R++){var H=n(t(o(S,l(R,k,w,x),b[f[R]+p],u(R)),d[R]),M);S=M,M=x,x=t(w,10),w=k,k=H,H=n(t(o(I,l(79-R,F,N,K),b[h[R]+p],c(R)),m[R]),ae),I=ae,ae=K,K=t(N,10),N=F,F=H}H=i(this.h[1],w,K),this.h[1]=i(this.h[2],x,ae),this.h[2]=i(this.h[3],M,I),this.h[3]=i(this.h[4],S,F),this.h[4]=i(this.h[0],k,N),this.h[0]=H},a.prototype._digest=function(b){return b==="hex"?r.toHex32(this.h,"little"):r.split32(this.h,"little")};function l(g,b,p,S){return g<=15?b^p^S:g<=31?b&p|~b&S:g<=47?(b|~p)^S:g<=63?b&S|p&~S:b^(p|~S)}function u(g){return g<=15?0:g<=31?1518500249:g<=47?1859775393:g<=63?2400959708:2840853838}function c(g){return g<=15?1352829926:g<=31?1548603684:g<=47?1836072691:g<=63?2053994217:0}var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],h=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],d=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return mm}var gm,VA;function U8(){if(VA)return gm;VA=1;var r=xr(),e=Ss();function t(n,i,o){if(!(this instanceof t))return new t(n,i,o);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(i,o))}return gm=t,t.prototype._init=function(i){i.length>this.blockSize&&(i=new this.Hash().update(i).digest()),e(i.length<=this.blockSize);for(var o=i.length;o<this.blockSize;o++)i.push(0);for(o=0;o<i.length;o++)i[o]^=54;for(this.inner=new this.Hash().update(i),o=0;o<i.length;o++)i[o]^=106;this.outer=new this.Hash().update(i)},t.prototype.update=function(i,o){return this.inner.update(i,o),this},t.prototype.digest=function(i){return this.outer.update(this.inner.digest()),this.outer.digest(i)},gm}var $A;function q8(){return $A||($A=1,(function(r){var e=r;e.utils=xr(),e.common=xs(),e.sha=H8(),e.ripemd=j8(),e.hmac=U8(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(am)),am}var W8=q8(),V8=yw(W8),$8="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",K8=(r,e=21)=>(t=e)=>{let n="",i=t|0;for(;i--;)n+=r[Math.random()*r.length|0];return n},G8=(r=21)=>{let e="",t=r|0;for(;t--;)e+=$8[Math.random()*64|0];return e},J8=r=>Math.floor(r/25.4*72*20),Lt=r=>Math.floor(r*72*20),Es=(r=0)=>{let e=r;return()=>++e},HO=()=>Es(),jO=()=>Es(1),UO=()=>Es(),qO=()=>Es(),_s=()=>G8().toLowerCase(),qm=r=>V8.sha1().update(r instanceof ArrayBuffer?new Uint8Array(r):r).digest("hex"),Wo=r=>K8("1234567890abcdef",r)(),WO=()=>`${Wo(8)}-${Wo(4)}-${Wo(4)}-${Wo(4)}-${Wo(12)}`,VO={CHARACTER:"character",COLUMN:"column",INSIDE_MARGIN:"insideMargin",LEFT_MARGIN:"leftMargin",MARGIN:"margin",OUTSIDE_MARGIN:"outsideMargin",PAGE:"page",RIGHT_MARGIN:"rightMargin"},$O={BOTTOM_MARGIN:"bottomMargin",INSIDE_MARGIN:"insideMargin",LINE:"line",MARGIN:"margin",OUTSIDE_MARGIN:"outsideMargin",PAGE:"page",PARAGRAPH:"paragraph",TOP_MARGIN:"topMargin"},KO=()=>new be({name:"wp:simplePos",attributes:{x:{key:"x",value:0},y:{key:"y",value:0}}}),GO=r=>new be({name:"wp:align",children:[r]}),JO=r=>new be({name:"wp:posOffset",children:[r.toString()]}),XO=({relative:r,align:e,offset:t})=>new be({name:"wp:positionH",attributes:{relativeFrom:{key:"relativeFrom",value:r??VO.PAGE}},children:[(()=>{if(e)return GO(e);if(t!==void 0)return JO(t);throw new Error("There is no configuration provided for floating position (Align or offset)")})()]}),YO=({relative:r,align:e,offset:t})=>new be({name:"wp:positionV",attributes:{relativeFrom:{key:"relativeFrom",value:r??$O.PAGE}},children:[(()=>{if(e)return GO(e);if(t!==void 0)return JO(t);throw new Error("There is no configuration provided for floating position (Align or offset)")})()]}),Wm=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{uri:"uri"})}},X8=r=>new be({name:"asvg:svgBlip",attributes:{asvg:{key:"xmlns:asvg",value:"http://schemas.microsoft.com/office/drawing/2016/SVG/main"},embed:{key:"r:embed",value:`rId{${r.fileName}}`}}}),Y8=r=>new be({name:"a:ext",attributes:{uri:{key:"uri",value:"{96DAC541-7B7A-43D3-8B79-37D633B846F1}"}},children:[X8(r)]}),Z8=r=>new be({name:"a:extLst",children:[Y8(r)]}),Q8=r=>new be({name:"a:blip",attributes:{embed:{key:"r:embed",value:`rId{${r.type==="svg"?r.fallback.fileName:r.fileName}}`},cstate:{key:"cstate",value:"none"}},children:r.type==="svg"?[Z8(r)]:[]}),Vm=class extends Y{constructor(){super("a:srcRect")}},$m=class extends Y{constructor(){super("a:fillRect")}},Km=class extends Y{constructor(){super("a:stretch"),this.root.push(new $m)}},Gm=class extends Y{constructor(e){super("pic:blipFill"),this.root.push(Q8(e)),this.root.push(new Vm),this.root.push(new Km)}},Jm=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{noChangeAspect:"noChangeAspect",noChangeArrowheads:"noChangeArrowheads"})}},Xm=class extends Y{constructor(){super("a:picLocks"),this.root.push(new Jm({noChangeAspect:1,noChangeArrowheads:1}))}},Ym=class extends Y{constructor(){super("pic:cNvPicPr"),this.root.push(new Xm)}},ZO=(r,e)=>new be({name:"a:hlinkClick",attributes:ht(ke({},e?{xmlns:{key:"xmlns:a",value:"http://schemas.openxmlformats.org/drawingml/2006/main"}}:{}),{id:{key:"r:id",value:`rId${r}`}})}),Zm=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{id:"id",name:"name",descr:"descr"})}},Qm=class extends Y{constructor(){super("pic:cNvPr"),this.root.push(new Zm({id:0,name:"",descr:""}))}prepForXml(e){for(let t=e.stack.length-1;t>=0;t--){let n=e.stack[t];if(n instanceof ln){this.root.push(ZO(n.linkId,!1));break}}return super.prepForXml(e)}},eg=class extends Y{constructor(){super("pic:nvPicPr"),this.root.push(new Qm),this.root.push(new Ym)}},tg=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{xmlns:"xmlns:pic"})}},rg=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{cx:"cx",cy:"cy"})}},ng=class extends Y{constructor(e,t){super("a:ext"),ne(this,"attributes"),this.attributes=new rg({cx:e,cy:t}),this.root.push(this.attributes)}},ig=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{x:"x",y:"y"})}},og=class extends Y{constructor(){super("a:off"),this.root.push(new ig({x:0,y:0}))}},sg=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{flipVertical:"flipV",flipHorizontal:"flipH",rotation:"rot"})}},ag=class extends Y{constructor(e){var t,n;super("a:xfrm"),ne(this,"extents"),this.root.push(new sg({flipVertical:(t=e.flip)==null?void 0:t.vertical,flipHorizontal:(n=e.flip)==null?void 0:n.horizontal,rotation:e.rotation})),this.extents=new ng(e.emus.x,e.emus.y),this.root.push(new og),this.root.push(this.extents)}},QO=()=>new be({name:"a:noFill"}),ez=r=>new be({name:"a:srgbClr",attributes:{value:{key:"val",value:r.value}}}),tz=r=>new be({name:"a:schemeClr",attributes:{value:{key:"val",value:r.value}}}),KA=r=>new be({name:"a:solidFill",children:[r.type==="rgb"?ez(r):tz(r)]}),rz=r=>new be({name:"a:ln",attributes:{width:{key:"w",value:r.width},cap:{key:"cap",value:r.cap},compoundLine:{key:"cmpd",value:r.compoundLine},align:{key:"algn",value:r.align}},children:[r.type==="noFill"?QO():r.solidFillType==="rgb"?KA({type:"rgb",value:r.value}):KA({type:"scheme",value:r.value})]}),lg=class extends Y{constructor(){super("a:avLst")}},ug=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{prst:"prst"})}},cg=class extends Y{constructor(){super("a:prstGeom"),this.root.push(new ug({prst:"rect"})),this.root.push(new lg)}},fg=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{bwMode:"bwMode"})}},hg=class extends Y{constructor({outline:e,transform:t}){super("pic:spPr"),ne(this,"form"),this.root.push(new fg({bwMode:"auto"})),this.form=new ag(t),this.root.push(this.form),this.root.push(new cg),e&&(this.root.push(QO()),this.root.push(rz(e)))}},dg=class extends Y{constructor({mediaData:e,transform:t,outline:n}){super("pic:pic"),this.root.push(new tg({xmlns:"http://schemas.openxmlformats.org/drawingml/2006/picture"})),this.root.push(new eg),this.root.push(new Gm(e)),this.root.push(new hg({transform:t,outline:n}))}},pg=class extends Y{constructor({mediaData:e,transform:t,outline:n}){super("a:graphicData"),ne(this,"pic"),this.root.push(new Wm({uri:"http://schemas.openxmlformats.org/drawingml/2006/picture"})),this.pic=new dg({mediaData:e,transform:t,outline:n}),this.root.push(this.pic)}},mg=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{a:"xmlns:a"})}},Ql=class extends Y{constructor({mediaData:e,transform:t,outline:n}){super("a:graphic"),ne(this,"data"),this.root.push(new mg({a:"http://schemas.openxmlformats.org/drawingml/2006/main"})),this.data=new pg({mediaData:e,transform:t,outline:n}),this.root.push(this.data)}},Go={NONE:0,SQUARE:1,TIGHT:2,TOP_AND_BOTTOM:3},eC={BOTH_SIDES:"bothSides",LEFT:"left",RIGHT:"right",LARGEST:"largest"},ns=class extends Y{constructor(){super("wp:wrapNone")}},gg=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{distT:"distT",distB:"distB",distL:"distL",distR:"distR",wrapText:"wrapText"})}},eu=class extends Y{constructor(e,t={top:0,bottom:0,left:0,right:0}){super("wp:wrapSquare"),this.root.push(new gg({wrapText:e.side||eC.BOTH_SIDES,distT:t.top,distB:t.bottom,distL:t.left,distR:t.right}))}},vg=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{distT:"distT",distB:"distB"})}},tu=class extends Y{constructor(e={top:0,bottom:0}){super("wp:wrapTight"),this.root.push(new vg({distT:e.top,distB:e.bottom}))}},yg=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{distT:"distT",distB:"distB"})}},ru=class extends Y{constructor(e={top:0,bottom:0}){super("wp:wrapTopAndBottom"),this.root.push(new yg({distT:e.top,distB:e.bottom}))}},nu=class extends Y{constructor({name:e,description:t,title:n}={name:"",description:"",title:""}){super("wp:docPr"),ne(this,"docPropertiesUniqueNumericId",UO());let i={id:{key:"id",value:this.docPropertiesUniqueNumericId()},name:{key:"name",value:e}};t!=null&&(i.description={key:"descr",value:t}),n!=null&&(i.title={key:"title",value:n}),this.root.push(new Tt(i))}prepForXml(e){for(let t=e.stack.length-1;t>=0;t--){let n=e.stack[t];if(n instanceof ln){this.root.push(ZO(n.linkId,!0));break}}return super.prepForXml(e)}},tC=({top:r,right:e,bottom:t,left:n})=>new be({name:"wp:effectExtent",attributes:{top:{key:"t",value:r},right:{key:"r",value:e},bottom:{key:"b",value:t},left:{key:"l",value:n}}}),rC=({x:r,y:e})=>new be({name:"wp:extent",attributes:{x:{key:"cx",value:r},y:{key:"cy",value:e}}}),wg=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{xmlns:"xmlns:a",noChangeAspect:"noChangeAspect"})}},bg=class extends Y{constructor(){super("a:graphicFrameLocks"),this.root.push(new wg({xmlns:"http://schemas.openxmlformats.org/drawingml/2006/main",noChangeAspect:1}))}},nC=()=>new be({name:"wp:cNvGraphicFramePr",children:[new bg]}),kg=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{distT:"distT",distB:"distB",distL:"distL",distR:"distR",allowOverlap:"allowOverlap",behindDoc:"behindDoc",layoutInCell:"layoutInCell",locked:"locked",relativeHeight:"relativeHeight",simplePos:"simplePos"})}},Sg=class extends Y{constructor({mediaData:e,transform:t,drawingOptions:n}){super("wp:anchor");let i=ke({allowOverlap:!0,behindDocument:!1,lockAnchor:!1,layoutInCell:!0,verticalPosition:{},horizontalPosition:{}},n.floating);if(this.root.push(new kg({distT:i.margins&&i.margins.top||0,distB:i.margins&&i.margins.bottom||0,distL:i.margins&&i.margins.left||0,distR:i.margins&&i.margins.right||0,simplePos:"0",allowOverlap:i.allowOverlap===!0?"1":"0",behindDoc:i.behindDocument===!0?"1":"0",locked:i.lockAnchor===!0?"1":"0",layoutInCell:i.layoutInCell===!0?"1":"0",relativeHeight:i.zIndex?i.zIndex:t.emus.y})),this.root.push(KO()),this.root.push(XO(i.horizontalPosition)),this.root.push(YO(i.verticalPosition)),this.root.push(rC({x:t.emus.x,y:t.emus.y})),this.root.push(tC({top:0,right:0,bottom:0,left:0})),n.floating!==void 0&&n.floating.wrap!==void 0)switch(n.floating.wrap.type){case Go.SQUARE:this.root.push(new eu(n.floating.wrap,n.floating.margins));break;case Go.TIGHT:this.root.push(new tu(n.floating.margins));break;case Go.TOP_AND_BOTTOM:this.root.push(new ru(n.floating.margins));break;case Go.NONE:default:this.root.push(new ns)}else this.root.push(new ns);this.root.push(new nu(n.docProperties)),this.root.push(nC()),this.root.push(new Ql({mediaData:e,transform:t,outline:n.outline}))}},nz=({mediaData:r,transform:e,docProperties:t,outline:n})=>{var i,o,s,a;return new be({name:"wp:inline",attributes:{distanceTop:{key:"distT",value:0},distanceBottom:{key:"distB",value:0},distanceLeft:{key:"distL",value:0},distanceRight:{key:"distR",value:0}},children:[rC({x:e.emus.x,y:e.emus.y}),tC(n?{top:((i=n.width)!=null?i:9525)*2,right:((o=n.width)!=null?o:9525)*2,bottom:((s=n.width)!=null?s:9525)*2,left:((a=n.width)!=null?a:9525)*2}:{top:0,right:0,bottom:0,left:0}),new nu(t),nC(),new Ql({mediaData:r,transform:e,outline:n})]})},iu=class extends Y{constructor(e,t={}){super("w:drawing"),t.floating?this.root.push(new Sg({mediaData:e,transform:e.transformation,drawingOptions:t})):this.root.push(nz({mediaData:e,transform:e.transformation,docProperties:t.docProperties,outline:t.outline}))}},iz=r=>{if(typeof atob=="function"){let e=";base64,",t=r.indexOf(e),n=t===-1?0:t+e.length;return new Uint8Array(atob(r.substring(n)).split("").map(i=>i.charCodeAt(0)))}else{let e=require("buffer");return new e.Buffer(r,"base64")}},oz=r=>typeof r=="string"?iz(r):r,vm=(r,e)=>({data:oz(r.data),fileName:e,transformation:{pixels:{x:Math.round(r.transformation.width),y:Math.round(r.transformation.height)},emus:{x:Math.round(r.transformation.width*9525),y:Math.round(r.transformation.height*9525)},flip:r.transformation.flip,rotation:r.transformation.rotation?r.transformation.rotation*6e4:void 0}}),xg=class extends dt{constructor(e){super({}),ne(this,"imageData");let n=`${qm(e.data)}.${e.type}`;this.imageData=e.type==="svg"?ht(ke({type:e.type},vm(e,n)),{fallback:ke({type:e.fallback.type},vm(ht(ke({},e.fallback),{transformation:e.transformation}),`${qm(e.fallback.data)}.${e.fallback.type}`))}):ke({type:e.type},vm(e,n));let i=new iu(this.imageData,{floating:e.floating,docProperties:e.altText,outline:e.outline});this.root.push(i)}prepForXml(e){return e.file.Media.addImage(this.imageData.fileName,this.imageData),this.imageData.type==="svg"&&e.file.Media.addImage(this.imageData.fallback.fileName,this.imageData.fallback),super.prepForXml(e)}},Eg=class extends Y{constructor(e){super("w:instrText"),this.root.push(new kt({space:At.PRESERVE})),this.root.push(`SEQ ${e}`)}},_g=class extends dt{constructor(e){super({}),this.root.push(new Ft(!0)),this.root.push(new Eg(e)),this.root.push(new Jt),this.root.push(new Bt)}},Tg=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{instr:"w:instr"})}},ou=class extends Y{constructor(e,t){super("w:fldSimple"),this.root.push(new Tg({instr:e})),t!==void 0&&this.root.push(new Fn(t))}},Ag=class extends ou{constructor(e){super(` MERGEFIELD ${e} `,`\xAB${e}\xBB`)}},Og=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{xmlns:"xmlns"})}},Cg=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{id:"Id",type:"Type",target:"Target",targetMode:"TargetMode"})}},iC={EXTERNAL:"External"},Ng=class extends Y{constructor(e,t,n,i){super("Relationship"),this.root.push(new Cg({id:e,type:t,target:n,targetMode:i}))}},Br=class extends Y{constructor(){super("Relationships"),this.root.push(new Og({xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}))}createRelationship(e,t,n,i){let o=new Ng(`rId${e}`,t,n,i);return this.root.push(o),o}get RelationshipCount(){return this.root.length-1}},Rg=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{id:"w:id",initials:"w:initials",author:"w:author",date:"w:date"})}},is=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{id:"w:id"})}},Mg=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{"xmlns:cx":"xmlns:cx","xmlns:cx1":"xmlns:cx1","xmlns:cx2":"xmlns:cx2","xmlns:cx3":"xmlns:cx3","xmlns:cx4":"xmlns:cx4","xmlns:cx5":"xmlns:cx5","xmlns:cx6":"xmlns:cx6","xmlns:cx7":"xmlns:cx7","xmlns:cx8":"xmlns:cx8","xmlns:mc":"xmlns:mc","xmlns:aink":"xmlns:aink","xmlns:am3d":"xmlns:am3d","xmlns:o":"xmlns:o","xmlns:r":"xmlns:r","xmlns:m":"xmlns:m","xmlns:v":"xmlns:v","xmlns:wp14":"xmlns:wp14","xmlns:wp":"xmlns:wp","xmlns:w10":"xmlns:w10","xmlns:w":"xmlns:w","xmlns:w14":"xmlns:w14","xmlns:w15":"xmlns:w15","xmlns:w16cex":"xmlns:w16cex","xmlns:w16cid":"xmlns:w16cid","xmlns:w16":"xmlns:w16","xmlns:w16sdtdh":"xmlns:w16sdtdh","xmlns:w16se":"xmlns:w16se","xmlns:wpg":"xmlns:wpg","xmlns:wpi":"xmlns:wpi","xmlns:wne":"xmlns:wne","xmlns:wps":"xmlns:wps"})}},Ig=class extends Y{constructor(e){super("w:commentRangeStart"),this.root.push(new is({id:e}))}},Pg=class extends Y{constructor(e){super("w:commentRangeEnd"),this.root.push(new is({id:e}))}},Dg=class extends Y{constructor(e){super("w:commentReference"),this.root.push(new is({id:e}))}},su=class extends Y{constructor({id:e,initials:t,author:n,date:i=new Date,children:o}){super("w:comment"),this.root.push(new Rg({id:e,initials:t,author:n,date:i.toISOString()}));for(let s of o)this.root.push(s)}},au=class extends Y{constructor({children:e}){super("w:comments"),ne(this,"relationships"),this.root.push(new Mg({"xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}));for(let t of e)this.root.push(new su(t));this.relationships=new Br}get Relationships(){return this.relationships}},Lg=class extends Ge{constructor(){super("w:noBreakHyphen")}},Fg=class extends Ge{constructor(){super("w:softHyphen")}},Bg=class extends Ge{constructor(){super("w:dayShort")}},zg=class extends Ge{constructor(){super("w:monthShort")}},Hg=class extends Ge{constructor(){super("w:yearShort")}},jg=class extends Ge{constructor(){super("w:dayLong")}},Ug=class extends Ge{constructor(){super("w:monthLong")}},qg=class extends Ge{constructor(){super("w:yearLong")}},Wg=class extends Ge{constructor(){super("w:annotationRef")}},Vg=class extends Ge{constructor(){super("w:footnoteRef")}},$g=class extends Ge{constructor(){super("w:endnoteRef")}},Kg=class extends Ge{constructor(){super("w:separator")}},Gg=class extends Ge{constructor(){super("w:continuationSeparator")}},Jg=class extends Ge{constructor(){super("w:pgNum")}},Xg=class extends Ge{constructor(){super("w:cr")}},Yg=class extends Ge{constructor(){super("w:tab")}},Zg=class extends Ge{constructor(){super("w:lastRenderedPageBreak")}},sz={LEFT:"left",CENTER:"center",RIGHT:"right"},az={MARGIN:"margin",INDENT:"indent"},lz={NONE:"none",DOT:"dot",HYPHEN:"hyphen",UNDERSCORE:"underscore",MIDDLE_DOT:"middleDot"},Qg=class extends Y{constructor(e){super("w:ptab"),this.root.push(new Tt({alignment:{key:"w:alignment",value:e.alignment},relativeTo:{key:"w:relativeTo",value:e.relativeTo},leader:{key:"w:leader",value:e.leader}}))}},oC={COLUMN:"column",PAGE:"page"},lu=class extends Y{constructor(e){super("w:br"),this.root.push(new Pe({type:e}))}},ev=class extends dt{constructor(){super({}),this.root.push(new lu(oC.PAGE))}},tv=class extends dt{constructor(){super({}),this.root.push(new lu(oC.COLUMN))}},uu=class extends Y{constructor(){super("w:pageBreakBefore")}},cu={AT_LEAST:"atLeast",EXACTLY:"exactly",EXACT:"exact",AUTO:"auto"},rv=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{after:"w:after",before:"w:before",line:"w:line",lineRule:"w:lineRule",beforeAutoSpacing:"w:beforeAutospacing",afterAutoSpacing:"w:afterAutospacing"})}},fu=class extends Y{constructor(e){super("w:spacing"),this.root.push(new rv(e))}},uz={HEADING_1:"Heading1",HEADING_2:"Heading2",HEADING_3:"Heading3",HEADING_4:"Heading4",HEADING_5:"Heading5",HEADING_6:"Heading6",TITLE:"Title"},Jo=class extends Y{constructor(e){super("w:pStyle"),this.root.push(new Pe({val:e}))}},hu=class extends Y{constructor(e){super("w:tabs");for(let t of e)this.root.push(new pu(t))}},nv={LEFT:"left",RIGHT:"right",CENTER:"center",BAR:"bar",CLEAR:"clear",DECIMAL:"decimal",END:"end",NUM:"num",START:"start"},cz={DOT:"dot",HYPHEN:"hyphen",MIDDLE_DOT:"middleDot",NONE:"none",UNDERSCORE:"underscore"},fz={MAX:9026},du=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{val:"w:val",pos:"w:pos",leader:"w:leader"})}},pu=class extends Y{constructor({type:e,position:t,leader:n}){super("w:tab"),this.root.push(new du({val:e,pos:t,leader:n}))}},Ni=class extends Y{constructor(e,t){super("w:numPr"),this.root.push(new iv(t)),this.root.push(new ov(e))}},iv=class extends Y{constructor(e){if(super("w:ilvl"),e>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new Pe({val:e}))}},ov=class extends Y{constructor(e){super("w:numId"),this.root.push(new Pe({val:typeof e=="string"?`{${e}}`:e}))}},Bn=class extends Y{constructor(){super(...arguments),ne(this,"fileChild",Symbol())}},sv=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{id:"r:id",history:"w:history",anchor:"w:anchor"})}},hz={INTERNAL:"INTERNAL",EXTERNAL:"EXTERNAL"},ln=class extends Y{constructor(e,t,n){super("w:hyperlink"),ne(this,"linkId"),this.linkId=t;let i={history:1,anchor:n||void 0,id:n?void 0:`rId${this.linkId}`},o=new sv(i);this.root.push(o),e.forEach(s=>{this.root.push(s)})}},av=class extends ln{constructor(e){super(e.children,_s(),e.anchor)}},ss=class extends Y{constructor(e){super("w:externalHyperlink"),this.options=e}},lv=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{id:"w:id",name:"w:name"})}},uv=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{id:"w:id"})}},mu=class{constructor(e){ne(this,"bookmarkUniqueNumericId",qO()),ne(this,"start"),ne(this,"children"),ne(this,"end");let t=this.bookmarkUniqueNumericId();this.start=new gu(e.id,t),this.children=e.children,this.end=new vu(t)}},gu=class extends Y{constructor(e,t){super("w:bookmarkStart");let n=new lv({name:e,id:t});this.root.push(n)}},vu=class extends Y{constructor(e){super("w:bookmarkEnd");let t=new uv({id:e});this.root.push(t)}},yu=class extends Y{constructor(e){super("w:outlineLvl"),this.level=e,this.root.push(new Pe({val:e}))}},cv=class extends Y{constructor(e,t={}){super("w:instrText"),this.root.push(new kt({space:At.PRESERVE}));let n=`PAGEREF ${e}`;t.hyperlink&&(n=`${n} \\h`),t.useRelativePosition&&(n=`${n} \\p`),this.root.push(n)}},fv=class extends dt{constructor(e,t={}){super({children:[new Ft(!0),new cv(e,t),new Bt]})}},sC={TOP:"top",CENTER:"center",BOTTOM:"bottom"},aC=ht(ke({},sC),{BOTH:"both"}),dz=aC,wu=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{verticalAlign:"w:val"})}},as=class extends Y{constructor(e){super("w:vAlign"),this.root.push(new wu({verticalAlign:e}))}},bu=class extends Y{constructor({space:e,count:t,separate:n,equalWidth:i,children:o}){super("w:cols"),this.root.push(new Tt({space:{key:"w:space",value:e===void 0?void 0:Ke(e)},count:{key:"w:num",value:t===void 0?void 0:et(t)},separate:{key:"w:sep",value:n},equalWidth:{key:"w:equalWidth",value:i}})),!i&&o&&o.forEach(s=>this.addChildElement(s))}},pz={DEFAULT:"default",LINES:"lines",LINES_AND_CHARS:"linesAndChars",SNAP_TO_CHARS:"snapToChars"},lC=({type:r,linePitch:e,charSpace:t})=>new be({name:"w:docGrid",attributes:{type:{key:"w:type",value:r},linePitch:{key:"w:linePitch",value:et(e)},charSpace:{key:"w:charSpace",value:t?et(t):void 0}}}),In={DEFAULT:"default",FIRST:"first",EVEN:"even"},hv=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{type:"w:type",id:"r:id"})}},dv={HEADER:"w:headerReference",FOOTER:"w:footerReference"},Ri=class extends Y{constructor(e,t){super(e),this.root.push(new hv({type:t.type||In.DEFAULT,id:`rId${t.id}`}))}},mz={NEW_PAGE:"newPage",NEW_SECTION:"newSection",CONTINUOUS:"continuous"},uC=({countBy:r,start:e,restart:t,distance:n})=>new be({name:"w:lnNumType",attributes:{countBy:{key:"w:countBy",value:r===void 0?void 0:et(r)},start:{key:"w:start",value:e===void 0?void 0:et(e)},restart:{key:"w:restart",value:t},distance:{key:"w:distance",value:n===void 0?void 0:Ke(n)}}}),gz={ALL_PAGES:"allPages",FIRST_PAGE:"firstPage",NOT_FIRST_PAGE:"notFirstPage"},vz={PAGE:"page",TEXT:"text"},yz={BACK:"back",FRONT:"front"},ku=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{display:"w:display",offsetFrom:"w:offsetFrom",zOrder:"w:zOrder"})}},Su=class extends zt{constructor(e){if(super("w:pgBorders"),!e)return this;e.pageBorders?this.root.push(new ku({display:e.pageBorders.display,offsetFrom:e.pageBorders.offsetFrom,zOrder:e.pageBorders.zOrder})):this.root.push(new ku({})),e.pageBorderTop&&this.root.push(new Ce("w:top",e.pageBorderTop)),e.pageBorderLeft&&this.root.push(new Ce("w:left",e.pageBorderLeft)),e.pageBorderBottom&&this.root.push(new Ce("w:bottom",e.pageBorderBottom)),e.pageBorderRight&&this.root.push(new Ce("w:right",e.pageBorderRight))}},xu=class extends Y{constructor(e,t,n,i,o,s,a){super("w:pgMar"),this.root.push(new Tt({top:{key:"w:top",value:yr(e)},right:{key:"w:right",value:Ke(t)},bottom:{key:"w:bottom",value:yr(n)},left:{key:"w:left",value:Ke(i)},header:{key:"w:header",value:Ke(o)},footer:{key:"w:footer",value:Ke(s)},gutter:{key:"w:gutter",value:Ke(a)}}))}},wz={HYPHEN:"hyphen",PERIOD:"period",COLON:"colon",EM_DASH:"emDash",EN_DASH:"endash"},Eu=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{start:"w:start",formatType:"w:fmt",separator:"w:chapSep"})}},_u=class extends Y{constructor({start:e,formatType:t,separator:n}){super("w:pgNumType"),this.root.push(new Eu({start:e===void 0?void 0:et(e),formatType:t,separator:n}))}},Tu={PORTRAIT:"portrait",LANDSCAPE:"landscape"},cC=({width:r,height:e,orientation:t,code:n})=>{let i=Ke(r),o=Ke(e);return new be({name:"w:pgSz",attributes:{width:{key:"w:w",value:t===Tu.LANDSCAPE?o:i},height:{key:"w:h",value:t===Tu.LANDSCAPE?i:o},orientation:{key:"w:orient",value:t},code:{key:"w:code",value:n}}})},bz={LEFT_TO_RIGHT_TOP_TO_BOTTOM:"lrTb",TOP_TO_BOTTOM_RIGHT_TO_LEFT:"tbRl"},pv=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{val:"w:val"})}},Au=class extends Y{constructor(e){super("w:textDirection"),this.root.push(new pv({val:e}))}},kz={NEXT_PAGE:"nextPage",NEXT_COLUMN:"nextColumn",CONTINUOUS:"continuous",EVEN_PAGE:"evenPage",ODD_PAGE:"oddPage"},Ou=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{val:"w:val"})}},Cu=class extends Y{constructor(e){super("w:type"),this.root.push(new Ou({val:e}))}},on={TOP:1440,RIGHT:1440,BOTTOM:1440,LEFT:1440,HEADER:708,FOOTER:708,GUTTER:0},zl={WIDTH:11906,HEIGHT:16838,ORIENTATION:Tu.PORTRAIT},Nu=class extends Y{constructor({page:{size:{width:e=zl.WIDTH,height:t=zl.HEIGHT,orientation:n=zl.ORIENTATION}={},margin:{top:i=on.TOP,right:o=on.RIGHT,bottom:s=on.BOTTOM,left:a=on.LEFT,header:l=on.HEADER,footer:u=on.FOOTER,gutter:c=on.GUTTER}={},pageNumbers:f={},borders:h,textDirection:d}={},grid:{linePitch:m=360,charSpace:g,type:b}={},headerWrapperGroup:p={},footerWrapperGroup:S={},lineNumbers:k,titlePage:w,verticalAlign:x,column:M,type:I}={}){super("w:sectPr"),this.addHeaderFooterGroup(dv.HEADER,p),this.addHeaderFooterGroup(dv.FOOTER,S),I&&this.root.push(new Cu(I)),this.root.push(cC({width:e,height:t,orientation:n})),this.root.push(new xu(i,o,s,a,l,u,c)),h&&this.root.push(new Su(h)),k&&this.root.push(uC(k)),this.root.push(new _u(f)),M&&this.root.push(new bu(M)),x&&this.root.push(new as(x)),w!==void 0&&this.root.push(new ce("w:titlePg",w)),d&&this.root.push(new Au(d)),this.root.push(lC({linePitch:m,charSpace:g,type:b}))}addHeaderFooterGroup(e,t){t.default&&this.root.push(new Ri(e,{type:In.DEFAULT,id:t.default.View.ReferenceId})),t.first&&this.root.push(new Ri(e,{type:In.FIRST,id:t.first.View.ReferenceId})),t.even&&this.root.push(new Ri(e,{type:In.EVEN,id:t.even.View.ReferenceId}))}},Ru=class extends Y{constructor(){super("w:body"),ne(this,"sections",[])}addSection(e){let t=this.sections.pop();this.root.push(this.createSectionParagraph(t)),this.sections.push(new Nu(e))}prepForXml(e){return this.sections.length===1&&(this.root.splice(0,1),this.root.push(this.sections.pop())),super.prepForXml(e)}push(e){this.root.push(e)}createSectionParagraph(e){let t=new kr({}),n=new br({});return n.push(e),t.addChildElement(n),t}},mv=class extends Y{constructor({width:e,space:t}){super("w:col"),this.root.push(new Tt({width:{key:"w:w",value:Ke(e)},space:{key:"w:space",value:t===void 0?void 0:Ke(t)}}))}},Mu={wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",aink:"http://schemas.microsoft.com/office/drawing/2016/ink",am3d:"http://schemas.microsoft.com/office/drawing/2017/model3d",w16cex:"http://schemas.microsoft.com/office/word/2018/wordml/cex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16:"http://schemas.microsoft.com/office/word/2018/wordml",w16sdtdh:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"},zn=class extends pe{constructor(e,t){super(ke({Ignorable:t},Object.fromEntries(e.map(n=>[n,Mu[n]])))),ne(this,"xmlKeys",ke({Ignorable:"mc:Ignorable"},Object.fromEntries(Object.keys(Mu).map(n=>[n,`xmlns:${n}`]))))}},Iu=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{color:"w:color",themeColor:"w:themeColor",themeShade:"w:themeShade",themeTint:"w:themeTint"})}},Pu=class extends Y{constructor(e){super("w:background"),this.root.push(new Iu({color:e.color===void 0?void 0:Dn(e.color),themeColor:e.themeColor,themeShade:e.themeShade===void 0?void 0:Om(e.themeShade),themeTint:e.themeTint===void 0?void 0:Om(e.themeTint)}))}},gv=class extends Y{constructor(e){super("w:document"),ne(this,"body"),this.root.push(new zn(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps","cx","cx1","cx2","cx3","cx4","cx5","cx6","cx7","cx8","aink","am3d","w16cex","w16cid","w16","w16sdtdh","w16se"],"w14 w15 wp14")),this.body=new Ru,e.background&&this.root.push(new Pu(e.background)),this.root.push(this.body)}add(e){return this.body.push(e),this}get Body(){return this.body}},Du=class{constructor(e){ne(this,"document"),ne(this,"relationships"),this.document=new gv(e),this.relationships=new Br}get View(){return this.document}get Relationships(){return this.relationships}},vv=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{val:"w:val"})}},yv=class extends Y{constructor(){super("w:wordWrap"),this.root.push(new vv({val:0}))}},Sz={NONE:"none",DROP:"drop",MARGIN:"margin"},xz={MARGIN:"margin",PAGE:"page",TEXT:"text"},Ez={AROUND:"around",AUTO:"auto",NONE:"none",NOT_BESIDE:"notBeside",THROUGH:"through",TIGHT:"tight"},fC=r=>{var e,t;return new be({name:"w:framePr",attributes:{anchorLock:{key:"w:anchorLock",value:r.anchorLock},dropCap:{key:"w:dropCap",value:r.dropCap},width:{key:"w:w",value:r.width},height:{key:"w:h",value:r.height},x:{key:"w:x",value:r.position?r.position.x:void 0},y:{key:"w:y",value:r.position?r.position.y:void 0},anchorHorizontal:{key:"w:hAnchor",value:r.anchor.horizontal},anchorVertical:{key:"w:vAnchor",value:r.anchor.vertical},spaceHorizontal:{key:"w:hSpace",value:(e=r.space)==null?void 0:e.horizontal},spaceVertical:{key:"w:vSpace",value:(t=r.space)==null?void 0:t.vertical},rule:{key:"w:hRule",value:r.rule},alignmentX:{key:"w:xAlign",value:r.alignment?r.alignment.x:void 0},alignmentY:{key:"w:yAlign",value:r.alignment?r.alignment.y:void 0},lines:{key:"w:lines",value:r.lines},wrap:{key:"w:wrap",value:r.wrap}}})},br=class extends zt{constructor(e){var t,n;if(super("w:pPr"),ne(this,"numberingReferences",[]),!e)return this;e.heading&&this.push(new Jo(e.heading)),e.bullet&&this.push(new Jo("ListParagraph")),e.numbering&&!e.style&&!e.heading&&(e.numbering.custom||this.push(new Jo("ListParagraph"))),e.style&&this.push(new Jo(e.style)),e.keepNext!==void 0&&this.push(new ce("w:keepNext",e.keepNext)),e.keepLines!==void 0&&this.push(new ce("w:keepLines",e.keepLines)),e.pageBreakBefore&&this.push(new uu),e.frame&&this.push(fC(e.frame)),e.widowControl!==void 0&&this.push(new ce("w:widowControl",e.widowControl)),e.bullet&&this.push(new Ni(1,e.bullet.level)),e.numbering?(this.numberingReferences.push({reference:e.numbering.reference,instance:(t=e.numbering.instance)!=null?t:0}),this.push(new Ni(`${e.numbering.reference}-${(n=e.numbering.instance)!=null?n:0}`,e.numbering.level))):e.numbering===!1&&this.push(new Ni(0,0)),e.border&&this.push(new Vl(e.border)),e.thematicBreak&&this.push(new $l),e.shading&&this.push(new Ln(e.shading)),e.wordWrap&&this.push(new yv),e.overflowPunctuation&&this.push(new ce("w:overflowPunct",e.overflowPunctuation));let i=[...e.rightTabStop!==void 0?[{type:nv.RIGHT,position:e.rightTabStop}]:[],...e.tabStops?e.tabStops:[],...e.leftTabStop!==void 0?[{type:nv.LEFT,position:e.leftTabStop}]:[]];i.length>0&&this.push(new hu(i)),e.bidirectional!==void 0&&this.push(new ce("w:bidi",e.bidirectional)),e.spacing&&this.push(new fu(e.spacing)),e.indent&&this.push(new Kl(e.indent)),e.contextualSpacing!==void 0&&this.push(new ce("w:contextualSpacing",e.contextualSpacing)),e.alignment&&this.push(new Zo(e.alignment)),e.outlineLevel!==void 0&&this.push(new yu(e.outlineLevel)),e.suppressLineNumbers!==void 0&&this.push(new ce("w:suppressLineNumbers",e.suppressLineNumbers)),e.autoSpaceEastAsianText!==void 0&&this.push(new ce("w:autoSpaceDN",e.autoSpaceEastAsianText)),e.run&&this.push(new Yt(e.run))}push(e){this.root.push(e)}prepForXml(e){if(e.viewWrapper instanceof Du)for(let t of this.numberingReferences)e.file.Numbering.createConcreteNumberingInstance(t.reference,t.instance);return super.prepForXml(e)}},kr=class extends Bn{constructor(e){if(super("w:p"),ne(this,"properties"),typeof e=="string")return this.properties=new br({}),this.root.push(this.properties),this.root.push(new Fn(e)),this;if(this.properties=new br(e),this.root.push(this.properties),e.text&&this.root.push(new Fn(e.text)),e.children)for(let t of e.children){if(t instanceof mu){this.root.push(t.start);for(let n of t.children)this.root.push(n);this.root.push(t.end);continue}this.root.push(t)}}prepForXml(e){for(let t of this.root)if(t instanceof ss){let n=this.root.indexOf(t),i=new ln(t.options.children,_s());e.viewWrapper.Relationships.createRelationship(i.linkId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",t.options.link,iC.EXTERNAL),this.root[n]=i}return super.prepForXml(e)}addRunToFront(e){return this.root.splice(1,0,e),this}},_z=class extends Y{constructor(e){super("m:oMath");for(let t of e.children)this.root.push(t)}},wv=class extends Y{constructor(e){super("m:t"),this.root.push(e)}},bv=class extends Y{constructor(e){super("m:r"),this.root.push(new wv(e))}},Lu=class extends Y{constructor(e){super("m:den");for(let t of e)this.root.push(t)}},Fu=class extends Y{constructor(e){super("m:num");for(let t of e)this.root.push(t)}},kv=class extends Y{constructor(e){super("m:f"),this.root.push(new Fu(e.numerator)),this.root.push(new Lu(e.denominator))}},hC=({accent:r})=>new be({name:"m:chr",attributes:{accent:{key:"m:val",value:r}}}),St=({children:r})=>new be({name:"m:e",children:r}),dC=({value:r})=>new be({name:"m:limLoc",attributes:{value:{key:"m:val",value:r||"undOvr"}}}),Tz=()=>new be({name:"m:subHide",attributes:{hide:{key:"m:val",value:1}}}),Az=()=>new be({name:"m:supHide",attributes:{hide:{key:"m:val",value:1}}}),Mw=({accent:r,hasSuperScript:e,hasSubScript:t,limitLocationVal:n})=>new be({name:"m:naryPr",children:[...r?[hC({accent:r})]:[],dC({value:n}),...e?[]:[Az()],...t?[]:[Tz()]]}),Fi=({children:r})=>new be({name:"m:sub",children:r}),Bi=({children:r})=>new be({name:"m:sup",children:r}),Sv=class extends Y{constructor(e){super("m:nary"),this.root.push(Mw({accent:"\u2211",hasSuperScript:!!e.superScript,hasSubScript:!!e.subScript})),e.subScript&&this.root.push(Fi({children:e.subScript})),e.superScript&&this.root.push(Bi({children:e.superScript})),this.root.push(St({children:e.children}))}},xv=class extends Y{constructor(e){super("m:nary"),this.root.push(Mw({accent:"",hasSuperScript:!!e.superScript,hasSubScript:!!e.subScript,limitLocationVal:"subSup"})),e.subScript&&this.root.push(Fi({children:e.subScript})),e.superScript&&this.root.push(Bi({children:e.superScript})),this.root.push(St({children:e.children}))}},ls=class extends Y{constructor(e){super("m:lim");for(let t of e)this.root.push(t)}},Ev=class extends Y{constructor(e){super("m:limUpp"),this.root.push(St({children:e.children})),this.root.push(new ls(e.limit))}},_v=class extends Y{constructor(e){super("m:limLow"),this.root.push(St({children:e.children})),this.root.push(new ls(e.limit))}},pC=()=>new be({name:"m:sSupPr"}),Tv=class extends Y{constructor(e){super("m:sSup"),this.root.push(pC()),this.root.push(St({children:e.children})),this.root.push(Bi({children:e.superScript}))}},mC=()=>new be({name:"m:sSubPr"}),Av=class extends Y{constructor(e){super("m:sSub"),this.root.push(mC()),this.root.push(St({children:e.children})),this.root.push(Fi({children:e.subScript}))}},gC=()=>new be({name:"m:sSubSupPr"}),Ov=class extends Y{constructor(e){super("m:sSubSup"),this.root.push(gC()),this.root.push(St({children:e.children})),this.root.push(Fi({children:e.subScript})),this.root.push(Bi({children:e.superScript}))}},vC=()=>new be({name:"m:sPrePr"}),Cv=class extends be{constructor({children:e,subScript:t,superScript:n}){super({name:"m:sPre",children:[vC(),St({children:e}),Fi({children:t}),Bi({children:n})]})}},Oz="",Bu=class extends Y{constructor(e){if(super("m:deg"),e)for(let t of e)this.root.push(t)}},Nv=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{hide:"m:val"})}},Rv=class extends Y{constructor(){super("m:degHide"),this.root.push(new Nv({hide:1}))}},zu=class extends Y{constructor(e){super("m:radPr"),e||this.root.push(new Rv)}},Mv=class extends Y{constructor(e){super("m:rad"),this.root.push(new zu(!!e.degree)),this.root.push(new Bu(e.degree)),this.root.push(St({children:e.children}))}},Hu=class extends Y{constructor(e){super("m:fName");for(let t of e)this.root.push(t)}},ju=class extends Y{constructor(){super("m:funcPr")}},Iv=class extends Y{constructor(e){super("m:func"),this.root.push(new ju),this.root.push(new Hu(e.name)),this.root.push(St({children:e.children}))}},Cz=({character:r})=>new be({name:"m:begChr",attributes:{character:{key:"m:val",value:r}}}),Nz=({character:r})=>new be({name:"m:endChr",attributes:{character:{key:"m:val",value:r}}}),Oc=({characters:r})=>new be({name:"m:dPr",children:r?[Cz({character:r.beginningCharacter}),Nz({character:r.endingCharacter})]:[]}),Pv=class extends Y{constructor(e){super("m:d"),this.root.push(Oc({})),this.root.push(St({children:e.children}))}},Dv=class extends Y{constructor(e){super("m:d"),this.root.push(Oc({characters:{beginningCharacter:"[",endingCharacter:"]"}})),this.root.push(St({children:e.children}))}},Lv=class extends Y{constructor(e){super("m:d"),this.root.push(Oc({characters:{beginningCharacter:"{",endingCharacter:"}"}})),this.root.push(St({children:e.children}))}},Fv=class extends Y{constructor(e){super("m:d"),this.root.push(Oc({characters:{beginningCharacter:"\u2329",endingCharacter:"\u232A"}})),this.root.push(St({children:e.children}))}},Bv=class extends Y{constructor(e){super("w:tblGrid");for(let t of e)this.root.push(new zv(t))}},zv=class extends Y{constructor(e){super("w:gridCol"),e!==void 0&&this.root.push(new Tt({width:{key:"w:w",value:Ke(e)}}))}},yC={TABLE:"w:tblCellMar",TABLE_CELL:"w:tcMar"},Uu=class extends zt{constructor(e,{marginUnitType:t=qu.DXA,top:n,left:i,bottom:o,right:s}){super(e),n!==void 0&&this.root.push(new wr("w:top",{type:t,size:n})),i!==void 0&&this.root.push(new wr("w:left",{type:t,size:i})),o!==void 0&&this.root.push(new wr("w:bottom",{type:t,size:o})),s!==void 0&&this.root.push(new wr("w:right",{type:t,size:s}))}},qu={AUTO:"auto",DXA:"dxa",NIL:"nil",PERCENTAGE:"pct"},wr=class extends Y{constructor(e,{type:t=qu.AUTO,size:n}){super(e);let i=n;t===qu.PERCENTAGE&&typeof n=="number"&&(i=`${n}%`),this.root.push(new Tt({type:{key:"w:type",value:t},size:{key:"w:w",value:Ow(i)}}))}},Wu=class extends zt{constructor(e){super("w:tcBorders"),e.top&&this.root.push(new Ce("w:top",e.top)),e.start&&this.root.push(new Ce("w:start",e.start)),e.left&&this.root.push(new Ce("w:left",e.left)),e.bottom&&this.root.push(new Ce("w:bottom",e.bottom)),e.end&&this.root.push(new Ce("w:end",e.end)),e.right&&this.root.push(new Ce("w:right",e.right))}},Hv=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{val:"w:val"})}},Vu=class extends Y{constructor(e){super("w:gridSpan"),this.root.push(new Hv({val:et(e)}))}},Iw={CONTINUE:"continue",RESTART:"restart"},jv=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{val:"w:val"})}},us=class extends Y{constructor(e){super("w:vMerge"),this.root.push(new jv({val:e}))}},Rz={BOTTOM_TO_TOP_LEFT_TO_RIGHT:"btLr",LEFT_TO_RIGHT_TOP_TO_BOTTOM:"lrTb",TOP_TO_BOTTOM_RIGHT_TO_LEFT:"tbRl"},Uv=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{val:"w:val"})}},$u=class extends Y{constructor(e){super("w:textDirection"),this.root.push(new Uv({val:e}))}},qv=class extends zt{constructor(e){super("w:tcPr"),e.width&&this.root.push(new wr("w:tcW",e.width)),e.columnSpan&&this.root.push(new Vu(e.columnSpan)),e.verticalMerge?this.root.push(new us(e.verticalMerge)):e.rowSpan&&e.rowSpan>1&&this.root.push(new us(Iw.RESTART)),e.borders&&this.root.push(new Wu(e.borders)),e.shading&&this.root.push(new Ln(e.shading)),e.margins&&this.root.push(new Uu(yC.TABLE_CELL,e.margins)),e.textDirection&&this.root.push(new $u(e.textDirection)),e.verticalAlign&&this.root.push(new as(e.verticalAlign))}},cs=class extends Y{constructor(e){super("w:tc"),this.options=e,this.root.push(new qv(e));for(let t of e.children)this.root.push(t)}prepForXml(e){return this.root[this.root.length-1]instanceof kr||this.root.push(new kr({})),super.prepForXml(e)}},Si={style:Ac.NONE,size:0,color:"auto"},xi={style:Ac.SINGLE,size:4,color:"auto"},fs=class extends Y{constructor(e){super("w:tblBorders"),e.top?this.root.push(new Ce("w:top",e.top)):this.root.push(new Ce("w:top",xi)),e.left?this.root.push(new Ce("w:left",e.left)):this.root.push(new Ce("w:left",xi)),e.bottom?this.root.push(new Ce("w:bottom",e.bottom)):this.root.push(new Ce("w:bottom",xi)),e.right?this.root.push(new Ce("w:right",e.right)):this.root.push(new Ce("w:right",xi)),e.insideHorizontal?this.root.push(new Ce("w:insideH",e.insideHorizontal)):this.root.push(new Ce("w:insideH",xi)),e.insideVertical?this.root.push(new Ce("w:insideV",e.insideVertical)):this.root.push(new Ce("w:insideV",xi))}};ne(fs,"NONE",{top:Si,bottom:Si,left:Si,right:Si,insideHorizontal:Si,insideVertical:Si});var Mz={MARGIN:"margin",PAGE:"page",TEXT:"text"},Iz={CENTER:"center",INSIDE:"inside",LEFT:"left",OUTSIDE:"outside",RIGHT:"right"},Pz={CENTER:"center",INSIDE:"inside",BOTTOM:"bottom",OUTSIDE:"outside",INLINE:"inline",TOP:"top"},Dz={NEVER:"never",OVERLAP:"overlap"},Ku=class extends Y{constructor({horizontalAnchor:e,verticalAnchor:t,absoluteHorizontalPosition:n,relativeHorizontalPosition:i,absoluteVerticalPosition:o,relativeVerticalPosition:s,bottomFromText:a,topFromText:l,leftFromText:u,rightFromText:c,overlap:f}){super("w:tblpPr"),this.root.push(new Tt({leftFromText:{key:"w:leftFromText",value:u===void 0?void 0:Ke(u)},rightFromText:{key:"w:rightFromText",value:c===void 0?void 0:Ke(c)},topFromText:{key:"w:topFromText",value:l===void 0?void 0:Ke(l)},bottomFromText:{key:"w:bottomFromText",value:a===void 0?void 0:Ke(a)},absoluteHorizontalPosition:{key:"w:tblpX",value:n===void 0?void 0:yr(n)},absoluteVerticalPosition:{key:"w:tblpY",value:o===void 0?void 0:yr(o)},horizontalAnchor:{key:"w:horzAnchor",value:e===void 0?void 0:e},relativeHorizontalPosition:{key:"w:tblpXSpec",value:i},relativeVerticalPosition:{key:"w:tblpYSpec",value:s},verticalAnchor:{key:"w:vertAnchor",value:t}})),f&&this.root.push(new ql("w:tblOverlap",f))}},Lz={AUTOFIT:"autofit",FIXED:"fixed"},Wv=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{type:"w:type"})}},Gu=class extends Y{constructor(e){super("w:tblLayout"),this.root.push(new Wv({type:e}))}},Fz={DXA:"dxa"},Ju=class extends Y{constructor({type:e=Fz.DXA,value:t}){super("w:tblCellSpacing"),this.root.push(new Tt({type:{key:"w:type",value:e},value:{key:"w:w",value:Ow(t)}}))}},Xu=class extends zt{constructor(e){super("w:tblPr"),e.style&&this.root.push(new Xt("w:tblStyle",e.style)),e.float&&this.root.push(new Ku(e.float)),e.visuallyRightToLeft!==void 0&&this.root.push(new ce("w:bidiVisual",e.visuallyRightToLeft)),e.width&&this.root.push(new wr("w:tblW",e.width)),e.alignment&&this.root.push(new Zo(e.alignment)),e.indent&&this.root.push(new wr("w:tblInd",e.indent)),e.borders&&this.root.push(new fs(e.borders)),e.shading&&this.root.push(new Ln(e.shading)),e.layout&&this.root.push(new Gu(e.layout)),e.cellMargin&&this.root.push(new Uu(yC.TABLE,e.cellMargin)),e.cellSpacing&&this.root.push(new Ju(e.cellSpacing))}},Vv=class extends Bn{constructor({rows:e,width:t,columnWidths:n=Array(Math.max(...e.map(d=>d.CellCount))).fill(100),margins:i,indent:o,float:s,layout:a,style:l,borders:u,alignment:c,visuallyRightToLeft:f,cellSpacing:h}){super("w:tbl"),this.root.push(new Xu({borders:u??{},width:t??{size:100},indent:o,float:s,layout:a,style:l,alignment:c,cellMargin:i,visuallyRightToLeft:f,cellSpacing:h})),this.root.push(new Bv(n));for(let d of e)this.root.push(d);e.forEach((d,m)=>{if(m===e.length-1)return;let g=0;d.cells.forEach(b=>{if(b.options.rowSpan&&b.options.rowSpan>1){let p=new cs({rowSpan:b.options.rowSpan-1,columnSpan:b.options.columnSpan,borders:b.options.borders,children:[],verticalMerge:Iw.CONTINUE});e[m+1].addCellToColumnIndex(p,g)}g+=b.options.columnSpan||1})})}},Bz={AUTO:"auto",ATLEAST:"atLeast",EXACT:"exact"},Yu=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{value:"w:val",rule:"w:hRule"})}},Zu=class extends Y{constructor(e,t){super("w:trHeight"),this.root.push(new Yu({value:Ke(e),rule:t}))}},Qu=class extends zt{constructor(e){super("w:trPr"),e.cantSplit!==void 0&&this.root.push(new ce("w:cantSplit",e.cantSplit)),e.tableHeader!==void 0&&this.root.push(new ce("w:tblHeader",e.tableHeader)),e.height&&this.root.push(new Zu(e.height.value,e.height.rule)),e.cellSpacing&&this.root.push(new Ju(e.cellSpacing))}},$v=class extends Y{constructor(e){super("w:tr"),this.options=e,this.root.push(new Qu(e));for(let t of e.children)this.root.push(t)}get CellCount(){return this.options.children.length}get cells(){return this.root.filter(e=>e instanceof cs)}addCellToIndex(e,t){this.root.splice(t+1,0,e)}addCellToColumnIndex(e,t){let n=this.columnIndexToRootIndex(t,!0);this.addCellToIndex(e,n-1)}rootIndexToColumnIndex(e){if(e<1||e>=this.root.length)throw new Error(`cell 'rootIndex' should between 1 to ${this.root.length-1}`);let t=0;for(let n=1;n<e;n++){let i=this.root[n];t+=i.options.columnSpan||1}return t}columnIndexToRootIndex(e,t=!1){if(e<0)throw new Error("cell 'columnIndex' should not less than zero");let n=0,i=1;for(;n<=e;){if(i>=this.root.length){if(t)return this.root.length;throw new Error(`cell 'columnIndex' should not great than ${n-1}`)}let o=this.root[i];i+=1,n+=o&&o.options.columnSpan||1}return i-1}},Kv=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}},Gv=class extends Y{constructor(){super("Properties"),this.root.push(new Kv({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"}))}},Jv=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{xmlns:"xmlns"})}},Xv=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{contentType:"ContentType",extension:"Extension"})}},Gt=class extends Y{constructor(e,t){super("Default"),this.root.push(new Xv({contentType:e,extension:t}))}},Yv=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{contentType:"ContentType",partName:"PartName"})}},_t=class extends Y{constructor(e,t){super("Override"),this.root.push(new Yv({contentType:e,partName:t}))}},Zv=class extends Y{constructor(){super("Types"),this.root.push(new Jv({xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"})),this.root.push(new Gt("image/png","png")),this.root.push(new Gt("image/jpeg","jpeg")),this.root.push(new Gt("image/jpeg","jpg")),this.root.push(new Gt("image/bmp","bmp")),this.root.push(new Gt("image/gif","gif")),this.root.push(new Gt("image/svg+xml","svg")),this.root.push(new Gt("application/vnd.openxmlformats-package.relationships+xml","rels")),this.root.push(new Gt("application/xml","xml")),this.root.push(new Gt("application/vnd.openxmlformats-officedocument.obfuscatedFont","odttf")),this.root.push(new _t("application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml","/word/document.xml")),this.root.push(new _t("application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml","/word/styles.xml")),this.root.push(new _t("application/vnd.openxmlformats-package.core-properties+xml","/docProps/core.xml")),this.root.push(new _t("application/vnd.openxmlformats-officedocument.custom-properties+xml","/docProps/custom.xml")),this.root.push(new _t("application/vnd.openxmlformats-officedocument.extended-properties+xml","/docProps/app.xml")),this.root.push(new _t("application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml","/word/numbering.xml")),this.root.push(new _t("application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml","/word/footnotes.xml")),this.root.push(new _t("application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml","/word/settings.xml")),this.root.push(new _t("application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml","/word/comments.xml")),this.root.push(new _t("application/vnd.openxmlformats-officedocument.wordprocessingml.fontTable+xml","/word/fontTable.xml"))}addFooter(e){this.root.push(new _t("application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml",`/word/footer${e}.xml`))}addHeader(e){this.root.push(new _t("application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml",`/word/header${e}.xml`))}},Qv=class extends Y{constructor(e){super("cp:coreProperties"),this.root.push(new zn(["cp","dc","dcterms","dcmitype","xsi"])),e.title&&this.root.push(new gr("dc:title",e.title)),e.subject&&this.root.push(new gr("dc:subject",e.subject)),e.creator&&this.root.push(new gr("dc:creator",e.creator)),e.keywords&&this.root.push(new gr("cp:keywords",e.keywords)),e.description&&this.root.push(new gr("dc:description",e.description)),e.lastModifiedBy&&this.root.push(new gr("cp:lastModifiedBy",e.lastModifiedBy)),e.revision&&this.root.push(new gr("cp:revision",String(e.revision))),this.root.push(new ec("dcterms:created")),this.root.push(new ec("dcterms:modified"))}},ey=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{type:"xsi:type"})}},ec=class extends Y{constructor(e){super(e),this.root.push(new ey({type:"dcterms:W3CDTF"})),this.root.push(PO(new Date))}},ty=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}},ry=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{fmtid:"fmtid",pid:"pid",name:"name"})}},ny=class extends Y{constructor(e,t){super("property"),this.root.push(new ry({fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:e.toString(),name:t.name})),this.root.push(new iy(t.value))}},iy=class extends Y{constructor(e){super("vt:lpwstr"),this.root.push(e)}},oy=class extends Y{constructor(e){super("Properties"),ne(this,"nextId"),ne(this,"properties",[]),this.root.push(new ty({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"})),this.nextId=2;for(let t of e)this.addCustomProperty(t)}prepForXml(e){return this.properties.forEach(t=>this.root.push(t)),super.prepForXml(e)}addCustomProperty(e){this.properties.push(new ny(this.nextId++,e))}},zz={ANSI:"00",DEFAULT:"01",SYMBOL:"02",MAC:"4D",JIS:"80",HANGUL:"81",JOHAB:"82",GB_2312:"86",CHINESEBIG5:"88",GREEK:"A1",TURKISH:"A2",VIETNAMESE:"A3",HEBREW:"B1",ARABIC:"B2",BALTIC:"BA",RUSSIAN:"CC",THAI:"DE",EASTEUROPE:"EE",OEM:"FF"},Ll=({id:r,fontKey:e,subsetted:t},n)=>new be({name:n,attributes:ke({id:{key:"r:id",value:r}},e?{fontKey:{key:"w:fontKey",value:`{${e}}`}}:{}),children:[...t?[new ce("w:subsetted",t)]:[]]}),Hz=({name:r,altName:e,panose1:t,charset:n,family:i,notTrueType:o,pitch:s,sig:a,embedRegular:l,embedBold:u,embedItalic:c,embedBoldItalic:f})=>new be({name:"w:font",attributes:{name:{key:"w:name",value:r}},children:[...e?[_i("w:altName",e)]:[],...t?[_i("w:panose1",t)]:[],...n?[_i("w:charset",n)]:[],_i("w:family",i),...o?[new ce("w:notTrueType",o)]:[],_i("w:pitch",s),...a?[new be({name:"w:sig",attributes:{usb0:{key:"w:usb0",value:a.usb0},usb1:{key:"w:usb1",value:a.usb1},usb2:{key:"w:usb2",value:a.usb2},usb3:{key:"w:usb3",value:a.usb3},csb0:{key:"w:csb0",value:a.csb0},csb1:{key:"w:csb1",value:a.csb1}}})]:[],...l?[Ll(l,"w:embedRegular")]:[],...u?[Ll(u,"w:embedBold")]:[],...c?[Ll(c,"w:embedItalic")]:[],...f?[Ll(f,"w:embedBoldItalic")]:[]]}),jz=({name:r,index:e,fontKey:t,characterSet:n})=>Hz({name:r,sig:{usb0:"E0002AFF",usb1:"C000247B",usb2:"00000009",usb3:"00000000",csb0:"000001FF",csb1:"00000000"},charset:n,family:"auto",pitch:"variable",embedRegular:{fontKey:t,id:`rId${e}`}}),Uz=r=>new be({name:"w:fonts",attributes:{mc:{key:"xmlns:mc",value:"http://schemas.openxmlformats.org/markup-compatibility/2006"},r:{key:"xmlns:r",value:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"},w:{key:"xmlns:w",value:"http://schemas.openxmlformats.org/wordprocessingml/2006/main"},w14:{key:"xmlns:w14",value:"http://schemas.microsoft.com/office/word/2010/wordml"},w15:{key:"xmlns:w15",value:"http://schemas.microsoft.com/office/word/2012/wordml"},w16cex:{key:"xmlns:w16cex",value:"http://schemas.microsoft.com/office/word/2018/wordml/cex"},w16cid:{key:"xmlns:w16cid",value:"http://schemas.microsoft.com/office/word/2016/wordml/cid"},w16:{key:"xmlns:w16",value:"http://schemas.microsoft.com/office/word/2018/wordml"},w16sdtdh:{key:"xmlns:w16sdtdh",value:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash"},w16se:{key:"xmlns:w16se",value:"http://schemas.microsoft.com/office/word/2015/wordml/symex"},Ignorable:{key:"mc:Ignorable",value:"w14 w15 w16se w16cid w16 w16cex w16sdtdh"}},children:r.map((e,t)=>jz({name:e.name,index:t+1,fontKey:e.fontKey}))}),sy=class{constructor(e){ne(this,"fontTable"),ne(this,"relationships"),ne(this,"fontOptionsWithKey",[]),this.options=e,this.fontOptionsWithKey=e.map(t=>ht(ke({},t),{fontKey:WO()})),this.fontTable=Uz(this.fontOptionsWithKey),this.relationships=new Br;for(let t=0;t<e.length;t++)this.relationships.createRelationship(t+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/font",`fonts/${e[t].name}.odttf`)}get View(){return this.fontTable}get Relationships(){return this.relationships}},ay=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"})}},qz=class extends Yo{constructor(e,t){super("w:ftr",t),ne(this,"refId"),this.refId=e,t||this.root.push(new ay({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}))}get ReferenceId(){return this.refId}add(e){this.root.push(e)}},tc=class{constructor(e,t,n){ne(this,"footer"),ne(this,"relationships"),this.media=e,this.footer=new qz(t,n),this.relationships=new Br}add(e){this.footer.add(e)}addChildElement(e){this.footer.addChildElement(e)}get View(){return this.footer}get Relationships(){return this.relationships}get Media(){return this.media}},ly=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{type:"w:type",id:"w:id"})}},uy=class extends Y{constructor(){super("w:footnoteRef")}},cy=class extends dt{constructor(){super({style:"FootnoteReference"}),this.root.push(new uy)}},GA={SEPERATOR:"separator",CONTINUATION_SEPERATOR:"continuationSeparator"},Xo=class extends Y{constructor(e){super("w:footnote"),this.root.push(new ly({type:e.type,id:e.id}));for(let t=0;t<e.children.length;t++){let n=e.children[t];t===0&&n.addRunToFront(new cy),this.root.push(n)}}},fy=class extends Y{constructor(){super("w:continuationSeparator")}},hy=class extends dt{constructor(){super({}),this.root.push(new fy)}},dy=class extends Y{constructor(){super("w:separator")}},py=class extends dt{constructor(){super({}),this.root.push(new dy)}},my=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}},rc=class extends Y{constructor(){super("w:footnotes"),this.root.push(new my({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));let e=new Xo({id:-1,type:GA.SEPERATOR,children:[new kr({spacing:{after:0,line:240,lineRule:cu.AUTO},children:[new py]})]});this.root.push(e);let t=new Xo({id:0,type:GA.CONTINUATION_SEPERATOR,children:[new kr({spacing:{after:0,line:240,lineRule:cu.AUTO},children:[new hy]})]});this.root.push(t)}createFootNote(e,t){let n=new Xo({id:e,children:t});this.root.push(n)}},gy=class{constructor(){ne(this,"footnotess"),ne(this,"relationships"),this.footnotess=new rc,this.relationships=new Br}get View(){return this.footnotess}get Relationships(){return this.relationships}},vy=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",w16cid:"xmlns:w16cid",w16se:"xmlns:w16se"})}},Wz=class extends Yo{constructor(e,t){super("w:hdr",t),ne(this,"refId"),this.refId=e,t||this.root.push(new vy({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"}))}get ReferenceId(){return this.refId}add(e){this.root.push(e)}},nc=class{constructor(e,t,n){ne(this,"header"),ne(this,"relationships"),this.media=e,this.header=new Wz(t,n),this.relationships=new Br}add(e){return this.header.add(e),this}addChildElement(e){this.header.addChildElement(e)}get View(){return this.header}get Relationships(){return this.relationships}get Media(){return this.media}},hs=class{constructor(){ne(this,"map"),this.map=new Map}addImage(e,t){this.map.set(e,t)}get Array(){return Array.from(this.map.values())}},Vz="",dr={DECIMAL:"decimal",UPPER_ROMAN:"upperRoman",LOWER_ROMAN:"lowerRoman",UPPER_LETTER:"upperLetter",LOWER_LETTER:"lowerLetter",ORDINAL:"ordinal",CARDINAL_TEXT:"cardinalText",ORDINAL_TEXT:"ordinalText",HEX:"hex",CHICAGO:"chicago",IDEOGRAPH__DIGITAL:"ideographDigital",JAPANESE_COUNTING:"japaneseCounting",AIUEO:"aiueo",IROHA:"iroha",DECIMAL_FULL_WIDTH:"decimalFullWidth",DECIMAL_HALF_WIDTH:"decimalHalfWidth",JAPANESE_LEGAL:"japaneseLegal",JAPANESE_DIGITAL_TEN_THOUSAND:"japaneseDigitalTenThousand",DECIMAL_ENCLOSED_CIRCLE:"decimalEnclosedCircle",DECIMAL_FULL_WIDTH2:"decimalFullWidth2",AIUEO_FULL_WIDTH:"aiueoFullWidth",IROHA_FULL_WIDTH:"irohaFullWidth",DECIMAL_ZERO:"decimalZero",BULLET:"bullet",GANADA:"ganada",CHOSUNG:"chosung",DECIMAL_ENCLOSED_FULLSTOP:"decimalEnclosedFullstop",DECIMAL_ENCLOSED_PARENTHESES:"decimalEnclosedParen",DECIMAL_ENCLOSED_CIRCLE_CHINESE:"decimalEnclosedCircleChinese",IDEOGRAPH_ENCLOSED_CIRCLE:"ideographEnclosedCircle",IDEOGRAPH_TRADITIONAL:"ideographTraditional",IDEOGRAPH_ZODIAC:"ideographZodiac",IDEOGRAPH_ZODIAC_TRADITIONAL:"ideographZodiacTraditional",TAIWANESE_COUNTING:"taiwaneseCounting",IDEOGRAPH_LEGAL_TRADITIONAL:"ideographLegalTraditional",TAIWANESE_COUNTING_THOUSAND:"taiwaneseCountingThousand",TAIWANESE_DIGITAL:"taiwaneseDigital",CHINESE_COUNTING:"chineseCounting",CHINESE_LEGAL_SIMPLIFIED:"chineseLegalSimplified",CHINESE_COUNTING_THOUSAND:"chineseCountingThousand",KOREAN_DIGITAL:"koreanDigital",KOREAN_COUNTING:"koreanCounting",KOREAN_LEGAL:"koreanLegal",KOREAN_DIGITAL2:"koreanDigital2",VIETNAMESE_COUNTING:"vietnameseCounting",RUSSIAN_LOWER:"russianLower",RUSSIAN_UPPER:"russianUpper",NONE:"none",NUMBER_IN_DASH:"numberInDash",HEBREW1:"hebrew1",HEBREW2:"hebrew2",ARABIC_ALPHA:"arabicAlpha",ARABIC_ABJAD:"arabicAbjad",HINDI_VOWELS:"hindiVowels",HINDI_CONSONANTS:"hindiConsonants",HINDI_NUMBERS:"hindiNumbers",HINDI_COUNTING:"hindiCounting",THAI_LETTERS:"thaiLetters",THAI_NUMBERS:"thaiNumbers",THAI_COUNTING:"thaiCounting",BAHT_TEXT:"bahtText",DOLLAR_TEXT:"dollarText",CUSTOM:"custom"},yy=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{ilvl:"w:ilvl",tentative:"w15:tentative"})}},wy=class extends Y{constructor(e){super("w:numFmt"),this.root.push(new Pe({val:e}))}},by=class extends Y{constructor(e){super("w:lvlText"),this.root.push(new Pe({val:e}))}},ky=class extends Y{constructor(e){super("w:lvlJc"),this.root.push(new Pe({val:e}))}},$z={NOTHING:"nothing",SPACE:"space",TAB:"tab"},Sy=class extends Y{constructor(e){super("w:suff"),this.root.push(new Pe({val:e}))}},xy=class extends Y{constructor(){super("w:isLgl")}},ds=class extends Y{constructor({level:e,format:t,text:n,alignment:i=Kt.START,start:o=1,style:s,suffix:a,isLegalNumberingStyle:l}){if(super("w:lvl"),ne(this,"paragraphProperties"),ne(this,"runProperties"),this.root.push(new an("w:start",et(o))),t&&this.root.push(new wy(t)),a&&this.root.push(new Sy(a)),l&&this.root.push(new xy),n&&this.root.push(new by(n)),this.root.push(new ky(i)),this.paragraphProperties=new br(s&&s.paragraph),this.runProperties=new Yt(s&&s.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties),e>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new yy({ilvl:et(e),tentative:1}))}},ic=class extends ds{},Ey=class extends ds{},_y=class extends Y{constructor(e){super("w:multiLevelType"),this.root.push(new Pe({val:e}))}},Ty=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{abstractNumId:"w:abstractNumId",restartNumberingAfterBreak:"w15:restartNumberingAfterBreak"})}},ps=class extends Y{constructor(e,t){super("w:abstractNum"),ne(this,"id"),this.root.push(new Ty({abstractNumId:et(e),restartNumberingAfterBreak:0})),this.root.push(new _y("hybridMultilevel")),this.id=e;for(let n of t)this.root.push(new ic(n))}},Ay=class extends Y{constructor(e){super("w:abstractNumId"),this.root.push(new Pe({val:e}))}},Oy=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{numId:"w:numId"})}},ms=class extends Y{constructor(e){if(super("w:num"),ne(this,"numId"),ne(this,"reference"),ne(this,"instance"),this.numId=e.numId,this.reference=e.reference,this.instance=e.instance,this.root.push(new Oy({numId:et(e.numId)})),this.root.push(new Ay(et(e.abstractNumId))),e.overrideLevels&&e.overrideLevels.length)for(let t of e.overrideLevels)this.root.push(new oc(t.num,t.start))}},Cy=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{ilvl:"w:ilvl"})}},oc=class extends Y{constructor(e,t){super("w:lvlOverride"),this.root.push(new Cy({ilvl:e})),t!==void 0&&this.root.push(new Ry(t))}},Ny=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{val:"w:val"})}},Ry=class extends Y{constructor(e){super("w:startOverride"),this.root.push(new Ny({val:e}))}},sc=class extends Y{constructor(e){super("w:numbering"),ne(this,"abstractNumberingMap",new Map),ne(this,"concreteNumberingMap",new Map),ne(this,"referenceConfigMap",new Map),ne(this,"abstractNumUniqueNumericId",HO()),ne(this,"concreteNumUniqueNumericId",jO()),this.root.push(new zn(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps"],"w14 w15 wp14"));let t=new ps(this.abstractNumUniqueNumericId(),[{level:0,format:dr.BULLET,text:"\u25CF",alignment:Kt.LEFT,style:{paragraph:{indent:{left:Lt(.5),hanging:Lt(.25)}}}},{level:1,format:dr.BULLET,text:"\u25CB",alignment:Kt.LEFT,style:{paragraph:{indent:{left:Lt(1),hanging:Lt(.25)}}}},{level:2,format:dr.BULLET,text:"\u25A0",alignment:Kt.LEFT,style:{paragraph:{indent:{left:2160,hanging:Lt(.25)}}}},{level:3,format:dr.BULLET,text:"\u25CF",alignment:Kt.LEFT,style:{paragraph:{indent:{left:2880,hanging:Lt(.25)}}}},{level:4,format:dr.BULLET,text:"\u25CB",alignment:Kt.LEFT,style:{paragraph:{indent:{left:3600,hanging:Lt(.25)}}}},{level:5,format:dr.BULLET,text:"\u25A0",alignment:Kt.LEFT,style:{paragraph:{indent:{left:4320,hanging:Lt(.25)}}}},{level:6,format:dr.BULLET,text:"\u25CF",alignment:Kt.LEFT,style:{paragraph:{indent:{left:5040,hanging:Lt(.25)}}}},{level:7,format:dr.BULLET,text:"\u25CF",alignment:Kt.LEFT,style:{paragraph:{indent:{left:5760,hanging:Lt(.25)}}}},{level:8,format:dr.BULLET,text:"\u25CF",alignment:Kt.LEFT,style:{paragraph:{indent:{left:6480,hanging:Lt(.25)}}}}]);this.concreteNumberingMap.set("default-bullet-numbering",new ms({numId:1,abstractNumId:t.id,reference:"default-bullet-numbering",instance:0,overrideLevels:[{num:0,start:1}]})),this.abstractNumberingMap.set("default-bullet-numbering",t);for(let n of e.config)this.abstractNumberingMap.set(n.reference,new ps(this.abstractNumUniqueNumericId(),n.levels)),this.referenceConfigMap.set(n.reference,n.levels)}prepForXml(e){for(let t of this.abstractNumberingMap.values())this.root.push(t);for(let t of this.concreteNumberingMap.values())this.root.push(t);return super.prepForXml(e)}createConcreteNumberingInstance(e,t){let n=this.abstractNumberingMap.get(e);if(!n)return;let i=`${e}-${t}`;if(this.concreteNumberingMap.has(i))return;let o=this.referenceConfigMap.get(e),s=o&&o[0].start,a={numId:this.concreteNumUniqueNumericId(),abstractNumId:n.id,reference:e,instance:t,overrideLevels:[s&&Number.isInteger(s)?{num:0,start:s}:{num:0,start:1}]};this.concreteNumberingMap.set(i,new ms(a))}get ConcreteNumbering(){return Array.from(this.concreteNumberingMap.values())}get ReferenceConfig(){return Array.from(this.referenceConfigMap.values())}},My=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{version:"w:val",name:"w:name",uri:"w:uri"})}},Iy=class extends Y{constructor(e){super("w:compatSetting"),this.root.push(new My({version:e,uri:"http://schemas.microsoft.com/office/word",name:"compatibilityMode"}))}},Py=class extends Y{constructor(e){super("w:compat"),e.version&&this.root.push(new Iy(e.version)),e.useSingleBorderforContiguousCells&&this.root.push(new ce("w:useSingleBorderforContiguousCells",e.useSingleBorderforContiguousCells)),e.wordPerfectJustification&&this.root.push(new ce("w:wpJustification",e.wordPerfectJustification)),e.noTabStopForHangingIndent&&this.root.push(new ce("w:noTabHangInd",e.noTabStopForHangingIndent)),e.noLeading&&this.root.push(new ce("w:noLeading",e.noLeading)),e.spaceForUnderline&&this.root.push(new ce("w:spaceForUL",e.spaceForUnderline)),e.noColumnBalance&&this.root.push(new ce("w:noColumnBalance",e.noColumnBalance)),e.balanceSingleByteDoubleByteWidth&&this.root.push(new ce("w:balanceSingleByteDoubleByteWidth",e.balanceSingleByteDoubleByteWidth)),e.noExtraLineSpacing&&this.root.push(new ce("w:noExtraLineSpacing",e.noExtraLineSpacing)),e.doNotLeaveBackslashAlone&&this.root.push(new ce("w:doNotLeaveBackslashAlone",e.doNotLeaveBackslashAlone)),e.underlineTrailingSpaces&&this.root.push(new ce("w:ulTrailSpace",e.underlineTrailingSpaces)),e.doNotExpandShiftReturn&&this.root.push(new ce("w:doNotExpandShiftReturn",e.doNotExpandShiftReturn)),e.spacingInWholePoints&&this.root.push(new ce("w:spacingInWholePoints",e.spacingInWholePoints)),e.lineWrapLikeWord6&&this.root.push(new ce("w:lineWrapLikeWord6",e.lineWrapLikeWord6)),e.printBodyTextBeforeHeader&&this.root.push(new ce("w:printBodyTextBeforeHeader",e.printBodyTextBeforeHeader)),e.printColorsBlack&&this.root.push(new ce("w:printColBlack",e.printColorsBlack)),e.spaceWidth&&this.root.push(new ce("w:wpSpaceWidth",e.spaceWidth)),e.showBreaksInFrames&&this.root.push(new ce("w:showBreaksInFrames",e.showBreaksInFrames)),e.subFontBySize&&this.root.push(new ce("w:subFontBySize",e.subFontBySize)),e.suppressBottomSpacing&&this.root.push(new ce("w:suppressBottomSpacing",e.suppressBottomSpacing)),e.suppressTopSpacing&&this.root.push(new ce("w:suppressTopSpacing",e.suppressTopSpacing)),e.suppressSpacingAtTopOfPage&&this.root.push(new ce("w:suppressSpacingAtTopOfPage",e.suppressSpacingAtTopOfPage)),e.suppressTopSpacingWP&&this.root.push(new ce("w:suppressTopSpacingWP",e.suppressTopSpacingWP)),e.suppressSpBfAfterPgBrk&&this.root.push(new ce("w:suppressSpBfAfterPgBrk",e.suppressSpBfAfterPgBrk)),e.swapBordersFacingPages&&this.root.push(new ce("w:swapBordersFacingPages",e.swapBordersFacingPages)),e.convertMailMergeEsc&&this.root.push(new ce("w:convMailMergeEsc",e.convertMailMergeEsc)),e.truncateFontHeightsLikeWP6&&this.root.push(new ce("w:truncateFontHeightsLikeWP6",e.truncateFontHeightsLikeWP6)),e.macWordSmallCaps&&this.root.push(new ce("w:mwSmallCaps",e.macWordSmallCaps)),e.usePrinterMetrics&&this.root.push(new ce("w:usePrinterMetrics",e.usePrinterMetrics)),e.doNotSuppressParagraphBorders&&this.root.push(new ce("w:doNotSuppressParagraphBorders",e.doNotSuppressParagraphBorders)),e.wrapTrailSpaces&&this.root.push(new ce("w:wrapTrailSpaces",e.wrapTrailSpaces)),e.footnoteLayoutLikeWW8&&this.root.push(new ce("w:footnoteLayoutLikeWW8",e.footnoteLayoutLikeWW8)),e.shapeLayoutLikeWW8&&this.root.push(new ce("w:shapeLayoutLikeWW8",e.shapeLayoutLikeWW8)),e.alignTablesRowByRow&&this.root.push(new ce("w:alignTablesRowByRow",e.alignTablesRowByRow)),e.forgetLastTabAlignment&&this.root.push(new ce("w:forgetLastTabAlignment",e.forgetLastTabAlignment)),e.adjustLineHeightInTable&&this.root.push(new ce("w:adjustLineHeightInTable",e.adjustLineHeightInTable)),e.autoSpaceLikeWord95&&this.root.push(new ce("w:autoSpaceLikeWord95",e.autoSpaceLikeWord95)),e.noSpaceRaiseLower&&this.root.push(new ce("w:noSpaceRaiseLower",e.noSpaceRaiseLower)),e.doNotUseHTMLParagraphAutoSpacing&&this.root.push(new ce("w:doNotUseHTMLParagraphAutoSpacing",e.doNotUseHTMLParagraphAutoSpacing)),e.layoutRawTableWidth&&this.root.push(new ce("w:layoutRawTableWidth",e.layoutRawTableWidth)),e.layoutTableRowsApart&&this.root.push(new ce("w:layoutTableRowsApart",e.layoutTableRowsApart)),e.useWord97LineBreakRules&&this.root.push(new ce("w:useWord97LineBreakRules",e.useWord97LineBreakRules)),e.doNotBreakWrappedTables&&this.root.push(new ce("w:doNotBreakWrappedTables",e.doNotBreakWrappedTables)),e.doNotSnapToGridInCell&&this.root.push(new ce("w:doNotSnapToGridInCell",e.doNotSnapToGridInCell)),e.selectFieldWithFirstOrLastCharacter&&this.root.push(new ce("w:selectFldWithFirstOrLastChar",e.selectFieldWithFirstOrLastCharacter)),e.applyBreakingRules&&this.root.push(new ce("w:applyBreakingRules",e.applyBreakingRules)),e.doNotWrapTextWithPunctuation&&this.root.push(new ce("w:doNotWrapTextWithPunct",e.doNotWrapTextWithPunctuation)),e.doNotUseEastAsianBreakRules&&this.root.push(new ce("w:doNotUseEastAsianBreakRules",e.doNotUseEastAsianBreakRules)),e.useWord2002TableStyleRules&&this.root.push(new ce("w:useWord2002TableStyleRules",e.useWord2002TableStyleRules)),e.growAutofit&&this.root.push(new ce("w:growAutofit",e.growAutofit)),e.useFELayout&&this.root.push(new ce("w:useFELayout",e.useFELayout)),e.useNormalStyleForList&&this.root.push(new ce("w:useNormalStyleForList",e.useNormalStyleForList)),e.doNotUseIndentAsNumberingTabStop&&this.root.push(new ce("w:doNotUseIndentAsNumberingTabStop",e.doNotUseIndentAsNumberingTabStop)),e.useAlternateEastAsianLineBreakRules&&this.root.push(new ce("w:useAltKinsokuLineBreakRules",e.useAlternateEastAsianLineBreakRules)),e.allowSpaceOfSameStyleInTable&&this.root.push(new ce("w:allowSpaceOfSameStyleInTable",e.allowSpaceOfSameStyleInTable)),e.doNotSuppressIndentation&&this.root.push(new ce("w:doNotSuppressIndentation",e.doNotSuppressIndentation)),e.doNotAutofitConstrainedTables&&this.root.push(new ce("w:doNotAutofitConstrainedTables",e.doNotAutofitConstrainedTables)),e.autofitToFirstFixedWidthCell&&this.root.push(new ce("w:autofitToFirstFixedWidthCell",e.autofitToFirstFixedWidthCell)),e.underlineTabInNumberingList&&this.root.push(new ce("w:underlineTabInNumList",e.underlineTabInNumberingList)),e.displayHangulFixedWidth&&this.root.push(new ce("w:displayHangulFixedWidth",e.displayHangulFixedWidth)),e.splitPgBreakAndParaMark&&this.root.push(new ce("w:splitPgBreakAndParaMark",e.splitPgBreakAndParaMark)),e.doNotVerticallyAlignCellWithSp&&this.root.push(new ce("w:doNotVertAlignCellWithSp",e.doNotVerticallyAlignCellWithSp)),e.doNotBreakConstrainedForcedTable&&this.root.push(new ce("w:doNotBreakConstrainedForcedTable",e.doNotBreakConstrainedForcedTable)),e.ignoreVerticalAlignmentInTextboxes&&this.root.push(new ce("w:doNotVertAlignInTxbx",e.ignoreVerticalAlignmentInTextboxes)),e.useAnsiKerningPairs&&this.root.push(new ce("w:useAnsiKerningPairs",e.useAnsiKerningPairs)),e.cachedColumnBalance&&this.root.push(new ce("w:cachedColBalance",e.cachedColumnBalance))}},Dy=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}},Ly=class extends Y{constructor(e){var t,n,i,o,s,a,l,u;super("w:settings"),this.root.push(new Dy({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.root.push(new ce("w:displayBackgroundShape",!0)),e.trackRevisions!==void 0&&this.root.push(new ce("w:trackRevisions",e.trackRevisions)),e.evenAndOddHeaders!==void 0&&this.root.push(new ce("w:evenAndOddHeaders",e.evenAndOddHeaders)),e.updateFields!==void 0&&this.root.push(new ce("w:updateFields",e.updateFields)),e.defaultTabStop!==void 0&&this.root.push(new an("w:defaultTabStop",e.defaultTabStop)),((t=e.hyphenation)==null?void 0:t.autoHyphenation)!==void 0&&this.root.push(new ce("w:autoHyphenation",e.hyphenation.autoHyphenation)),((n=e.hyphenation)==null?void 0:n.hyphenationZone)!==void 0&&this.root.push(new an("w:hyphenationZone",e.hyphenation.hyphenationZone)),((i=e.hyphenation)==null?void 0:i.consecutiveHyphenLimit)!==void 0&&this.root.push(new an("w:consecutiveHyphenLimit",e.hyphenation.consecutiveHyphenLimit)),((o=e.hyphenation)==null?void 0:o.doNotHyphenateCaps)!==void 0&&this.root.push(new ce("w:doNotHyphenateCaps",e.hyphenation.doNotHyphenateCaps)),this.root.push(new Py(ht(ke({},(s=e.compatibility)!=null?s:{}),{version:(u=(l=(a=e.compatibility)==null?void 0:a.version)!=null?l:e.compatibilityModeVersion)!=null?u:15})))}},ac=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{val:"w:val"})}},Fy=class extends Y{constructor(e){super("w:name"),this.root.push(new ac({val:e}))}},By=class extends Y{constructor(e){super("w:uiPriority"),this.root.push(new ac({val:et(e)}))}},zy=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{type:"w:type",styleId:"w:styleId",default:"w:default",customStyle:"w:customStyle"})}},lc=class extends Y{constructor(e,t){super("w:style"),this.root.push(new zy(e)),t.name&&this.root.push(new Fy(t.name)),t.basedOn&&this.root.push(new Xt("w:basedOn",t.basedOn)),t.next&&this.root.push(new Xt("w:next",t.next)),t.link&&this.root.push(new Xt("w:link",t.link)),t.uiPriority!==void 0&&this.root.push(new By(t.uiPriority)),t.semiHidden!==void 0&&this.root.push(new ce("w:semiHidden",t.semiHidden)),t.unhideWhenUsed!==void 0&&this.root.push(new ce("w:unhideWhenUsed",t.unhideWhenUsed)),t.quickFormat!==void 0&&this.root.push(new ce("w:qFormat",t.quickFormat))}},Hn=class extends lc{constructor(e){super({type:"paragraph",styleId:e.id},e),ne(this,"paragraphProperties"),ne(this,"runProperties"),this.paragraphProperties=new br(e.paragraph),this.runProperties=new Yt(e.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties)}},jn=class extends lc{constructor(e){super({type:"character",styleId:e.id},ke({uiPriority:99,unhideWhenUsed:!0},e)),ne(this,"runProperties"),this.runProperties=new Yt(e.run),this.root.push(this.runProperties)}},Sr=class extends Hn{constructor(e){super(ke({basedOn:"Normal",next:"Normal",quickFormat:!0},e))}},Hy=class extends Sr{constructor(e){super(ke({id:"Title",name:"Title"},e))}},jy=class extends Sr{constructor(e){super(ke({id:"Heading1",name:"Heading 1"},e))}},Uy=class extends Sr{constructor(e){super(ke({id:"Heading2",name:"Heading 2"},e))}},qy=class extends Sr{constructor(e){super(ke({id:"Heading3",name:"Heading 3"},e))}},Wy=class extends Sr{constructor(e){super(ke({id:"Heading4",name:"Heading 4"},e))}},Vy=class extends Sr{constructor(e){super(ke({id:"Heading5",name:"Heading 5"},e))}},$y=class extends Sr{constructor(e){super(ke({id:"Heading6",name:"Heading 6"},e))}},Ky=class extends Sr{constructor(e){super(ke({id:"Strong",name:"Strong"},e))}},Gy=class extends Hn{constructor(e){super(ke({id:"ListParagraph",name:"List Paragraph",basedOn:"Normal",quickFormat:!0},e))}},Jy=class extends Hn{constructor(e){super(ke({id:"FootnoteText",name:"footnote text",link:"FootnoteTextChar",basedOn:"Normal",uiPriority:99,semiHidden:!0,unhideWhenUsed:!0,paragraph:{spacing:{after:0,line:240,lineRule:cu.AUTO}},run:{size:20}},e))}},Xy=class extends jn{constructor(e){super(ke({id:"FootnoteReference",name:"footnote reference",basedOn:"DefaultParagraphFont",semiHidden:!0,run:{superScript:!0}},e))}},Yy=class extends jn{constructor(e){super(ke({id:"FootnoteTextChar",name:"Footnote Text Char",basedOn:"DefaultParagraphFont",link:"FootnoteText",semiHidden:!0,run:{size:20}},e))}},Zy=class extends jn{constructor(e){super(ke({id:"Hyperlink",name:"Hyperlink",basedOn:"DefaultParagraphFont",run:{color:"0563C1",underline:{type:Rw.SINGLE}}},e))}},Di=class extends Y{constructor(e){if(super("w:styles"),e.initialStyles&&this.root.push(e.initialStyles),e.importedStyles)for(let t of e.importedStyles)this.root.push(t);if(e.paragraphStyles)for(let t of e.paragraphStyles)this.root.push(new Hn(t));if(e.characterStyles)for(let t of e.characterStyles)this.root.push(new jn(t))}},uc=class extends Y{constructor(e){super("w:pPrDefault"),this.root.push(new br(e))}},cc=class extends Y{constructor(e){super("w:rPrDefault"),this.root.push(new Yt(e))}},fc=class extends Y{constructor(e){super("w:docDefaults"),ne(this,"runPropertiesDefaults"),ne(this,"paragraphPropertiesDefaults"),this.runPropertiesDefaults=new cc(e.run),this.paragraphPropertiesDefaults=new uc(e.paragraph),this.root.push(this.runPropertiesDefaults),this.root.push(this.paragraphPropertiesDefaults)}},Qy=class{newInstance(e){let t=Ec.xml2js(e,{compact:!1}),n;for(let s of t.elements||[])s.name==="w:styles"&&(n=s);if(n===void 0)throw new Error("can not find styles element");let i=n.elements||[];return new Di({initialStyles:new Ul(n.attributes),importedStyles:i.map(s=>_c(s))})}},hc=class{newInstance(e={}){var t;return{initialStyles:new zn(["mc","r","w","w14","w15"],"w14 w15"),importedStyles:[new fc((t=e.document)!=null?t:{}),new Hy(ke({run:{size:56}},e.title)),new jy(ke({run:{color:"2E74B5",size:32}},e.heading1)),new Uy(ke({run:{color:"2E74B5",size:26}},e.heading2)),new qy(ke({run:{color:"1F4D78",size:24}},e.heading3)),new Wy(ke({run:{color:"2E74B5",italics:!0}},e.heading4)),new Vy(ke({run:{color:"2E74B5"}},e.heading5)),new $y(ke({run:{color:"1F4D78"}},e.heading6)),new Ky(ke({run:{bold:!0}},e.strong)),new Gy(e.listParagraph||{}),new Zy(e.hyperlink||{}),new Xy(e.footnoteReference||{}),new Jy(e.footnoteText||{}),new Yy(e.footnoteTextChar||{})]}}},dc=class{constructor(e){ne(this,"currentRelationshipId",1),ne(this,"documentWrapper"),ne(this,"headers",[]),ne(this,"footers",[]),ne(this,"coreProperties"),ne(this,"numbering"),ne(this,"media"),ne(this,"fileRelationships"),ne(this,"footnotesWrapper"),ne(this,"settings"),ne(this,"contentTypes"),ne(this,"customProperties"),ne(this,"appProperties"),ne(this,"styles"),ne(this,"comments"),ne(this,"fontWrapper");var t,n,i,o,s,a,l,u,c,f,h,d;if(this.coreProperties=new Qv(ht(ke({},e),{creator:(t=e.creator)!=null?t:"Un-named",revision:(n=e.revision)!=null?n:1,lastModifiedBy:(i=e.lastModifiedBy)!=null?i:"Un-named"})),this.numbering=new sc(e.numbering?e.numbering:{config:[]}),this.comments=new au((o=e.comments)!=null?o:{children:[]}),this.fileRelationships=new Br,this.customProperties=new oy((s=e.customProperties)!=null?s:[]),this.appProperties=new Gv,this.footnotesWrapper=new gy,this.contentTypes=new Zv,this.documentWrapper=new Du({background:e.background}),this.settings=new Ly({compatibilityModeVersion:e.compatabilityModeVersion,compatibility:e.compatibility,evenAndOddHeaders:!!e.evenAndOddHeaderAndFooters,trackRevisions:(a=e.features)==null?void 0:a.trackRevisions,updateFields:(l=e.features)==null?void 0:l.updateFields,defaultTabStop:e.defaultTabStop,hyphenation:{autoHyphenation:(u=e.hyphenation)==null?void 0:u.autoHyphenation,hyphenationZone:(c=e.hyphenation)==null?void 0:c.hyphenationZone,consecutiveHyphenLimit:(f=e.hyphenation)==null?void 0:f.consecutiveHyphenLimit,doNotHyphenateCaps:(h=e.hyphenation)==null?void 0:h.doNotHyphenateCaps}}),this.media=new hs,e.externalStyles!==void 0){let m=new Qy;this.styles=m.newInstance(e.externalStyles)}else if(e.styles){let g=new hc().newInstance(e.styles.default);this.styles=new Di(ke(ke({},g),e.styles))}else{let m=new hc;this.styles=new Di(m.newInstance())}this.addDefaultRelationships();for(let m of e.sections)this.addSection(m);if(e.footnotes)for(let m in e.footnotes)this.footnotesWrapper.View.createFootNote(parseFloat(m),e.footnotes[m].children);this.fontWrapper=new sy((d=e.fonts)!=null?d:[])}addSection({headers:e={},footers:t={},children:n,properties:i}){this.documentWrapper.View.Body.addSection(ht(ke({},i),{headerWrapperGroup:{default:e.default?this.createHeader(e.default):void 0,first:e.first?this.createHeader(e.first):void 0,even:e.even?this.createHeader(e.even):void 0},footerWrapperGroup:{default:t.default?this.createFooter(t.default):void 0,first:t.first?this.createFooter(t.first):void 0,even:t.even?this.createFooter(t.even):void 0}}));for(let o of n)this.documentWrapper.View.add(o)}createHeader(e){let t=new nc(this.media,this.currentRelationshipId++);for(let n of e.options.children)t.add(n);return this.addHeaderToDocument(t),t}createFooter(e){let t=new tc(this.media,this.currentRelationshipId++);for(let n of e.options.children)t.add(n);return this.addFooterToDocument(t),t}addHeaderToDocument(e,t=In.DEFAULT){this.headers.push({header:e,type:t}),this.documentWrapper.Relationships.createRelationship(e.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",`header${this.headers.length}.xml`),this.contentTypes.addHeader(this.headers.length)}addFooterToDocument(e,t=In.DEFAULT){this.footers.push({footer:e,type:t}),this.documentWrapper.Relationships.createRelationship(e.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",`footer${this.footers.length}.xml`),this.contentTypes.addFooter(this.footers.length)}addDefaultRelationships(){this.fileRelationships.createRelationship(1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument","word/document.xml"),this.fileRelationships.createRelationship(2,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties","docProps/core.xml"),this.fileRelationships.createRelationship(3,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties","docProps/app.xml"),this.fileRelationships.createRelationship(4,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties","docProps/custom.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles","styles.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering","numbering.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes","footnotes.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings","settings.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments","comments.xml")}get Document(){return this.documentWrapper}get Styles(){return this.styles}get CoreProperties(){return this.coreProperties}get Numbering(){return this.numbering}get Media(){return this.media}get FileRelationships(){return this.fileRelationships}get Headers(){return this.headers.map(e=>e.header)}get Footers(){return this.footers.map(e=>e.footer)}get ContentTypes(){return this.contentTypes}get CustomProperties(){return this.customProperties}get AppProperties(){return this.appProperties}get FootNotes(){return this.footnotesWrapper}get Settings(){return this.settings}get Comments(){return this.comments}get FontTable(){return this.fontWrapper}},ew=class extends Y{constructor(e={}){super("w:instrText"),ne(this,"properties"),this.properties=e,this.root.push(new kt({space:At.PRESERVE}));let t="TOC";if(this.properties.captionLabel&&(t=`${t} \\a "${this.properties.captionLabel}"`),this.properties.entriesFromBookmark&&(t=`${t} \\b "${this.properties.entriesFromBookmark}"`),this.properties.captionLabelIncludingNumbers&&(t=`${t} \\c "${this.properties.captionLabelIncludingNumbers}"`),this.properties.sequenceAndPageNumbersSeparator&&(t=`${t} \\d "${this.properties.sequenceAndPageNumbersSeparator}"`),this.properties.tcFieldIdentifier&&(t=`${t} \\f "${this.properties.tcFieldIdentifier}"`),this.properties.hyperlink&&(t=`${t} \\h`),this.properties.tcFieldLevelRange&&(t=`${t} \\l "${this.properties.tcFieldLevelRange}"`),this.properties.pageNumbersEntryLevelsRange&&(t=`${t} \\n "${this.properties.pageNumbersEntryLevelsRange}"`),this.properties.headingStyleRange&&(t=`${t} \\o "${this.properties.headingStyleRange}"`),this.properties.entryAndPageNumberSeparator&&(t=`${t} \\p "${this.properties.entryAndPageNumberSeparator}"`),this.properties.seqFieldIdentifierForPrefix&&(t=`${t} \\s "${this.properties.seqFieldIdentifierForPrefix}"`),this.properties.stylesWithLevels&&this.properties.stylesWithLevels.length){let n=this.properties.stylesWithLevels.map(i=>`${i.styleName},${i.level}`).join(",");t=`${t} \\t "${n}"`}this.properties.useAppliedParagraphOutlineLevel&&(t=`${t} \\u`),this.properties.preserveTabInEntries&&(t=`${t} \\w`),this.properties.preserveNewLineInEntries&&(t=`${t} \\x`),this.properties.hideTabAndPageNumbersInWebView&&(t=`${t} \\z`),this.root.push(t)}},pc=class extends Y{constructor(){super("w:sdtContent")}},mc=class extends Y{constructor(e){super("w:sdtPr"),e&&this.root.push(new Xt("w:alias",e))}},tw=class extends Bn{constructor(e="Table of Contents",t){super("w:sdt"),this.root.push(new mc(e));let n=new pc,i=new kr({children:[new dt({children:[new Ft(!0),new ew(t),new Jt]})]});n.addChildElement(i);let o=new kr({children:[new dt({children:[new Bt]})]});n.addChildElement(o),this.root.push(n)}},rw=class{constructor(e,t){ne(this,"styleName"),ne(this,"level"),this.styleName=e,this.level=t}},nw=class{constructor(e={children:[]}){ne(this,"options"),this.options=e}},iw=class{constructor(e={children:[]}){ne(this,"options"),this.options=e}},gc=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{id:"w:id"})}},vc=class extends Y{constructor(e){super("w:footnoteReference"),this.root.push(new gc({id:e}))}},ow=class extends dt{constructor(e){super({style:"FootnoteReference"}),this.root.push(new vc(e))}},sw=class extends Y{constructor(e){super("w:ins"),this.root.push(new es({id:e.id,author:e.author,date:e.date})),this.addChildElement(new Fn(e))}},aw=class extends Y{constructor(){super("w:delInstrText"),this.root.push(new kt({space:At.PRESERVE})),this.root.push("PAGE")}},lw=class extends Y{constructor(){super("w:delInstrText"),this.root.push(new kt({space:At.PRESERVE})),this.root.push("NUMPAGES")}},uw=class extends Y{constructor(){super("w:delInstrText"),this.root.push(new kt({space:At.PRESERVE})),this.root.push("SECTIONPAGES")}},yc=class extends Y{constructor(e){super("w:delText"),this.root.push(new kt({space:At.PRESERVE})),this.root.push(e)}},cw=class extends Y{constructor(e){super("w:del"),ne(this,"deletedTextRunWrapper"),this.root.push(new es({id:e.id,author:e.author,date:e.date})),this.deletedTextRunWrapper=new fw(e),this.addChildElement(this.deletedTextRunWrapper)}},fw=class extends Y{constructor(e){if(super("w:r"),this.root.push(new Yt(e)),e.children)for(let t of e.children){if(typeof t=="string"){switch(t){case sn.CURRENT:this.root.push(new Ft),this.root.push(new aw),this.root.push(new Jt),this.root.push(new Bt);break;case sn.TOTAL_PAGES:this.root.push(new Ft),this.root.push(new lw),this.root.push(new Jt),this.root.push(new Bt);break;case sn.TOTAL_PAGES_IN_SECTION:this.root.push(new Ft),this.root.push(new uw),this.root.push(new Jt),this.root.push(new Bt);break;default:this.root.push(new yc(t));break}continue}this.root.push(t)}else e.text&&this.root.push(new yc(e.text));if(e.break)for(let t=0;t<e.break;t++)this.root.splice(1,0,new DO)}},wc=class extends pe{constructor(){super(...arguments),ne(this,"xmlKeys",{val:"w14:val",symbolfont:"w14:font"})}},Mi=class extends Y{constructor(e,t,n){super(e),n?this.root.push(new wc({val:CO(t),symbolfont:n})):this.root.push(new wc({val:t}))}},bc=class extends Y{constructor(e){var t,n,i,o,s,a,l,u;super("w14:checkbox"),ne(this,"DEFAULT_UNCHECKED_SYMBOL","2610"),ne(this,"DEFAULT_CHECKED_SYMBOL","2612"),ne(this,"DEFAULT_FONT","MS Gothic");let c=e?.checked?"1":"0",f,h;this.root.push(new Mi("w14:checked",c)),f=(t=e?.checkedState)!=null&&t.value?(n=e?.checkedState)==null?void 0:n.value:this.DEFAULT_CHECKED_SYMBOL,h=(i=e?.checkedState)!=null&&i.font?(o=e?.checkedState)==null?void 0:o.font:this.DEFAULT_FONT,this.root.push(new Mi("w14:checkedState",f,h)),f=(s=e?.uncheckedState)!=null&&s.value?(a=e?.uncheckedState)==null?void 0:a.value:this.DEFAULT_UNCHECKED_SYMBOL,h=(l=e?.uncheckedState)!=null&&l.font?(u=e?.uncheckedState)==null?void 0:u.font:this.DEFAULT_FONT,this.root.push(new Mi("w14:uncheckedState",f,h))}},hw=class extends Y{constructor(e){var t,n,i,o;super("w:sdt"),ne(this,"DEFAULT_UNCHECKED_SYMBOL","2610"),ne(this,"DEFAULT_CHECKED_SYMBOL","2612"),ne(this,"DEFAULT_FONT","MS Gothic");let s=new mc(e?.alias);s.addChildElement(new bc(e)),this.root.push(s);let a=new pc,l=(t=e?.checkedState)==null?void 0:t.font,u=(n=e?.checkedState)==null?void 0:n.value,c=(i=e?.uncheckedState)==null?void 0:i.font,f=(o=e?.uncheckedState)==null?void 0:o.value,h,d;e?.checked?(h=l||this.DEFAULT_FONT,d=u||this.DEFAULT_CHECKED_SYMBOL):(h=c||this.DEFAULT_FONT,d=f||this.DEFAULT_UNCHECKED_SYMBOL);let m=new Zl({char:d,symbolfont:h});a.addChildElement(m),this.root.push(a)}},Kz=({shape:r})=>new be({name:"w:pict",children:[r]}),Gz=({children:r=[]})=>new be({name:"w:txbxContent",children:r}),Jz=({style:r,children:e,inset:t})=>new be({name:"v:textbox",attributes:{style:{key:"style",value:r},insetMode:{key:"insetmode",value:t?"custom":"auto"},inset:{key:"inset",value:t?`${t.left}, ${t.top}, ${t.right}, ${t.bottom}`:void 0}},children:[Gz({children:e})]}),Xz="#_x0000_t202",Yz={flip:"flip",height:"height",left:"left",marginBottom:"margin-bottom",marginLeft:"margin-left",marginRight:"margin-right",marginTop:"margin-top",positionHorizontal:"mso-position-horizontal",positionHorizontalRelative:"mso-position-horizontal-relative",positionVertical:"mso-position-vertical",positionVerticalRelative:"mso-position-vertical-relative",wrapDistanceBottom:"mso-wrap-distance-bottom",wrapDistanceLeft:"mso-wrap-distance-left",wrapDistanceRight:"mso-wrap-distance-right",wrapDistanceTop:"mso-wrap-distance-top",wrapEdited:"mso-wrap-edited",wrapStyle:"mso-wrap-style",position:"position",rotation:"rotation",top:"top",visibility:"visibility",width:"width",zIndex:"z-index"},Zz=r=>r?Object.entries(r).map(([e,t])=>`${Yz[e]}:${t}`).join(";"):void 0,Qz=({id:r,children:e,type:t=Xz,style:n})=>new be({name:"v:shape",attributes:{id:{key:"id",value:r},type:{key:"type",value:t},style:{key:"style",value:Zz(n)}},children:[Jz({style:"mso-fit-shape-to-text:t;",children:e})]}),dw=class extends Bn{constructor(e){var t=e,{style:n,children:i}=t,o=C4(t,["style","children"]);super("w:p"),this.root.push(new br(o)),this.root.push(Kz({shape:Qz({children:i,id:_s(),style:n})}))}},eH=Ew();function Fl(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ym={exports:{}},JA;function tH(){return JA||(JA=1,(function(r,e){(function(t){r.exports=t()})(function(){return(function t(n,i,o){function s(u,c){if(!i[u]){if(!n[u]){var f=typeof Fl=="function"&&Fl;if(!c&&f)return f(u,!0);if(a)return a(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var d=i[u]={exports:{}};n[u][0].call(d.exports,function(m){var g=n[u][1][m];return s(g||m)},d,d.exports,t,n,i,o)}return i[u].exports}for(var a=typeof Fl=="function"&&Fl,l=0;l<o.length;l++)s(o[l]);return s})({1:[function(t,n,i){var o=t("./utils"),s=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var u,c,f,h,d,m,g,b=[],p=0,S=l.length,k=S,w=o.getTypeOf(l)!=="string";p<l.length;)k=S-p,f=w?(u=l[p++],c=p<S?l[p++]:0,p<S?l[p++]:0):(u=l.charCodeAt(p++),c=p<S?l.charCodeAt(p++):0,p<S?l.charCodeAt(p++):0),h=u>>2,d=(3&u)<<4|c>>4,m=1<k?(15&c)<<2|f>>6:64,g=2<k?63&f:64,b.push(a.charAt(h)+a.charAt(d)+a.charAt(m)+a.charAt(g));return b.join("")},i.decode=function(l){var u,c,f,h,d,m,g=0,b=0,p="data:";if(l.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var S,k=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&k--,l.charAt(l.length-2)===a.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=s.uint8array?new Uint8Array(0|k):new Array(0|k);g<l.length;)u=a.indexOf(l.charAt(g++))<<2|(h=a.indexOf(l.charAt(g++)))>>4,c=(15&h)<<4|(d=a.indexOf(l.charAt(g++)))>>2,f=(3&d)<<6|(m=a.indexOf(l.charAt(g++))),S[b++]=u,d!==64&&(S[b++]=c),m!==64&&(S[b++]=f);return S}},{"./support":30,"./utils":32}],2:[function(t,n,i){var o=t("./external"),s=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function u(c,f,h,d,m){this.compressedSize=c,this.uncompressedSize=f,this.crc32=h,this.compression=d,this.compressedContent=m}u.prototype={getContentWorker:function(){var c=new s(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),f=this;return c.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new s(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(c,f,h){return c.pipe(new a).pipe(new l("uncompressedSize")).pipe(f.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",f)},n.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,i){var o=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,i){var o=t("./utils"),s=(function(){for(var a,l=[],u=0;u<256;u++){a=u;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;l[u]=a}return l})();n.exports=function(a,l){return a!==void 0&&a.length?o.getTypeOf(a)!=="string"?(function(u,c,f,h){var d=s,m=h+f;u^=-1;for(var g=h;g<m;g++)u=u>>>8^d[255&(u^c[g])];return-1^u})(0|l,a,a.length,0):(function(u,c,f,h){var d=s,m=h+f;u^=-1;for(var g=h;g<m;g++)u=u>>>8^d[255&(u^c.charCodeAt(g))];return-1^u})(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(t,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,n,i){var o=null;o=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:o}},{lie:37}],7:[function(t,n,i){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=t("pako"),a=t("./utils"),l=t("./stream/GenericWorker"),u=o?"uint8array":"array";function c(f,h){l.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=h,this.meta={}}i.magic="\b\0",a.inherits(c,l),c.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,f.data),!1)},c.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(h){f.push({data:h,meta:f.meta})}},i.compressWorker=function(f){return new c("Deflate",f)},i.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,i){function o(d,m){var g,b="";for(g=0;g<m;g++)b+=String.fromCharCode(255&d),d>>>=8;return b}function s(d,m,g,b,p,S){var k,w,x=d.file,M=d.compression,I=S!==u.utf8encode,F=a.transformTo("string",S(x.name)),N=a.transformTo("string",u.utf8encode(x.name)),K=x.comment,ae=a.transformTo("string",S(K)),R=a.transformTo("string",u.utf8encode(K)),H=N.length!==x.name.length,T=R.length!==K.length,V="",Q="",U="",oe=x.dir,te=x.date,fe={crc32:0,compressedSize:0,uncompressedSize:0};m&&!g||(fe.crc32=d.crc32,fe.compressedSize=d.compressedSize,fe.uncompressedSize=d.uncompressedSize);var J=0;m&&(J|=8),I||!H&&!T||(J|=2048);var D=0,X=0;oe&&(D|=16),p==="UNIX"?(X=798,D|=(function(ie,G){var O=ie;return ie||(O=G?16893:33204),(65535&O)<<16})(x.unixPermissions,oe)):(X=20,D|=(function(ie){return 63&(ie||0)})(x.dosPermissions)),k=te.getUTCHours(),k<<=6,k|=te.getUTCMinutes(),k<<=5,k|=te.getUTCSeconds()/2,w=te.getUTCFullYear()-1980,w<<=4,w|=te.getUTCMonth()+1,w<<=5,w|=te.getUTCDate(),H&&(Q=o(1,1)+o(c(F),4)+N,V+="up"+o(Q.length,2)+Q),T&&(U=o(1,1)+o(c(ae),4)+R,V+="uc"+o(U.length,2)+U);var Z="";return Z+=`
\0`,Z+=o(J,2),Z+=M.magic,Z+=o(k,2),Z+=o(w,2),Z+=o(fe.crc32,4),Z+=o(fe.compressedSize,4),Z+=o(fe.uncompressedSize,4),Z+=o(F.length,2),Z+=o(V.length,2),{fileRecord:f.LOCAL_FILE_HEADER+Z+F+V,dirRecord:f.CENTRAL_FILE_HEADER+o(X,2)+Z+o(ae.length,2)+"\0\0\0\0"+o(D,4)+o(b,4)+F+V+ae}}var a=t("../utils"),l=t("../stream/GenericWorker"),u=t("../utf8"),c=t("../crc32"),f=t("../signature");function h(d,m,g,b){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=g,this.encodeFileName=b,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,l),h.prototype.push=function(d){var m=d.meta.percent||0,g=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,l.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:g?(m+100*(g-b-1))/g:100}}))},h.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var m=this.streamFiles&&!d.file.dir;if(m){var g=s(d,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(d){this.accumulate=!1;var m=this.streamFiles&&!d.file.dir,g=s(d,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),m)this.push({data:(function(b){return f.DATA_DESCRIPTOR+o(b.crc32,4)+o(b.compressedSize,4)+o(b.uncompressedSize,4)})(d),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var d=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var g=this.bytesWritten-d,b=(function(p,S,k,w,x){var M=a.transformTo("string",x(w));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(p,2)+o(p,2)+o(S,4)+o(k,4)+o(M.length,2)+M})(this.dirRecords.length,g,d,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(d){this._sources.push(d);var m=this;return d.on("data",function(g){m.processChunk(g)}),d.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),d.on("error",function(g){m.error(g)}),this},h.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(d){var m=this._sources;if(!l.prototype.error.call(this,d))return!1;for(var g=0;g<m.length;g++)try{m[g].error(d)}catch{}return!0},h.prototype.lock=function(){l.prototype.lock.call(this);for(var d=this._sources,m=0;m<d.length;m++)d[m].lock()},n.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,i){var o=t("../compressions"),s=t("./ZipFileWorker");i.generateWorker=function(a,l,u){var c=new s(l.streamFiles,u,l.platform,l.encodeFileName),f=0;try{a.forEach(function(h,d){f++;var m=(function(S,k){var w=S||k,x=o[w];if(!x)throw new Error(w+" is not a valid compression method !");return x})(d.options.compression,l.compression),g=d.options.compressionOptions||l.compressionOptions||{},b=d.dir,p=d.date;d._compressWorker(m,g).withStreamInfo("file",{name:h,dir:b,date:p,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(c)}),c.entriesCount=f}catch(h){c.error(h)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,i){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new o;for(var a in this)typeof this[a]!="function"&&(s[a]=this[a]);return s}}(o.prototype=t("./object")).loadAsync=t("./load"),o.support=t("./support"),o.defaults=t("./defaults"),o.version="3.10.1",o.loadAsync=function(s,a){return new o().loadAsync(s,a)},o.external=t("./external"),n.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,i){var o=t("./utils"),s=t("./external"),a=t("./utf8"),l=t("./zipEntries"),u=t("./stream/Crc32Probe"),c=t("./nodejsUtils");function f(h){return new s.Promise(function(d,m){var g=h.decompressed.getContentWorker().pipe(new u);g.on("error",function(b){m(b)}).on("end",function(){g.streamInfo.crc32!==h.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}n.exports=function(h,d){var m=this;return d=o.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),c.isNode&&c.isStream(h)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",h,!0,d.optimizedBinaryString,d.base64).then(function(g){var b=new l(d);return b.load(g),b}).then(function(g){var b=[s.Promise.resolve(g)],p=g.files;if(d.checkCRC32)for(var S=0;S<p.length;S++)b.push(f(p[S]));return s.Promise.all(b)}).then(function(g){for(var b=g.shift(),p=b.files,S=0;S<p.length;S++){var k=p[S],w=k.fileNameStr,x=o.resolve(k.fileNameStr);m.file(x,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:d.createFolders}),k.dir||(m.file(x).unsafeOriginalName=w)}return b.zipComment.length&&(m.comment=b.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,i){var o=t("../utils"),s=t("../stream/GenericWorker");function a(l,u){s.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}o.inherits(a,s),a.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(c){u.push({data:c,meta:{percent:0}})}).on("error",function(c){u.isPaused?this.generatedError=c:u.error(c)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,i){var o=t("readable-stream").Readable;function s(a,l,u){o.call(this,l),this._helper=a;var c=this;a.on("data",function(f,h){c.push(f)||c._helper.pause(),u&&u(h)}).on("error",function(f){c.emit("error",f)}).on("end",function(){c.push(null)})}t("../utils").inherits(s,o),s.prototype._read=function(){this._helper.resume()},n.exports=s},{"../utils":32,"readable-stream":16}],14:[function(t,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,s);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,s)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var s=new Buffer(o);return s.fill(0),s},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(t,n,i){function o(x,M,I){var F,N=a.getTypeOf(M),K=a.extend(I||{},c);K.date=K.date||new Date,K.compression!==null&&(K.compression=K.compression.toUpperCase()),typeof K.unixPermissions=="string"&&(K.unixPermissions=parseInt(K.unixPermissions,8)),K.unixPermissions&&16384&K.unixPermissions&&(K.dir=!0),K.dosPermissions&&16&K.dosPermissions&&(K.dir=!0),K.dir&&(x=p(x)),K.createFolders&&(F=b(x))&&S.call(this,F,!0);var ae=N==="string"&&K.binary===!1&&K.base64===!1;I&&I.binary!==void 0||(K.binary=!ae),(M instanceof f&&M.uncompressedSize===0||K.dir||!M||M.length===0)&&(K.base64=!1,K.binary=!0,M="",K.compression="STORE",N="string");var R=null;R=M instanceof f||M instanceof l?M:m.isNode&&m.isStream(M)?new g(x,M):a.prepareContent(x,M,K.binary,K.optimizedBinaryString,K.base64);var H=new h(x,R,K);this.files[x]=H}var s=t("./utf8"),a=t("./utils"),l=t("./stream/GenericWorker"),u=t("./stream/StreamHelper"),c=t("./defaults"),f=t("./compressedObject"),h=t("./zipObject"),d=t("./generate"),m=t("./nodejsUtils"),g=t("./nodejs/NodejsStreamInputAdapter"),b=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var M=x.lastIndexOf("/");return 0<M?x.substring(0,M):""},p=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},S=function(x,M){return M=M!==void 0?M:c.createFolders,x=p(x),this.files[x]||o.call(this,x,null,{dir:!0,createFolders:M}),this.files[x]};function k(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var M,I,F;for(M in this.files)F=this.files[M],(I=M.slice(this.root.length,M.length))&&M.slice(0,this.root.length)===this.root&&x(I,F)},filter:function(x){var M=[];return this.forEach(function(I,F){x(I,F)&&M.push(F)}),M},file:function(x,M,I){if(arguments.length!==1)return x=this.root+x,o.call(this,x,M,I),this;if(k(x)){var F=x;return this.filter(function(K,ae){return!ae.dir&&F.test(K)})}var N=this.files[this.root+x];return N&&!N.dir?N:null},folder:function(x){if(!x)return this;if(k(x))return this.filter(function(N,K){return K.dir&&x.test(N)});var M=this.root+x,I=S.call(this,M),F=this.clone();return F.root=I.name,F},remove:function(x){x=this.root+x;var M=this.files[x];if(M||(x.slice(-1)!=="/"&&(x+="/"),M=this.files[x]),M&&!M.dir)delete this.files[x];else for(var I=this.filter(function(N,K){return K.name.slice(0,x.length)===x}),F=0;F<I.length;F++)delete this.files[I[F].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var M,I={};try{if((I=a.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");a.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var F=I.comment||this.comment||"";M=d.generateWorker(this,I,F)}catch(N){(M=new l("error")).error(N)}return new u(M,I.type||"string",I.mimeType)},generateAsync:function(x,M){return this.generateInternalStream(x).accumulate(M)},generateNodeStream:function(x,M){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(M)}};n.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,i){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,i){var o=t("./DataReader");function s(a){o.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}t("../utils").inherits(s,o),s.prototype.byteAt=function(a){return this.data[this.zero+a]},s.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),f=a.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===l&&this.data[h+1]===u&&this.data[h+2]===c&&this.data[h+3]===f)return h-this.zero;return-1},s.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),f=a.charCodeAt(3),h=this.readData(4);return l===h[0]&&u===h[1]&&c===h[2]&&f===h[3]},s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=s},{"../utils":32,"./DataReader":18}],18:[function(t,n,i){var o=t("../utils");function s(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,u=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=a,u},readString:function(a){return o.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},n.exports=s},{"../utils":32}],19:[function(t,n,i){var o=t("./Uint8ArrayReader");function s(a){o.call(this,a)}t("../utils").inherits(s,o),s.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,i){var o=t("./DataReader");function s(a){o.call(this,a)}t("../utils").inherits(s,o),s.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},s.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},s.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},s.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=s},{"../utils":32,"./DataReader":18}],21:[function(t,n,i){var o=t("./ArrayReader");function s(a){o.call(this,a)}t("../utils").inherits(s,o),s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,i){var o=t("../utils"),s=t("../support"),a=t("./ArrayReader"),l=t("./StringReader"),u=t("./NodeBufferReader"),c=t("./Uint8ArrayReader");n.exports=function(f){var h=o.getTypeOf(f);return o.checkSupport(h),h!=="string"||s.uint8array?h==="nodebuffer"?new u(f):s.uint8array?new c(o.transformTo("uint8array",f)):new a(o.transformTo("array",f)):new l(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,i){var o=t("./GenericWorker"),s=t("../utils");function a(l){o.call(this,"ConvertWorker to "+l),this.destType=l}s.inherits(a,o),a.prototype.processChunk=function(l){this.push({data:s.transformTo(this.destType,l.data),meta:l.meta})},n.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,i){var o=t("./GenericWorker"),s=t("../crc32");function a(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(a,o),a.prototype.processChunk=function(l){this.streamInfo.crc32=s(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,i){var o=t("../utils"),s=t("./GenericWorker");function a(l){s.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}o.inherits(a,s),a.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}s.prototype.processChunk.call(this,l)},n.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,i){var o=t("../utils"),s=t("./GenericWorker");function a(l){s.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(c){u.dataIsReady=!0,u.data=c,u.max=c&&c.length||0,u.type=o.getTypeOf(c),u.isPaused||u._tickAndRepeat()},function(c){u.error(c)})}o.inherits(a,s),a.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,i){function o(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,a){return this._listeners[s].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,a){if(this._listeners[s])for(var l=0;l<this._listeners[s].length;l++)this._listeners[s][l].call(this,a)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var a=this;return s.on("data",function(l){a.processChunk(l)}),s.on("end",function(){a.end()}),s.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,a){return this.extraStreamInfo[s]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},n.exports=o},{}],29:[function(t,n,i){var o=t("../utils"),s=t("./ConvertWorker"),a=t("./GenericWorker"),l=t("../base64"),u=t("../support"),c=t("../external"),f=null;if(u.nodestream)try{f=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(m,g){return new c.Promise(function(b,p){var S=[],k=m._internalType,w=m._outputType,x=m._mimeType;m.on("data",function(M,I){S.push(M),g&&g(I)}).on("error",function(M){S=[],p(M)}).on("end",function(){try{var M=(function(I,F,N){switch(I){case"blob":return o.newBlob(o.transformTo("arraybuffer",F),N);case"base64":return l.encode(F);default:return o.transformTo(I,F)}})(w,(function(I,F){var N,K=0,ae=null,R=0;for(N=0;N<F.length;N++)R+=F[N].length;switch(I){case"string":return F.join("");case"array":return Array.prototype.concat.apply([],F);case"uint8array":for(ae=new Uint8Array(R),N=0;N<F.length;N++)ae.set(F[N],K),K+=F[N].length;return ae;case"nodebuffer":return Buffer.concat(F);default:throw new Error("concat : unsupported type '"+I+"'")}})(k,S),x);b(M)}catch(I){p(I)}S=[]}).resume()})}function d(m,g,b){var p=g;switch(g){case"blob":case"arraybuffer":p="uint8array";break;case"base64":p="string"}try{this._internalType=p,this._outputType=g,this._mimeType=b,o.checkSupport(p),this._worker=m.pipe(new s(p)),m.lock()}catch(S){this._worker=new a("error"),this._worker.error(S)}}d.prototype={accumulate:function(m){return h(this,m)},on:function(m,g){var b=this;return m==="data"?this._worker.on(m,function(p){g.call(b,p.data,p.meta)}):this._worker.on(m,function(){o.delay(g,arguments,b)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},m)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var o=new ArrayBuffer(0);try{i.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(o),i.blob=s.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,i){for(var o=t("./utils"),s=t("./support"),a=t("./nodejsUtils"),l=t("./stream/GenericWorker"),u=new Array(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;u[254]=u[254]=1;function f(){l.call(this,"utf-8 decode"),this.leftOver=null}function h(){l.call(this,"utf-8 encode")}i.utf8encode=function(d){return s.nodebuffer?a.newBufferFrom(d,"utf-8"):(function(m){var g,b,p,S,k,w=m.length,x=0;for(S=0;S<w;S++)(64512&(b=m.charCodeAt(S)))==55296&&S+1<w&&(64512&(p=m.charCodeAt(S+1)))==56320&&(b=65536+(b-55296<<10)+(p-56320),S++),x+=b<128?1:b<2048?2:b<65536?3:4;for(g=s.uint8array?new Uint8Array(x):new Array(x),S=k=0;k<x;S++)(64512&(b=m.charCodeAt(S)))==55296&&S+1<w&&(64512&(p=m.charCodeAt(S+1)))==56320&&(b=65536+(b-55296<<10)+(p-56320),S++),b<128?g[k++]=b:(b<2048?g[k++]=192|b>>>6:(b<65536?g[k++]=224|b>>>12:(g[k++]=240|b>>>18,g[k++]=128|b>>>12&63),g[k++]=128|b>>>6&63),g[k++]=128|63&b);return g})(d)},i.utf8decode=function(d){return s.nodebuffer?o.transformTo("nodebuffer",d).toString("utf-8"):(function(m){var g,b,p,S,k=m.length,w=new Array(2*k);for(g=b=0;g<k;)if((p=m[g++])<128)w[b++]=p;else if(4<(S=u[p]))w[b++]=65533,g+=S-1;else{for(p&=S===2?31:S===3?15:7;1<S&&g<k;)p=p<<6|63&m[g++],S--;1<S?w[b++]=65533:p<65536?w[b++]=p:(p-=65536,w[b++]=55296|p>>10&1023,w[b++]=56320|1023&p)}return w.length!==b&&(w.subarray?w=w.subarray(0,b):w.length=b),o.applyFromCharCode(w)})(d=o.transformTo(s.uint8array?"uint8array":"array",d))},o.inherits(f,l),f.prototype.processChunk=function(d){var m=o.transformTo(s.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var g=m;(m=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),m.set(g,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var b=(function(S,k){var w;for((k=k||S.length)>S.length&&(k=S.length),w=k-1;0<=w&&(192&S[w])==128;)w--;return w<0||w===0?k:w+u[S[w]]>k?w:k})(m),p=m;b!==m.length&&(s.uint8array?(p=m.subarray(0,b),this.leftOver=m.subarray(b,m.length)):(p=m.slice(0,b),this.leftOver=m.slice(b,m.length))),this.push({data:i.utf8decode(p),meta:d.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=f,o.inherits(h,l),h.prototype.processChunk=function(d){this.push({data:i.utf8encode(d.data),meta:d.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,i){var o=t("./support"),s=t("./base64"),a=t("./nodejsUtils"),l=t("./external");function u(g){return g}function c(g,b){for(var p=0;p<g.length;++p)b[p]=255&g.charCodeAt(p);return b}t("setimmediate"),i.newBlob=function(g,b){i.checkSupport("blob");try{return new Blob([g],{type:b})}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return p.append(g),p.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(g,b,p){var S=[],k=0,w=g.length;if(w<=p)return String.fromCharCode.apply(null,g);for(;k<w;)b==="array"||b==="nodebuffer"?S.push(String.fromCharCode.apply(null,g.slice(k,Math.min(k+p,w)))):S.push(String.fromCharCode.apply(null,g.subarray(k,Math.min(k+p,w)))),k+=p;return S.join("")},stringifyByChar:function(g){for(var b="",p=0;p<g.length;p++)b+=String.fromCharCode(g[p]);return b},applyCanBeUsed:{uint8array:(function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}})()}};function h(g){var b=65536,p=i.getTypeOf(g),S=!0;if(p==="uint8array"?S=f.applyCanBeUsed.uint8array:p==="nodebuffer"&&(S=f.applyCanBeUsed.nodebuffer),S)for(;1<b;)try{return f.stringifyByChunk(g,p,b)}catch{b=Math.floor(b/2)}return f.stringifyByChar(g)}function d(g,b){for(var p=0;p<g.length;p++)b[p]=g[p];return b}i.applyFromCharCode=h;var m={};m.string={string:u,array:function(g){return c(g,new Array(g.length))},arraybuffer:function(g){return m.string.uint8array(g).buffer},uint8array:function(g){return c(g,new Uint8Array(g.length))},nodebuffer:function(g){return c(g,a.allocBuffer(g.length))}},m.array={string:h,array:u,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(g)}},m.arraybuffer={string:function(g){return h(new Uint8Array(g))},array:function(g){return d(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:u,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(new Uint8Array(g))}},m.uint8array={string:h,array:function(g){return d(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:u,nodebuffer:function(g){return a.newBufferFrom(g)}},m.nodebuffer={string:h,array:function(g){return d(g,new Array(g.length))},arraybuffer:function(g){return m.nodebuffer.uint8array(g).buffer},uint8array:function(g){return d(g,new Uint8Array(g.length))},nodebuffer:u},i.transformTo=function(g,b){if(b=b||"",!g)return b;i.checkSupport(g);var p=i.getTypeOf(b);return m[p][g](b)},i.resolve=function(g){for(var b=g.split("/"),p=[],S=0;S<b.length;S++){var k=b[S];k==="."||k===""&&S!==0&&S!==b.length-1||(k===".."?p.pop():p.push(k))}return p.join("/")},i.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":o.nodebuffer&&a.isBuffer(g)?"nodebuffer":o.uint8array&&g instanceof Uint8Array?"uint8array":o.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(g){if(!o[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(g){var b,p,S="";for(p=0;p<(g||"").length;p++)S+="\\x"+((b=g.charCodeAt(p))<16?"0":"")+b.toString(16).toUpperCase();return S},i.delay=function(g,b,p){setImmediate(function(){g.apply(p||null,b||[])})},i.inherits=function(g,b){function p(){}p.prototype=b.prototype,g.prototype=new p},i.extend=function(){var g,b,p={};for(g=0;g<arguments.length;g++)for(b in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],b)&&p[b]===void 0&&(p[b]=arguments[g][b]);return p},i.prepareContent=function(g,b,p,S,k){return l.Promise.resolve(b).then(function(w){return o.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1)&&typeof FileReader<"u"?new l.Promise(function(x,M){var I=new FileReader;I.onload=function(F){x(F.target.result)},I.onerror=function(F){M(F.target.error)},I.readAsArrayBuffer(w)}):w}).then(function(w){var x=i.getTypeOf(w);return x?(x==="arraybuffer"?w=i.transformTo("uint8array",w):x==="string"&&(k?w=s.decode(w):p&&S!==!0&&(w=(function(M){return c(M,o.uint8array?new Uint8Array(M.length):new Array(M.length))})(w))),w):l.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,i){var o=t("./reader/readerFor"),s=t("./utils"),a=t("./signature"),l=t("./zipEntry"),u=t("./support");function c(f){this.files=[],this.loadOptions=f}c.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(h)+", expected "+s.pretty(f)+")")}},isSignature:function(f,h){var d=this.reader.index;this.reader.setIndex(f);var m=this.reader.readString(4)===h;return this.reader.setIndex(d),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),h=u.uint8array?"uint8array":"array",d=s.transformTo(h,f);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,h,d,m=this.zip64EndOfCentralSize-44;0<m;)f=this.reader.readInt(2),h=this.reader.readInt(4),d=this.reader.readData(h),this.zip64ExtensibleData[f]={id:f,length:h,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,h;for(f=0;f<this.files.length;f++)h=this.files[f],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(f=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var h=f;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var m=h-d;if(0<m)this.isSignature(h,a.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(f){this.reader=o(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,i){var o=t("./reader/readerFor"),s=t("./utils"),a=t("./compressedObject"),l=t("./crc32"),u=t("./utf8"),c=t("./compressions"),f=t("./support");function h(d,m){this.options=d,this.loadOptions=m}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var m,g;if(d.skip(22),this.fileNameLength=d.readInt(2),g=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=(function(b){for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)&&c[p].magic===b)return c[p];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,m,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var m=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(m),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=o(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var m,g,b,p=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<p;)m=d.readInt(2),g=d.readInt(2),b=d.readData(g),this.extraFields[m]={id:m,length:g,value:b};d.setIndex(p)},handleUTF8:function(){var d=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var g=s.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var p=s.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(p)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var m=o(d.value);return m.readInt(1)!==1||l(this.fileName)!==m.readInt(4)?null:u.utf8decode(m.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var m=o(d.value);return m.readInt(1)!==1||l(this.fileComment)!==m.readInt(4)?null:u.utf8decode(m.readData(d.length-5))}return null}},n.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,i){function o(m,g,b){this.name=m,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=g,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var s=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),l=t("./utf8"),u=t("./compressedObject"),c=t("./stream/GenericWorker");o.prototype={internalStream:function(m){var g=null,b="string";try{if(!m)throw new Error("No output type specified.");var p=(b=m.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),g=this._decompressWorker();var S=!this._dataBinary;S&&!p&&(g=g.pipe(new l.Utf8EncodeWorker)),!S&&p&&(g=g.pipe(new l.Utf8DecodeWorker))}catch(k){(g=new c("error")).error(k)}return new s(g,b,"")},async:function(m,g){return this.internalStream(m).accumulate(g)},nodeStream:function(m,g){return this.internalStream(m||"nodebuffer").toNodejsStream(g)},_compressWorker:function(m,g){if(this._data instanceof u&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(b,m,g)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof c?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<f.length;d++)o.prototype[f[d]]=h;n.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,i){(function(o){var s,a,l=o.MutationObserver||o.WebKitMutationObserver;if(l){var u=0,c=new l(m),f=o.document.createTextNode("");c.observe(f,{characterData:!0}),s=function(){f.data=u=++u%2}}else if(o.setImmediate||o.MessageChannel===void 0)s="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var g=o.document.createElement("script");g.onreadystatechange=function(){m(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},o.document.documentElement.appendChild(g)}:function(){setTimeout(m,0)};else{var h=new o.MessageChannel;h.port1.onmessage=m,s=function(){h.port2.postMessage(0)}}var d=[];function m(){var g,b;a=!0;for(var p=d.length;p;){for(b=d,d=[],g=-1;++g<p;)b[g]();p=d.length}a=!1}n.exports=function(g){d.push(g)!==1||a||s()}}).call(this,typeof vr<"u"?vr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,i){var o=t("immediate");function s(){}var a={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];function f(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,p!==s&&g(this,p)}function h(p,S,k){this.promise=p,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function d(p,S,k){o(function(){var w;try{w=S(k)}catch(x){return a.reject(p,x)}w===p?a.reject(p,new TypeError("Cannot resolve promise with itself")):a.resolve(p,w)})}function m(p){var S=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof S=="function")return function(){S.apply(p,arguments)}}function g(p,S){var k=!1;function w(I){k||(k=!0,a.reject(p,I))}function x(I){k||(k=!0,a.resolve(p,I))}var M=b(function(){S(x,w)});M.status==="error"&&w(M.value)}function b(p,S){var k={};try{k.value=p(S),k.status="success"}catch(w){k.status="error",k.value=w}return k}(n.exports=f).prototype.finally=function(p){if(typeof p!="function")return this;var S=this.constructor;return this.then(function(k){return S.resolve(p()).then(function(){return k})},function(k){return S.resolve(p()).then(function(){throw k})})},f.prototype.catch=function(p){return this.then(null,p)},f.prototype.then=function(p,S){if(typeof p!="function"&&this.state===u||typeof S!="function"&&this.state===l)return this;var k=new this.constructor(s);return this.state!==c?d(k,this.state===u?p:S,this.outcome):this.queue.push(new h(k,p,S)),k},h.prototype.callFulfilled=function(p){a.resolve(this.promise,p)},h.prototype.otherCallFulfilled=function(p){d(this.promise,this.onFulfilled,p)},h.prototype.callRejected=function(p){a.reject(this.promise,p)},h.prototype.otherCallRejected=function(p){d(this.promise,this.onRejected,p)},a.resolve=function(p,S){var k=b(m,S);if(k.status==="error")return a.reject(p,k.value);var w=k.value;if(w)g(p,w);else{p.state=u,p.outcome=S;for(var x=-1,M=p.queue.length;++x<M;)p.queue[x].callFulfilled(S)}return p},a.reject=function(p,S){p.state=l,p.outcome=S;for(var k=-1,w=p.queue.length;++k<w;)p.queue[k].callRejected(S);return p},f.resolve=function(p){return p instanceof this?p:a.resolve(new this(s),p)},f.reject=function(p){var S=new this(s);return a.reject(S,p)},f.all=function(p){var S=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=p.length,w=!1;if(!k)return this.resolve([]);for(var x=new Array(k),M=0,I=-1,F=new this(s);++I<k;)N(p[I],I);return F;function N(K,ae){S.resolve(K).then(function(R){x[ae]=R,++M!==k||w||(w=!0,a.resolve(F,x))},function(R){w||(w=!0,a.reject(F,R))})}},f.race=function(p){var S=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=p.length,w=!1;if(!k)return this.resolve([]);for(var x=-1,M=new this(s);++x<k;)I=p[x],S.resolve(I).then(function(F){w||(w=!0,a.resolve(M,F))},function(F){w||(w=!0,a.reject(M,F))});var I;return M}},{immediate:36}],38:[function(t,n,i){var o={};(0,t("./lib/utils/common").assign)(o,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,i){var o=t("./zlib/deflate"),s=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/messages"),u=t("./zlib/zstream"),c=Object.prototype.toString,f=0,h=-1,d=0,m=8;function g(p){if(!(this instanceof g))return new g(p);this.options=s.assign({level:h,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},p||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var k=o.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(k!==f)throw new Error(l[k]);if(S.header&&o.deflateSetHeader(this.strm,S.header),S.dictionary){var w;if(w=typeof S.dictionary=="string"?a.string2buf(S.dictionary):c.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(k=o.deflateSetDictionary(this.strm,w))!==f)throw new Error(l[k]);this._dict_set=!0}}function b(p,S){var k=new g(S);if(k.push(p,!0),k.err)throw k.msg||l[k.err];return k.result}g.prototype.push=function(p,S){var k,w,x=this.strm,M=this.options.chunkSize;if(this.ended)return!1;w=S===~~S?S:S===!0?4:0,typeof p=="string"?x.input=a.string2buf(p):c.call(p)==="[object ArrayBuffer]"?x.input=new Uint8Array(p):x.input=p,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new s.Buf8(M),x.next_out=0,x.avail_out=M),(k=o.deflate(x,w))!==1&&k!==f)return this.onEnd(k),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||w!==4&&w!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(s.shrinkBuf(x.output,x.next_out))):this.onData(s.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&k!==1);return w===4?(k=o.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===f):w!==2||(this.onEnd(f),!(x.avail_out=0))},g.prototype.onData=function(p){this.chunks.push(p)},g.prototype.onEnd=function(p){p===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},i.Deflate=g,i.deflate=b,i.deflateRaw=function(p,S){return(S=S||{}).raw=!0,b(p,S)},i.gzip=function(p,S){return(S=S||{}).gzip=!0,b(p,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,i){var o=t("./zlib/inflate"),s=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/constants"),u=t("./zlib/messages"),c=t("./zlib/zstream"),f=t("./zlib/gzheader"),h=Object.prototype.toString;function d(g){if(!(this instanceof d))return new d(g);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},g||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||g&&g.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&(15&b.windowBits)==0&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var p=o.inflateInit2(this.strm,b.windowBits);if(p!==l.Z_OK)throw new Error(u[p]);this.header=new f,o.inflateGetHeader(this.strm,this.header)}function m(g,b){var p=new d(b);if(p.push(g,!0),p.err)throw p.msg||u[p.err];return p.result}d.prototype.push=function(g,b){var p,S,k,w,x,M,I=this.strm,F=this.options.chunkSize,N=this.options.dictionary,K=!1;if(this.ended)return!1;S=b===~~b?b:b===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof g=="string"?I.input=a.binstring2buf(g):h.call(g)==="[object ArrayBuffer]"?I.input=new Uint8Array(g):I.input=g,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new s.Buf8(F),I.next_out=0,I.avail_out=F),(p=o.inflate(I,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&N&&(M=typeof N=="string"?a.string2buf(N):h.call(N)==="[object ArrayBuffer]"?new Uint8Array(N):N,p=o.inflateSetDictionary(this.strm,M)),p===l.Z_BUF_ERROR&&K===!0&&(p=l.Z_OK,K=!1),p!==l.Z_STREAM_END&&p!==l.Z_OK)return this.onEnd(p),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&p!==l.Z_STREAM_END&&(I.avail_in!==0||S!==l.Z_FINISH&&S!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=a.utf8border(I.output,I.next_out),w=I.next_out-k,x=a.buf2string(I.output,k),I.next_out=w,I.avail_out=F-w,w&&s.arraySet(I.output,I.output,k,w,0),this.onData(x)):this.onData(s.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(K=!0)}while((0<I.avail_in||I.avail_out===0)&&p!==l.Z_STREAM_END);return p===l.Z_STREAM_END&&(S=l.Z_FINISH),S===l.Z_FINISH?(p=o.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===l.Z_OK):S!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(I.avail_out=0))},d.prototype.onData=function(g){this.chunks.push(g)},d.prototype.onEnd=function(g){g===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Inflate=d,i.inflate=m,i.inflateRaw=function(g,b){return(b=b||{}).raw=!0,m(g,b)},i.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,i){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var c=u.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var f in c)c.hasOwnProperty(f)&&(l[f]=c[f])}}return l},i.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var s={arraySet:function(l,u,c,f,h){if(u.subarray&&l.subarray)l.set(u.subarray(c,c+f),h);else for(var d=0;d<f;d++)l[h+d]=u[c+d]},flattenChunks:function(l){var u,c,f,h,d,m;for(u=f=0,c=l.length;u<c;u++)f+=l[u].length;for(m=new Uint8Array(f),u=h=0,c=l.length;u<c;u++)d=l[u],m.set(d,h),h+=d.length;return m}},a={arraySet:function(l,u,c,f,h){for(var d=0;d<f;d++)l[h+d]=u[c+d]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(o)},{}],42:[function(t,n,i){var o=t("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new o.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function c(f,h){if(h<65537&&(f.subarray&&a||!f.subarray&&s))return String.fromCharCode.apply(null,o.shrinkBuf(f,h));for(var d="",m=0;m<h;m++)d+=String.fromCharCode(f[m]);return d}l[254]=l[254]=1,i.string2buf=function(f){var h,d,m,g,b,p=f.length,S=0;for(g=0;g<p;g++)(64512&(d=f.charCodeAt(g)))==55296&&g+1<p&&(64512&(m=f.charCodeAt(g+1)))==56320&&(d=65536+(d-55296<<10)+(m-56320),g++),S+=d<128?1:d<2048?2:d<65536?3:4;for(h=new o.Buf8(S),g=b=0;b<S;g++)(64512&(d=f.charCodeAt(g)))==55296&&g+1<p&&(64512&(m=f.charCodeAt(g+1)))==56320&&(d=65536+(d-55296<<10)+(m-56320),g++),d<128?h[b++]=d:(d<2048?h[b++]=192|d>>>6:(d<65536?h[b++]=224|d>>>12:(h[b++]=240|d>>>18,h[b++]=128|d>>>12&63),h[b++]=128|d>>>6&63),h[b++]=128|63&d);return h},i.buf2binstring=function(f){return c(f,f.length)},i.binstring2buf=function(f){for(var h=new o.Buf8(f.length),d=0,m=h.length;d<m;d++)h[d]=f.charCodeAt(d);return h},i.buf2string=function(f,h){var d,m,g,b,p=h||f.length,S=new Array(2*p);for(d=m=0;d<p;)if((g=f[d++])<128)S[m++]=g;else if(4<(b=l[g]))S[m++]=65533,d+=b-1;else{for(g&=b===2?31:b===3?15:7;1<b&&d<p;)g=g<<6|63&f[d++],b--;1<b?S[m++]=65533:g<65536?S[m++]=g:(g-=65536,S[m++]=55296|g>>10&1023,S[m++]=56320|1023&g)}return c(S,m)},i.utf8border=function(f,h){var d;for((h=h||f.length)>f.length&&(h=f.length),d=h-1;0<=d&&(192&f[d])==128;)d--;return d<0||d===0?h:d+l[f[d]]>h?d:h}},{"./common":41}],43:[function(t,n,i){n.exports=function(o,s,a,l){for(var u=65535&o|0,c=o>>>16&65535|0,f=0;a!==0;){for(a-=f=2e3<a?2e3:a;c=c+(u=u+s[l++]|0)|0,--f;);u%=65521,c%=65521}return u|c<<16|0}},{}],44:[function(t,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,i){var o=(function(){for(var s,a=[],l=0;l<256;l++){s=l;for(var u=0;u<8;u++)s=1&s?3988292384^s>>>1:s>>>1;a[l]=s}return a})();n.exports=function(s,a,l,u){var c=o,f=u+l;s^=-1;for(var h=u;h<f;h++)s=s>>>8^c[255&(s^a[h])];return-1^s}},{}],46:[function(t,n,i){var o,s=t("../utils/common"),a=t("./trees"),l=t("./adler32"),u=t("./crc32"),c=t("./messages"),f=0,h=4,d=0,m=-2,g=-1,b=4,p=2,S=8,k=9,w=286,x=30,M=19,I=2*w+1,F=15,N=3,K=258,ae=K+N+1,R=42,H=113,T=1,V=2,Q=3,U=4;function oe(E,ee){return E.msg=c[ee],ee}function te(E){return(E<<1)-(4<E?9:0)}function fe(E){for(var ee=E.length;0<=--ee;)E[ee]=0}function J(E){var ee=E.state,C=ee.pending;C>E.avail_out&&(C=E.avail_out),C!==0&&(s.arraySet(E.output,ee.pending_buf,ee.pending_out,C,E.next_out),E.next_out+=C,ee.pending_out+=C,E.total_out+=C,E.avail_out-=C,ee.pending-=C,ee.pending===0&&(ee.pending_out=0))}function D(E,ee){a._tr_flush_block(E,0<=E.block_start?E.block_start:-1,E.strstart-E.block_start,ee),E.block_start=E.strstart,J(E.strm)}function X(E,ee){E.pending_buf[E.pending++]=ee}function Z(E,ee){E.pending_buf[E.pending++]=ee>>>8&255,E.pending_buf[E.pending++]=255&ee}function ie(E,ee){var C,v,y=E.max_chain_length,_=E.strstart,z=E.prev_length,$=E.nice_match,q=E.strstart>E.w_size-ae?E.strstart-(E.w_size-ae):0,se=E.window,ue=E.w_mask,le=E.prev,de=E.strstart+K,ve=se[_+z-1],Se=se[_+z];E.prev_length>=E.good_match&&(y>>=2),$>E.lookahead&&($=E.lookahead);do if(se[(C=ee)+z]===Se&&se[C+z-1]===ve&&se[C]===se[_]&&se[++C]===se[_+1]){_+=2,C++;do;while(se[++_]===se[++C]&&se[++_]===se[++C]&&se[++_]===se[++C]&&se[++_]===se[++C]&&se[++_]===se[++C]&&se[++_]===se[++C]&&se[++_]===se[++C]&&se[++_]===se[++C]&&_<de);if(v=K-(de-_),_=de-K,z<v){if(E.match_start=ee,$<=(z=v))break;ve=se[_+z-1],Se=se[_+z]}}while((ee=le[ee&ue])>q&&--y!=0);return z<=E.lookahead?z:E.lookahead}function G(E){var ee,C,v,y,_,z,$,q,se,ue,le=E.w_size;do{if(y=E.window_size-E.lookahead-E.strstart,E.strstart>=le+(le-ae)){for(s.arraySet(E.window,E.window,le,le,0),E.match_start-=le,E.strstart-=le,E.block_start-=le,ee=C=E.hash_size;v=E.head[--ee],E.head[ee]=le<=v?v-le:0,--C;);for(ee=C=le;v=E.prev[--ee],E.prev[ee]=le<=v?v-le:0,--C;);y+=le}if(E.strm.avail_in===0)break;if(z=E.strm,$=E.window,q=E.strstart+E.lookahead,se=y,ue=void 0,ue=z.avail_in,se<ue&&(ue=se),C=ue===0?0:(z.avail_in-=ue,s.arraySet($,z.input,z.next_in,ue,q),z.state.wrap===1?z.adler=l(z.adler,$,ue,q):z.state.wrap===2&&(z.adler=u(z.adler,$,ue,q)),z.next_in+=ue,z.total_in+=ue,ue),E.lookahead+=C,E.lookahead+E.insert>=N)for(_=E.strstart-E.insert,E.ins_h=E.window[_],E.ins_h=(E.ins_h<<E.hash_shift^E.window[_+1])&E.hash_mask;E.insert&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[_+N-1])&E.hash_mask,E.prev[_&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=_,_++,E.insert--,!(E.lookahead+E.insert<N)););}while(E.lookahead<ae&&E.strm.avail_in!==0)}function O(E,ee){for(var C,v;;){if(E.lookahead<ae){if(G(E),E.lookahead<ae&&ee===f)return T;if(E.lookahead===0)break}if(C=0,E.lookahead>=N&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+N-1])&E.hash_mask,C=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),C!==0&&E.strstart-C<=E.w_size-ae&&(E.match_length=ie(E,C)),E.match_length>=N)if(v=a._tr_tally(E,E.strstart-E.match_start,E.match_length-N),E.lookahead-=E.match_length,E.match_length<=E.max_lazy_match&&E.lookahead>=N){for(E.match_length--;E.strstart++,E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+N-1])&E.hash_mask,C=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart,--E.match_length!=0;);E.strstart++}else E.strstart+=E.match_length,E.match_length=0,E.ins_h=E.window[E.strstart],E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+1])&E.hash_mask;else v=a._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++;if(v&&(D(E,!1),E.strm.avail_out===0))return T}return E.insert=E.strstart<N-1?E.strstart:N-1,ee===h?(D(E,!0),E.strm.avail_out===0?Q:U):E.last_lit&&(D(E,!1),E.strm.avail_out===0)?T:V}function A(E,ee){for(var C,v,y;;){if(E.lookahead<ae){if(G(E),E.lookahead<ae&&ee===f)return T;if(E.lookahead===0)break}if(C=0,E.lookahead>=N&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+N-1])&E.hash_mask,C=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),E.prev_length=E.match_length,E.prev_match=E.match_start,E.match_length=N-1,C!==0&&E.prev_length<E.max_lazy_match&&E.strstart-C<=E.w_size-ae&&(E.match_length=ie(E,C),E.match_length<=5&&(E.strategy===1||E.match_length===N&&4096<E.strstart-E.match_start)&&(E.match_length=N-1)),E.prev_length>=N&&E.match_length<=E.prev_length){for(y=E.strstart+E.lookahead-N,v=a._tr_tally(E,E.strstart-1-E.prev_match,E.prev_length-N),E.lookahead-=E.prev_length-1,E.prev_length-=2;++E.strstart<=y&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+N-1])&E.hash_mask,C=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),--E.prev_length!=0;);if(E.match_available=0,E.match_length=N-1,E.strstart++,v&&(D(E,!1),E.strm.avail_out===0))return T}else if(E.match_available){if((v=a._tr_tally(E,0,E.window[E.strstart-1]))&&D(E,!1),E.strstart++,E.lookahead--,E.strm.avail_out===0)return T}else E.match_available=1,E.strstart++,E.lookahead--}return E.match_available&&(v=a._tr_tally(E,0,E.window[E.strstart-1]),E.match_available=0),E.insert=E.strstart<N-1?E.strstart:N-1,ee===h?(D(E,!0),E.strm.avail_out===0?Q:U):E.last_lit&&(D(E,!1),E.strm.avail_out===0)?T:V}function W(E,ee,C,v,y){this.good_length=E,this.max_lazy=ee,this.nice_length=C,this.max_chain=v,this.func=y}function j(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*I),this.dyn_dtree=new s.Buf16(2*(2*x+1)),this.bl_tree=new s.Buf16(2*(2*M+1)),fe(this.dyn_ltree),fe(this.dyn_dtree),fe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(F+1),this.heap=new s.Buf16(2*w+1),fe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*w+1),fe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function P(E){var ee;return E&&E.state?(E.total_in=E.total_out=0,E.data_type=p,(ee=E.state).pending=0,ee.pending_out=0,ee.wrap<0&&(ee.wrap=-ee.wrap),ee.status=ee.wrap?R:H,E.adler=ee.wrap===2?0:1,ee.last_flush=f,a._tr_init(ee),d):oe(E,m)}function L(E){var ee=P(E);return ee===d&&(function(C){C.window_size=2*C.w_size,fe(C.head),C.max_lazy_match=o[C.level].max_lazy,C.good_match=o[C.level].good_length,C.nice_match=o[C.level].nice_length,C.max_chain_length=o[C.level].max_chain,C.strstart=0,C.block_start=0,C.lookahead=0,C.insert=0,C.match_length=C.prev_length=N-1,C.match_available=0,C.ins_h=0})(E.state),ee}function re(E,ee,C,v,y,_){if(!E)return m;var z=1;if(ee===g&&(ee=6),v<0?(z=0,v=-v):15<v&&(z=2,v-=16),y<1||k<y||C!==S||v<8||15<v||ee<0||9<ee||_<0||b<_)return oe(E,m);v===8&&(v=9);var $=new j;return(E.state=$).strm=E,$.wrap=z,$.gzhead=null,$.w_bits=v,$.w_size=1<<$.w_bits,$.w_mask=$.w_size-1,$.hash_bits=y+7,$.hash_size=1<<$.hash_bits,$.hash_mask=$.hash_size-1,$.hash_shift=~~(($.hash_bits+N-1)/N),$.window=new s.Buf8(2*$.w_size),$.head=new s.Buf16($.hash_size),$.prev=new s.Buf16($.w_size),$.lit_bufsize=1<<y+6,$.pending_buf_size=4*$.lit_bufsize,$.pending_buf=new s.Buf8($.pending_buf_size),$.d_buf=1*$.lit_bufsize,$.l_buf=3*$.lit_bufsize,$.level=ee,$.strategy=_,$.method=C,L(E)}o=[new W(0,0,0,0,function(E,ee){var C=65535;for(C>E.pending_buf_size-5&&(C=E.pending_buf_size-5);;){if(E.lookahead<=1){if(G(E),E.lookahead===0&&ee===f)return T;if(E.lookahead===0)break}E.strstart+=E.lookahead,E.lookahead=0;var v=E.block_start+C;if((E.strstart===0||E.strstart>=v)&&(E.lookahead=E.strstart-v,E.strstart=v,D(E,!1),E.strm.avail_out===0)||E.strstart-E.block_start>=E.w_size-ae&&(D(E,!1),E.strm.avail_out===0))return T}return E.insert=0,ee===h?(D(E,!0),E.strm.avail_out===0?Q:U):(E.strstart>E.block_start&&(D(E,!1),E.strm.avail_out),T)}),new W(4,4,8,4,O),new W(4,5,16,8,O),new W(4,6,32,32,O),new W(4,4,16,16,A),new W(8,16,32,32,A),new W(8,16,128,128,A),new W(8,32,128,256,A),new W(32,128,258,1024,A),new W(32,258,258,4096,A)],i.deflateInit=function(E,ee){return re(E,ee,S,15,8,0)},i.deflateInit2=re,i.deflateReset=L,i.deflateResetKeep=P,i.deflateSetHeader=function(E,ee){return E&&E.state?E.state.wrap!==2?m:(E.state.gzhead=ee,d):m},i.deflate=function(E,ee){var C,v,y,_;if(!E||!E.state||5<ee||ee<0)return E?oe(E,m):m;if(v=E.state,!E.output||!E.input&&E.avail_in!==0||v.status===666&&ee!==h)return oe(E,E.avail_out===0?-5:m);if(v.strm=E,C=v.last_flush,v.last_flush=ee,v.status===R)if(v.wrap===2)E.adler=0,X(v,31),X(v,139),X(v,8),v.gzhead?(X(v,(v.gzhead.text?1:0)+(v.gzhead.hcrc?2:0)+(v.gzhead.extra?4:0)+(v.gzhead.name?8:0)+(v.gzhead.comment?16:0)),X(v,255&v.gzhead.time),X(v,v.gzhead.time>>8&255),X(v,v.gzhead.time>>16&255),X(v,v.gzhead.time>>24&255),X(v,v.level===9?2:2<=v.strategy||v.level<2?4:0),X(v,255&v.gzhead.os),v.gzhead.extra&&v.gzhead.extra.length&&(X(v,255&v.gzhead.extra.length),X(v,v.gzhead.extra.length>>8&255)),v.gzhead.hcrc&&(E.adler=u(E.adler,v.pending_buf,v.pending,0)),v.gzindex=0,v.status=69):(X(v,0),X(v,0),X(v,0),X(v,0),X(v,0),X(v,v.level===9?2:2<=v.strategy||v.level<2?4:0),X(v,3),v.status=H);else{var z=S+(v.w_bits-8<<4)<<8;z|=(2<=v.strategy||v.level<2?0:v.level<6?1:v.level===6?2:3)<<6,v.strstart!==0&&(z|=32),z+=31-z%31,v.status=H,Z(v,z),v.strstart!==0&&(Z(v,E.adler>>>16),Z(v,65535&E.adler)),E.adler=1}if(v.status===69)if(v.gzhead.extra){for(y=v.pending;v.gzindex<(65535&v.gzhead.extra.length)&&(v.pending!==v.pending_buf_size||(v.gzhead.hcrc&&v.pending>y&&(E.adler=u(E.adler,v.pending_buf,v.pending-y,y)),J(E),y=v.pending,v.pending!==v.pending_buf_size));)X(v,255&v.gzhead.extra[v.gzindex]),v.gzindex++;v.gzhead.hcrc&&v.pending>y&&(E.adler=u(E.adler,v.pending_buf,v.pending-y,y)),v.gzindex===v.gzhead.extra.length&&(v.gzindex=0,v.status=73)}else v.status=73;if(v.status===73)if(v.gzhead.name){y=v.pending;do{if(v.pending===v.pending_buf_size&&(v.gzhead.hcrc&&v.pending>y&&(E.adler=u(E.adler,v.pending_buf,v.pending-y,y)),J(E),y=v.pending,v.pending===v.pending_buf_size)){_=1;break}_=v.gzindex<v.gzhead.name.length?255&v.gzhead.name.charCodeAt(v.gzindex++):0,X(v,_)}while(_!==0);v.gzhead.hcrc&&v.pending>y&&(E.adler=u(E.adler,v.pending_buf,v.pending-y,y)),_===0&&(v.gzindex=0,v.status=91)}else v.status=91;if(v.status===91)if(v.gzhead.comment){y=v.pending;do{if(v.pending===v.pending_buf_size&&(v.gzhead.hcrc&&v.pending>y&&(E.adler=u(E.adler,v.pending_buf,v.pending-y,y)),J(E),y=v.pending,v.pending===v.pending_buf_size)){_=1;break}_=v.gzindex<v.gzhead.comment.length?255&v.gzhead.comment.charCodeAt(v.gzindex++):0,X(v,_)}while(_!==0);v.gzhead.hcrc&&v.pending>y&&(E.adler=u(E.adler,v.pending_buf,v.pending-y,y)),_===0&&(v.status=103)}else v.status=103;if(v.status===103&&(v.gzhead.hcrc?(v.pending+2>v.pending_buf_size&&J(E),v.pending+2<=v.pending_buf_size&&(X(v,255&E.adler),X(v,E.adler>>8&255),E.adler=0,v.status=H)):v.status=H),v.pending!==0){if(J(E),E.avail_out===0)return v.last_flush=-1,d}else if(E.avail_in===0&&te(ee)<=te(C)&&ee!==h)return oe(E,-5);if(v.status===666&&E.avail_in!==0)return oe(E,-5);if(E.avail_in!==0||v.lookahead!==0||ee!==f&&v.status!==666){var $=v.strategy===2?(function(q,se){for(var ue;;){if(q.lookahead===0&&(G(q),q.lookahead===0)){if(se===f)return T;break}if(q.match_length=0,ue=a._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++,ue&&(D(q,!1),q.strm.avail_out===0))return T}return q.insert=0,se===h?(D(q,!0),q.strm.avail_out===0?Q:U):q.last_lit&&(D(q,!1),q.strm.avail_out===0)?T:V})(v,ee):v.strategy===3?(function(q,se){for(var ue,le,de,ve,Se=q.window;;){if(q.lookahead<=K){if(G(q),q.lookahead<=K&&se===f)return T;if(q.lookahead===0)break}if(q.match_length=0,q.lookahead>=N&&0<q.strstart&&(le=Se[de=q.strstart-1])===Se[++de]&&le===Se[++de]&&le===Se[++de]){ve=q.strstart+K;do;while(le===Se[++de]&&le===Se[++de]&&le===Se[++de]&&le===Se[++de]&&le===Se[++de]&&le===Se[++de]&&le===Se[++de]&&le===Se[++de]&&de<ve);q.match_length=K-(ve-de),q.match_length>q.lookahead&&(q.match_length=q.lookahead)}if(q.match_length>=N?(ue=a._tr_tally(q,1,q.match_length-N),q.lookahead-=q.match_length,q.strstart+=q.match_length,q.match_length=0):(ue=a._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++),ue&&(D(q,!1),q.strm.avail_out===0))return T}return q.insert=0,se===h?(D(q,!0),q.strm.avail_out===0?Q:U):q.last_lit&&(D(q,!1),q.strm.avail_out===0)?T:V})(v,ee):o[v.level].func(v,ee);if($!==Q&&$!==U||(v.status=666),$===T||$===Q)return E.avail_out===0&&(v.last_flush=-1),d;if($===V&&(ee===1?a._tr_align(v):ee!==5&&(a._tr_stored_block(v,0,0,!1),ee===3&&(fe(v.head),v.lookahead===0&&(v.strstart=0,v.block_start=0,v.insert=0))),J(E),E.avail_out===0))return v.last_flush=-1,d}return ee!==h?d:v.wrap<=0?1:(v.wrap===2?(X(v,255&E.adler),X(v,E.adler>>8&255),X(v,E.adler>>16&255),X(v,E.adler>>24&255),X(v,255&E.total_in),X(v,E.total_in>>8&255),X(v,E.total_in>>16&255),X(v,E.total_in>>24&255)):(Z(v,E.adler>>>16),Z(v,65535&E.adler)),J(E),0<v.wrap&&(v.wrap=-v.wrap),v.pending!==0?d:1)},i.deflateEnd=function(E){var ee;return E&&E.state?(ee=E.state.status)!==R&&ee!==69&&ee!==73&&ee!==91&&ee!==103&&ee!==H&&ee!==666?oe(E,m):(E.state=null,ee===H?oe(E,-3):d):m},i.deflateSetDictionary=function(E,ee){var C,v,y,_,z,$,q,se,ue=ee.length;if(!E||!E.state||(_=(C=E.state).wrap)===2||_===1&&C.status!==R||C.lookahead)return m;for(_===1&&(E.adler=l(E.adler,ee,ue,0)),C.wrap=0,ue>=C.w_size&&(_===0&&(fe(C.head),C.strstart=0,C.block_start=0,C.insert=0),se=new s.Buf8(C.w_size),s.arraySet(se,ee,ue-C.w_size,C.w_size,0),ee=se,ue=C.w_size),z=E.avail_in,$=E.next_in,q=E.input,E.avail_in=ue,E.next_in=0,E.input=ee,G(C);C.lookahead>=N;){for(v=C.strstart,y=C.lookahead-(N-1);C.ins_h=(C.ins_h<<C.hash_shift^C.window[v+N-1])&C.hash_mask,C.prev[v&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=v,v++,--y;);C.strstart=v,C.lookahead=N-1,G(C)}return C.strstart+=C.lookahead,C.block_start=C.strstart,C.insert=C.lookahead,C.lookahead=0,C.match_length=C.prev_length=N-1,C.match_available=0,E.next_in=$,E.input=q,E.avail_in=z,C.wrap=_,d},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,i){n.exports=function(o,s){var a,l,u,c,f,h,d,m,g,b,p,S,k,w,x,M,I,F,N,K,ae,R,H,T,V;a=o.state,l=o.next_in,T=o.input,u=l+(o.avail_in-5),c=o.next_out,V=o.output,f=c-(s-o.avail_out),h=c+(o.avail_out-257),d=a.dmax,m=a.wsize,g=a.whave,b=a.wnext,p=a.window,S=a.hold,k=a.bits,w=a.lencode,x=a.distcode,M=(1<<a.lenbits)-1,I=(1<<a.distbits)-1;e:do{k<15&&(S+=T[l++]<<k,k+=8,S+=T[l++]<<k,k+=8),F=w[S&M];t:for(;;){if(S>>>=N=F>>>24,k-=N,(N=F>>>16&255)===0)V[c++]=65535&F;else{if(!(16&N)){if((64&N)==0){F=w[(65535&F)+(S&(1<<N)-1)];continue t}if(32&N){a.mode=12;break e}o.msg="invalid literal/length code",a.mode=30;break e}K=65535&F,(N&=15)&&(k<N&&(S+=T[l++]<<k,k+=8),K+=S&(1<<N)-1,S>>>=N,k-=N),k<15&&(S+=T[l++]<<k,k+=8,S+=T[l++]<<k,k+=8),F=x[S&I];r:for(;;){if(S>>>=N=F>>>24,k-=N,!(16&(N=F>>>16&255))){if((64&N)==0){F=x[(65535&F)+(S&(1<<N)-1)];continue r}o.msg="invalid distance code",a.mode=30;break e}if(ae=65535&F,k<(N&=15)&&(S+=T[l++]<<k,(k+=8)<N&&(S+=T[l++]<<k,k+=8)),d<(ae+=S&(1<<N)-1)){o.msg="invalid distance too far back",a.mode=30;break e}if(S>>>=N,k-=N,(N=c-f)<ae){if(g<(N=ae-N)&&a.sane){o.msg="invalid distance too far back",a.mode=30;break e}if(H=p,(R=0)===b){if(R+=m-N,N<K){for(K-=N;V[c++]=p[R++],--N;);R=c-ae,H=V}}else if(b<N){if(R+=m+b-N,(N-=b)<K){for(K-=N;V[c++]=p[R++],--N;);if(R=0,b<K){for(K-=N=b;V[c++]=p[R++],--N;);R=c-ae,H=V}}}else if(R+=b-N,N<K){for(K-=N;V[c++]=p[R++],--N;);R=c-ae,H=V}for(;2<K;)V[c++]=H[R++],V[c++]=H[R++],V[c++]=H[R++],K-=3;K&&(V[c++]=H[R++],1<K&&(V[c++]=H[R++]))}else{for(R=c-ae;V[c++]=V[R++],V[c++]=V[R++],V[c++]=V[R++],2<(K-=3););K&&(V[c++]=V[R++],1<K&&(V[c++]=V[R++]))}break}}break}}while(l<u&&c<h);l-=K=k>>3,S&=(1<<(k-=K<<3))-1,o.next_in=l,o.next_out=c,o.avail_in=l<u?u-l+5:5-(l-u),o.avail_out=c<h?h-c+257:257-(c-h),a.hold=S,a.bits=k}},{}],49:[function(t,n,i){var o=t("../utils/common"),s=t("./adler32"),a=t("./crc32"),l=t("./inffast"),u=t("./inftrees"),c=1,f=2,h=0,d=-2,m=1,g=852,b=592;function p(R){return(R>>>24&255)+(R>>>8&65280)+((65280&R)<<8)+((255&R)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(R){var H;return R&&R.state?(H=R.state,R.total_in=R.total_out=H.total=0,R.msg="",H.wrap&&(R.adler=1&H.wrap),H.mode=m,H.last=0,H.havedict=0,H.dmax=32768,H.head=null,H.hold=0,H.bits=0,H.lencode=H.lendyn=new o.Buf32(g),H.distcode=H.distdyn=new o.Buf32(b),H.sane=1,H.back=-1,h):d}function w(R){var H;return R&&R.state?((H=R.state).wsize=0,H.whave=0,H.wnext=0,k(R)):d}function x(R,H){var T,V;return R&&R.state?(V=R.state,H<0?(T=0,H=-H):(T=1+(H>>4),H<48&&(H&=15)),H&&(H<8||15<H)?d:(V.window!==null&&V.wbits!==H&&(V.window=null),V.wrap=T,V.wbits=H,w(R))):d}function M(R,H){var T,V;return R?(V=new S,(R.state=V).window=null,(T=x(R,H))!==h&&(R.state=null),T):d}var I,F,N=!0;function K(R){if(N){var H;for(I=new o.Buf32(512),F=new o.Buf32(32),H=0;H<144;)R.lens[H++]=8;for(;H<256;)R.lens[H++]=9;for(;H<280;)R.lens[H++]=7;for(;H<288;)R.lens[H++]=8;for(u(c,R.lens,0,288,I,0,R.work,{bits:9}),H=0;H<32;)R.lens[H++]=5;u(f,R.lens,0,32,F,0,R.work,{bits:5}),N=!1}R.lencode=I,R.lenbits=9,R.distcode=F,R.distbits=5}function ae(R,H,T,V){var Q,U=R.state;return U.window===null&&(U.wsize=1<<U.wbits,U.wnext=0,U.whave=0,U.window=new o.Buf8(U.wsize)),V>=U.wsize?(o.arraySet(U.window,H,T-U.wsize,U.wsize,0),U.wnext=0,U.whave=U.wsize):(V<(Q=U.wsize-U.wnext)&&(Q=V),o.arraySet(U.window,H,T-V,Q,U.wnext),(V-=Q)?(o.arraySet(U.window,H,T-V,V,0),U.wnext=V,U.whave=U.wsize):(U.wnext+=Q,U.wnext===U.wsize&&(U.wnext=0),U.whave<U.wsize&&(U.whave+=Q))),0}i.inflateReset=w,i.inflateReset2=x,i.inflateResetKeep=k,i.inflateInit=function(R){return M(R,15)},i.inflateInit2=M,i.inflate=function(R,H){var T,V,Q,U,oe,te,fe,J,D,X,Z,ie,G,O,A,W,j,P,L,re,E,ee,C,v,y=0,_=new o.Buf8(4),z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!R||!R.state||!R.output||!R.input&&R.avail_in!==0)return d;(T=R.state).mode===12&&(T.mode=13),oe=R.next_out,Q=R.output,fe=R.avail_out,U=R.next_in,V=R.input,te=R.avail_in,J=T.hold,D=T.bits,X=te,Z=fe,ee=h;e:for(;;)switch(T.mode){case m:if(T.wrap===0){T.mode=13;break}for(;D<16;){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}if(2&T.wrap&&J===35615){_[T.check=0]=255&J,_[1]=J>>>8&255,T.check=a(T.check,_,2,0),D=J=0,T.mode=2;break}if(T.flags=0,T.head&&(T.head.done=!1),!(1&T.wrap)||(((255&J)<<8)+(J>>8))%31){R.msg="incorrect header check",T.mode=30;break}if((15&J)!=8){R.msg="unknown compression method",T.mode=30;break}if(D-=4,E=8+(15&(J>>>=4)),T.wbits===0)T.wbits=E;else if(E>T.wbits){R.msg="invalid window size",T.mode=30;break}T.dmax=1<<E,R.adler=T.check=1,T.mode=512&J?10:12,D=J=0;break;case 2:for(;D<16;){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}if(T.flags=J,(255&T.flags)!=8){R.msg="unknown compression method",T.mode=30;break}if(57344&T.flags){R.msg="unknown header flags set",T.mode=30;break}T.head&&(T.head.text=J>>8&1),512&T.flags&&(_[0]=255&J,_[1]=J>>>8&255,T.check=a(T.check,_,2,0)),D=J=0,T.mode=3;case 3:for(;D<32;){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}T.head&&(T.head.time=J),512&T.flags&&(_[0]=255&J,_[1]=J>>>8&255,_[2]=J>>>16&255,_[3]=J>>>24&255,T.check=a(T.check,_,4,0)),D=J=0,T.mode=4;case 4:for(;D<16;){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}T.head&&(T.head.xflags=255&J,T.head.os=J>>8),512&T.flags&&(_[0]=255&J,_[1]=J>>>8&255,T.check=a(T.check,_,2,0)),D=J=0,T.mode=5;case 5:if(1024&T.flags){for(;D<16;){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}T.length=J,T.head&&(T.head.extra_len=J),512&T.flags&&(_[0]=255&J,_[1]=J>>>8&255,T.check=a(T.check,_,2,0)),D=J=0}else T.head&&(T.head.extra=null);T.mode=6;case 6:if(1024&T.flags&&(te<(ie=T.length)&&(ie=te),ie&&(T.head&&(E=T.head.extra_len-T.length,T.head.extra||(T.head.extra=new Array(T.head.extra_len)),o.arraySet(T.head.extra,V,U,ie,E)),512&T.flags&&(T.check=a(T.check,V,ie,U)),te-=ie,U+=ie,T.length-=ie),T.length))break e;T.length=0,T.mode=7;case 7:if(2048&T.flags){if(te===0)break e;for(ie=0;E=V[U+ie++],T.head&&E&&T.length<65536&&(T.head.name+=String.fromCharCode(E)),E&&ie<te;);if(512&T.flags&&(T.check=a(T.check,V,ie,U)),te-=ie,U+=ie,E)break e}else T.head&&(T.head.name=null);T.length=0,T.mode=8;case 8:if(4096&T.flags){if(te===0)break e;for(ie=0;E=V[U+ie++],T.head&&E&&T.length<65536&&(T.head.comment+=String.fromCharCode(E)),E&&ie<te;);if(512&T.flags&&(T.check=a(T.check,V,ie,U)),te-=ie,U+=ie,E)break e}else T.head&&(T.head.comment=null);T.mode=9;case 9:if(512&T.flags){for(;D<16;){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}if(J!==(65535&T.check)){R.msg="header crc mismatch",T.mode=30;break}D=J=0}T.head&&(T.head.hcrc=T.flags>>9&1,T.head.done=!0),R.adler=T.check=0,T.mode=12;break;case 10:for(;D<32;){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}R.adler=T.check=p(J),D=J=0,T.mode=11;case 11:if(T.havedict===0)return R.next_out=oe,R.avail_out=fe,R.next_in=U,R.avail_in=te,T.hold=J,T.bits=D,2;R.adler=T.check=1,T.mode=12;case 12:if(H===5||H===6)break e;case 13:if(T.last){J>>>=7&D,D-=7&D,T.mode=27;break}for(;D<3;){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}switch(T.last=1&J,D-=1,3&(J>>>=1)){case 0:T.mode=14;break;case 1:if(K(T),T.mode=20,H!==6)break;J>>>=2,D-=2;break e;case 2:T.mode=17;break;case 3:R.msg="invalid block type",T.mode=30}J>>>=2,D-=2;break;case 14:for(J>>>=7&D,D-=7&D;D<32;){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}if((65535&J)!=(J>>>16^65535)){R.msg="invalid stored block lengths",T.mode=30;break}if(T.length=65535&J,D=J=0,T.mode=15,H===6)break e;case 15:T.mode=16;case 16:if(ie=T.length){if(te<ie&&(ie=te),fe<ie&&(ie=fe),ie===0)break e;o.arraySet(Q,V,U,ie,oe),te-=ie,U+=ie,fe-=ie,oe+=ie,T.length-=ie;break}T.mode=12;break;case 17:for(;D<14;){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}if(T.nlen=257+(31&J),J>>>=5,D-=5,T.ndist=1+(31&J),J>>>=5,D-=5,T.ncode=4+(15&J),J>>>=4,D-=4,286<T.nlen||30<T.ndist){R.msg="too many length or distance symbols",T.mode=30;break}T.have=0,T.mode=18;case 18:for(;T.have<T.ncode;){for(;D<3;){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}T.lens[z[T.have++]]=7&J,J>>>=3,D-=3}for(;T.have<19;)T.lens[z[T.have++]]=0;if(T.lencode=T.lendyn,T.lenbits=7,C={bits:T.lenbits},ee=u(0,T.lens,0,19,T.lencode,0,T.work,C),T.lenbits=C.bits,ee){R.msg="invalid code lengths set",T.mode=30;break}T.have=0,T.mode=19;case 19:for(;T.have<T.nlen+T.ndist;){for(;W=(y=T.lencode[J&(1<<T.lenbits)-1])>>>16&255,j=65535&y,!((A=y>>>24)<=D);){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}if(j<16)J>>>=A,D-=A,T.lens[T.have++]=j;else{if(j===16){for(v=A+2;D<v;){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}if(J>>>=A,D-=A,T.have===0){R.msg="invalid bit length repeat",T.mode=30;break}E=T.lens[T.have-1],ie=3+(3&J),J>>>=2,D-=2}else if(j===17){for(v=A+3;D<v;){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}D-=A,E=0,ie=3+(7&(J>>>=A)),J>>>=3,D-=3}else{for(v=A+7;D<v;){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}D-=A,E=0,ie=11+(127&(J>>>=A)),J>>>=7,D-=7}if(T.have+ie>T.nlen+T.ndist){R.msg="invalid bit length repeat",T.mode=30;break}for(;ie--;)T.lens[T.have++]=E}}if(T.mode===30)break;if(T.lens[256]===0){R.msg="invalid code -- missing end-of-block",T.mode=30;break}if(T.lenbits=9,C={bits:T.lenbits},ee=u(c,T.lens,0,T.nlen,T.lencode,0,T.work,C),T.lenbits=C.bits,ee){R.msg="invalid literal/lengths set",T.mode=30;break}if(T.distbits=6,T.distcode=T.distdyn,C={bits:T.distbits},ee=u(f,T.lens,T.nlen,T.ndist,T.distcode,0,T.work,C),T.distbits=C.bits,ee){R.msg="invalid distances set",T.mode=30;break}if(T.mode=20,H===6)break e;case 20:T.mode=21;case 21:if(6<=te&&258<=fe){R.next_out=oe,R.avail_out=fe,R.next_in=U,R.avail_in=te,T.hold=J,T.bits=D,l(R,Z),oe=R.next_out,Q=R.output,fe=R.avail_out,U=R.next_in,V=R.input,te=R.avail_in,J=T.hold,D=T.bits,T.mode===12&&(T.back=-1);break}for(T.back=0;W=(y=T.lencode[J&(1<<T.lenbits)-1])>>>16&255,j=65535&y,!((A=y>>>24)<=D);){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}if(W&&(240&W)==0){for(P=A,L=W,re=j;W=(y=T.lencode[re+((J&(1<<P+L)-1)>>P)])>>>16&255,j=65535&y,!(P+(A=y>>>24)<=D);){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}J>>>=P,D-=P,T.back+=P}if(J>>>=A,D-=A,T.back+=A,T.length=j,W===0){T.mode=26;break}if(32&W){T.back=-1,T.mode=12;break}if(64&W){R.msg="invalid literal/length code",T.mode=30;break}T.extra=15&W,T.mode=22;case 22:if(T.extra){for(v=T.extra;D<v;){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}T.length+=J&(1<<T.extra)-1,J>>>=T.extra,D-=T.extra,T.back+=T.extra}T.was=T.length,T.mode=23;case 23:for(;W=(y=T.distcode[J&(1<<T.distbits)-1])>>>16&255,j=65535&y,!((A=y>>>24)<=D);){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}if((240&W)==0){for(P=A,L=W,re=j;W=(y=T.distcode[re+((J&(1<<P+L)-1)>>P)])>>>16&255,j=65535&y,!(P+(A=y>>>24)<=D);){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}J>>>=P,D-=P,T.back+=P}if(J>>>=A,D-=A,T.back+=A,64&W){R.msg="invalid distance code",T.mode=30;break}T.offset=j,T.extra=15&W,T.mode=24;case 24:if(T.extra){for(v=T.extra;D<v;){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}T.offset+=J&(1<<T.extra)-1,J>>>=T.extra,D-=T.extra,T.back+=T.extra}if(T.offset>T.dmax){R.msg="invalid distance too far back",T.mode=30;break}T.mode=25;case 25:if(fe===0)break e;if(ie=Z-fe,T.offset>ie){if((ie=T.offset-ie)>T.whave&&T.sane){R.msg="invalid distance too far back",T.mode=30;break}G=ie>T.wnext?(ie-=T.wnext,T.wsize-ie):T.wnext-ie,ie>T.length&&(ie=T.length),O=T.window}else O=Q,G=oe-T.offset,ie=T.length;for(fe<ie&&(ie=fe),fe-=ie,T.length-=ie;Q[oe++]=O[G++],--ie;);T.length===0&&(T.mode=21);break;case 26:if(fe===0)break e;Q[oe++]=T.length,fe--,T.mode=21;break;case 27:if(T.wrap){for(;D<32;){if(te===0)break e;te--,J|=V[U++]<<D,D+=8}if(Z-=fe,R.total_out+=Z,T.total+=Z,Z&&(R.adler=T.check=T.flags?a(T.check,Q,Z,oe-Z):s(T.check,Q,Z,oe-Z)),Z=fe,(T.flags?J:p(J))!==T.check){R.msg="incorrect data check",T.mode=30;break}D=J=0}T.mode=28;case 28:if(T.wrap&&T.flags){for(;D<32;){if(te===0)break e;te--,J+=V[U++]<<D,D+=8}if(J!==(4294967295&T.total)){R.msg="incorrect length check",T.mode=30;break}D=J=0}T.mode=29;case 29:ee=1;break e;case 30:ee=-3;break e;case 31:return-4;case 32:default:return d}return R.next_out=oe,R.avail_out=fe,R.next_in=U,R.avail_in=te,T.hold=J,T.bits=D,(T.wsize||Z!==R.avail_out&&T.mode<30&&(T.mode<27||H!==4))&&ae(R,R.output,R.next_out,Z-R.avail_out)?(T.mode=31,-4):(X-=R.avail_in,Z-=R.avail_out,R.total_in+=X,R.total_out+=Z,T.total+=Z,T.wrap&&Z&&(R.adler=T.check=T.flags?a(T.check,Q,Z,R.next_out-Z):s(T.check,Q,Z,R.next_out-Z)),R.data_type=T.bits+(T.last?64:0)+(T.mode===12?128:0)+(T.mode===20||T.mode===15?256:0),(X==0&&Z===0||H===4)&&ee===h&&(ee=-5),ee)},i.inflateEnd=function(R){if(!R||!R.state)return d;var H=R.state;return H.window&&(H.window=null),R.state=null,h},i.inflateGetHeader=function(R,H){var T;return R&&R.state?(2&(T=R.state).wrap)==0?d:((T.head=H).done=!1,h):d},i.inflateSetDictionary=function(R,H){var T,V=H.length;return R&&R.state?(T=R.state).wrap!==0&&T.mode!==11?d:T.mode===11&&s(1,H,V,0)!==T.check?-3:ae(R,H,V,V)?(T.mode=31,-4):(T.havedict=1,h):d},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,i){var o=t("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(c,f,h,d,m,g,b,p){var S,k,w,x,M,I,F,N,K,ae=p.bits,R=0,H=0,T=0,V=0,Q=0,U=0,oe=0,te=0,fe=0,J=0,D=null,X=0,Z=new o.Buf16(16),ie=new o.Buf16(16),G=null,O=0;for(R=0;R<=15;R++)Z[R]=0;for(H=0;H<d;H++)Z[f[h+H]]++;for(Q=ae,V=15;1<=V&&Z[V]===0;V--);if(V<Q&&(Q=V),V===0)return m[g++]=20971520,m[g++]=20971520,p.bits=1,0;for(T=1;T<V&&Z[T]===0;T++);for(Q<T&&(Q=T),R=te=1;R<=15;R++)if(te<<=1,(te-=Z[R])<0)return-1;if(0<te&&(c===0||V!==1))return-1;for(ie[1]=0,R=1;R<15;R++)ie[R+1]=ie[R]+Z[R];for(H=0;H<d;H++)f[h+H]!==0&&(b[ie[f[h+H]]++]=H);if(I=c===0?(D=G=b,19):c===1?(D=s,X-=257,G=a,O-=257,256):(D=l,G=u,-1),R=T,M=g,oe=H=J=0,w=-1,x=(fe=1<<(U=Q))-1,c===1&&852<fe||c===2&&592<fe)return 1;for(;;){for(F=R-oe,K=b[H]<I?(N=0,b[H]):b[H]>I?(N=G[O+b[H]],D[X+b[H]]):(N=96,0),S=1<<R-oe,T=k=1<<U;m[M+(J>>oe)+(k-=S)]=F<<24|N<<16|K|0,k!==0;);for(S=1<<R-1;J&S;)S>>=1;if(S!==0?(J&=S-1,J+=S):J=0,H++,--Z[R]==0){if(R===V)break;R=f[h+b[H]]}if(Q<R&&(J&x)!==w){for(oe===0&&(oe=Q),M+=T,te=1<<(U=R-oe);U+oe<V&&!((te-=Z[U+oe])<=0);)U++,te<<=1;if(fe+=1<<U,c===1&&852<fe||c===2&&592<fe)return 1;m[w=J&x]=Q<<24|U<<16|M-g|0}}return J!==0&&(m[M+J]=R-oe<<24|64<<16|0),p.bits=Q,0}},{"../utils/common":41}],51:[function(t,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,i){var o=t("../utils/common"),s=0,a=1;function l(y){for(var _=y.length;0<=--_;)y[_]=0}var u=0,c=29,f=256,h=f+1+c,d=30,m=19,g=2*h+1,b=15,p=16,S=7,k=256,w=16,x=17,M=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ae=new Array(2*(h+2));l(ae);var R=new Array(2*d);l(R);var H=new Array(512);l(H);var T=new Array(256);l(T);var V=new Array(c);l(V);var Q,U,oe,te=new Array(d);function fe(y,_,z,$,q){this.static_tree=y,this.extra_bits=_,this.extra_base=z,this.elems=$,this.max_length=q,this.has_stree=y&&y.length}function J(y,_){this.dyn_tree=y,this.max_code=0,this.stat_desc=_}function D(y){return y<256?H[y]:H[256+(y>>>7)]}function X(y,_){y.pending_buf[y.pending++]=255&_,y.pending_buf[y.pending++]=_>>>8&255}function Z(y,_,z){y.bi_valid>p-z?(y.bi_buf|=_<<y.bi_valid&65535,X(y,y.bi_buf),y.bi_buf=_>>p-y.bi_valid,y.bi_valid+=z-p):(y.bi_buf|=_<<y.bi_valid&65535,y.bi_valid+=z)}function ie(y,_,z){Z(y,z[2*_],z[2*_+1])}function G(y,_){for(var z=0;z|=1&y,y>>>=1,z<<=1,0<--_;);return z>>>1}function O(y,_,z){var $,q,se=new Array(b+1),ue=0;for($=1;$<=b;$++)se[$]=ue=ue+z[$-1]<<1;for(q=0;q<=_;q++){var le=y[2*q+1];le!==0&&(y[2*q]=G(se[le]++,le))}}function A(y){var _;for(_=0;_<h;_++)y.dyn_ltree[2*_]=0;for(_=0;_<d;_++)y.dyn_dtree[2*_]=0;for(_=0;_<m;_++)y.bl_tree[2*_]=0;y.dyn_ltree[2*k]=1,y.opt_len=y.static_len=0,y.last_lit=y.matches=0}function W(y){8<y.bi_valid?X(y,y.bi_buf):0<y.bi_valid&&(y.pending_buf[y.pending++]=y.bi_buf),y.bi_buf=0,y.bi_valid=0}function j(y,_,z,$){var q=2*_,se=2*z;return y[q]<y[se]||y[q]===y[se]&&$[_]<=$[z]}function P(y,_,z){for(var $=y.heap[z],q=z<<1;q<=y.heap_len&&(q<y.heap_len&&j(_,y.heap[q+1],y.heap[q],y.depth)&&q++,!j(_,$,y.heap[q],y.depth));)y.heap[z]=y.heap[q],z=q,q<<=1;y.heap[z]=$}function L(y,_,z){var $,q,se,ue,le=0;if(y.last_lit!==0)for(;$=y.pending_buf[y.d_buf+2*le]<<8|y.pending_buf[y.d_buf+2*le+1],q=y.pending_buf[y.l_buf+le],le++,$===0?ie(y,q,_):(ie(y,(se=T[q])+f+1,_),(ue=I[se])!==0&&Z(y,q-=V[se],ue),ie(y,se=D(--$),z),(ue=F[se])!==0&&Z(y,$-=te[se],ue)),le<y.last_lit;);ie(y,k,_)}function re(y,_){var z,$,q,se=_.dyn_tree,ue=_.stat_desc.static_tree,le=_.stat_desc.has_stree,de=_.stat_desc.elems,ve=-1;for(y.heap_len=0,y.heap_max=g,z=0;z<de;z++)se[2*z]!==0?(y.heap[++y.heap_len]=ve=z,y.depth[z]=0):se[2*z+1]=0;for(;y.heap_len<2;)se[2*(q=y.heap[++y.heap_len]=ve<2?++ve:0)]=1,y.depth[q]=0,y.opt_len--,le&&(y.static_len-=ue[2*q+1]);for(_.max_code=ve,z=y.heap_len>>1;1<=z;z--)P(y,se,z);for(q=de;z=y.heap[1],y.heap[1]=y.heap[y.heap_len--],P(y,se,1),$=y.heap[1],y.heap[--y.heap_max]=z,y.heap[--y.heap_max]=$,se[2*q]=se[2*z]+se[2*$],y.depth[q]=(y.depth[z]>=y.depth[$]?y.depth[z]:y.depth[$])+1,se[2*z+1]=se[2*$+1]=q,y.heap[1]=q++,P(y,se,1),2<=y.heap_len;);y.heap[--y.heap_max]=y.heap[1],(function(Se,pt){var Hr,Zt,Hi,je,Ts,Mc,_r=pt.dyn_tree,Uw=pt.max_code,RC=pt.stat_desc.static_tree,MC=pt.stat_desc.has_stree,IC=pt.stat_desc.extra_bits,qw=pt.stat_desc.extra_base,ji=pt.stat_desc.max_length,As=0;for(je=0;je<=b;je++)Se.bl_count[je]=0;for(_r[2*Se.heap[Se.heap_max]+1]=0,Hr=Se.heap_max+1;Hr<g;Hr++)ji<(je=_r[2*_r[2*(Zt=Se.heap[Hr])+1]+1]+1)&&(je=ji,As++),_r[2*Zt+1]=je,Uw<Zt||(Se.bl_count[je]++,Ts=0,qw<=Zt&&(Ts=IC[Zt-qw]),Mc=_r[2*Zt],Se.opt_len+=Mc*(je+Ts),MC&&(Se.static_len+=Mc*(RC[2*Zt+1]+Ts)));if(As!==0){do{for(je=ji-1;Se.bl_count[je]===0;)je--;Se.bl_count[je]--,Se.bl_count[je+1]+=2,Se.bl_count[ji]--,As-=2}while(0<As);for(je=ji;je!==0;je--)for(Zt=Se.bl_count[je];Zt!==0;)Uw<(Hi=Se.heap[--Hr])||(_r[2*Hi+1]!==je&&(Se.opt_len+=(je-_r[2*Hi+1])*_r[2*Hi],_r[2*Hi+1]=je),Zt--)}})(y,_),O(se,ve,y.bl_count)}function E(y,_,z){var $,q,se=-1,ue=_[1],le=0,de=7,ve=4;for(ue===0&&(de=138,ve=3),_[2*(z+1)+1]=65535,$=0;$<=z;$++)q=ue,ue=_[2*($+1)+1],++le<de&&q===ue||(le<ve?y.bl_tree[2*q]+=le:q!==0?(q!==se&&y.bl_tree[2*q]++,y.bl_tree[2*w]++):le<=10?y.bl_tree[2*x]++:y.bl_tree[2*M]++,se=q,ve=(le=0)===ue?(de=138,3):q===ue?(de=6,3):(de=7,4))}function ee(y,_,z){var $,q,se=-1,ue=_[1],le=0,de=7,ve=4;for(ue===0&&(de=138,ve=3),$=0;$<=z;$++)if(q=ue,ue=_[2*($+1)+1],!(++le<de&&q===ue)){if(le<ve)for(;ie(y,q,y.bl_tree),--le!=0;);else q!==0?(q!==se&&(ie(y,q,y.bl_tree),le--),ie(y,w,y.bl_tree),Z(y,le-3,2)):le<=10?(ie(y,x,y.bl_tree),Z(y,le-3,3)):(ie(y,M,y.bl_tree),Z(y,le-11,7));se=q,ve=(le=0)===ue?(de=138,3):q===ue?(de=6,3):(de=7,4)}}l(te);var C=!1;function v(y,_,z,$){Z(y,(u<<1)+($?1:0),3),(function(q,se,ue,le){W(q),X(q,ue),X(q,~ue),o.arraySet(q.pending_buf,q.window,se,ue,q.pending),q.pending+=ue})(y,_,z)}i._tr_init=function(y){C||((function(){var _,z,$,q,se,ue=new Array(b+1);for(q=$=0;q<c-1;q++)for(V[q]=$,_=0;_<1<<I[q];_++)T[$++]=q;for(T[$-1]=q,q=se=0;q<16;q++)for(te[q]=se,_=0;_<1<<F[q];_++)H[se++]=q;for(se>>=7;q<d;q++)for(te[q]=se<<7,_=0;_<1<<F[q]-7;_++)H[256+se++]=q;for(z=0;z<=b;z++)ue[z]=0;for(_=0;_<=143;)ae[2*_+1]=8,_++,ue[8]++;for(;_<=255;)ae[2*_+1]=9,_++,ue[9]++;for(;_<=279;)ae[2*_+1]=7,_++,ue[7]++;for(;_<=287;)ae[2*_+1]=8,_++,ue[8]++;for(O(ae,h+1,ue),_=0;_<d;_++)R[2*_+1]=5,R[2*_]=G(_,5);Q=new fe(ae,I,f+1,h,b),U=new fe(R,F,0,d,b),oe=new fe(new Array(0),N,0,m,S)})(),C=!0),y.l_desc=new J(y.dyn_ltree,Q),y.d_desc=new J(y.dyn_dtree,U),y.bl_desc=new J(y.bl_tree,oe),y.bi_buf=0,y.bi_valid=0,A(y)},i._tr_stored_block=v,i._tr_flush_block=function(y,_,z,$){var q,se,ue=0;0<y.level?(y.strm.data_type===2&&(y.strm.data_type=(function(le){var de,ve=4093624447;for(de=0;de<=31;de++,ve>>>=1)if(1&ve&&le.dyn_ltree[2*de]!==0)return s;if(le.dyn_ltree[18]!==0||le.dyn_ltree[20]!==0||le.dyn_ltree[26]!==0)return a;for(de=32;de<f;de++)if(le.dyn_ltree[2*de]!==0)return a;return s})(y)),re(y,y.l_desc),re(y,y.d_desc),ue=(function(le){var de;for(E(le,le.dyn_ltree,le.l_desc.max_code),E(le,le.dyn_dtree,le.d_desc.max_code),re(le,le.bl_desc),de=m-1;3<=de&&le.bl_tree[2*K[de]+1]===0;de--);return le.opt_len+=3*(de+1)+5+5+4,de})(y),q=y.opt_len+3+7>>>3,(se=y.static_len+3+7>>>3)<=q&&(q=se)):q=se=z+5,z+4<=q&&_!==-1?v(y,_,z,$):y.strategy===4||se===q?(Z(y,2+($?1:0),3),L(y,ae,R)):(Z(y,4+($?1:0),3),(function(le,de,ve,Se){var pt;for(Z(le,de-257,5),Z(le,ve-1,5),Z(le,Se-4,4),pt=0;pt<Se;pt++)Z(le,le.bl_tree[2*K[pt]+1],3);ee(le,le.dyn_ltree,de-1),ee(le,le.dyn_dtree,ve-1)})(y,y.l_desc.max_code+1,y.d_desc.max_code+1,ue+1),L(y,y.dyn_ltree,y.dyn_dtree)),A(y),$&&W(y)},i._tr_tally=function(y,_,z){return y.pending_buf[y.d_buf+2*y.last_lit]=_>>>8&255,y.pending_buf[y.d_buf+2*y.last_lit+1]=255&_,y.pending_buf[y.l_buf+y.last_lit]=255&z,y.last_lit++,_===0?y.dyn_ltree[2*z]++:(y.matches++,_--,y.dyn_ltree[2*(T[z]+f+1)]++,y.dyn_dtree[2*D(_)]++),y.last_lit===y.lit_bufsize-1},i._tr_align=function(y){Z(y,2,3),ie(y,k,ae),(function(_){_.bi_valid===16?(X(_,_.bi_buf),_.bi_buf=0,_.bi_valid=0):8<=_.bi_valid&&(_.pending_buf[_.pending++]=255&_.bi_buf,_.bi_buf>>=8,_.bi_valid-=8)})(y)}},{"../utils/common":41}],53:[function(t,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,i){(function(o){(function(s,a){if(!s.setImmediate){var l,u,c,f,h=1,d={},m=!1,g=s.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(s);b=b&&b.setTimeout?b:s,l={}.toString.call(s.process)==="[object process]"?function(w){_e.nextTick(function(){S(w)})}:(function(){if(s.postMessage&&!s.importScripts){var w=!0,x=s.onmessage;return s.onmessage=function(){w=!1},s.postMessage("","*"),s.onmessage=x,w}})()?(f="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",k,!1):s.attachEvent("onmessage",k),function(w){s.postMessage(f+w,"*")}):s.MessageChannel?((c=new MessageChannel).port1.onmessage=function(w){S(w.data)},function(w){c.port2.postMessage(w)}):g&&"onreadystatechange"in g.createElement("script")?(u=g.documentElement,function(w){var x=g.createElement("script");x.onreadystatechange=function(){S(w),x.onreadystatechange=null,u.removeChild(x),x=null},u.appendChild(x)}):function(w){setTimeout(S,0,w)},b.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var x=new Array(arguments.length-1),M=0;M<x.length;M++)x[M]=arguments[M+1];var I={callback:w,args:x};return d[h]=I,l(h),h++},b.clearImmediate=p}function p(w){delete d[w]}function S(w){if(m)setTimeout(S,0,w);else{var x=d[w];if(x){m=!0;try{(function(M){var I=M.callback,F=M.args;switch(F.length){case 0:I();break;case 1:I(F[0]);break;case 2:I(F[0],F[1]);break;case 3:I(F[0],F[1],F[2]);break;default:I.apply(a,F)}})(x)}finally{p(w),m=!1}}}}function k(w){w.source===s&&typeof w.data=="string"&&w.data.indexOf(f)===0&&S(+w.data.slice(f.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof vr<"u"?vr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(ym)),ym.exports}var rH=tH(),Ii=yw(rH),Vo={exports:{}},wm,XA;function nH(){if(XA)return wm;XA=1;var r={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};function e(t){return t&&t.replace?t.replace(/([&"<>'])/g,function(n,i){return r[i]}):t}return wm=e,wm}var YA;function iH(){if(YA)return Vo.exports;YA=1;var r=nH(),e=Ew().Stream,t="    ";function n(u,c){typeof c!="object"&&(c={indent:c});var f=c.stream?new e:null,h="",d=!1,m=c.indent?c.indent===!0?t:c.indent:"",g=!0;function b(x){g?_e.nextTick(x):x()}function p(x,M){if(M!==void 0&&(h+=M),x&&!d&&(f=f||new e,d=!0),x&&d){var I=h;b(function(){f.emit("data",I)}),h=""}}function S(x,M){a(p,s(x,m,m?1:0),M)}function k(){if(f){var x=h;b(function(){f.emit("data",x),f.emit("end"),f.readable=!1,f.emit("close")})}}function w(x){var M=x.encoding||"UTF-8",I={version:"1.0",encoding:M};x.standalone&&(I.standalone=x.standalone),S({"?xml":{_attr:I}}),h=h.replace("/>","?>")}return b(function(){g=!1}),c.declaration&&w(c.declaration),u&&u.forEach?u.forEach(function(x,M){var I;M+1===u.length&&(I=k),S(x,I)}):S(u,k),f?(f.readable=!0,f):h}function i(){var u=Array.prototype.slice.call(arguments),c={_elem:s(u)};return c.push=function(f){if(!this.append)throw new Error("not assigned to a parent!");var h=this,d=this._elem.indent;a(this.append,s(f,d,this._elem.icount+(d?1:0)),function(){h.append(!0)})},c.close=function(f){f!==void 0&&this.push(f),this.end&&this.end()},c}function o(u,c){return new Array(c||0).join(u||"")}function s(u,c,f){f=f||0;var h=o(c,f),d,m=u,g=!1;if(typeof u=="object"){var b=Object.keys(u);if(d=b[0],m=u[d],m&&m._elem)return m._elem.name=d,m._elem.icount=f,m._elem.indent=c,m._elem.indents=h,m._elem.interrupt=m,m._elem}var p=[],S=[],k;function w(x){var M=Object.keys(x);M.forEach(function(I){p.push(l(I,x[I]))})}switch(typeof m){case"object":if(m===null)break;m._attr&&w(m._attr),m._cdata&&S.push(("<![CDATA["+m._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),m.forEach&&(k=!1,S.push(""),m.forEach(function(x){if(typeof x=="object"){var M=Object.keys(x)[0];M=="_attr"?w(x._attr):S.push(s(x,c,f+1))}else S.pop(),k=!0,S.push(r(x))}),k||S.push(""));break;default:S.push(r(m))}return{name:d,interrupt:g,attributes:p,content:S,icount:f,indents:h,indent:c}}function a(u,c,f){if(typeof c!="object")return u(!1,c);var h=c.interrupt?1:c.content.length;function d(){for(;c.content.length;){var g=c.content.shift();if(g!==void 0){if(m(g))return;a(u,g)}}u(!1,(h>1?c.indents:"")+(c.name?"</"+c.name+">":"")+(c.indent&&!f?`
`:"")),f&&f()}function m(g){return g.interrupt?(g.interrupt.append=u,g.interrupt.end=d,g.interrupt=!1,u(!0),!0):!1}if(u(!1,c.indents+(c.name?"<"+c.name:"")+(c.attributes.length?" "+c.attributes.join(" "):"")+(h?c.name?">":"":c.name?"/>":"")+(c.indent&&h>1?`
`:"")),!h)return u(!1,c.indent?`
`:"");m(c)||d()}function l(u,c){return u+'="'+r(c)+'"'}return Vo.exports=n,Vo.exports.element=Vo.exports.Element=i,Vo.exports}var oH=iH(),Fe=yw(oH),$o=0,bm=32,sH=32,aH=(r,e)=>{let t=e.replace(/-/g,"");if(t.length!==sH)throw new Error(`Error: Cannot extract GUID from font filename: ${e}`);let i=t.replace(/(..)/g,"$1 ").trim().split(" ").map(l=>parseInt(l,16));i.reverse();let s=r.slice($o,bm).map((l,u)=>l^i[u%i.length]),a=new Uint8Array($o+s.length+Math.max(0,r.length-bm));return a.set(r.slice(0,$o)),a.set(s,$o),a.set(r.slice(bm),$o+s.length),a},gs=class{format(e,t={stack:[]}){let n=e.prepForXml(t);if(n)return n;throw Error("XMLComponent did not format correctly")}},kc=class{replace(e,t,n){let i=e;return t.forEach((o,s)=>{i=i.replace(new RegExp(`{${o.fileName}}`,"g"),(n+s).toString())}),i}getMediaData(e,t){return t.Array.filter(n=>e.search(`{${n.fileName}}`)>0)}},pw=class{replace(e,t){let n=e;for(let i of t)n=n.replace(new RegExp(`{${i.reference}-${i.instance}}`,"g"),i.numId.toString());return n}},mw=class{constructor(){ne(this,"formatter"),ne(this,"imageReplacer"),ne(this,"numberingReplacer"),this.formatter=new gs,this.imageReplacer=new kc,this.numberingReplacer=new pw}compile(e,t,n=[]){let i=new Ii,o=this.xmlifyFile(e,t),s=new Map(Object.entries(o));for(let[,a]of s)if(Array.isArray(a))for(let l of a)i.file(l.path,l.data);else i.file(a.path,a.data);for(let a of n)i.file(a.path,a.data);for(let a of e.Media.Array)a.type!=="svg"?i.file(`word/media/${a.fileName}`,a.data):(i.file(`word/media/${a.fileName}`,a.data),i.file(`word/media/${a.fallback.fileName}`,a.fallback.data));for(let{data:a,name:l,fontKey:u}of e.FontTable.fontOptionsWithKey){let[c]=l.split(".");i.file(`word/fonts/${c}.odttf`,aH(a,u))}return i}xmlifyFile(e,t){let n=e.Document.Relationships.RelationshipCount+1,i=Fe(this.formatter.format(e.Document.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),o=e.Comments.Relationships.RelationshipCount+1,s=Fe(this.formatter.format(e.Comments,{viewWrapper:{View:e.Comments,Relationships:e.Comments.Relationships},file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),a=this.imageReplacer.getMediaData(i,e.Media),l=this.imageReplacer.getMediaData(s,e.Media);return{Relationships:{data:(a.forEach((u,c)=>{e.Document.Relationships.createRelationship(n+c,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${u.fileName}`)}),e.Document.Relationships.createRelationship(e.Document.Relationships.RelationshipCount+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/fontTable","fontTable.xml"),Fe(this.formatter.format(e.Document.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}})),path:"word/_rels/document.xml.rels"},Document:{data:(()=>{let u=this.imageReplacer.replace(i,a,n);return this.numberingReplacer.replace(u,e.Numbering.ConcreteNumbering)})(),path:"word/document.xml"},Styles:{data:(()=>{let u=Fe(this.formatter.format(e.Styles,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}});return this.numberingReplacer.replace(u,e.Numbering.ConcreteNumbering)})(),path:"word/styles.xml"},Properties:{data:Fe(this.formatter.format(e.CoreProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/core.xml"},Numbering:{data:Fe(this.formatter.format(e.Numbering,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/numbering.xml"},FileRelationships:{data:Fe(this.formatter.format(e.FileRelationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"_rels/.rels"},HeaderRelationships:e.Headers.map((u,c)=>{let f=Fe(this.formatter.format(u.View,{viewWrapper:u,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(f,e.Media).forEach((d,m)=>{u.Relationships.createRelationship(m,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${d.fileName}`)}),{data:Fe(this.formatter.format(u.Relationships,{viewWrapper:u,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:`word/_rels/header${c+1}.xml.rels`}}),FooterRelationships:e.Footers.map((u,c)=>{let f=Fe(this.formatter.format(u.View,{viewWrapper:u,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(f,e.Media).forEach((d,m)=>{u.Relationships.createRelationship(m,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${d.fileName}`)}),{data:Fe(this.formatter.format(u.Relationships,{viewWrapper:u,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:`word/_rels/footer${c+1}.xml.rels`}}),Headers:e.Headers.map((u,c)=>{let f=Fe(this.formatter.format(u.View,{viewWrapper:u,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),h=this.imageReplacer.getMediaData(f,e.Media),d=this.imageReplacer.replace(f,h,0);return{data:this.numberingReplacer.replace(d,e.Numbering.ConcreteNumbering),path:`word/header${c+1}.xml`}}),Footers:e.Footers.map((u,c)=>{let f=Fe(this.formatter.format(u.View,{viewWrapper:u,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),h=this.imageReplacer.getMediaData(f,e.Media),d=this.imageReplacer.replace(f,h,0);return{data:this.numberingReplacer.replace(d,e.Numbering.ConcreteNumbering),path:`word/footer${c+1}.xml`}}),ContentTypes:{data:Fe(this.formatter.format(e.ContentTypes,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"[Content_Types].xml"},CustomProperties:{data:Fe(this.formatter.format(e.CustomProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/custom.xml"},AppProperties:{data:Fe(this.formatter.format(e.AppProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/app.xml"},FootNotes:{data:Fe(this.formatter.format(e.FootNotes.View,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"word/footnotes.xml"},FootNotesRelationships:{data:Fe(this.formatter.format(e.FootNotes.Relationships,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footnotes.xml.rels"},Settings:{data:Fe(this.formatter.format(e.Settings,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/settings.xml"},Comments:{data:(()=>{let u=this.imageReplacer.replace(s,l,o);return this.numberingReplacer.replace(u,e.Numbering.ConcreteNumbering)})(),path:"word/comments.xml"},CommentsRelationships:{data:(l.forEach((u,c)=>{e.Comments.Relationships.createRelationship(o+c,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${u.fileName}`)}),Fe(this.formatter.format(e.Comments.Relationships,{viewWrapper:{View:e.Comments,Relationships:e.Comments.Relationships},file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}})),path:"word/_rels/comments.xml.rels"},FontTable:{data:Fe(this.formatter.format(e.FontTable.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/fontTable.xml"},FontTableRelationships:{data:Fe(this.formatter.format(e.FontTable.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"word/_rels/fontTable.xml.rels"}}}},wC={NONE:"",WITH_2_BLANKS:"  ",WITH_4_BLANKS:"    ",WITH_TAB:"	"},ZA=r=>r===!0?wC.WITH_2_BLANKS:r===!1?void 0:r,bC=class Ti{static pack(e,t,n){return vw(this,arguments,function*(i,o,s,a=[]){return this.compiler.compile(i,ZA(s),a).generateAsync({type:o,mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toString(e,t,n=[]){return Ti.pack(e,"string",t,n)}static toBuffer(e,t,n=[]){return Ti.pack(e,"nodebuffer",t,n)}static toBase64String(e,t,n=[]){return Ti.pack(e,"base64",t,n)}static toBlob(e,t,n=[]){return Ti.pack(e,"blob",t,n)}static toArrayBuffer(e,t,n=[]){return Ti.pack(e,"arraybuffer",t,n)}static toStream(e,t,n=[]){let i=new eH.Stream;return this.compiler.compile(e,ZA(t),n).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"}).then(s=>{i.emit("data",s),i.emit("end")}),i}};ne(bC,"compiler",new mw);var lH=bC,uH=new gs,Cc=r=>Ec.xml2js(r,{compact:!1,captureSpacesBetweenElements:!0}),kC=r=>{var e;return(e=Cc(Fe(uH.format(new rs({text:r})))).elements[0].elements)!=null?e:[]},SC=r=>ht(ke({},r),{attributes:{"xml:space":"preserve"}}),Pw=(r,e)=>{var t,n;return(n=(t=r.elements)==null?void 0:t.filter(i=>i.name===e)[0].elements)!=null?n:[]},Ei=(r,e,t)=>{let n=Pw(r,"Types");n.some(o=>{var s,a;return o.type==="element"&&o.name==="Default"&&((s=o?.attributes)==null?void 0:s.ContentType)===e&&((a=o?.attributes)==null?void 0:a.Extension)===t})||n.push({attributes:{ContentType:e,Extension:t},name:"Default",type:"element"})},cH=r=>{let e=parseInt(r.substring(3),10);return isNaN(e)?0:e},fH=r=>Pw(r,"Relationships").map(t=>{var n,i,o;return cH((o=(i=(n=t.attributes)==null?void 0:n.Id)==null?void 0:i.toString())!=null?o:"")}).reduce((t,n)=>Math.max(t,n),0)+1,QA=(r,e,t,n,i)=>{let o=Pw(r,"Relationships");return o.push({attributes:{Id:`rId${e}`,Type:t,Target:n,TargetMode:i},name:"Relationship",type:"element"}),o},hH=(r,e)=>{var t,n,i,o;for(let s=0;s<((t=r.elements)!=null?t:[]).length;s++){let a=r.elements[s];if(a.type==="element"&&a.name==="w:r"){let l=((n=a.elements)!=null?n:[]).filter(u=>u.type==="element"&&u.name==="w:t");for(let u of l)if((i=u.elements)!=null&&i[0]&&(o=u.elements[0].text)!=null&&o.includes(e))return s}}throw new Error("Token not found")},dH=(r,e)=>{var t,n;let i=0,o=(n=(t=r.elements)==null?void 0:t.map((l,u)=>{var c,f,h;if(l.type==="element"&&l.name==="w:t"){let g=((h=(f=(c=l.elements)==null?void 0:c[0])==null?void 0:f.text)!=null?h:"").split(e).map(b=>ht(ke(ke({},l),SC(l)),{elements:kC(b)}));return i=u,g}else return l}).flat())!=null?n:[],s=ht(ke({},JSON.parse(JSON.stringify(r))),{elements:o.slice(0,i+1)}),a=ht(ke({},JSON.parse(JSON.stringify(r))),{elements:o.slice(i+1)});return{left:s,right:a}},Ko={START:0,MIDDLE:1,END:2},pH=({paragraphElement:r,renderedParagraph:e,originalText:t,replacementText:n})=>{let i=e.text.indexOf(t),o=i+t.length-1,s=Ko.START;for(let a of e.runs)for(let{text:l,index:u,start:c,end:f}of a.parts)switch(s){case Ko.START:if(i>=c){let h=i-c,d=Math.min(o,f)-c,m=a.text.substring(h,d+1);if(m==="")continue;let g=l.replace(m,n);km(r.elements[a.index].elements[u],g),s=Ko.MIDDLE;continue}break;case Ko.MIDDLE:if(o<=f){let h=l.substring(o-c+1);km(r.elements[a.index].elements[u],h);let d=r.elements[a.index].elements[u];r.elements[a.index].elements[u]=SC(d),s=Ko.END}else km(r.elements[a.index].elements[u],"");break}return r},km=(r,e)=>(r.elements=kC(e),r),mH=r=>{if(r.element.name!=="w:p")throw new Error(`Invalid node type: ${r.element.name}`);if(!r.element.elements)return{text:"",runs:[],index:-1,pathToParagraph:[]};let e=0,t=r.element.elements.map((i,o)=>({element:i,i:o})).filter(({element:i})=>i.name==="w:r").map(({element:i,i:o})=>{let s=gH(i,o,e);return e+=s.text.length,s}).filter(i=>!!i);return{text:t.reduce((i,o)=>i+o.text,""),runs:t,index:r.index,pathToParagraph:xC(r)}},gH=(r,e,t)=>{if(!r.elements)return{text:"",parts:[],index:-1,start:t,end:t};let n=t,i=r.elements.map((s,a)=>{var l,u;return s.name==="w:t"&&s.elements&&s.elements.length>0?{text:(u=(l=s.elements[0].text)==null?void 0:l.toString())!=null?u:"",index:a,start:n,end:(()=>{var c,f;return n+=((f=(c=s.elements[0].text)==null?void 0:c.toString())!=null?f:"").length-1,n})()}:void 0}).filter(s=>!!s).map(s=>s);return{text:i.reduce((s,a)=>s+a.text,""),parts:i,index:e,start:t,end:n}},xC=r=>r.parent?[...xC(r.parent),r.index]:[r.index],eO=r=>{var e,t;return(t=(e=r.element.elements)==null?void 0:e.map((n,i)=>({element:n,index:i,parent:r})))!=null?t:[]},EC=r=>{let e=[],t=[...eO({element:r,index:0,parent:void 0})],n;for(;t.length>0;)n=t.shift(),n.element.name==="w:p"&&(e=[...e,mH(n)]),t.push(...eO(n));return e},vH=(r,e)=>EC(r).filter(t=>t.text.includes(e)),yH=new gs,Sm="\u0275",wH=({json:r,patch:e,patchText:t,context:n,keepOriginalStyles:i=!0})=>{let o=vH(r,t);if(o.length===0)return{element:r,didFindOccurrence:!1};for(let s of o){let a=e.children.map(l=>Cc(Fe(yH.format(l,n)))).map(l=>l.elements[0]);switch(e.type){case gw.DOCUMENT:{let l=bH(r,s.pathToParagraph),u=kH(s.pathToParagraph);l.elements.splice(u,1,...a);break}case gw.PARAGRAPH:default:{let l=_C(r,s.pathToParagraph);pH({paragraphElement:l,renderedParagraph:s,originalText:t,replacementText:Sm});let u=hH(l,Sm),c=l.elements[u],{left:f,right:h}=dH(c,Sm),d=a,m=h;if(i){let g=c.elements.filter(b=>b.type==="element"&&b.name==="w:rPr");d=a.map(b=>{var p;return ht(ke({},b),{elements:[...g,...(p=b.elements)!=null?p:[]]})}),m=ht(ke({},h),{elements:[...g,...h.elements]})}l.elements.splice(u,1,f,...d,m);break}}}return{element:r,didFindOccurrence:!0}},_C=(r,e)=>{let t=r;for(let n=1;n<e.length;n++){let i=e[n];t=t.elements[i]}return t},bH=(r,e)=>_C(r,e.slice(0,e.length-1)),kH=r=>r[r.length-1],gw={DOCUMENT:"file",PARAGRAPH:"paragraph"},tO=new kc,SH=new Uint8Array([255,254]),xH=new Uint8Array([254,255]),rO=(r,e)=>{if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0},EH=r=>vw(B,[r],function*({outputType:e,data:t,patches:n,keepOriginalStyles:i,placeholderDelimiters:o={start:"{{",end:"}}"},recursive:s=!0}){var a,l,u;let c=t instanceof Ii?t:yield Ii.loadAsync(t),f=new Map,h={Media:new hs},d=new Map,m=[],g=[],b=!1,p=new Map;for(let[k,w]of Object.entries(c.files)){let x=yield w.async("uint8array"),M=x.slice(0,2);if(rO(M,SH)||rO(M,xH)){p.set(k,x);continue}if(!k.endsWith(".xml")&&!k.endsWith(".rels")){p.set(k,x);continue}let I=Cc(yield w.async("text"));if(k==="word/document.xml"){let F=(a=I.elements)==null?void 0:a.find(N=>N.name==="w:document");if(F&&F.attributes){for(let N of["mc","wp","r","w15","m"])F.attributes[`xmlns:${N}`]=Mu[N];F.attributes["mc:Ignorable"]=`${F.attributes["mc:Ignorable"]||""} w15`.trim()}}if(k.startsWith("word/")&&!k.endsWith(".xml.rels")){let F={file:h,viewWrapper:{Relationships:{createRelationship:(R,H,T,V)=>{g.push({key:k,hyperlink:{id:R,link:T}})}}},stack:[]};if(f.set(k,F),!o?.start.trim()||!o?.end.trim())throw new Error("Both start and end delimiters must be non-empty strings.");let{start:N,end:K}=o;for(let[R,H]of Object.entries(n)){let T=`${N}${R}${K}`;for(;;){let{didFindOccurrence:V}=wH({json:I,patch:ht(ke({},H),{children:H.children.map(Q=>{if(Q instanceof ss){let U=new ln(Q.options.children,_s());return g.push({key:k,hyperlink:{id:U.linkId,link:Q.options.link}}),U}else return Q})}),patchText:T,context:F,keepOriginalStyles:i});if(!s||!V)break}}let ae=tO.getMediaData(JSON.stringify(I),F.file.Media);ae.length>0&&(b=!0,m.push({key:k,mediaDatas:ae}))}d.set(k,I)}for(let{key:k,mediaDatas:w}of m){let x=`word/_rels/${k.split("/").pop()}.rels`,M=(l=d.get(x))!=null?l:nO();d.set(x,M);let I=fH(M),F=tO.replace(JSON.stringify(d.get(k)),w,I);d.set(k,JSON.parse(F));for(let N=0;N<w.length;N++){let{fileName:K}=w[N];QA(M,I+N,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${K}`)}}for(let{key:k,hyperlink:w}of g){let x=`word/_rels/${k.split("/").pop()}.rels`,M=(u=d.get(x))!=null?u:nO();d.set(x,M),QA(M,w.id,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",w.link,iC.EXTERNAL)}if(b){let k=d.get("[Content_Types].xml");if(!k)throw new Error("Could not find content types file");Ei(k,"image/png","png"),Ei(k,"image/jpeg","jpeg"),Ei(k,"image/jpeg","jpg"),Ei(k,"image/bmp","bmp"),Ei(k,"image/gif","gif"),Ei(k,"image/svg+xml","svg")}let S=new Ii;for(let[k,w]of d){let x=_H(w);S.file(k,x)}for(let[k,w]of p)S.file(k,w);for(let{data:k,fileName:w}of h.Media.Array)S.file(`word/media/${w}`,k);return S.generateAsync({type:e,mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})}),_H=r=>Ec.js2xml(r,{attributeValueFn:t=>String(t).replace(/&(?!amp;|lt;|gt;|quot;|apos;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}),nO=()=>({declaration:{attributes:{version:"1.0",encoding:"UTF-8",standalone:"yes"}},elements:[{type:"element",name:"Relationships",attributes:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},elements:[]}]}),TH=r=>vw(B,[r],function*({data:e}){let t=e instanceof Ii?e:yield Ii.loadAsync(e),n=new Set;for(let[i,o]of Object.entries(t.files))if(!(!i.endsWith(".xml")&&!i.endsWith(".rels"))&&i.startsWith("word/")&&!i.endsWith(".xml.rels")){let s=Cc(yield o.async("text"));EC(s).forEach(a=>AH(a.text).forEach(l=>n.add(l)))}return Array.from(n)}),AH=r=>{var e;let t=new RegExp("(?<=\\{\\{).+?(?=\\}\\})","gs");return(e=r.match(t))!=null?e:[]};B.AbstractNumbering=ps;B.Alignment=Zo;B.AlignmentAttributes=Wl;B.AlignmentType=Kt;B.AnnotationReference=Wg;B.Attributes=Pe;B.BaseEmphasisMark=ts;B.BaseXmlComponent=Pn;B.Body=Ru;B.Bookmark=mu;B.BookmarkEnd=vu;B.BookmarkStart=gu;B.Border=Vl;B.BorderElement=Ce;B.BorderStyle=Ac;B.BuilderElement=be;B.CarriageReturn=Xg;B.CharacterSet=zz;B.CheckBox=hw;B.CheckBoxSymbolElement=Mi;B.CheckBoxUtil=bc;B.Column=mv;B.ColumnBreak=tv;B.Columns=bu;B.Comment=su;B.CommentRangeEnd=Pg;B.CommentRangeStart=Ig;B.CommentReference=Dg;B.Comments=au;B.ConcreteHyperlink=ln;B.ConcreteNumbering=ms;B.ContinuationSeparator=Gg;B.DayLong=jg;B.DayShort=Bg;B.DeletedTextRun=cw;B.Document=dc;B.DocumentAttributeNamespaces=Mu;B.DocumentAttributes=zn;B.DocumentBackground=Pu;B.DocumentBackgroundAttributes=Iu;B.DocumentDefaults=fc;B.DocumentGridType=pz;B.DotEmphasisMark=Dm;B.Drawing=iu;B.DropCapType=Sz;B.EMPTY_OBJECT=sO;B.EmphasisMark=Gl;B.EmphasisMarkType=Nw;B.EmptyElement=Ge;B.EndnoteReference=$g;B.ExternalHyperlink=ss;B.File=dc;B.FileChild=Bn;B.FootNoteReferenceRunAttributes=gc;B.FootNotes=rc;B.Footer=iw;B.FooterWrapper=tc;B.FootnoteReference=vc;B.FootnoteReferenceElement=Vg;B.FootnoteReferenceRun=ow;B.FrameAnchorType=xz;B.FrameWrap=Ez;B.GridSpan=Vu;B.Header=nw;B.HeaderFooterReference=Ri;B.HeaderFooterReferenceType=In;B.HeaderFooterType=dv;B.HeaderWrapper=nc;B.HeadingLevel=uz;B.HeightRule=Bz;B.HighlightColor=L8;B.HorizontalPositionAlign=N8;B.HorizontalPositionRelativeFrom=VO;B.HpsMeasureElement=Oi;B.HyperlinkType=hz;B.IgnoreIfEmptyXmlComponent=zt;B.ImageRun=xg;B.ImportedRootElementAttributes=Ul;B.ImportedXmlComponent=jl;B.Indent=Kl;B.InitializableXmlComponent=Yo;B.InsertedTextRun=sw;B.InternalHyperlink=av;B.LastRenderedPageBreak=Zg;B.LeaderType=cz;B.Level=ic;B.LevelBase=ds;B.LevelForOverride=Ey;B.LevelFormat=dr;B.LevelOverride=oc;B.LevelSuffix=$z;B.LineNumberRestartFormat=mz;B.LineRuleType=cu;B.Math=_z;B.MathAngledBrackets=Fv;B.MathCurlyBrackets=Lv;B.MathDegree=Bu;B.MathDenominator=Lu;B.MathFraction=kv;B.MathFunction=Iv;B.MathFunctionName=Hu;B.MathFunctionProperties=ju;B.MathIntegral=xv;B.MathLimit=ls;B.MathLimitLower=_v;B.MathLimitUpper=Ev;B.MathNumerator=Fu;B.MathPreSubSuperScript=Cv;B.MathRadical=Mv;B.MathRadicalProperties=zu;B.MathRoundBrackets=Pv;B.MathRun=bv;B.MathSquareBrackets=Dv;B.MathSubScript=Av;B.MathSubSuperScript=Ov;B.MathSum=Sv;B.MathSuperScript=Tv;B.Media=hs;B.MonthLong=Ug;B.MonthShort=zg;B.NextAttributeComponent=Tt;B.NoBreakHyphen=Lg;B.NumberFormat=M8;B.NumberProperties=Ni;B.NumberValueElement=an;B.Numbering=sc;B.OnOffElement=ce;B.OutlineLevel=yu;B.OverlapType=Dz;B.Packer=lH;B.PageBorderDisplay=gz;B.PageBorderOffsetFrom=vz;B.PageBorderZOrder=yz;B.PageBorders=Su;B.PageBreak=ev;B.PageBreakBefore=uu;B.PageMargin=xu;B.PageNumber=sn;B.PageNumberElement=Jg;B.PageNumberSeparator=wz;B.PageNumberType=_u;B.PageNumberTypeAttributes=Eu;B.PageOrientation=Tu;B.PageReference=fv;B.PageTextDirection=Au;B.PageTextDirectionType=bz;B.Paragraph=kr;B.ParagraphProperties=br;B.ParagraphPropertiesDefaults=uc;B.PatchType=gw;B.PositionalTab=Qg;B.PositionalTabAlignment=sz;B.PositionalTabLeader=lz;B.PositionalTabRelativeTo=az;B.PrettifyType=wC;B.RelativeHorizontalPosition=Iz;B.RelativeVerticalPosition=Pz;B.Run=dt;B.RunFonts=Ci;B.RunProperties=Yt;B.RunPropertiesChange=Yl;B.RunPropertiesDefaults=cc;B.SectionProperties=Nu;B.SectionType=kz;B.SectionTypeAttributes=Ou;B.Separator=Kg;B.SequentialIdentifier=_g;B.Shading=Ln;B.ShadingType=I8;B.SimpleField=ou;B.SimpleMailMergeField=Ag;B.SoftHyphen=Fg;B.SpaceType=At;B.Spacing=fu;B.StringContainer=gr;B.StringEnumValueElement=ql;B.StringValueElement=Xt;B.Style=Jo;B.StyleForCharacter=jn;B.StyleForParagraph=Hn;B.StyleLevel=rw;B.Styles=Di;B.SymbolRun=Zl;B.TDirection=$u;B.Tab=Yg;B.TabAttributes=du;B.TabStop=hu;B.TabStopItem=pu;B.TabStopPosition=fz;B.TabStopType=nv;B.Table=Vv;B.TableAnchorType=Mz;B.TableBorders=fs;B.TableCell=cs;B.TableCellBorders=Wu;B.TableFloatProperties=Ku;B.TableLayout=Gu;B.TableLayoutType=Lz;B.TableOfContents=tw;B.TableProperties=Xu;B.TableRow=$v;B.TableRowHeight=Zu;B.TableRowHeightAttributes=Yu;B.TableRowProperties=Qu;B.TableWidthElement=wr;B.TextDirection=Rz;B.TextEffect=D8;B.TextRun=Fn;B.TextWrappingSide=eC;B.TextWrappingType=Go;B.Textbox=dw;B.ThematicBreak=$l;B.Type=Cu;B.Underline=Xl;B.UnderlineType=Rw;B.VerticalAlign=dz;B.VerticalAlignAttributes=wu;B.VerticalAlignElement=as;B.VerticalAlignSection=aC;B.VerticalAlignTable=sC;B.VerticalMerge=us;B.VerticalMergeType=Iw;B.VerticalPositionAlign=R8;B.VerticalPositionRelativeFrom=$O;B.WORKAROUND2=Vz;B.WORKAROUND3=A8;B.WORKAROUND4=Oz;B.WidthType=qu;B.WrapNone=ns;B.WrapSquare=eu;B.WrapTight=tu;B.WrapTopAndBottom=ru;B.XmlAttributeComponent=pe;B.XmlComponent=Y;B.YearLong=qg;B.YearShort=Hg;B.abstractNumUniqueNumericIdGen=HO;B.bookmarkUniqueNumericIdGen=qO;B.concreteNumUniqueNumericIdGen=jO;B.convertInchesToTwip=Lt;B.convertMillimetersToTwip=J8;B.convertToXmlComponent=_c;B.createDocumentGrid=lC;B.createFrameProperties=fC;B.createHorizontalPosition=XO;B.createLineNumberType=uC;B.createMathAccentCharacter=hC;B.createMathBase=St;B.createMathLimitLocation=dC;B.createMathNAryProperties=Mw;B.createMathPreSubSuperScriptProperties=vC;B.createMathSubScriptElement=Fi;B.createMathSubScriptProperties=mC;B.createMathSubSuperScriptProperties=gC;B.createMathSuperScriptElement=Bi;B.createMathSuperScriptProperties=pC;B.createPageSize=cC;B.createSimplePos=KO;B.createStringElement=_i;B.createVerticalPosition=YO;B.dateTimeValue=PO;B.decimalNumber=et;B.docPropertiesUniqueNumericIdGen=UO;B.eighthPointMeasureValue=MO;B.hashedId=qm;B.hexColorValue=Dn;B.hpsMeasureValue=NO;B.longHexNumber=O8;B.measurementOrPercentValue=Ow;B.patchDetector=TH;B.patchDocument=EH;B.percentageValue=RO;B.pointMeasureValue=IO;B.positiveUniversalMeasureValue=Aw;B.sectionMarginDefaults=on;B.sectionPageSizeDefaults=zl;B.shortHexNumber=CO;B.signedHpsMeasureValue=C8;B.signedTwipsMeasureValue=yr;B.twipsMeasureValue=Ke;B.uCharHexNumber=Om;B.uniqueId=_s;B.uniqueNumericIdCreator=Es;B.uniqueUuid=WO;B.universalMeasureValue=ks;B.unsignedDecimalNumber=bs});var AC=me((_U,TC)=>{var{AlignmentType:Nc,UnderlineType:EU}=Dw(),Lw=class{constructor(){}convertStyles(e,t=100,n="Minion 3"){let i=t/100,o=[],s={},a={document:{run:{font:n,size:24},paragraph:{spacing:{line:360}}}};for(let[l,u]of Object.entries(e)){if(l==="scale"||l==="footnote-symbol")continue;let c=u.name||l,f=u.name||l;if(s[l]=c,l==="body"?c="BodyText":l==="footnote"&&(c="FootnoteText"),!u.type||u.type==="paragraph"||u.type==="heading"||u.type==="footnote"){let h=this.mapParagraphStyle(c,f,u,i,n);o.push(h),s[l]=c}}return{styles:{default:a,paragraphStyles:o},styleIdMap:s}}mapParagraphStyle(e,t,n,i,o){let s={},a={};if(n["font-family"]){let c=n["font-family"];c.includes("var(")?s.font=o:(c=c.split(",")[0].replace(/['"]/g,"").trim(),s.font=c)}else s.font=o;if(n["font-size"]&&(s.size=this.toHalfPoints(n["font-size"],i)),(n["font-weight"]==="bold"||n["font-variant"]==="bold")&&(s.bold=!0),n["font-variant"]==="italic"&&(s.italics=!0),(n.capitalization==="small-caps"||n["font-variant"]==="small-caps")&&(s.smallCaps=!0),n.color&&(s.color=n.color.replace("#","")),n["text-align"])switch(n["text-align"]){case"center":a.alignment=Nc.CENTER;break;case"right":a.alignment=Nc.RIGHT;break;case"justify":a.alignment=Nc.JUSTIFIED;break;case"left":a.alignment=Nc.LEFT;break}let l={};n["left-indent"]&&(l.left=this.toTwips(n["left-indent"],i)),n["right-indent"]&&(l.right=this.toTwips(n["right-indent"],i)),n["first-indent"]&&(l.firstLine=this.toTwips(n["first-indent"],i)),Object.keys(l).length>0&&(a.indent=l);let u={};if(n["before-paragraph"]&&(u.before=this.toTwips(n["before-paragraph"],i)),n["after-paragraph"]&&(u.after=this.toTwips(n["after-paragraph"],i)),n["line-spacing"]){let c=String(n["line-spacing"]);if(c.endsWith("pt")||c.endsWith("in"))u.line=this.toTwips(c,i),u.lineRule="exact";else{let f=parseFloat(c);isNaN(f)||(u.line=Math.round(f*240),u.lineRule="auto")}}return Object.keys(u).length>0&&(a.spacing=u),n["keep-with-next"]&&(a.keepNext=!0),{id:e,name:t,run:s,paragraph:a,quickFormat:!0}}toHalfPoints(e,t=1){if(typeof e=="number")return Math.round(e*2*t);let n=String(e).trim(),i=parseFloat(n);if(isNaN(i))return 24;let o=i;return n.endsWith("pt")?o=i:n.endsWith("in")?o=i*72:n.endsWith("mm")?o=i*2.835:n.endsWith("cm")?o=i*28.35:n.endsWith("px")&&(o=i*.75),Math.round(o*2*t)}toTwips(e,t=1){if(typeof e=="number")return Math.round(e*20*t);let n=String(e).trim(),i=parseFloat(n);if(isNaN(i))return 0;let o=i;return n.endsWith("pt")?o=i:n.endsWith("in")?o=i*72:n.endsWith("mm")?o=i*2.835:n.endsWith("cm")?o=i*28.35:n.endsWith("px")&&(o=i*.75),Math.round(o*20*t)}};TC.exports=Lw});var CC=me((TU,OC)=>{var{Document:OH,Packer:CH,Paragraph:Fw,TextRun:Bw,HeadingLevel:Un,PageOrientation:NH,FootnoteReferenceRun:RH}=Dw(),zw=class{constructor(e,t,n){this.view=e,this.stylesConfig=t,this.styleIdMap=n,this.footnotes=e.adapter?e.adapter.footnotes:[],this.footnoteCounter=0,this.docxFootnotes={}}generate(e,t){let n=[];e.content.forEach(u=>{let c=this.processNode(u);c&&(Array.isArray(c)?n.push(...c):n.push(c))});let i={Letter:{width:12240,height:15840},A4:{width:11906,height:16838},Legal:{width:12240,height:20160}},o=i[t.pageSize]||i.Letter,s=u=>Math.round(parseFloat(u)*1440),a={top:s(t.margins.top),bottom:s(t.margins.bottom),left:s(t.margins.left),right:s(t.margins.right)},l=new OH({sections:[{properties:{page:{size:{width:o.width,height:o.height,orientation:NH.PORTRAIT},margin:a}},children:n,footnotes:this.docxFootnotes}],styles:this.stylesConfig});return CH.toBuffer(l)}processNode(e){return e.type.name==="paragraph"?this.createParagraph(e):e.type.name==="heading"?this.createHeading(e):null}createParagraph(e){let t=this.processInlineContent(e),n=e.attrs.class||"body",i=this.styleIdMap[n]||n;return new Fw({style:i,children:t})}createHeading(e){let t=this.processInlineContent(e),n=e.attrs.class||`heading-${e.attrs.level}`,o={style:this.styleIdMap[n]||n,children:t};if(!e.attrs.class||e.attrs.class.startsWith("heading-")){let s=[Un.HEADING_1,Un.HEADING_2,Un.HEADING_3,Un.HEADING_4,Un.HEADING_5,Un.HEADING_6];o.heading=s[e.attrs.level-1]||Un.HEADING_1}return new Fw(o)}processInlineContent(e){let t=[];return e.content&&e.content.forEach(n=>{n.type.name==="text"?t.push(this.createTextRun(n)):n.type.name==="footnote"?t.push(this.createFootnote(n)):n.type.name==="hard_break"&&t.push(new Bw({break:1}))}),t}createTextRun(e){let t={text:e.text};return e.marks&&e.marks.forEach(n=>{n.type.name==="bold"&&(t.bold=!0),n.type.name==="italic"&&(t.italics=!0),n.type.name==="strike"&&(t.strike=!0),n.type.name==="underline"&&(t.underline={}),n.type.name==="superscript"&&(t.superScript=!0),n.type.name==="subscript"&&(t.subScript=!0),n.type.name==="smallCaps"&&(t.smallCaps=!0)}),new Bw(t)}createFootnote(e){let t=e.attrs.id,n=this.footnotes.find(s=>s.id===t),i=n?n.content:"";this.footnoteCounter++;let o=this.footnoteCounter;return this.docxFootnotes[o]={children:[new Fw({children:[new Bw(i)]})]},new RH(o)}};OC.exports=zw});var{Plugin:MH,TFolder:IH,Notice:cn,normalizePath:PH,WorkspaceLeaf:Hw,PluginSettingTab:DH,Setting:Er}=require("obsidian"),{ColophonView:fn,VIEW_TYPE:qn}=Q_(),{FootnoteView:Rc,FOOTNOTE_VIEW_TYPE:zi}=rT(),LH=iT(),FH=AC(),BH={textColumnWidth:1080,fixedFeedPosition:!1,feedPadding:50,smartQuotes:!0,smartDashes:!0,doubleQuoteStyle:"\u201C|\u201D",singleQuoteStyle:"\u2018|\u2019",stylesFolder:"snippets",enabledStyles:[],showWordCount:!1},zH=CC(),HH=require("fs"),NC=require("electron");module.exports=class extends MH{async onload(){await this.loadSettings(),this.registerView(qn,t=>new fn(t,this.settings,this));let e=this.app.vault.getConfig("spellcheck");this.registerView(zi,t=>new Rc(t,this.settings,e)),this.addSettingTab(new jw(this.app,this)),this.patchOpenFile(),this.registerEvent(this.app.workspace.on("file-open",this.handleFileOpen.bind(this))),this.registerEvent(this.app.workspace.on("active-leaf-change",this.handleActiveLeafChange.bind(this))),this.addRibbonIcon("feather","New manuscript",async()=>{await this.createNewManuscript()}),this.registerEvent(this.app.workspace.on("file-menu",(t,n)=>{let o=n instanceof IH?n.path:n.parent.path;t.addItem(s=>{s.setTitle("New manuscript").setIcon("feather").onClick(async()=>{await this.createNewManuscript(o)})})})),this.addCommand({id:"create-new-colophon-manuscript",name:"New manuscript",callback:()=>this.createNewManuscript()}),this.addCommand({id:"export-to-docx",name:"Export to DOCX",callback:()=>this.exportToDocx()}),this.addCommand({id:"open-colophon-footnotes",name:"Open Footnotes Sidebar",callback:async()=>{this.activateFootnoteView()}}),this.addCommand({id:"insert-colophon-footnote",name:"Insert Footnote",checkCallback:t=>{let n=this.app.workspace.getActiveViewOfType(fn);return n?(t||n.insertFootnote(),!0):!1}}),this.app.workspace.onLayoutReady(()=>{let t=(n,i)=>{let o=this.app.commands.commands[n];if(o){let s=o.checkCallback;o.checkCallback=a=>{let l=this.app.workspace.getLeavesOfType(qn),u=l.length>0?l[0].view:null;if(u){let c=this.app.workspace.getLeavesOfType(zi)[0]?.view,f=null,h=this.app.workspace.activeLeaf;if(c&&c instanceof Rc&&h.view===c){let d=c.getFocusedEditor();d&&(f=d)}if(!f&&u.adapter&&u.adapter.editor&&u.adapter.editor.isFocused&&(f=u.adapter.editor),f)return a||i(f),!0}return s?s(a):!1}}};t("editor:insert-footnote",n=>{let i=this.app.workspace.getActiveViewOfType(fn);i&&i.insertFootnote()}),t("editor:toggle-bold",n=>n.chain().focus().toggleBold().run()),t("editor:toggle-italics",n=>n.chain().focus().toggleItalic().run()),t("editor:toggle-strikethrough",n=>n.chain().focus().toggleStrike().run())})}async exportToDocx(e){if(e||(e=this.app.workspace.getActiveViewOfType(fn)),!e||!(e instanceof fn)){new cn("No active Colophon editor found.");return}new LH(this.app,t=>{this.performDocxExport(e,t)}).open()}async performDocxExport(e,t){if(!e||!e.adapter.editor){new cn("No active Colophon editor found.");return}let i=e.adapter.editor.state.doc,o=(e.file?.basename||"Untitled")+".docx";try{let s=new FH,a=e.adapter.styleManager.styles,l="Minion 3",c=getComputedStyle(e.contentEl).getPropertyValue("--font-text-override").trim();c&&(l=c.split(",")[0].replace(/['"]/g,"").trim());let{styles:f,styleIdMap:h}=s.convertStyles(a,t.scale,l),m=await new zH(e,f,h).generate(i,t),g=await NC.remote.dialog.showSaveDialog({title:"Export to DOCX",defaultPath:o,filters:[{name:"Word Document",extensions:["docx"]}]});if(g.canceled||!g.filePath){new cn("Export cancelled.");return}HH.writeFile(g.filePath,m,b=>{b?(console.error("Colophon: Failed to save DOCX file.",b),new cn("Failed to save file. See console for details.")):new cn("File saved successfully!")})}catch(s){console.error("Docx Export Error:",s),new cn(`Error exporting to DOCX: ${s.message}`)}}async activateFootnoteView(){let{workspace:e}=this.app,t=null,n=e.getLeavesOfType(zi);n.length>0?t=n[0]:(t=e.getRightLeaf(!1),await t.setViewState({type:zi,active:!0})),e.revealLeaf(t)}async loadSettings(){this.settings=Object.assign({},BH,await this.loadData())}async saveSettings(){await this.saveData(this.settings),this.app.workspace.getLeavesOfType(qn).forEach(e=>{e.view instanceof fn&&e.view.updateSettings(this.settings)}),this.app.workspace.getLeavesOfType(zi).forEach(e=>{e.view instanceof Rc&&e.view.updateSettings(this.settings)})}patchOpenFile(){let e=this,t=Hw.prototype.openFile;Hw.prototype.openFile=async function(n,i){let s=(this.app||e.app).metadataCache.getFileCache(n);if(s?.frontmatter&&s.frontmatter["colophon-plugin"]==="manuscript"&&(this.view.getViewType()!==qn&&await this.setViewState({type:qn,state:i,active:!0}),this.view instanceof fn)){await this.view.loadFile(n),i&&i.eState&&this.view.setEphemeralState(i.eState);return}return t.call(this,n,i)},this.register(()=>{Hw.prototype.openFile=t})}async handleActiveLeafChange(e){if(!e)return;this.updateFootnoteView(e.view);let t=e.view.file;t&&await this.ensureCorrectView(e,t)}async handleFileOpen(e){if(!e)return;let t=this.app.workspace.activeLeaf;t&&(this.updateFootnoteView(t.view),await this.ensureCorrectView(t,e))}updateFootnoteView(e){let t=this.app.workspace.getLeavesOfType(zi);if(t.length===0)return;let n=t[0].view;if(typeof n.setAdapter!="function"){console.error("Colophon: FootnoteView instance does not have setAdapter method."),console.log("FootnoteView keys:",Object.keys(n)),console.log("FootnoteView prototype keys:",Object.getOwnPropertyNames(Object.getPrototypeOf(n))),console.log("FootnoteView constructor:",n.constructor.name);return}e instanceof Rc||(e instanceof fn&&e.adapter?n.setAdapter(e.adapter):n.setAdapter(null))}async ensureCorrectView(e,t){let n=this.app.metadataCache.getFileCache(t),i=n?.frontmatter&&n.frontmatter["colophon-plugin"]==="manuscript",o=e.view.getViewType();if(i&&o==="markdown"){let s=e.view.getState();await e.setViewState({type:qn,state:s,active:!0})}else if(!i&&o===qn){let s=e.view.getState();await e.setViewState({type:"markdown",state:s,active:!0})}}async createNewManuscript(e){let t;if(e?t=typeof e=="string"?this.app.vault.getAbstractFileByPath(e):e:t=this.app.fileManager.getNewFileParent(this.app.workspace.getActiveFile()?.path||""),!t||!t.path){new cn("Invalid folder location");return}let n=`---
colophon-plugin: manuscript
---
`,i=await this.getUniqueFilePath(t);try{let o=await this.app.vault.create(i,n);await this.app.workspace.getLeaf(!1).openFile(o)}catch(o){new cn(`Failed to create manuscript: ${o.toString()}`)}}async getUniqueFilePath(e){let t=0;for(;;){let i=`Untitled${t===0?"":` ${t}`}.md`,o=PH(`${e.path}/${i}`);if(!await this.app.vault.exists(o))return o;t++}}onunload(){}};var jw=class extends DH{constructor(e,t){super(e,t),this.plugin=t}display(){let{containerEl:e}=this;e.empty(),new Er(e).setName("Text column width").setDesc("Adjust the width of the writing canvas (500px - 1240px).").addSlider(t=>t.setLimits(500,1240,10).setValue(this.plugin.settings.textColumnWidth).setDynamicTooltip().onChange(async n=>{this.plugin.settings.textColumnWidth=n,await this.plugin.saveSettings()})),new Er(e).setName("Fixed feed position").setDesc("Enforce a typewriter-style fixed active line position.").addToggle(t=>t.setValue(this.plugin.settings.fixedFeedPosition).onChange(async n=>{this.plugin.settings.fixedFeedPosition=n,await this.plugin.saveSettings(),this.display()})),this.plugin.settings.fixedFeedPosition&&new Er(e).setName("Feed padding").setDesc("Vertical position of the active line (0% = bottom, 75% = top quarter).").addSlider(t=>t.setLimits(0,75,1).setValue(this.plugin.settings.feedPadding).setDynamicTooltip().onChange(async n=>{this.plugin.settings.feedPadding=n,await this.plugin.saveSettings()})),new Er(e).setName("Smart quotes").setDesc("Automatically replace straight quotes with smart quotes.").addToggle(t=>t.setValue(this.plugin.settings.smartQuotes).onChange(async n=>{this.plugin.settings.smartQuotes=n,await this.plugin.saveSettings(),this.display()})),this.plugin.settings.smartQuotes&&(new Er(e).setName("Double quote style").setDesc("Choose the style for double quotes.").addDropdown(t=>t.addOption("\u201C|\u201D","\u201Cabc\u201D").addOption("\u201E|\u201C","\u201Eabc\u201C").addOption("\u201E|\u201D","\u201Eabc\u201D").addOption("\u201D|\u201D","\u201Dabc\u201D").addOption("\xAB|\xBB","\xABabc\xBB").addOption("\xBB|\xAB","\xBBabc\xAB").addOption('"|"','"abc"').setValue(this.plugin.settings.doubleQuoteStyle).onChange(async n=>{this.plugin.settings.doubleQuoteStyle=n,await this.plugin.saveSettings()})),new Er(e).setName("Single quote style").setDesc("Choose the style for single quotes.").addDropdown(t=>t.addOption("\u2018|\u2019","\u2018abc\u2019").addOption("\u201A|\u2018","\u201Aabc\u2018").addOption("\u201A|\u2019","\u201Aabc\u2019").addOption("\u2019|\u2019","\u2019abc\u2019").addOption("\u2039|\u203A","\u2039abc\u203A").addOption("\u203A|\u2039","\u203Aabc\u2039").addOption("'|'","'abc'").setValue(this.plugin.settings.singleQuoteStyle).onChange(async n=>{this.plugin.settings.singleQuoteStyle=n,await this.plugin.saveSettings()}))),new Er(e).setName("Smart dashes").setDesc("Replace -- with em-dash (\u2014) and --- with en-dash (\u2013).").addToggle(t=>t.setValue(this.plugin.settings.smartDashes).onChange(async n=>{this.plugin.settings.smartDashes=n,await this.plugin.saveSettings()})),new Er(e).setName("Styles folder").setDesc("Folder containing YAML style definitions (relative to vault config directory).").addText(t=>t.setPlaceholder("snippets").setValue(this.plugin.settings.stylesFolder).onChange(async n=>{this.plugin.settings.stylesFolder=n,await this.plugin.saveSettings(),this.display()})).addExtraButton(t=>t.setIcon("folder-open").setTooltip("Open folder").onClick(()=>{let n=this.plugin.app.vault.adapter.getBasePath()+"/"+this.plugin.app.vault.configDir+"/"+this.plugin.settings.stylesFolder;NC.shell.openPath(n)})),this.displayStyleFiles(e)}async displayStyleFiles(e){let{app:t,settings:n}=this.plugin,i=t.vault.adapter,o=t.vault.configDir,s=n.stylesFolder||"snippets",a=`${o}/${s}`;if(!await i.exists(a)){new Er(e).setName("Folder not found").setDesc(`The folder "${a}" does not exist.`).addButton(f=>f.setButtonText("Create folder").onClick(async()=>{await i.mkdir(a),this.display()}));return}let u=(await i.list(a)).files.filter(f=>f.endsWith(".yaml")||f.endsWith(".yml"));if(u.length===0){e.createDiv({text:"No YAML files found in this folder.",cls:"setting-item-description"});return}let c=e.createDiv();c.style.marginTop="20px",c.style.marginBottom="10px",c.createEl("strong",{text:"Enabled Styles"});for(let f of u){let h=f.split("/").pop(),d=n.enabledStyles.includes(h);new Er(e).setName(h).addToggle(m=>m.setValue(d).onChange(async g=>{g?n.enabledStyles.includes(h)||n.enabledStyles.push(h):n.enabledStyles=n.enabledStyles.filter(b=>b!==h),await this.plugin.saveSettings()}))}}};
/*! Bundled license information:

docx/dist/index.cjs:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
  (*! http://mths.be/fromcodepoint v0.1.0 by @mathias *)
*/
